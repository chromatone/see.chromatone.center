function fc(n,t){const e=Object.create(null),r=n.split(",");for(let i=0;i<r.length;i++)e[r[i]]=!0;return t?i=>!!e[i.toLowerCase()]:i=>!!e[i]}const Wp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hp=fc(Wp);function Mh(n){return!!n||n===""}function pc(n){if(At(n)){const t={};for(let e=0;e<n.length;e++){const r=n[e],i=de(r)?Xp(r):pc(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(de(n))return n;if(se(n))return n}}const Gp=/;(?![^(]*\))/g,Yp=/:(.+)/;function Xp(n){const t={};return n.split(Gp).forEach(e=>{if(e){const r=e.split(Yp);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function mc(n){let t="";if(de(n))t=n;else if(At(n))for(let e=0;e<n.length;e++){const r=mc(n[e]);r&&(t+=r+" ")}else if(se(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const Mx=n=>de(n)?n:n==null?"":At(n)||se(n)&&(n.toString===Sh||!Ct(n.toString))?JSON.stringify(n,Th,2):String(n),Th=(n,t)=>t&&t.__v_isRef?Th(n,t.value):ei(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[r,i])=>(e[`${r} =>`]=i,e),{})}:Ah(t)?{[`Set(${t.size})`]:[...t.values()]}:se(t)&&!At(t)&&!Ch(t)?String(t):t,Lt={},ti=[],on=()=>{},Zp=()=>!1,Jp=/^on[^a-z]/,Ao=n=>Jp.test(n),gc=n=>n.startsWith("onUpdate:"),Se=Object.assign,vc=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},Qp=Object.prototype.hasOwnProperty,Nt=(n,t)=>Qp.call(n,t),At=Array.isArray,ei=n=>xo(n)==="[object Map]",Ah=n=>xo(n)==="[object Set]",Ct=n=>typeof n=="function",de=n=>typeof n=="string",_c=n=>typeof n=="symbol",se=n=>n!==null&&typeof n=="object",xh=n=>se(n)&&Ct(n.then)&&Ct(n.catch),Sh=Object.prototype.toString,xo=n=>Sh.call(n),Kp=n=>xo(n).slice(8,-1),Ch=n=>xo(n)==="[object Object]",yc=n=>de(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,qs=fc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),So=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},tm=/-(\w)/g,ui=So(n=>n.replace(tm,(t,e)=>e?e.toUpperCase():"")),em=/\B([A-Z])/g,vi=So(n=>n.replace(em,"-$1").toLowerCase()),Eh=So(n=>n.charAt(0).toUpperCase()+n.slice(1)),ca=So(n=>n?`on${Eh(n)}`:""),zi=(n,t)=>!Object.is(n,t),ua=(n,t)=>{for(let e=0;e<n.length;e++)n[e](t)},Gs=(n,t,e)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value:e})},nm=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let Fu;const rm=()=>Fu||(Fu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let $e;class im{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&$e&&(this.parent=$e,this.index=($e.scopes||($e.scopes=[])).push(this)-1)}run(t){if(this.active){const e=$e;try{return $e=this,t()}finally{$e=e}}}on(){$e=this}off(){$e=this.parent}stop(t){if(this.active){let e,r;for(e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function sm(n,t=$e){t&&t.active&&t.effects.push(n)}function om(){return $e}function am(n){$e&&$e.cleanups.push(n)}const bc=n=>{const t=new Set(n);return t.w=0,t.n=0,t},Ih=n=>(n.w&tr)>0,kh=n=>(n.n&tr)>0,cm=({deps:n})=>{if(n.length)for(let t=0;t<n.length;t++)n[t].w|=tr},um=n=>{const{deps:t}=n;if(t.length){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Ih(i)&&!kh(i)?i.delete(n):t[e++]=i,i.w&=~tr,i.n&=~tr}t.length=e}},Pa=new WeakMap;let Ri=0,tr=1;const Na=30;let tn;const vr=Symbol(""),Ra=Symbol("");class wc{constructor(t,e=null,r){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,sm(this,r)}run(){if(!this.active)return this.fn();let t=tn,e=Zn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=tn,tn=this,Zn=!0,tr=1<<++Ri,Ri<=Na?cm(this):$u(this),this.fn()}finally{Ri<=Na&&um(this),tr=1<<--Ri,tn=this.parent,Zn=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){tn===this?this.deferStop=!0:this.active&&($u(this),this.onStop&&this.onStop(),this.active=!1)}}function $u(n){const{deps:t}=n;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(n);t.length=0}}let Zn=!0;const Oh=[];function _i(){Oh.push(Zn),Zn=!1}function yi(){const n=Oh.pop();Zn=n===void 0?!0:n}function Le(n,t,e){if(Zn&&tn){let r=Pa.get(n);r||Pa.set(n,r=new Map);let i=r.get(e);i||r.set(e,i=bc()),Ph(i)}}function Ph(n,t){let e=!1;Ri<=Na?kh(n)||(n.n|=tr,e=!Ih(n)):e=!n.has(tn),e&&(n.add(tn),tn.deps.push(n))}function Pn(n,t,e,r,i,s){const o=Pa.get(n);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(e==="length"&&At(n))o.forEach((c,u)=>{(u==="length"||u>=r)&&a.push(c)});else switch(e!==void 0&&a.push(o.get(e)),t){case"add":At(n)?yc(e)&&a.push(o.get("length")):(a.push(o.get(vr)),ei(n)&&a.push(o.get(Ra)));break;case"delete":At(n)||(a.push(o.get(vr)),ei(n)&&a.push(o.get(Ra)));break;case"set":ei(n)&&a.push(o.get(vr));break}if(a.length===1)a[0]&&Da(a[0]);else{const c=[];for(const u of a)u&&c.push(...u);Da(bc(c))}}function Da(n,t){const e=At(n)?n:[...n];for(const r of e)r.computed&&Vu(r);for(const r of e)r.computed||Vu(r)}function Vu(n,t){(n!==tn||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const lm=fc("__proto__,__v_isRef,__isVue"),Nh=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(_c)),hm=Mc(),dm=Mc(!1,!0),fm=Mc(!0),ju=pm();function pm(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...e){const r=Vt(this);for(let s=0,o=this.length;s<o;s++)Le(r,"get",s+"");const i=r[t](...e);return i===-1||i===!1?r[t](...e.map(Vt)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...e){_i();const r=Vt(this)[t].apply(this,e);return yi(),r}}),n}function Mc(n=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(n?t?km:$h:t?Fh:Bh).get(r))return r;const o=At(r);if(!n&&o&&Nt(ju,i))return Reflect.get(ju,i,s);const a=Reflect.get(r,i,s);return(_c(i)?Nh.has(i):lm(i))||(n||Le(r,"get",i),t)?a:me(a)?o&&yc(i)?a:a.value:se(a)?n?Vh(a):De(a):a}}const mm=Rh(),gm=Rh(!0);function Rh(n=!1){return function(e,r,i,s){let o=e[r];if(Wi(o)&&me(o)&&!me(i))return!1;if(!n&&!Wi(i)&&(Ba(i)||(i=Vt(i),o=Vt(o)),!At(e)&&me(o)&&!me(i)))return o.value=i,!0;const a=At(e)&&yc(r)?Number(r)<e.length:Nt(e,r),c=Reflect.set(e,r,i,s);return e===Vt(s)&&(a?zi(i,o)&&Pn(e,"set",r,i):Pn(e,"add",r,i)),c}}function vm(n,t){const e=Nt(n,t);n[t];const r=Reflect.deleteProperty(n,t);return r&&e&&Pn(n,"delete",t,void 0),r}function _m(n,t){const e=Reflect.has(n,t);return(!_c(t)||!Nh.has(t))&&Le(n,"has",t),e}function ym(n){return Le(n,"iterate",At(n)?"length":vr),Reflect.ownKeys(n)}const Dh={get:hm,set:mm,deleteProperty:vm,has:_m,ownKeys:ym},bm={get:fm,set(n,t){return!0},deleteProperty(n,t){return!0}},wm=Se({},Dh,{get:dm,set:gm}),Tc=n=>n,Co=n=>Reflect.getPrototypeOf(n);function Cs(n,t,e=!1,r=!1){n=n.__v_raw;const i=Vt(n),s=Vt(t);e||(t!==s&&Le(i,"get",t),Le(i,"get",s));const{has:o}=Co(i),a=r?Tc:e?Cc:Hi;if(o.call(i,t))return a(n.get(t));if(o.call(i,s))return a(n.get(s));n!==i&&n.get(t)}function Es(n,t=!1){const e=this.__v_raw,r=Vt(e),i=Vt(n);return t||(n!==i&&Le(r,"has",n),Le(r,"has",i)),n===i?e.has(n):e.has(n)||e.has(i)}function Is(n,t=!1){return n=n.__v_raw,!t&&Le(Vt(n),"iterate",vr),Reflect.get(n,"size",n)}function Uu(n){n=Vt(n);const t=Vt(this);return Co(t).has.call(t,n)||(t.add(n),Pn(t,"add",n,n)),this}function qu(n,t){t=Vt(t);const e=Vt(this),{has:r,get:i}=Co(e);let s=r.call(e,n);s||(n=Vt(n),s=r.call(e,n));const o=i.call(e,n);return e.set(n,t),s?zi(t,o)&&Pn(e,"set",n,t):Pn(e,"add",n,t),this}function Lu(n){const t=Vt(this),{has:e,get:r}=Co(t);let i=e.call(t,n);i||(n=Vt(n),i=e.call(t,n)),r&&r.call(t,n);const s=t.delete(n);return i&&Pn(t,"delete",n,void 0),s}function zu(){const n=Vt(this),t=n.size!==0,e=n.clear();return t&&Pn(n,"clear",void 0,void 0),e}function ks(n,t){return function(r,i){const s=this,o=s.__v_raw,a=Vt(o),c=t?Tc:n?Cc:Hi;return!n&&Le(a,"iterate",vr),o.forEach((u,l)=>r.call(i,c(u),c(l),s))}}function Os(n,t,e){return function(...r){const i=this.__v_raw,s=Vt(i),o=ei(s),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,u=i[n](...r),l=e?Tc:t?Cc:Hi;return!t&&Le(s,"iterate",c?Ra:vr),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[l(h[0]),l(h[1])]:l(h),done:d}},[Symbol.iterator](){return this}}}}function Ln(n){return function(...t){return n==="delete"?!1:this}}function Mm(){const n={get(s){return Cs(this,s)},get size(){return Is(this)},has:Es,add:Uu,set:qu,delete:Lu,clear:zu,forEach:ks(!1,!1)},t={get(s){return Cs(this,s,!1,!0)},get size(){return Is(this)},has:Es,add:Uu,set:qu,delete:Lu,clear:zu,forEach:ks(!1,!0)},e={get(s){return Cs(this,s,!0)},get size(){return Is(this,!0)},has(s){return Es.call(this,s,!0)},add:Ln("add"),set:Ln("set"),delete:Ln("delete"),clear:Ln("clear"),forEach:ks(!0,!1)},r={get(s){return Cs(this,s,!0,!0)},get size(){return Is(this,!0)},has(s){return Es.call(this,s,!0)},add:Ln("add"),set:Ln("set"),delete:Ln("delete"),clear:Ln("clear"),forEach:ks(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Os(s,!1,!1),e[s]=Os(s,!0,!1),t[s]=Os(s,!1,!0),r[s]=Os(s,!0,!0)}),[n,e,t,r]}const[Tm,Am,xm,Sm]=Mm();function Ac(n,t){const e=t?n?Sm:xm:n?Am:Tm;return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(Nt(e,i)&&i in r?e:r,i,s)}const Cm={get:Ac(!1,!1)},Em={get:Ac(!1,!0)},Im={get:Ac(!0,!1)},Bh=new WeakMap,Fh=new WeakMap,$h=new WeakMap,km=new WeakMap;function Om(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pm(n){return n.__v_skip||!Object.isExtensible(n)?0:Om(Kp(n))}function De(n){return Wi(n)?n:Sc(n,!1,Dh,Cm,Bh)}function xc(n){return Sc(n,!1,wm,Em,Fh)}function Vh(n){return Sc(n,!0,bm,Im,$h)}function Sc(n,t,e,r,i){if(!se(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const o=Pm(n);if(o===0)return n;const a=new Proxy(n,o===2?r:e);return i.set(n,a),a}function ni(n){return Wi(n)?ni(n.__v_raw):!!(n&&n.__v_isReactive)}function Wi(n){return!!(n&&n.__v_isReadonly)}function Ba(n){return!!(n&&n.__v_isShallow)}function jh(n){return ni(n)||Wi(n)}function Vt(n){const t=n&&n.__v_raw;return t?Vt(t):n}function Uh(n){return Gs(n,"__v_skip",!0),n}const Hi=n=>se(n)?De(n):n,Cc=n=>se(n)?Vh(n):n;function qh(n){Zn&&tn&&(n=Vt(n),Ph(n.dep||(n.dep=bc())))}function Lh(n,t){n=Vt(n),n.dep&&Da(n.dep)}function me(n){return!!(n&&n.__v_isRef===!0)}function le(n){return zh(n,!1)}function dr(n){return zh(n,!0)}function zh(n,t){return me(n)?n:new Nm(n,t)}class Nm{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Vt(t),this._value=e?t:Hi(t)}get value(){return qh(this),this._value}set value(t){t=this.__v_isShallow?t:Vt(t),zi(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Hi(t),Lh(this))}}function Ec(n){return me(n)?n.value:n}const Rm={get:(n,t,e)=>Ec(Reflect.get(n,t,e)),set:(n,t,e,r)=>{const i=n[t];return me(i)&&!me(e)?(i.value=e,!0):Reflect.set(n,t,e,r)}};function Wh(n){return ni(n)?n:new Proxy(n,Rm)}class Dm{constructor(t,e,r,i){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new wc(t,()=>{this._dirty||(this._dirty=!0,Lh(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=Vt(this);return qh(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Bm(n,t,e=!1){let r,i;const s=Ct(n);return s?(r=n,i=on):(r=n.get,i=n.set),new Dm(r,i,s||!i,e)}function Jn(n,t,e,r){let i;try{i=r?n(...r):n()}catch(s){Eo(s,t,e)}return i}function an(n,t,e,r){if(Ct(n)){const s=Jn(n,t,e,r);return s&&xh(s)&&s.catch(o=>{Eo(o,t,e)}),s}const i=[];for(let s=0;s<n.length;s++)i.push(an(n[s],t,e,r));return i}function Eo(n,t,e,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=e;for(;s;){const u=s.ec;if(u){for(let l=0;l<u.length;l++)if(u[l](n,o,a)===!1)return}s=s.parent}const c=t.appContext.config.errorHandler;if(c){Jn(c,null,10,[n,o,a]);return}}Fm(n,e,i,r)}function Fm(n,t,e,r=!0){console.error(n)}let Ys=!1,Fa=!1;const Ve=[];let In=0;const Bi=[];let Di=null,Wr=0;const Fi=[];let Hn=null,Hr=0;const Hh=Promise.resolve();let Ic=null,$a=null;function kc(n){const t=Ic||Hh;return n?t.then(this?n.bind(this):n):t}function $m(n){let t=In+1,e=Ve.length;for(;t<e;){const r=t+e>>>1;Gi(Ve[r])<n?t=r+1:e=r}return t}function Gh(n){(!Ve.length||!Ve.includes(n,Ys&&n.allowRecurse?In+1:In))&&n!==$a&&(n.id==null?Ve.push(n):Ve.splice($m(n.id),0,n),Yh())}function Yh(){!Ys&&!Fa&&(Fa=!0,Ic=Hh.then(Jh))}function Vm(n){const t=Ve.indexOf(n);t>In&&Ve.splice(t,1)}function Xh(n,t,e,r){At(n)?e.push(...n):(!t||!t.includes(n,n.allowRecurse?r+1:r))&&e.push(n),Yh()}function jm(n){Xh(n,Di,Bi,Wr)}function Um(n){Xh(n,Hn,Fi,Hr)}function Io(n,t=null){if(Bi.length){for($a=t,Di=[...new Set(Bi)],Bi.length=0,Wr=0;Wr<Di.length;Wr++)Di[Wr]();Di=null,Wr=0,$a=null,Io(n,t)}}function Zh(n){if(Io(),Fi.length){const t=[...new Set(Fi)];if(Fi.length=0,Hn){Hn.push(...t);return}for(Hn=t,Hn.sort((e,r)=>Gi(e)-Gi(r)),Hr=0;Hr<Hn.length;Hr++)Hn[Hr]();Hn=null,Hr=0}}const Gi=n=>n.id==null?1/0:n.id;function Jh(n){Fa=!1,Ys=!0,Io(n),Ve.sort((e,r)=>Gi(e)-Gi(r));const t=on;try{for(In=0;In<Ve.length;In++){const e=Ve[In];e&&e.active!==!1&&Jn(e,null,14)}}finally{In=0,Ve.length=0,Zh(),Ys=!1,Ic=null,(Ve.length||Bi.length||Fi.length)&&Jh(n)}}function qm(n,t,...e){if(n.isUnmounted)return;const r=n.vnode.props||Lt;let i=e;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in r){const l=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[l]||Lt;d&&(i=e.map(f=>f.trim())),h&&(i=e.map(nm))}let a,c=r[a=ca(t)]||r[a=ca(ui(t))];!c&&s&&(c=r[a=ca(vi(t))]),c&&an(c,n,6,i);const u=r[a+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,an(u,n,6,i)}}function Qh(n,t,e=!1){const r=t.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let o={},a=!1;if(!Ct(n)){const c=u=>{const l=Qh(u,t,!0);l&&(a=!0,Se(o,l))};!e&&t.mixins.length&&t.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!s&&!a?(r.set(n,null),null):(At(s)?s.forEach(c=>o[c]=null):Se(o,s),r.set(n,o),o)}function ko(n,t){return!n||!Ao(t)?!1:(t=t.slice(2).replace(/Once$/,""),Nt(n,t[0].toLowerCase()+t.slice(1))||Nt(n,vi(t))||Nt(n,t))}let gn=null,Oo=null;function Xs(n){const t=gn;return gn=n,Oo=n&&n.type.__scopeId||null,t}function Tx(n){Oo=n}function Ax(){Oo=null}function Lm(n,t=gn,e){if(!t||n._n)return n;const r=(...i)=>{r._d&&Ku(-1);const s=Xs(t),o=n(...i);return Xs(s),r._d&&Ku(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function la(n){const{type:t,vnode:e,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:c,emit:u,render:l,renderCache:h,data:d,setupState:f,ctx:m,inheritAttrs:y}=n;let v,A;const O=Xs(n);try{if(e.shapeFlag&4){const E=i||r;v=mn(l.call(E,E,h,s,f,d,m)),A=c}else{const E=t;v=mn(E.length>1?E(s,{attrs:c,slots:a,emit:u}):E(s,null)),A=t.props?c:zm(c)}}catch(E){$i.length=0,Eo(E,n,1),v=je(Tr)}let D=v;if(A&&y!==!1){const E=Object.keys(A),{shapeFlag:S}=D;E.length&&S&7&&(o&&E.some(gc)&&(A=Wm(A,o)),D=li(D,A))}return e.dirs&&(D=li(D),D.dirs=D.dirs?D.dirs.concat(e.dirs):e.dirs),e.transition&&(D.transition=e.transition),v=D,Xs(O),v}const zm=n=>{let t;for(const e in n)(e==="class"||e==="style"||Ao(e))&&((t||(t={}))[e]=n[e]);return t},Wm=(n,t)=>{const e={};for(const r in n)(!gc(r)||!(r.slice(9)in t))&&(e[r]=n[r]);return e};function Hm(n,t,e){const{props:r,children:i,component:s}=n,{props:o,children:a,patchFlag:c}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return r?Wu(r,o,u):!!o;if(c&8){const l=t.dynamicProps;for(let h=0;h<l.length;h++){const d=l[h];if(o[d]!==r[d]&&!ko(u,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Wu(r,o,u):!0:!!o;return!1}function Wu(n,t,e){const r=Object.keys(t);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==n[s]&&!ko(e,s))return!0}return!1}function Gm({vnode:n,parent:t},e){for(;t&&t.subTree===n;)(n=t.vnode).el=e,t=t.parent}const Ym=n=>n.__isSuspense;function Xm(n,t){t&&t.pendingBranch?At(n)?t.effects.push(...n):t.effects.push(n):Um(n)}function Zm(n,t){if(pe){let e=pe.provides;const r=pe.parent&&pe.parent.provides;r===e&&(e=pe.provides=Object.create(r)),e[n]=t}}function ha(n,t,e=!1){const r=pe||gn;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&n in i)return i[n];if(arguments.length>1)return e&&Ct(t)?t.call(r.proxy):t}}const Hu={};function _n(n,t,e){return Kh(n,t,e)}function Kh(n,t,{immediate:e,deep:r,flush:i,onTrack:s,onTrigger:o}=Lt){const a=pe;let c,u=!1,l=!1;if(me(n)?(c=()=>n.value,u=Ba(n)):ni(n)?(c=()=>n,r=!0):At(n)?(l=!0,u=n.some(A=>ni(A)||Ba(A)),c=()=>n.map(A=>{if(me(A))return A.value;if(ni(A))return Yr(A);if(Ct(A))return Jn(A,a,2)})):Ct(n)?t?c=()=>Jn(n,a,2):c=()=>{if(!(a&&a.isUnmounted))return h&&h(),an(n,a,3,[d])}:c=on,t&&r){const A=c;c=()=>Yr(A())}let h,d=A=>{h=v.onStop=()=>{Jn(A,a,4)}};if(Xi)return d=on,t?e&&an(t,a,3,[c(),l?[]:void 0,d]):c(),on;let f=l?[]:Hu;const m=()=>{if(!!v.active)if(t){const A=v.run();(r||u||(l?A.some((O,D)=>zi(O,f[D])):zi(A,f)))&&(h&&h(),an(t,a,3,[A,f===Hu?void 0:f,d]),f=A)}else v.run()};m.allowRecurse=!!t;let y;i==="sync"?y=m:i==="post"?y=()=>Pe(m,a&&a.suspense):y=()=>jm(m);const v=new wc(c,y);return t?e?m():f=v.run():i==="post"?Pe(v.run.bind(v),a&&a.suspense):v.run(),()=>{v.stop(),a&&a.scope&&vc(a.scope.effects,v)}}function Jm(n,t,e){const r=this.proxy,i=de(n)?n.includes(".")?td(r,n):()=>r[n]:n.bind(r,r);let s;Ct(t)?s=t:(s=t.handler,e=t);const o=pe;hi(this);const a=Kh(i,s.bind(r),e);return o?hi(o):_r(),a}function td(n,t){const e=t.split(".");return()=>{let r=n;for(let i=0;i<e.length&&r;i++)r=r[e[i]];return r}}function Yr(n,t){if(!se(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),me(n))Yr(n.value,t);else if(At(n))for(let e=0;e<n.length;e++)Yr(n[e],t);else if(Ah(n)||ei(n))n.forEach(e=>{Yr(e,t)});else if(Ch(n))for(const e in n)Yr(n[e],t);return n}function xx(n){return Ct(n)?{setup:n,name:n.name}:n}const Ls=n=>!!n.type.__asyncLoader,ed=n=>n.type.__isKeepAlive;function Qm(n,t){nd(n,"a",t)}function Km(n,t){nd(n,"da",t)}function nd(n,t,e=pe){const r=n.__wdc||(n.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Po(t,r,e),e){let i=e.parent;for(;i&&i.parent;)ed(i.parent.vnode)&&tg(r,t,e,i),i=i.parent}}function tg(n,t,e,r){const i=Po(t,n,r,!0);id(()=>{vc(r[t],i)},e)}function Po(n,t,e=pe,r=!1){if(e){const i=e[n]||(e[n]=[]),s=t.__weh||(t.__weh=(...o)=>{if(e.isUnmounted)return;_i(),hi(e);const a=an(t,e,n,o);return _r(),yi(),a});return r?i.unshift(s):i.push(s),s}}const Dn=n=>(t,e=pe)=>(!Xi||n==="sp")&&Po(n,t,e),eg=Dn("bm"),rd=Dn("m"),ng=Dn("bu"),rg=Dn("u"),ig=Dn("bum"),id=Dn("um"),sg=Dn("sp"),og=Dn("rtg"),ag=Dn("rtc");function cg(n,t=pe){Po("ec",n,t)}function ur(n,t,e,r){const i=n.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let c=a.dir[r];c&&(_i(),an(c,e,8,[n.el,a,n,t]),yi())}}const ug=Symbol();function Sx(n,t,e,r){let i;const s=e&&e[r];if(At(n)||de(n)){i=new Array(n.length);for(let o=0,a=n.length;o<a;o++)i[o]=t(n[o],o,void 0,s&&s[o])}else if(typeof n=="number"){i=new Array(n);for(let o=0;o<n;o++)i[o]=t(o+1,o,void 0,s&&s[o])}else if(se(n))if(n[Symbol.iterator])i=Array.from(n,(o,a)=>t(o,a,void 0,s&&s[a]));else{const o=Object.keys(n);i=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const u=o[a];i[a]=t(n[u],u,a,s&&s[a])}}else i=[];return e&&(e[r]=i),i}const Va=n=>n?vd(n)?Rc(n)||n.proxy:Va(n.parent):null,Zs=Se(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Va(n.parent),$root:n=>Va(n.root),$emit:n=>n.emit,$options:n=>od(n),$forceUpdate:n=>n.f||(n.f=()=>Gh(n.update)),$nextTick:n=>n.n||(n.n=kc.bind(n.proxy)),$watch:n=>Jm.bind(n)}),lg={get({_:n},t){const{ctx:e,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:c}=n;let u;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return r[t];case 2:return i[t];case 4:return e[t];case 3:return s[t]}else{if(r!==Lt&&Nt(r,t))return o[t]=1,r[t];if(i!==Lt&&Nt(i,t))return o[t]=2,i[t];if((u=n.propsOptions[0])&&Nt(u,t))return o[t]=3,s[t];if(e!==Lt&&Nt(e,t))return o[t]=4,e[t];ja&&(o[t]=0)}}const l=Zs[t];let h,d;if(l)return t==="$attrs"&&Le(n,"get",t),l(n);if((h=a.__cssModules)&&(h=h[t]))return h;if(e!==Lt&&Nt(e,t))return o[t]=4,e[t];if(d=c.config.globalProperties,Nt(d,t))return d[t]},set({_:n},t,e){const{data:r,setupState:i,ctx:s}=n;return i!==Lt&&Nt(i,t)?(i[t]=e,!0):r!==Lt&&Nt(r,t)?(r[t]=e,!0):Nt(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(s[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!e[o]||n!==Lt&&Nt(n,o)||t!==Lt&&Nt(t,o)||(a=s[0])&&Nt(a,o)||Nt(r,o)||Nt(Zs,o)||Nt(i.config.globalProperties,o)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:Nt(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};let ja=!0;function hg(n){const t=od(n),e=n.proxy,r=n.ctx;ja=!1,t.beforeCreate&&Gu(t.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:a,provide:c,inject:u,created:l,beforeMount:h,mounted:d,beforeUpdate:f,updated:m,activated:y,deactivated:v,beforeDestroy:A,beforeUnmount:O,destroyed:D,unmounted:E,render:S,renderTracked:N,renderTriggered:C,errorCaptured:U,serverPrefetch:z,expose:W,inheritAttrs:$,components:K,directives:J,filters:nt}=t;if(u&&dg(u,r,null,n.appContext.config.unwrapInjectedRef),o)for(const I in o){const T=o[I];Ct(T)&&(r[I]=T.bind(e))}if(i){const I=i.call(e,e);se(I)&&(n.data=De(I))}if(ja=!0,s)for(const I in s){const T=s[I],P=Ct(T)?T.bind(e,e):Ct(T.get)?T.get.bind(e,e):on,F=!Ct(T)&&Ct(T.set)?T.set.bind(e):on,X=zt({get:P,set:F});Object.defineProperty(r,I,{enumerable:!0,configurable:!0,get:()=>X.value,set:et=>X.value=et})}if(a)for(const I in a)sd(a[I],r,e,I);if(c){const I=Ct(c)?c.call(e):c;Reflect.ownKeys(I).forEach(T=>{Zm(T,I[T])})}l&&Gu(l,n,"c");function g(I,T){At(T)?T.forEach(P=>I(P.bind(e))):T&&I(T.bind(e))}if(g(eg,h),g(rd,d),g(ng,f),g(rg,m),g(Qm,y),g(Km,v),g(cg,U),g(ag,N),g(og,C),g(ig,O),g(id,E),g(sg,z),At(W))if(W.length){const I=n.exposed||(n.exposed={});W.forEach(T=>{Object.defineProperty(I,T,{get:()=>e[T],set:P=>e[T]=P})})}else n.exposed||(n.exposed={});S&&n.render===on&&(n.render=S),$!=null&&(n.inheritAttrs=$),K&&(n.components=K),J&&(n.directives=J)}function dg(n,t,e=on,r=!1){At(n)&&(n=Ua(n));for(const i in n){const s=n[i];let o;se(s)?"default"in s?o=ha(s.from||i,s.default,!0):o=ha(s.from||i):o=ha(s),me(o)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[i]=o}}function Gu(n,t,e){an(At(n)?n.map(r=>r.bind(t.proxy)):n.bind(t.proxy),t,e)}function sd(n,t,e,r){const i=r.includes(".")?td(e,r):()=>e[r];if(de(n)){const s=t[n];Ct(s)&&_n(i,s)}else if(Ct(n))_n(i,n.bind(e));else if(se(n))if(At(n))n.forEach(s=>sd(s,t,e,r));else{const s=Ct(n.handler)?n.handler.bind(e):t[n.handler];Ct(s)&&_n(i,s,n)}}function od(n){const t=n.type,{mixins:e,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(t);let c;return a?c=a:!i.length&&!e&&!r?c=t:(c={},i.length&&i.forEach(u=>Js(c,u,o,!0)),Js(c,t,o)),s.set(t,c),c}function Js(n,t,e,r=!1){const{mixins:i,extends:s}=t;s&&Js(n,s,e,!0),i&&i.forEach(o=>Js(n,o,e,!0));for(const o in t)if(!(r&&o==="expose")){const a=fg[o]||e&&e[o];n[o]=a?a(n[o],t[o]):t[o]}return n}const fg={data:Yu,props:hr,emits:hr,methods:hr,computed:hr,beforeCreate:Te,created:Te,beforeMount:Te,mounted:Te,beforeUpdate:Te,updated:Te,beforeDestroy:Te,beforeUnmount:Te,destroyed:Te,unmounted:Te,activated:Te,deactivated:Te,errorCaptured:Te,serverPrefetch:Te,components:hr,directives:hr,watch:mg,provide:Yu,inject:pg};function Yu(n,t){return t?n?function(){return Se(Ct(n)?n.call(this,this):n,Ct(t)?t.call(this,this):t)}:t:n}function pg(n,t){return hr(Ua(n),Ua(t))}function Ua(n){if(At(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function Te(n,t){return n?[...new Set([].concat(n,t))]:t}function hr(n,t){return n?Se(Se(Object.create(null),n),t):t}function mg(n,t){if(!n)return t;if(!t)return n;const e=Se(Object.create(null),n);for(const r in t)e[r]=Te(n[r],t[r]);return e}function gg(n,t,e,r=!1){const i={},s={};Gs(s,No,1),n.propsDefaults=Object.create(null),ad(n,t,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);e?n.props=r?i:xc(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function vg(n,t,e,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,a=Vt(i),[c]=n.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const l=n.vnode.dynamicProps;for(let h=0;h<l.length;h++){let d=l[h];if(ko(n.emitsOptions,d))continue;const f=t[d];if(c)if(Nt(s,d))f!==s[d]&&(s[d]=f,u=!0);else{const m=ui(d);i[m]=qa(c,a,m,f,n,!1)}else f!==s[d]&&(s[d]=f,u=!0)}}}else{ad(n,t,i,s)&&(u=!0);let l;for(const h in a)(!t||!Nt(t,h)&&((l=vi(h))===h||!Nt(t,l)))&&(c?e&&(e[h]!==void 0||e[l]!==void 0)&&(i[h]=qa(c,a,h,void 0,n,!0)):delete i[h]);if(s!==a)for(const h in s)(!t||!Nt(t,h)&&!0)&&(delete s[h],u=!0)}u&&Pn(n,"set","$attrs")}function ad(n,t,e,r){const[i,s]=n.propsOptions;let o=!1,a;if(t)for(let c in t){if(qs(c))continue;const u=t[c];let l;i&&Nt(i,l=ui(c))?!s||!s.includes(l)?e[l]=u:(a||(a={}))[l]=u:ko(n.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(s){const c=Vt(e),u=a||Lt;for(let l=0;l<s.length;l++){const h=s[l];e[h]=qa(i,c,h,u[h],n,!Nt(u,h))}}return o}function qa(n,t,e,r,i,s){const o=n[e];if(o!=null){const a=Nt(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&Ct(c)){const{propsDefaults:u}=i;e in u?r=u[e]:(hi(i),r=u[e]=c.call(null,t),_r())}else r=c}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===vi(e))&&(r=!0))}return r}function cd(n,t,e=!1){const r=t.propsCache,i=r.get(n);if(i)return i;const s=n.props,o={},a=[];let c=!1;if(!Ct(n)){const l=h=>{c=!0;const[d,f]=cd(h,t,!0);Se(o,d),f&&a.push(...f)};!e&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}if(!s&&!c)return r.set(n,ti),ti;if(At(s))for(let l=0;l<s.length;l++){const h=ui(s[l]);Xu(h)&&(o[h]=Lt)}else if(s)for(const l in s){const h=ui(l);if(Xu(h)){const d=s[l],f=o[h]=At(d)||Ct(d)?{type:d}:d;if(f){const m=Qu(Boolean,f.type),y=Qu(String,f.type);f[0]=m>-1,f[1]=y<0||m<y,(m>-1||Nt(f,"default"))&&a.push(h)}}}const u=[o,a];return r.set(n,u),u}function Xu(n){return n[0]!=="$"}function Zu(n){const t=n&&n.toString().match(/^\s*function (\w+)/);return t?t[1]:n===null?"null":""}function Ju(n,t){return Zu(n)===Zu(t)}function Qu(n,t){return At(t)?t.findIndex(e=>Ju(e,n)):Ct(t)&&Ju(t,n)?0:-1}const ud=n=>n[0]==="_"||n==="$stable",Oc=n=>At(n)?n.map(mn):[mn(n)],_g=(n,t,e)=>{if(t._n)return t;const r=Lm((...i)=>Oc(t(...i)),e);return r._c=!1,r},ld=(n,t,e)=>{const r=n._ctx;for(const i in n){if(ud(i))continue;const s=n[i];if(Ct(s))t[i]=_g(i,s,r);else if(s!=null){const o=Oc(s);t[i]=()=>o}}},hd=(n,t)=>{const e=Oc(t);n.slots.default=()=>e},yg=(n,t)=>{if(n.vnode.shapeFlag&32){const e=t._;e?(n.slots=Vt(t),Gs(t,"_",e)):ld(t,n.slots={})}else n.slots={},t&&hd(n,t);Gs(n.slots,No,1)},bg=(n,t,e)=>{const{vnode:r,slots:i}=n;let s=!0,o=Lt;if(r.shapeFlag&32){const a=t._;a?e&&a===1?s=!1:(Se(i,t),!e&&a===1&&delete i._):(s=!t.$stable,ld(t,i)),o=t}else t&&(hd(n,t),o={default:1});if(s)for(const a in i)!ud(a)&&!(a in o)&&delete i[a]};function dd(){return{app:null,config:{isNativeTag:Zp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wg=0;function Mg(n,t){return function(r,i=null){Ct(r)||(r=Object.assign({},r)),i!=null&&!se(i)&&(i=null);const s=dd(),o=new Set;let a=!1;const c=s.app={_uid:wg++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Lg,get config(){return s.config},set config(u){},use(u,...l){return o.has(u)||(u&&Ct(u.install)?(o.add(u),u.install(c,...l)):Ct(u)&&(o.add(u),u(c,...l))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,l){return l?(s.components[u]=l,c):s.components[u]},directive(u,l){return l?(s.directives[u]=l,c):s.directives[u]},mount(u,l,h){if(!a){const d=je(r,i);return d.appContext=s,l&&t?t(d,u):n(d,u,h),a=!0,c._container=u,u.__vue_app__=c,Rc(d.component)||d.component.proxy}},unmount(){a&&(n(null,c._container),delete c._container.__vue_app__)},provide(u,l){return s.provides[u]=l,c}};return c}}function La(n,t,e,r,i=!1){if(At(n)){n.forEach((d,f)=>La(d,t&&(At(t)?t[f]:t),e,r,i));return}if(Ls(r)&&!i)return;const s=r.shapeFlag&4?Rc(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:c}=n,u=t&&t.r,l=a.refs===Lt?a.refs={}:a.refs,h=a.setupState;if(u!=null&&u!==c&&(de(u)?(l[u]=null,Nt(h,u)&&(h[u]=null)):me(u)&&(u.value=null)),Ct(c))Jn(c,a,12,[o,l]);else{const d=de(c),f=me(c);if(d||f){const m=()=>{if(n.f){const y=d?l[c]:c.value;i?At(y)&&vc(y,s):At(y)?y.includes(s)||y.push(s):d?(l[c]=[s],Nt(h,c)&&(h[c]=l[c])):(c.value=[s],n.k&&(l[n.k]=c.value))}else d?(l[c]=o,Nt(h,c)&&(h[c]=o)):f&&(c.value=o,n.k&&(l[n.k]=o))};o?(m.id=-1,Pe(m,e)):m()}}}const Pe=Xm;function Tg(n){return Ag(n)}function Ag(n,t){const e=rm();e.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:c,setText:u,setElementText:l,parentNode:h,nextSibling:d,setScopeId:f=on,cloneNode:m,insertStaticContent:y}=n,v=(w,b,k,j=null,V=null,q=null,G=!1,Y=null,Q=!!b.dynamicChildren)=>{if(w===b)return;w&&!ki(w,b)&&(j=ct(w),rt(w,V,q,!0),w=null),b.patchFlag===-2&&(Q=!1,b.dynamicChildren=null);const{type:H,ref:dt,shapeFlag:lt}=b;switch(H){case Pc:A(w,b,k,j);break;case Tr:O(w,b,k,j);break;case da:w==null&&D(b,k,j,G);break;case En:J(w,b,k,j,V,q,G,Y,Q);break;default:lt&1?N(w,b,k,j,V,q,G,Y,Q):lt&6?nt(w,b,k,j,V,q,G,Y,Q):(lt&64||lt&128)&&H.process(w,b,k,j,V,q,G,Y,Q,qt)}dt!=null&&V&&La(dt,w&&w.ref,q,b||w,!b)},A=(w,b,k,j)=>{if(w==null)r(b.el=a(b.children),k,j);else{const V=b.el=w.el;b.children!==w.children&&u(V,b.children)}},O=(w,b,k,j)=>{w==null?r(b.el=c(b.children||""),k,j):b.el=w.el},D=(w,b,k,j)=>{[w.el,w.anchor]=y(w.children,b,k,j,w.el,w.anchor)},E=({el:w,anchor:b},k,j)=>{let V;for(;w&&w!==b;)V=d(w),r(w,k,j),w=V;r(b,k,j)},S=({el:w,anchor:b})=>{let k;for(;w&&w!==b;)k=d(w),i(w),w=k;i(b)},N=(w,b,k,j,V,q,G,Y,Q)=>{G=G||b.type==="svg",w==null?C(b,k,j,V,q,G,Y,Q):W(w,b,V,q,G,Y,Q)},C=(w,b,k,j,V,q,G,Y)=>{let Q,H;const{type:dt,props:lt,shapeFlag:pt,transition:bt,patchFlag:It,dirs:Ft}=w;if(w.el&&m!==void 0&&It===-1)Q=w.el=m(w.el);else{if(Q=w.el=o(w.type,q,lt&&lt.is,lt),pt&8?l(Q,w.children):pt&16&&z(w.children,Q,null,j,V,q&&dt!=="foreignObject",G,Y),Ft&&ur(w,null,j,"created"),lt){for(const ft in lt)ft!=="value"&&!qs(ft)&&s(Q,ft,null,lt[ft],q,w.children,j,V,gt);"value"in lt&&s(Q,"value",null,lt.value),(H=lt.onVnodeBeforeMount)&&fn(H,j,w)}U(Q,w,w.scopeId,G,j)}Ft&&ur(w,null,j,"beforeMount");const Pt=(!V||V&&!V.pendingBranch)&&bt&&!bt.persisted;Pt&&bt.beforeEnter(Q),r(Q,b,k),((H=lt&&lt.onVnodeMounted)||Pt||Ft)&&Pe(()=>{H&&fn(H,j,w),Pt&&bt.enter(Q),Ft&&ur(w,null,j,"mounted")},V)},U=(w,b,k,j,V)=>{if(k&&f(w,k),j)for(let q=0;q<j.length;q++)f(w,j[q]);if(V){let q=V.subTree;if(b===q){const G=V.vnode;U(w,G,G.scopeId,G.slotScopeIds,V.parent)}}},z=(w,b,k,j,V,q,G,Y,Q=0)=>{for(let H=Q;H<w.length;H++){const dt=w[H]=Y?Gn(w[H]):mn(w[H]);v(null,dt,b,k,j,V,q,G,Y)}},W=(w,b,k,j,V,q,G)=>{const Y=b.el=w.el;let{patchFlag:Q,dynamicChildren:H,dirs:dt}=b;Q|=w.patchFlag&16;const lt=w.props||Lt,pt=b.props||Lt;let bt;k&&lr(k,!1),(bt=pt.onVnodeBeforeUpdate)&&fn(bt,k,b,w),dt&&ur(b,w,k,"beforeUpdate"),k&&lr(k,!0);const It=V&&b.type!=="foreignObject";if(H?$(w.dynamicChildren,H,Y,k,j,It,q):G||P(w,b,Y,null,k,j,It,q,!1),Q>0){if(Q&16)K(Y,b,lt,pt,k,j,V);else if(Q&2&&lt.class!==pt.class&&s(Y,"class",null,pt.class,V),Q&4&&s(Y,"style",lt.style,pt.style,V),Q&8){const Ft=b.dynamicProps;for(let Pt=0;Pt<Ft.length;Pt++){const ft=Ft[Pt],Oe=lt[ft],Je=pt[ft];(Je!==Oe||ft==="value")&&s(Y,ft,Oe,Je,V,w.children,k,j,gt)}}Q&1&&w.children!==b.children&&l(Y,b.children)}else!G&&H==null&&K(Y,b,lt,pt,k,j,V);((bt=pt.onVnodeUpdated)||dt)&&Pe(()=>{bt&&fn(bt,k,b,w),dt&&ur(b,w,k,"updated")},j)},$=(w,b,k,j,V,q,G)=>{for(let Y=0;Y<b.length;Y++){const Q=w[Y],H=b[Y],dt=Q.el&&(Q.type===En||!ki(Q,H)||Q.shapeFlag&70)?h(Q.el):k;v(Q,H,dt,null,j,V,q,G,!0)}},K=(w,b,k,j,V,q,G)=>{if(k!==j){for(const Y in j){if(qs(Y))continue;const Q=j[Y],H=k[Y];Q!==H&&Y!=="value"&&s(w,Y,H,Q,G,b.children,V,q,gt)}if(k!==Lt)for(const Y in k)!qs(Y)&&!(Y in j)&&s(w,Y,k[Y],null,G,b.children,V,q,gt);"value"in j&&s(w,"value",k.value,j.value)}},J=(w,b,k,j,V,q,G,Y,Q)=>{const H=b.el=w?w.el:a(""),dt=b.anchor=w?w.anchor:a("");let{patchFlag:lt,dynamicChildren:pt,slotScopeIds:bt}=b;bt&&(Y=Y?Y.concat(bt):bt),w==null?(r(H,k,j),r(dt,k,j),z(b.children,k,dt,V,q,G,Y,Q)):lt>0&&lt&64&&pt&&w.dynamicChildren?($(w.dynamicChildren,pt,k,V,q,G,Y),(b.key!=null||V&&b===V.subTree)&&fd(w,b,!0)):P(w,b,k,dt,V,q,G,Y,Q)},nt=(w,b,k,j,V,q,G,Y,Q)=>{b.slotScopeIds=Y,w==null?b.shapeFlag&512?V.ctx.activate(b,k,j,G,Q):M(b,k,j,V,q,G,Q):g(w,b,Q)},M=(w,b,k,j,V,q,G)=>{const Y=w.component=Bg(w,j,V);if(ed(w)&&(Y.ctx.renderer=qt),$g(Y),Y.asyncDep){if(V&&V.registerDep(Y,I),!w.el){const Q=Y.subTree=je(Tr);O(null,Q,b,k)}return}I(Y,w,b,k,V,q,G)},g=(w,b,k)=>{const j=b.component=w.component;if(Hm(w,b,k))if(j.asyncDep&&!j.asyncResolved){T(j,b,k);return}else j.next=b,Vm(j.update),j.update();else b.el=w.el,j.vnode=b},I=(w,b,k,j,V,q,G)=>{const Y=()=>{if(w.isMounted){let{next:dt,bu:lt,u:pt,parent:bt,vnode:It}=w,Ft=dt,Pt;lr(w,!1),dt?(dt.el=It.el,T(w,dt,G)):dt=It,lt&&ua(lt),(Pt=dt.props&&dt.props.onVnodeBeforeUpdate)&&fn(Pt,bt,dt,It),lr(w,!0);const ft=la(w),Oe=w.subTree;w.subTree=ft,v(Oe,ft,h(Oe.el),ct(Oe),w,V,q),dt.el=ft.el,Ft===null&&Gm(w,ft.el),pt&&Pe(pt,V),(Pt=dt.props&&dt.props.onVnodeUpdated)&&Pe(()=>fn(Pt,bt,dt,It),V)}else{let dt;const{el:lt,props:pt}=b,{bm:bt,m:It,parent:Ft}=w,Pt=Ls(b);if(lr(w,!1),bt&&ua(bt),!Pt&&(dt=pt&&pt.onVnodeBeforeMount)&&fn(dt,Ft,b),lr(w,!0),lt&&Bt){const ft=()=>{w.subTree=la(w),Bt(lt,w.subTree,w,V,null)};Pt?b.type.__asyncLoader().then(()=>!w.isUnmounted&&ft()):ft()}else{const ft=w.subTree=la(w);v(null,ft,k,j,w,V,q),b.el=ft.el}if(It&&Pe(It,V),!Pt&&(dt=pt&&pt.onVnodeMounted)){const ft=b;Pe(()=>fn(dt,Ft,ft),V)}(b.shapeFlag&256||Ft&&Ls(Ft.vnode)&&Ft.vnode.shapeFlag&256)&&w.a&&Pe(w.a,V),w.isMounted=!0,b=k=j=null}},Q=w.effect=new wc(Y,()=>Gh(H),w.scope),H=w.update=()=>Q.run();H.id=w.uid,lr(w,!0),H()},T=(w,b,k)=>{b.component=w;const j=w.vnode.props;w.vnode=b,w.next=null,vg(w,b.props,j,k),bg(w,b.children,k),_i(),Io(void 0,w.update),yi()},P=(w,b,k,j,V,q,G,Y,Q=!1)=>{const H=w&&w.children,dt=w?w.shapeFlag:0,lt=b.children,{patchFlag:pt,shapeFlag:bt}=b;if(pt>0){if(pt&128){X(H,lt,k,j,V,q,G,Y,Q);return}else if(pt&256){F(H,lt,k,j,V,q,G,Y,Q);return}}bt&8?(dt&16&&gt(H,V,q),lt!==H&&l(k,lt)):dt&16?bt&16?X(H,lt,k,j,V,q,G,Y,Q):gt(H,V,q,!0):(dt&8&&l(k,""),bt&16&&z(lt,k,j,V,q,G,Y,Q))},F=(w,b,k,j,V,q,G,Y,Q)=>{w=w||ti,b=b||ti;const H=w.length,dt=b.length,lt=Math.min(H,dt);let pt;for(pt=0;pt<lt;pt++){const bt=b[pt]=Q?Gn(b[pt]):mn(b[pt]);v(w[pt],bt,k,null,V,q,G,Y,Q)}H>dt?gt(w,V,q,!0,!1,lt):z(b,k,j,V,q,G,Y,Q,lt)},X=(w,b,k,j,V,q,G,Y,Q)=>{let H=0;const dt=b.length;let lt=w.length-1,pt=dt-1;for(;H<=lt&&H<=pt;){const bt=w[H],It=b[H]=Q?Gn(b[H]):mn(b[H]);if(ki(bt,It))v(bt,It,k,null,V,q,G,Y,Q);else break;H++}for(;H<=lt&&H<=pt;){const bt=w[lt],It=b[pt]=Q?Gn(b[pt]):mn(b[pt]);if(ki(bt,It))v(bt,It,k,null,V,q,G,Y,Q);else break;lt--,pt--}if(H>lt){if(H<=pt){const bt=pt+1,It=bt<dt?b[bt].el:j;for(;H<=pt;)v(null,b[H]=Q?Gn(b[H]):mn(b[H]),k,It,V,q,G,Y,Q),H++}}else if(H>pt)for(;H<=lt;)rt(w[H],V,q,!0),H++;else{const bt=H,It=H,Ft=new Map;for(H=It;H<=pt;H++){const ie=b[H]=Q?Gn(b[H]):mn(b[H]);ie.key!=null&&Ft.set(ie.key,H)}let Pt,ft=0;const Oe=pt-It+1;let Je=!1,Vn=0;const Me=new Array(Oe);for(H=0;H<Oe;H++)Me[H]=0;for(H=bt;H<=lt;H++){const ie=w[H];if(ft>=Oe){rt(ie,V,q,!0);continue}let _e;if(ie.key!=null)_e=Ft.get(ie.key);else for(Pt=It;Pt<=pt;Pt++)if(Me[Pt-It]===0&&ki(ie,b[Pt])){_e=Pt;break}_e===void 0?rt(ie,V,q,!0):(Me[_e-It]=H+1,_e>=Vn?Vn=_e:Je=!0,v(ie,b[_e],k,null,V,q,G,Y,Q),ft++)}const Br=Je?xg(Me):ti;for(Pt=Br.length-1,H=Oe-1;H>=0;H--){const ie=It+H,_e=b[ie],Fr=ie+1<dt?b[ie+1].el:j;Me[H]===0?v(null,_e,k,Fr,V,q,G,Y,Q):Je&&(Pt<0||H!==Br[Pt]?et(_e,k,Fr,2):Pt--)}}},et=(w,b,k,j,V=null)=>{const{el:q,type:G,transition:Y,children:Q,shapeFlag:H}=w;if(H&6){et(w.component.subTree,b,k,j);return}if(H&128){w.suspense.move(b,k,j);return}if(H&64){G.move(w,b,k,qt);return}if(G===En){r(q,b,k);for(let lt=0;lt<Q.length;lt++)et(Q[lt],b,k,j);r(w.anchor,b,k);return}if(G===da){E(w,b,k);return}if(j!==2&&H&1&&Y)if(j===0)Y.beforeEnter(q),r(q,b,k),Pe(()=>Y.enter(q),V);else{const{leave:lt,delayLeave:pt,afterLeave:bt}=Y,It=()=>r(q,b,k),Ft=()=>{lt(q,()=>{It(),bt&&bt()})};pt?pt(q,It,Ft):Ft()}else r(q,b,k)},rt=(w,b,k,j=!1,V=!1)=>{const{type:q,props:G,ref:Y,children:Q,dynamicChildren:H,shapeFlag:dt,patchFlag:lt,dirs:pt}=w;if(Y!=null&&La(Y,null,k,w,!0),dt&256){b.ctx.deactivate(w);return}const bt=dt&1&&pt,It=!Ls(w);let Ft;if(It&&(Ft=G&&G.onVnodeBeforeUnmount)&&fn(Ft,b,w),dt&6)Et(w.component,k,j);else{if(dt&128){w.suspense.unmount(k,j);return}bt&&ur(w,null,b,"beforeUnmount"),dt&64?w.type.remove(w,b,k,V,qt,j):H&&(q!==En||lt>0&&lt&64)?gt(H,b,k,!1,!0):(q===En&&lt&384||!V&&dt&16)&&gt(Q,b,k),j&&at(w)}(It&&(Ft=G&&G.onVnodeUnmounted)||bt)&&Pe(()=>{Ft&&fn(Ft,b,w),bt&&ur(w,null,b,"unmounted")},k)},at=w=>{const{type:b,el:k,anchor:j,transition:V}=w;if(b===En){Z(k,j);return}if(b===da){S(w);return}const q=()=>{i(k),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(w.shapeFlag&1&&V&&!V.persisted){const{leave:G,delayLeave:Y}=V,Q=()=>G(k,q);Y?Y(w.el,q,Q):Q()}else q()},Z=(w,b)=>{let k;for(;w!==b;)k=d(w),i(w),w=k;i(b)},Et=(w,b,k)=>{const{bum:j,scope:V,update:q,subTree:G,um:Y}=w;j&&ua(j),V.stop(),q&&(q.active=!1,rt(G,w,b,k)),Y&&Pe(Y,b),Pe(()=>{w.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},gt=(w,b,k,j=!1,V=!1,q=0)=>{for(let G=q;G<w.length;G++)rt(w[G],b,k,j,V)},ct=w=>w.shapeFlag&6?ct(w.component.subTree):w.shapeFlag&128?w.suspense.next():d(w.anchor||w.el),Ht=(w,b,k)=>{w==null?b._vnode&&rt(b._vnode,null,null,!0):v(b._vnode||null,w,b,null,null,null,k),Zh(),b._vnode=w},qt={p:v,um:rt,m:et,r:at,mt:M,mc:z,pc:P,pbc:$,n:ct,o:n};let ve,Bt;return t&&([ve,Bt]=t(qt)),{render:Ht,hydrate:ve,createApp:Mg(Ht,ve)}}function lr({effect:n,update:t},e){n.allowRecurse=t.allowRecurse=e}function fd(n,t,e=!1){const r=n.children,i=t.children;if(At(r)&&At(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Gn(i[s]),a.el=o.el),e||fd(o,a))}}function xg(n){const t=n.slice(),e=[0];let r,i,s,o,a;const c=n.length;for(r=0;r<c;r++){const u=n[r];if(u!==0){if(i=e[e.length-1],n[i]<u){t[r]=i,e.push(r);continue}for(s=0,o=e.length-1;s<o;)a=s+o>>1,n[e[a]]<u?s=a+1:o=a;u<n[e[s]]&&(s>0&&(t[r]=e[s-1]),e[s]=r)}}for(s=e.length,o=e[s-1];s-- >0;)e[s]=o,o=t[o];return e}const Sg=n=>n.__isTeleport,En=Symbol(void 0),Pc=Symbol(void 0),Tr=Symbol(void 0),da=Symbol(void 0),$i=[];let en=null;function Cg(n=!1){$i.push(en=n?null:[])}function Eg(){$i.pop(),en=$i[$i.length-1]||null}let Yi=1;function Ku(n){Yi+=n}function pd(n){return n.dynamicChildren=Yi>0?en||ti:null,Eg(),Yi>0&&en&&en.push(n),n}function Cx(n,t,e,r,i,s){return pd(gd(n,t,e,r,i,s,!0))}function Ig(n,t,e,r,i){return pd(je(n,t,e,r,i,!0))}function za(n){return n?n.__v_isVNode===!0:!1}function ki(n,t){return n.type===t.type&&n.key===t.key}const No="__vInternal",md=({key:n})=>n!=null?n:null,zs=({ref:n,ref_key:t,ref_for:e})=>n!=null?de(n)||me(n)||Ct(n)?{i:gn,r:n,k:t,f:!!e}:n:null;function gd(n,t=null,e=null,r=0,i=null,s=n===En?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&md(t),ref:t&&zs(t),scopeId:Oo,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(Nc(c,e),s&128&&n.normalize(c)):e&&(c.shapeFlag|=de(e)?8:16),Yi>0&&!o&&en&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&en.push(c),c}const je=kg;function kg(n,t=null,e=null,r=0,i=null,s=!1){if((!n||n===ug)&&(n=Tr),za(n)){const a=li(n,t,!0);return e&&Nc(a,e),Yi>0&&!s&&en&&(a.shapeFlag&6?en[en.indexOf(n)]=a:en.push(a)),a.patchFlag|=-2,a}if(qg(n)&&(n=n.__vccOpts),t){t=Og(t);let{class:a,style:c}=t;a&&!de(a)&&(t.class=mc(a)),se(c)&&(jh(c)&&!At(c)&&(c=Se({},c)),t.style=pc(c))}const o=de(n)?1:Ym(n)?128:Sg(n)?64:se(n)?4:Ct(n)?2:0;return gd(n,t,e,r,i,o,s,!0)}function Og(n){return n?jh(n)||No in n?Se({},n):n:null}function li(n,t,e=!1){const{props:r,ref:i,patchFlag:s,children:o}=n,a=t?Ng(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&md(a),ref:t&&t.ref?e&&i?At(i)?i.concat(zs(t)):[i,zs(t)]:zs(t):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==En?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&li(n.ssContent),ssFallback:n.ssFallback&&li(n.ssFallback),el:n.el,anchor:n.anchor}}function Pg(n=" ",t=0){return je(Pc,null,n,t)}function Ex(n="",t=!1){return t?(Cg(),Ig(Tr,null,n)):je(Tr,null,n)}function mn(n){return n==null||typeof n=="boolean"?je(Tr):At(n)?je(En,null,n.slice()):typeof n=="object"?Gn(n):je(Pc,null,String(n))}function Gn(n){return n.el===null||n.memo?n:li(n)}function Nc(n,t){let e=0;const{shapeFlag:r}=n;if(t==null)t=null;else if(At(t))e=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Nc(n,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!(No in t)?t._ctx=gn:i===3&&gn&&(gn.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else Ct(t)?(t={default:t,_ctx:gn},e=32):(t=String(t),r&64?(e=16,t=[Pg(t)]):e=8);n.children=t,n.shapeFlag|=e}function Ng(...n){const t={};for(let e=0;e<n.length;e++){const r=n[e];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=mc([t.class,r.class]));else if(i==="style")t.style=pc([t.style,r.style]);else if(Ao(i)){const s=t[i],o=r[i];o&&s!==o&&!(At(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=r[i])}return t}function fn(n,t,e,r=null){an(n,t,7,[e,r])}const Rg=dd();let Dg=0;function Bg(n,t,e){const r=n.type,i=(t?t.appContext:n.appContext)||Rg,s={uid:Dg++,vnode:n,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new im(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cd(r,i),emitsOptions:Qh(r,i),emit:null,emitted:null,propsDefaults:Lt,inheritAttrs:r.inheritAttrs,ctx:Lt,data:Lt,props:Lt,attrs:Lt,slots:Lt,refs:Lt,setupState:Lt,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=qm.bind(null,s),n.ce&&n.ce(s),s}let pe=null;const Fg=()=>pe||gn,hi=n=>{pe=n,n.scope.on()},_r=()=>{pe&&pe.scope.off(),pe=null};function vd(n){return n.vnode.shapeFlag&4}let Xi=!1;function $g(n,t=!1){Xi=t;const{props:e,children:r}=n.vnode,i=vd(n);gg(n,e,i,t),yg(n,r);const s=i?Vg(n,t):void 0;return Xi=!1,s}function Vg(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=Uh(new Proxy(n.ctx,lg));const{setup:r}=e;if(r){const i=n.setupContext=r.length>1?Ug(n):null;hi(n),_i();const s=Jn(r,n,0,[n.props,i]);if(yi(),_r(),xh(s)){if(s.then(_r,_r),t)return s.then(o=>{tl(n,o,t)}).catch(o=>{Eo(o,n,0)});n.asyncDep=s}else tl(n,s,t)}else _d(n,t)}function tl(n,t,e){Ct(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:se(t)&&(n.setupState=Wh(t)),_d(n,e)}let el;function _d(n,t,e){const r=n.type;if(!n.render){if(!t&&el&&!r.render){const i=r.template;if(i){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:c}=r,u=Se(Se({isCustomElement:s,delimiters:a},o),c);r.render=el(i,u)}}n.render=r.render||on}hi(n),_i(),hg(n),yi(),_r()}function jg(n){return new Proxy(n.attrs,{get(t,e){return Le(n,"get","$attrs"),t[e]}})}function Ug(n){const t=r=>{n.exposed=r||{}};let e;return{get attrs(){return e||(e=jg(n))},slots:n.slots,emit:n.emit,expose:t}}function Rc(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Wh(Uh(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Zs)return Zs[e](n)}}))}function qg(n){return Ct(n)&&"__vccOpts"in n}const zt=(n,t)=>Bm(n,t,Xi);function Ix(n,t,e){const r=arguments.length;return r===2?se(t)&&!At(t)?za(t)?je(n,null,[t]):je(n,t):je(n,null,t):(r>3?e=Array.prototype.slice.call(arguments,2):r===3&&za(e)&&(e=[e]),je(n,t,e))}const Lg="3.2.37",zg="http://www.w3.org/2000/svg",fr=typeof document<"u"?document:null,nl=fr&&fr.createElement("template"),Wg={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,r)=>{const i=t?fr.createElementNS(zg,n):fr.createElement(n,e?{is:e}:void 0);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>fr.createTextNode(n),createComment:n=>fr.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>fr.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},cloneNode(n){const t=n.cloneNode(!0);return"_value"in n&&(t._value=n._value),t},insertStaticContent(n,t,e,r,i,s){const o=e?e.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===s||!(i=i.nextSibling)););else{nl.innerHTML=r?`<svg>${n}</svg>`:n;const a=nl.content;if(r){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}};function Hg(n,t,e){const r=n._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}function Gg(n,t,e){const r=n.style,i=de(e);if(e&&!i){for(const s in e)Wa(r,s,e[s]);if(t&&!de(t))for(const s in t)e[s]==null&&Wa(r,s,"")}else{const s=r.display;i?t!==e&&(r.cssText=e):t&&n.removeAttribute("style"),"_vod"in n&&(r.display=s)}}const rl=/\s*!important$/;function Wa(n,t,e){if(At(e))e.forEach(r=>Wa(n,t,r));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const r=Yg(n,t);rl.test(e)?n.setProperty(vi(r),e.replace(rl,""),"important"):n[r]=e}}const il=["Webkit","Moz","ms"],fa={};function Yg(n,t){const e=fa[t];if(e)return e;let r=ui(t);if(r!=="filter"&&r in n)return fa[t]=r;r=Eh(r);for(let i=0;i<il.length;i++){const s=il[i]+r;if(s in n)return fa[t]=s}return t}const sl="http://www.w3.org/1999/xlink";function Xg(n,t,e,r,i){if(r&&t.startsWith("xlink:"))e==null?n.removeAttributeNS(sl,t.slice(6,t.length)):n.setAttributeNS(sl,t,e);else{const s=Hp(t);e==null||s&&!Mh(e)?n.removeAttribute(t):n.setAttribute(t,s?"":e)}}function Zg(n,t,e,r,i,s,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,i,s),n[t]=e==null?"":e;return}if(t==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=e;const c=e==null?"":e;(n.value!==c||n.tagName==="OPTION")&&(n.value=c),e==null&&n.removeAttribute(t);return}let a=!1;if(e===""||e==null){const c=typeof n[t];c==="boolean"?e=Mh(e):e==null&&c==="string"?(e="",a=!0):c==="number"&&(e=0,a=!0)}try{n[t]=e}catch{}a&&n.removeAttribute(t)}const[yd,Jg]=(()=>{let n=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(n=performance.now.bind(performance));const e=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(e&&Number(e[1])<=53)}return[n,t]})();let Ha=0;const Qg=Promise.resolve(),Kg=()=>{Ha=0},t0=()=>Ha||(Qg.then(Kg),Ha=yd());function e0(n,t,e,r){n.addEventListener(t,e,r)}function n0(n,t,e,r){n.removeEventListener(t,e,r)}function r0(n,t,e,r,i=null){const s=n._vei||(n._vei={}),o=s[t];if(r&&o)o.value=r;else{const[a,c]=i0(t);if(r){const u=s[t]=s0(r,i);e0(n,a,u,c)}else o&&(n0(n,a,o,c),s[t]=void 0)}}const ol=/(?:Once|Passive|Capture)$/;function i0(n){let t;if(ol.test(n)){t={};let e;for(;e=n.match(ol);)n=n.slice(0,n.length-e[0].length),t[e[0].toLowerCase()]=!0}return[vi(n.slice(2)),t]}function s0(n,t){const e=r=>{const i=r.timeStamp||yd();(Jg||i>=e.attached-1)&&an(o0(r,e.value),t,5,[r])};return e.value=n,e.attached=t0(),e}function o0(n,t){if(At(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const al=/^on[a-z]/,a0=(n,t,e,r,i=!1,s,o,a,c)=>{t==="class"?Hg(n,r,i):t==="style"?Gg(n,e,r):Ao(t)?gc(t)||r0(n,t,e,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):c0(n,t,r,i))?Zg(n,t,r,s,o,a,c):(t==="true-value"?n._trueValue=r:t==="false-value"&&(n._falseValue=r),Xg(n,t,r,i))};function c0(n,t,e,r){return r?!!(t==="innerHTML"||t==="textContent"||t in n&&al.test(t)&&Ct(e)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA"||al.test(t)&&de(e)?!1:t in n}const u0=Se({patchProp:a0},Wg);let cl;function l0(){return cl||(cl=Tg(u0))}const kx=(...n)=>{const t=l0().createApp(...n),{mount:e}=t;return t.mount=r=>{const i=h0(r);if(!i)return;const s=t._component;!Ct(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=e(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function h0(n){return de(n)?document.querySelector(n):n}const d0="modulepreload",f0=function(n){return"/"+n},ul={},p0=function(t,e,r){return!e||e.length===0?t():Promise.all(e.map(i=>{if(i=f0(i),i in ul)return;ul[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":d0,s||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),s)return new Promise((c,u)=>{a.addEventListener("load",c),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},bd="14.8.40",ll=(n,t,e)=>({endTime:t,insertTime:e,type:"exponentialRampToValue",value:n}),hl=(n,t,e)=>({endTime:t,insertTime:e,type:"linearRampToValue",value:n}),Ga=(n,t)=>({startTime:t,type:"setValue",value:n}),wd=(n,t,e)=>({duration:e,startTime:t,type:"setValueCurve",values:n}),Md=(n,t,{startTime:e,target:r,timeConstant:i})=>r+(t-r)*Math.exp((e-n)/i),Xr=n=>n.type==="exponentialRampToValue",Qs=n=>n.type==="linearRampToValue",Yn=n=>Xr(n)||Qs(n),Dc=n=>n.type==="setValue",Cn=n=>n.type==="setValueCurve",Ks=(n,t,e,r)=>{const i=n[t];return i===void 0?r:Yn(i)||Dc(i)?i.value:Cn(i)?i.values[i.values.length-1]:Md(e,Ks(n,t-1,i.startTime,r),i)},dl=(n,t,e,r,i)=>e===void 0?[r.insertTime,i]:Yn(e)?[e.endTime,e.value]:Dc(e)?[e.startTime,e.value]:Cn(e)?[e.startTime+e.duration,e.values[e.values.length-1]]:[e.startTime,Ks(n,t-1,e.startTime,i)],Ya=n=>n.type==="cancelAndHold",Xa=n=>n.type==="cancelScheduledValues",zn=n=>Ya(n)||Xa(n)?n.cancelTime:Xr(n)||Qs(n)?n.endTime:n.startTime,fl=(n,t,e,{endTime:r,value:i})=>e===i?i:0<e&&0<i||e<0&&i<0?e*(i/e)**((n-t)/(r-t)):0,pl=(n,t,e,{endTime:r,value:i})=>e+(n-t)/(r-t)*(i-e),m0=(n,t)=>{const e=Math.floor(t),r=Math.ceil(t);return e===r?n[e]:(1-(t-e))*n[e]+(1-(r-t))*n[r]},g0=(n,{duration:t,startTime:e,values:r})=>{const i=(n-e)/t*(r.length-1);return m0(r,i)},Ps=n=>n.type==="setTarget";class v0{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=zn(t);if(Ya(t)||Xa(t)){const r=this._automationEvents.findIndex(s=>Xa(t)&&Cn(s)?s.startTime+s.duration>=e:zn(s)>=e),i=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),Ya(t)){const s=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&Yn(i)){if(Ps(s))throw new Error("The internal list is malformed.");const o=Cn(s)?s.startTime+s.duration:zn(s),a=Cn(s)?s.values[s.values.length-1]:s.value,c=Xr(i)?fl(e,o,a,i):pl(e,o,a,i),u=Xr(i)?ll(c,e,this._currenTime):hl(c,e,this._currenTime);this._automationEvents.push(u)}s!==void 0&&Ps(s)&&this._automationEvents.push(Ga(this.getValue(e),e)),s!==void 0&&Cn(s)&&s.startTime+s.duration>e&&(this._automationEvents[this._automationEvents.length-1]=wd(new Float32Array([6,7]),s.startTime,e-s.startTime))}}else{const r=this._automationEvents.findIndex(o=>zn(o)>e),i=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(i!==void 0&&Cn(i)&&zn(i)+i.duration>e)return!1;const s=Xr(t)?ll(t.value,t.endTime,this._currenTime):Qs(t)?hl(t.value,e,this._currenTime):t;if(r===-1)this._automationEvents.push(s);else{if(Cn(t)&&e+t.duration>zn(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,s)}}return!0}flush(t){const e=this._automationEvents.findIndex(r=>zn(r)>t);if(e>1){const r=this._automationEvents.slice(e-1),i=r[0];Ps(i)&&r.unshift(Ga(Ks(this._automationEvents,e-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=r}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const e=this._automationEvents.findIndex(o=>zn(o)>t),r=this._automationEvents[e],i=(e===-1?this._automationEvents.length:e)-1,s=this._automationEvents[i];if(s!==void 0&&Ps(s)&&(r===void 0||!Yn(r)||r.insertTime>t))return Md(t,Ks(this._automationEvents,i-1,s.startTime,this._defaultValue),s);if(s!==void 0&&Dc(s)&&(r===void 0||!Yn(r)))return s.value;if(s!==void 0&&Cn(s)&&(r===void 0||!Yn(r)||s.startTime+s.duration>t))return t<s.startTime+s.duration?g0(t,s):s.values[s.values.length-1];if(s!==void 0&&Yn(s)&&(r===void 0||!Yn(r)))return s.value;if(r!==void 0&&Xr(r)){const[o,a]=dl(this._automationEvents,i,s,r,this._defaultValue);return fl(t,o,a,r)}if(r!==void 0&&Qs(r)){const[o,a]=dl(this._automationEvents,i,s,r,this._defaultValue);return pl(t,o,a,r)}return this._defaultValue}}const _0=n=>({cancelTime:n,type:"cancelAndHold"}),y0=n=>({cancelTime:n,type:"cancelScheduledValues"}),b0=(n,t)=>({endTime:t,type:"exponentialRampToValue",value:n}),w0=(n,t)=>({endTime:t,type:"linearRampToValue",value:n}),M0=(n,t,e)=>({startTime:t,target:n,timeConstant:e,type:"setTarget"}),T0=()=>new DOMException("","AbortError"),A0=n=>(t,e,[r,i,s],o)=>{n(t[i],[e,r,s],a=>a[0]===e&&a[1]===r,o)},x0=n=>(t,e,r)=>{const i=[];for(let s=0;s<r.numberOfInputs;s+=1)i.push(new Set);n.set(t,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},S0=n=>(t,e)=>{n.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},di=new WeakSet,Td=new WeakMap,Bc=new WeakMap,Ad=new WeakMap,Fc=new WeakMap,Ro=new WeakMap,xd=new WeakMap,Za=new WeakMap,Ja=new WeakMap,Qa=new WeakMap,Sd={construct(){return Sd}},C0=n=>{try{const t=new Proxy(n,Sd);new t}catch{return!1}return!0},ml=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,gl=(n,t)=>{const e=[];let r=n.replace(/^[\s]+/,""),i=r.match(ml);for(;i!==null;){const s=i[1].slice(1,-1),o=i[0].replace(/([\s]+)?;?$/,"").replace(s,new URL(s,t).toString());e.push(o),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(ml)}return[e.join(";"),r]},vl=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},_l=n=>{if(!C0(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},E0=(n,t,e,r,i,s,o,a,c,u,l,h,d)=>{let f=0;return(m,y,v={credentials:"omit"})=>{const A=l.get(m);if(A!==void 0&&A.has(y))return Promise.resolve();const O=u.get(m);if(O!==void 0){const S=O.get(y);if(S!==void 0)return S}const D=s(m),E=D.audioWorklet===void 0?i(y).then(([S,N])=>{const[C,U]=gl(S,N),z=`${C};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${U}
})})(window,'_AWGS')`;return e(z)}).then(()=>{const S=d._AWGS.pop();if(S===void 0)throw new SyntaxError;r(D.currentTime,D.sampleRate,()=>S(class{},void 0,(N,C)=>{if(N.trim()==="")throw t();const U=Ja.get(D);if(U!==void 0){if(U.has(N))throw t();_l(C),vl(C.parameterDescriptors),U.set(N,C)}else _l(C),vl(C.parameterDescriptors),Ja.set(D,new Map([[N,C]]))},D.sampleRate,void 0,void 0))}):Promise.all([i(y),Promise.resolve(n(h,h))]).then(([[S,N],C])=>{const U=f+1;f=U;const[z,W]=gl(S,N),$=`${z};((AudioWorkletProcessor,registerProcessor)=>{${W}
})(${C?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${C?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${C?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${U}',class extends AudioWorkletProcessor{process(){return !1}})`,K=new Blob([$],{type:"application/javascript; charset=utf-8"}),J=URL.createObjectURL(K);return D.audioWorklet.addModule(J,v).then(()=>{if(a(D))return D;const nt=o(D);return nt.audioWorklet.addModule(J,v).then(()=>nt)}).then(nt=>{if(c===null)throw new SyntaxError;try{new c(nt,`__sac${U}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(J))});return O===void 0?u.set(m,new Map([[y,E]])):O.set(y,E),E.then(()=>{const S=l.get(m);S===void 0?l.set(m,new Set([y])):S.add(y)}).finally(()=>{const S=u.get(m);S!==void 0&&S.delete(y)}),E}},un=(n,t)=>{const e=n.get(t);if(e===void 0)throw new Error("A value with the given key could not be found.");return e},Do=(n,t)=>{const e=Array.from(n).filter(t);if(e.length>1)throw Error("More than one element was found.");if(e.length===0)throw Error("No element was found.");const[r]=e;return n.delete(r),r},Cd=(n,t,e,r)=>{const i=un(n,t),s=Do(i,o=>o[0]===e&&o[1]===r);return i.size===0&&n.delete(t),s},ps=n=>un(xd,n),fi=n=>{if(di.has(n))throw new Error("The AudioNode is already stored.");di.add(n),ps(n).forEach(t=>t(!0))},Ed=n=>"port"in n,ms=n=>{if(!di.has(n))throw new Error("The AudioNode is not stored.");di.delete(n),ps(n).forEach(t=>t(!1))},Ka=(n,t)=>{!Ed(n)&&t.every(e=>e.size===0)&&ms(n)},I0=(n,t,e,r,i,s,o,a,c,u,l,h,d)=>{const f=new WeakMap;return(m,y,v,A,O)=>{const{activeInputs:D,passiveInputs:E}=s(y),{outputs:S}=s(m),N=a(m),C=U=>{const z=c(y),W=c(m);if(U){const $=Cd(E,m,v,A);n(D,m,$,!1),!O&&!h(m)&&e(W,z,v,A),d(y)&&fi(y)}else{const $=r(D,m,v,A);t(E,A,$,!1),!O&&!h(m)&&i(W,z,v,A);const K=o(y);if(K===0)l(y)&&Ka(y,D);else{const J=f.get(y);J!==void 0&&clearTimeout(J),f.set(y,setTimeout(()=>{l(y)&&Ka(y,D)},K*1e3))}}};return u(S,[y,v,A],U=>U[0]===y&&U[1]===v&&U[2]===A,!0)?(N.add(C),l(m)?n(D,m,[v,A,C],!0):t(E,A,[m,v,C],!0),!0):!1}},k0=n=>(t,e,[r,i,s],o)=>{const a=t.get(r);a===void 0?t.set(r,new Set([[i,e,s]])):n(a,[i,e,s],c=>c[0]===i&&c[1]===e,o)},O0=n=>(t,e)=>{const r=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(r).connect(t.destination);const i=()=>{e.removeEventListener("ended",i),e.disconnect(r),r.disconnect()};e.addEventListener("ended",i)},P0=n=>(t,e)=>{n(t).add(e)},N0={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},R0=(n,t,e,r,i,s)=>class extends n{constructor(o,a){const c=i(o),u={...N0,...a},l=r(c,u),h=s(c)?t():null;super(o,!1,l,h),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(o){this._nativeAnalyserNode.fftSize=o}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(o){const a=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=o,!(o>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=a,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(o){const a=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=o,!(this._nativeAnalyserNode.maxDecibels>o))throw this._nativeAnalyserNode.minDecibels=a,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(o){this._nativeAnalyserNode.smoothingTimeConstant=o}getByteFrequencyData(o){this._nativeAnalyserNode.getByteFrequencyData(o)}getByteTimeDomainData(o){this._nativeAnalyserNode.getByteTimeDomainData(o)}getFloatFrequencyData(o){this._nativeAnalyserNode.getFloatFrequencyData(o)}getFloatTimeDomainData(o){this._nativeAnalyserNode.getFloatTimeDomainData(o)}},we=(n,t)=>n.context===t,D0=(n,t,e)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=t(s);if(!we(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,c)}return r.set(o,a),await e(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},to=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},bn=()=>new DOMException("","IndexSizeError"),$c=n=>{n.getChannelData=(t=>e=>{try{return t.call(n,e)}catch(r){throw r.code===12?bn():r}})(n.getChannelData)},B0={numberOfChannels:1},F0=(n,t,e,r,i,s,o,a)=>{let c=null;return class Id{constructor(l){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:f}={...B0,...l};c===null&&(c=new i(1,1,44100));const m=r!==null&&t(s,s)?new r({length:h,numberOfChannels:d,sampleRate:f}):c.createBuffer(d,h,f);if(m.numberOfChannels===0)throw e();return typeof m.copyFromChannel!="function"?(o(m),$c(m)):t(to,()=>to(m))||a(m),n.add(m),m}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===Id.prototype||n.has(l)}}},Ne=-34028234663852886e22,Ae=-Ne,On=n=>di.has(n),$0={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},V0=(n,t,e,r,i,s,o,a)=>class extends n{constructor(c,u){const l=s(c),h={...$0,...u},d=i(l,h),f=o(l),m=f?t():null;super(c,!1,d,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=d,this._onended=null,this._playbackRate=e(this,f,d.playbackRate,Ae,Ne)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?a(this,c):null;this._nativeAudioBufferSourceNode.onended=u;const l=this._nativeAudioBufferSourceNode.onended;this._onended=l!==null&&l===u?c:l}get playbackRate(){return this._playbackRate}start(c=0,u=0,l){if(this._nativeAudioBufferSourceNode.start(c,u,l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=l===void 0?[c,u]:[c,u,l]),this.context.state!=="closed"){fi(this);const h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),On(this)&&ms(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},j0=(n,t,e,r,i)=>()=>{const s=new WeakMap;let o=null,a=null;const c=async(u,l)=>{let h=e(u);const d=we(h,l);if(!d){const f={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=t(l,f),o!==null&&h.start(...o),a!==null&&h.stop(a)}return s.set(l,h),d?await n(l,u.playbackRate,h.playbackRate):await r(l,u.playbackRate,h.playbackRate),await i(u,l,h),h};return{set start(u){o=u},set stop(u){a=u},render(u,l){const h=s.get(l);return h!==void 0?Promise.resolve(h):c(u,l)}}},U0=n=>"playbackRate"in n,q0=n=>"frequency"in n&&"gain"in n,L0=n=>"offset"in n,z0=n=>!("frequency"in n)&&"gain"in n,W0=n=>"detune"in n&&"frequency"in n,H0=n=>"pan"in n,xe=n=>un(Td,n),gs=n=>un(Ad,n),tc=(n,t)=>{const{activeInputs:e}=xe(n);e.forEach(i=>i.forEach(([s])=>{t.includes(n)||tc(s,[...t,n])}));const r=U0(n)?[n.playbackRate]:Ed(n)?Array.from(n.parameters.values()):q0(n)?[n.Q,n.detune,n.frequency,n.gain]:L0(n)?[n.offset]:z0(n)?[n.gain]:W0(n)?[n.detune,n.frequency]:H0(n)?[n.pan]:[];for(const i of r){const s=gs(i);s!==void 0&&s.activeInputs.forEach(([o])=>tc(o,t))}On(n)&&ms(n)},kd=n=>{tc(n.destination,[])},G0=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),Y0=(n,t,e,r,i,s,o,a,c)=>class extends n{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let l;try{l=new c(u)}catch(f){throw f.code===12&&f.message==="sampleRate is not in range"?e():f}if(l===null)throw r();if(!G0(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&l.sampleRate!==u.sampleRate)throw e();super(l,2);const{latencyHint:h}=u,{sampleRate:d}=l;if(this._baseLatency=typeof l.baseLatency=="number"?l.baseLatency:h==="balanced"?512/d:h==="interactive"||h===void 0?256/d:h==="playback"?1024/d:Math.max(2,Math.min(128,Math.round(h*d/128)))*128/d,this._nativeAudioContext=l,c.name==="webkitAudioContext"?(this._nativeGainNode=l.createGain(),this._nativeOscillatorNode=l.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(l.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,l.state==="running"){this._state="suspended";const f=()=>{this._state==="suspended"&&(this._state=null),l.removeEventListener("statechange",f)};l.addEventListener("statechange",f)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),kd(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,l)=>{const h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?u():this.resume().then(u,l)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?t():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?t():u})}},X0=(n,t,e,r,i,s,o,a)=>class extends n{constructor(c,u){const l=s(c),h=o(l),d=i(l,u,h),f=h?t(a):null;super(c,!1,d,f),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=d}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Z0=n=>{const t=new WeakMap,e=async(r,i)=>{const s=i.destination;return t.set(i,s),await n(r,i,s),s};return{render(r,i){const s=t.get(i);return s!==void 0?Promise.resolve(s):e(r,i)}}},J0=(n,t,e,r,i,s,o,a)=>(c,u)=>{const l=u.listener,h=()=>{const S=new Float32Array(1),N=t(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),C=o(u);let U=!1,z=[0,0,-1,0,1,0],W=[0,0,0];const $=()=>{if(U)return;U=!0;const M=r(u,256,9,0);M.onaudioprocess=({inputBuffer:g})=>{const I=[s(g,S,0),s(g,S,1),s(g,S,2),s(g,S,3),s(g,S,4),s(g,S,5)];I.some((P,F)=>P!==z[F])&&(l.setOrientation(...I),z=I);const T=[s(g,S,6),s(g,S,7),s(g,S,8)];T.some((P,F)=>P!==W[F])&&(l.setPosition(...T),W=T)},N.connect(M)},K=M=>g=>{g!==z[M]&&(z[M]=g,l.setOrientation(...z))},J=M=>g=>{g!==W[M]&&(W[M]=g,l.setPosition(...W))},nt=(M,g,I)=>{const T=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g});T.connect(N,0,M),T.start(),Object.defineProperty(T.offset,"defaultValue",{get(){return g}});const P=n({context:c},C,T.offset,Ae,Ne);return a(P,"value",F=>()=>F.call(P),F=>X=>{try{F.call(P,X)}catch(et){if(et.code!==9)throw et}$(),C&&I(X)}),P.cancelAndHoldAtTime=(F=>C?()=>{throw i()}:(...X)=>{const et=F.apply(P,X);return $(),et})(P.cancelAndHoldAtTime),P.cancelScheduledValues=(F=>C?()=>{throw i()}:(...X)=>{const et=F.apply(P,X);return $(),et})(P.cancelScheduledValues),P.exponentialRampToValueAtTime=(F=>C?()=>{throw i()}:(...X)=>{const et=F.apply(P,X);return $(),et})(P.exponentialRampToValueAtTime),P.linearRampToValueAtTime=(F=>C?()=>{throw i()}:(...X)=>{const et=F.apply(P,X);return $(),et})(P.linearRampToValueAtTime),P.setTargetAtTime=(F=>C?()=>{throw i()}:(...X)=>{const et=F.apply(P,X);return $(),et})(P.setTargetAtTime),P.setValueAtTime=(F=>C?()=>{throw i()}:(...X)=>{const et=F.apply(P,X);return $(),et})(P.setValueAtTime),P.setValueCurveAtTime=(F=>C?()=>{throw i()}:(...X)=>{const et=F.apply(P,X);return $(),et})(P.setValueCurveAtTime),P};return{forwardX:nt(0,0,K(0)),forwardY:nt(1,0,K(1)),forwardZ:nt(2,-1,K(2)),positionX:nt(6,0,J(0)),positionY:nt(7,0,J(1)),positionZ:nt(8,0,J(2)),upX:nt(3,0,K(3)),upY:nt(4,1,K(4)),upZ:nt(5,0,K(5))}},{forwardX:d,forwardY:f,forwardZ:m,positionX:y,positionY:v,positionZ:A,upX:O,upY:D,upZ:E}=l.forwardX===void 0?h():l;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return m},get positionX(){return y},get positionY(){return v},get positionZ(){return A},get upX(){return O},get upY(){return D},get upZ(){return E}}},eo=n=>"context"in n,vs=n=>eo(n[0]),Nr=(n,t,e,r)=>{for(const i of n)if(e(i)){if(r)return!1;throw Error("The set contains at least one similar element.")}return n.add(t),!0},yl=(n,t,[e,r],i)=>{Nr(n,[t,e,r],s=>s[0]===t&&s[1]===e,i)},bl=(n,[t,e,r],i)=>{const s=n.get(t);s===void 0?n.set(t,new Set([[e,r]])):Nr(s,[e,r],o=>o[0]===e,i)},bi=n=>"inputs"in n,no=(n,t,e,r)=>{if(bi(t)){const i=t.inputs[r];return n.connect(i,e,0),[i,e,0]}return n.connect(t,e,r),[t,e,r]},Od=(n,t,e)=>{for(const r of n)if(r[0]===t&&r[1]===e)return n.delete(r),r;return null},Q0=(n,t,e)=>Do(n,r=>r[0]===t&&r[1]===e),Pd=(n,t)=>{if(!ps(n).delete(t))throw new Error("Missing the expected event listener.")},Nd=(n,t,e)=>{const r=un(n,t),i=Do(r,s=>s[0]===e);return r.size===0&&n.delete(t),i},ro=(n,t,e,r)=>{bi(t)?n.disconnect(t.inputs[r],e,0):n.disconnect(t,e,r)},Yt=n=>un(Bc,n),Zi=n=>un(Fc,n),Ar=n=>Za.has(n),Ws=n=>!di.has(n),wl=(n,t)=>new Promise(e=>{if(t!==null)e(!0);else{const r=n.createScriptProcessor(256,1,1),i=n.createGain(),s=n.createBuffer(1,2,44100),o=s.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=s,a.loop=!0,a.connect(r).connect(n.destination),a.connect(i),a.disconnect(i),r.onaudioprocess=c=>{const u=c.inputBuffer.getChannelData(0);Array.prototype.some.call(u,l=>l===1)?e(!0):e(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(n.destination)},a.start()}}),pa=(n,t)=>{const e=new Map;for(const r of n)for(const i of r){const s=e.get(i);e.set(i,s===void 0?1:s+1)}e.forEach((r,i)=>t(i,r))},io=n=>"context"in n,K0=n=>{const t=new Map;n.connect=(e=>(r,i=0,s=0)=>{const o=io(r)?e(r,i,s):e(r,i),a=t.get(r);return a===void 0?t.set(r,[{input:s,output:i}]):a.every(c=>c.input!==s||c.output!==i)&&a.push({input:s,output:i}),o})(n.connect.bind(n)),n.disconnect=(e=>(r,i,s)=>{if(e.apply(n),r===void 0)t.clear();else if(typeof r=="number")for(const[o,a]of t){const c=a.filter(u=>u.output!==r);c.length===0?t.delete(o):t.set(o,c)}else if(t.has(r))if(i===void 0)t.delete(r);else{const o=t.get(r);if(o!==void 0){const a=o.filter(c=>c.output!==i&&(c.input!==s||s===void 0));a.length===0?t.delete(r):t.set(r,a)}}for(const[o,a]of t)a.forEach(c=>{io(o)?n.connect(o,c.output,c.input):n.connect(o,c.output)})})(n.disconnect)},tv=(n,t,e,r)=>{const{activeInputs:i,passiveInputs:s}=gs(t),{outputs:o}=xe(n),a=ps(n),c=u=>{const l=Yt(n),h=Zi(t);if(u){const d=Nd(s,n,e);yl(i,n,d,!1),!r&&!Ar(n)&&l.connect(h,e)}else{const d=Q0(i,n,e);bl(s,d,!1),!r&&!Ar(n)&&l.disconnect(h,e)}};return Nr(o,[t,e],u=>u[0]===t&&u[1]===e,!0)?(a.add(c),On(n)?yl(i,n,[e,c],!0):bl(s,[n,e,c],!0),!0):!1},ev=(n,t,e,r)=>{const{activeInputs:i,passiveInputs:s}=xe(t),o=Od(i[r],n,e);return o===null?[Cd(s,n,e,r)[2],!1]:[o[2],!0]},nv=(n,t,e)=>{const{activeInputs:r,passiveInputs:i}=gs(t),s=Od(r,n,e);return s===null?[Nd(i,n,e)[1],!1]:[s[2],!0]},Vc=(n,t,e,r,i)=>{const[s,o]=ev(n,e,r,i);if(s!==null&&(Pd(n,s),o&&!t&&!Ar(n)&&ro(Yt(n),Yt(e),r,i)),On(e)){const{activeInputs:a}=xe(e);Ka(e,a)}},jc=(n,t,e,r)=>{const[i,s]=nv(n,e,r);i!==null&&(Pd(n,i),s&&!t&&!Ar(n)&&Yt(n).disconnect(Zi(e),r))},rv=(n,t)=>{const e=xe(n),r=[];for(const i of e.outputs)vs(i)?Vc(n,t,...i):jc(n,t,...i),r.push(i[0]);return e.outputs.clear(),r},iv=(n,t,e)=>{const r=xe(n),i=[];for(const s of r.outputs)s[1]===e&&(vs(s)?Vc(n,t,...s):jc(n,t,...s),i.push(s[0]),r.outputs.delete(s));return i},sv=(n,t,e,r,i)=>{const s=xe(n);return Array.from(s.outputs).filter(o=>o[0]===e&&(r===void 0||o[1]===r)&&(i===void 0||o[2]===i)).map(o=>(vs(o)?Vc(n,t,...o):jc(n,t,...o),s.outputs.delete(o),o[0]))},ov=(n,t,e,r,i,s,o,a,c,u,l,h,d,f,m,y)=>class extends u{constructor(v,A,O,D){super(O),this._context=v,this._nativeAudioNode=O;const E=l(v);h(E)&&e(wl,()=>wl(E,y))!==!0&&K0(O),Bc.set(this,O),xd.set(this,new Set),v.state!=="closed"&&A&&fi(this),n(this,D,O)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,A=0,O=0){if(A<0||A>=this._nativeAudioNode.numberOfOutputs)throw i();const D=l(this._context),E=m(D);if(d(v)||f(v))throw s();if(eo(v)){const N=Yt(v);try{const C=no(this._nativeAudioNode,N,A,O),U=Ws(this);(E||U)&&this._nativeAudioNode.disconnect(...C),this.context.state!=="closed"&&!U&&Ws(v)&&fi(v)}catch(C){throw C.code===12?s():C}if(t(this,v,A,O,E)){const C=c([this],v);pa(C,r(E))}return v}const S=Zi(v);if(S.name==="playbackRate"&&S.maxValue===1024)throw o();try{this._nativeAudioNode.connect(S,A),(E||Ws(this))&&this._nativeAudioNode.disconnect(S,A)}catch(N){throw N.code===12?s():N}if(tv(this,v,A,E)){const N=c([this],v);pa(N,r(E))}}disconnect(v,A,O){let D;const E=l(this._context),S=m(E);if(v===void 0)D=rv(this,S);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw i();D=iv(this,S,v)}else{if(A!==void 0&&(A<0||A>=this.numberOfOutputs)||eo(v)&&O!==void 0&&(O<0||O>=v.numberOfInputs))throw i();if(D=sv(this,S,v,A,O),D.length===0)throw s()}for(const N of D){const C=c([this],N);pa(C,a)}}},av=(n,t,e,r,i,s,o,a,c,u,l,h,d)=>(f,m,y,v=null,A=null)=>{const O=new v0(y.defaultValue),D=m?r(O):null,E={get defaultValue(){return y.defaultValue},get maxValue(){return v===null?y.maxValue:v},get minValue(){return A===null?y.minValue:A},get value(){return y.value},set value(S){y.value=S,E.setValueAtTime(S,f.context.currentTime)},cancelAndHoldAtTime(S){if(typeof y.cancelAndHoldAtTime=="function")D===null&&O.flush(f.context.currentTime),O.add(i(S)),y.cancelAndHoldAtTime(S);else{const N=Array.from(O).pop();D===null&&O.flush(f.context.currentTime),O.add(i(S));const C=Array.from(O).pop();y.cancelScheduledValues(S),N!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?y.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?y.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?y.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&y.setValueCurveAtTime(C.values,C.startTime,C.duration))}return E},cancelScheduledValues(S){return D===null&&O.flush(f.context.currentTime),O.add(s(S)),y.cancelScheduledValues(S),E},exponentialRampToValueAtTime(S,N){if(S===0)throw new RangeError;if(!Number.isFinite(N)||N<0)throw new RangeError;return D===null&&O.flush(f.context.currentTime),O.add(o(S,N)),y.exponentialRampToValueAtTime(S,N),E},linearRampToValueAtTime(S,N){return D===null&&O.flush(f.context.currentTime),O.add(a(S,N)),y.linearRampToValueAtTime(S,N),E},setTargetAtTime(S,N,C){return D===null&&O.flush(f.context.currentTime),O.add(c(S,N,C)),y.setTargetAtTime(S,N,C),E},setValueAtTime(S,N){return D===null&&O.flush(f.context.currentTime),O.add(u(S,N)),y.setValueAtTime(S,N),E},setValueCurveAtTime(S,N,C){const U=S instanceof Float32Array?S:new Float32Array(S);if(h!==null&&h.name==="webkitAudioContext"){const z=N+C,W=f.context.sampleRate,$=Math.ceil(N*W),K=Math.floor(z*W),J=K-$,nt=new Float32Array(J);for(let g=0;g<J;g+=1){const I=(U.length-1)/C*(($+g)/W-N),T=Math.floor(I),P=Math.ceil(I);nt[g]=T===P?U[T]:(1-(I-T))*U[T]+(1-(P-I))*U[P]}D===null&&O.flush(f.context.currentTime),O.add(l(nt,N,C)),y.setValueCurveAtTime(nt,N,C);const M=K/W;M<z&&d(E,nt[nt.length-1],M),d(E,U[U.length-1],z)}else D===null&&O.flush(f.context.currentTime),O.add(l(U,N,C)),y.setValueCurveAtTime(U,N,C);return E}};return e.set(E,y),t.set(E,f),n(E,D),E},cv=n=>({replay(t){for(const e of n)if(e.type==="exponentialRampToValue"){const{endTime:r,value:i}=e;t.exponentialRampToValueAtTime(i,r)}else if(e.type==="linearRampToValue"){const{endTime:r,value:i}=e;t.linearRampToValueAtTime(i,r)}else if(e.type==="setTarget"){const{startTime:r,target:i,timeConstant:s}=e;t.setTargetAtTime(i,r,s)}else if(e.type==="setValue"){const{startTime:r,value:i}=e;t.setValueAtTime(i,r)}else if(e.type==="setValueCurve"){const{duration:r,startTime:i,values:s}=e;t.setValueCurveAtTime(s,i,r)}else throw new Error("Can't apply an unknown automation.")}});class Rd{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((r,i)=>t.call(e,r,i,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const uv={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},lv=(n,t,e,r,i,s,o,a,c,u,l,h,d,f)=>class extends t{constructor(m,y,v){var A;const O=a(m),D=c(O),E=l({...uv,...v});d(E);const S=Ja.get(O),N=S==null?void 0:S.get(y),C=D||O.state!=="closed"?O:(A=o(O))!==null&&A!==void 0?A:O,U=i(C,D?null:m.baseLatency,u,y,N,E),z=D?r(y,E,N):null;super(m,!0,U,z);const W=[];U.parameters.forEach((K,J)=>{const nt=e(this,D,K);W.push([J,nt])}),this._nativeAudioWorkletNode=U,this._onprocessorerror=null,this._parameters=new Rd(W),D&&n(O,this);const{activeInputs:$}=s(this);h(U,$)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const y=typeof m=="function"?f(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=y;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===y?m:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function so(n,t,e,r,i){if(typeof n.copyFromChannel=="function")t[e].byteLength===0&&(t[e]=new Float32Array(128)),n.copyFromChannel(t[e],r,i);else{const s=n.getChannelData(r);if(t[e].byteLength===0)t[e]=s.slice(i,i+128);else{const o=new Float32Array(s.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(o)}}}const Dd=(n,t,e,r,i)=>{typeof n.copyToChannel=="function"?t[e].byteLength!==0&&n.copyToChannel(t[e],r,i):t[e].byteLength!==0&&n.getChannelData(r).set(t[e],i)},oo=(n,t)=>{const e=[];for(let r=0;r<n;r+=1){const i=[],s=typeof t=="number"?t:t[r];for(let o=0;o<s;o+=1)i.push(new Float32Array(128));e.push(i)}return e},hv=(n,t)=>{const e=un(Qa,n),r=Yt(t);return un(e,r)},dv=async(n,t,e,r,i,s,o)=>{const a=t===null?Math.ceil(n.context.length/128)*128:t.length,c=r.channelCount*r.numberOfInputs,u=i.reduce((v,A)=>v+A,0),l=u===0?null:e.createBuffer(u,a,e.sampleRate);if(s===void 0)throw new Error("Missing the processor constructor.");const h=xe(n),d=await hv(e,n),f=oo(r.numberOfInputs,r.channelCount),m=oo(r.numberOfOutputs,i),y=Array.from(n.parameters.keys()).reduce((v,A)=>({...v,[A]:new Float32Array(128)}),{});for(let v=0;v<a;v+=128){if(r.numberOfInputs>0&&t!==null)for(let A=0;A<r.numberOfInputs;A+=1)for(let O=0;O<r.channelCount;O+=1)so(t,f[A],O,O,v);s.parameterDescriptors!==void 0&&t!==null&&s.parameterDescriptors.forEach(({name:A},O)=>{so(t,y,A,c+O,v)});for(let A=0;A<r.numberOfInputs;A+=1)for(let O=0;O<i[A];O+=1)m[A][O].byteLength===0&&(m[A][O]=new Float32Array(128));try{const A=f.map((D,E)=>h.activeInputs[E].size===0?[]:D),O=o(v/e.sampleRate,e.sampleRate,()=>d.process(A,m,y));if(l!==null)for(let D=0,E=0;D<r.numberOfOutputs;D+=1){for(let S=0;S<i[D];S+=1)Dd(l,m[D],S,E+S,v);E+=i[D]}if(!O)break}catch(A){n.dispatchEvent(new ErrorEvent("processorerror",{colno:A.colno,filename:A.filename,lineno:A.lineno,message:A.message}));break}}return l},fv=(n,t,e,r,i,s,o,a,c,u,l,h,d,f,m,y)=>(v,A,O)=>{const D=new WeakMap;let E=null;const S=async(N,C)=>{let U=l(N),z=null;const W=we(U,C),$=Array.isArray(A.outputChannelCount)?A.outputChannelCount:Array.from(A.outputChannelCount);if(h===null){const K=$.reduce((g,I)=>g+I,0),J=i(C,{channelCount:Math.max(1,K),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,K)}),nt=[];for(let g=0;g<N.numberOfOutputs;g+=1)nt.push(r(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:$[g]}));const M=o(C,{channelCount:A.channelCount,channelCountMode:A.channelCountMode,channelInterpretation:A.channelInterpretation,gain:1});M.connect=t.bind(null,nt),M.disconnect=c.bind(null,nt),z=[J,nt,M]}else W||(U=new h(C,v));if(D.set(C,z===null?U:z[2]),z!==null){if(E===null){if(O===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const I=N.channelCount*N.numberOfInputs,T=O.parameterDescriptors===void 0?0:O.parameterDescriptors.length,P=I+T;E=dv(N,P===0?null:await(async()=>{const F=new d(P,Math.ceil(N.context.length/128)*128,C.sampleRate),X=[],et=[];for(let Z=0;Z<A.numberOfInputs;Z+=1)X.push(o(F,{channelCount:A.channelCount,channelCountMode:A.channelCountMode,channelInterpretation:A.channelInterpretation,gain:1})),et.push(i(F,{channelCount:A.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:A.channelCount}));const rt=await Promise.all(Array.from(N.parameters.values()).map(async Z=>{const Et=s(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z.value});return await f(F,Z,Et.offset),Et})),at=r(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,I+T)});for(let Z=0;Z<A.numberOfInputs;Z+=1){X[Z].connect(et[Z]);for(let Et=0;Et<A.channelCount;Et+=1)et[Z].connect(at,Et,Z*A.channelCount+Et)}for(const[Z,Et]of rt.entries())Et.connect(at,0,I+Z),Et.start(0);return at.connect(F.destination),await Promise.all(X.map(Z=>m(N,F,Z))),y(F)})(),C,A,$,O,u)}const K=await E,J=e(C,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[nt,M,g]=z;K!==null&&(J.buffer=K,J.start(0)),J.connect(nt);for(let I=0,T=0;I<N.numberOfOutputs;I+=1){const P=M[I];for(let F=0;F<$[I];F+=1)nt.connect(P,T+F,F);T+=$[I]}return g}if(W)for(const[K,J]of N.parameters.entries())await n(C,J,U.parameters.get(K));else for(const[K,J]of N.parameters.entries())await f(C,J,U.parameters.get(K));return await m(N,C,U),U};return{render(N,C){a(C,N);const U=D.get(C);return U!==void 0?Promise.resolve(U):S(N,C)}}},pv=(n,t,e,r,i,s,o,a,c,u,l,h,d,f,m,y,v,A,O,D)=>class extends m{constructor(E,S){super(E,S),this._nativeContext=E,this._audioWorklet=n===void 0?void 0:{addModule:(N,C)=>n(this,N,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new i(this)}createBuffer(E,S,N){return new e({length:S,numberOfChannels:E,sampleRate:N})}createBufferSource(){return new r(this)}createChannelMerger(E=6){return new s(this,{numberOfInputs:E})}createChannelSplitter(E=6){return new o(this,{numberOfOutputs:E})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(E=1){return new l(this,{maxDelayTime:E})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(E,S){return new f(this,{feedback:S,feedforward:E})}createOscillator(){return new y(this)}createPanner(){return new v(this)}createPeriodicWave(E,S,N={disableNormalization:!1}){return new A(this,{...N,imag:S,real:E})}createStereoPanner(){return new O(this)}createWaveShaper(){return new D(this)}decodeAudioData(E,S,N){return u(this._nativeContext,E).then(C=>(typeof S=="function"&&S(C),C),C=>{throw typeof N=="function"&&N(C),C})}},mv={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},gv=(n,t,e,r,i,s,o,a)=>class extends n{constructor(c,u){const l=s(c),h={...mv,...u},d=i(l,h),f=o(l),m=f?e():null;super(c,!1,d,m),this._Q=t(this,f,d.Q,Ae,Ne),this._detune=t(this,f,d.detune,1200*Math.log2(Ae),-1200*Math.log2(Ae)),this._frequency=t(this,f,d.frequency,c.sampleRate/2,0),this._gain=t(this,f,d.gain,40*Math.log10(Ae),Ne),this._nativeBiquadFilterNode=d,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,u,l){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,u,l)}catch(h){throw h.code===11?r():h}if(c.length!==u.length||u.length!==l.length)throw r()}},vv=(n,t,e,r,i)=>()=>{const s=new WeakMap,o=async(a,c)=>{let u=e(a);const l=we(u,c);if(!l){const h={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=t(c,h)}return s.set(c,u),l?(await n(c,a.Q,u.Q),await n(c,a.detune,u.detune),await n(c,a.frequency,u.frequency),await n(c,a.gain,u.gain)):(await r(c,a.Q,u.Q),await r(c,a.detune,u.detune),await r(c,a.frequency,u.frequency),await r(c,a.gain,u.gain)),await i(a,c,u),u};return{render(a,c){const u=s.get(c);return u!==void 0?Promise.resolve(u):o(a,c)}}},_v=(n,t)=>(e,r)=>{const i=t.get(e);if(i!==void 0)return i;const s=n.get(e);if(s!==void 0)return s;try{const o=r();return o instanceof Promise?(n.set(e,o),o.catch(()=>!1).then(a=>(n.delete(e),t.set(e,a),a))):(t.set(e,o),o)}catch{return t.set(e,!1),!1}},yv={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},bv=(n,t,e,r,i)=>class extends n{constructor(s,o){const a=r(s),c={...yv,...o},u=e(a,c),l=i(a)?t():null;super(s,!1,u,l)}},wv=(n,t,e)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=t(s);if(!we(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,c)}return r.set(o,a),await e(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},Mv={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Tv=(n,t,e,r,i,s)=>class extends n{constructor(o,a){const c=r(o),u=s({...Mv,...a}),l=e(c,u),h=i(c)?t():null;super(o,!1,l,h)}},Av=(n,t,e)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=t(s);if(!we(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,c)}return r.set(o,a),await e(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},xv=n=>(t,e,r)=>n(e,t,r),Sv=n=>(t,e,r=0,i=0)=>{const s=t[r];if(s===void 0)throw n();return io(e)?s.connect(e,0,i):s.connect(e,0)},Cv=n=>(t,e)=>{const r=n(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=t.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(e),r.start(),()=>{r.stop(),r.disconnect(e)}},Ev={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Iv=(n,t,e,r,i,s,o)=>class extends n{constructor(a,c){const u=i(a),l={...Ev,...c},h=r(u,l),d=s(u),f=d?e():null;super(a,!1,h,f),this._constantSourceNodeRenderer=f,this._nativeConstantSourceNode=h,this._offset=t(this,d,h.offset,Ae,Ne),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(a){const c=typeof a=="function"?o(this,a):null;this._nativeConstantSourceNode.onended=c;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===c?a:u}start(a=0){if(this._nativeConstantSourceNode.start(a),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=a),this.context.state!=="closed"){fi(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),On(this)&&ms(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(a=0){this._nativeConstantSourceNode.stop(a),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=a)}},kv=(n,t,e,r,i)=>()=>{const s=new WeakMap;let o=null,a=null;const c=async(u,l)=>{let h=e(u);const d=we(h,l);if(!d){const f={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=t(l,f),o!==null&&h.start(o),a!==null&&h.stop(a)}return s.set(l,h),d?await n(l,u.offset,h.offset):await r(l,u.offset,h.offset),await i(u,l,h),h};return{set start(u){o=u},set stop(u){a=u},render(u,l){const h=s.get(l);return h!==void 0?Promise.resolve(h):c(u,l)}}},Ov=n=>t=>(n[0]=t,n[0]),Pv={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Nv=(n,t,e,r,i,s)=>class extends n{constructor(o,a){const c=r(o),u={...Pv,...a},l=e(c,u),h=i(c)?t():null;super(o,!1,l,h),this._isBufferNullified=!1,this._nativeConvolverNode=l,u.buffer!==null&&s(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(o){if(this._nativeConvolverNode.buffer=o,o===null&&this._nativeConvolverNode.buffer!==null){const a=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=a.createBuffer(1,1,44100),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(o){this._nativeConvolverNode.normalize=o}},Rv=(n,t,e)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=t(s);if(!we(a,o)){const c={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,c)}return r.set(o,a),bi(a)?await e(s,o,a.inputs[0]):await e(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},Dv=(n,t)=>(e,r,i)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,r,i)}catch(s){throw s.name==="SyntaxError"?n():s}},Bv=()=>new DOMException("","DataCloneError"),Ml=n=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(r=>{const i=()=>{e.onmessage=null,t.close(),e.close(),r()};e.onmessage=()=>i();try{t.postMessage(n,[n])}finally{i()}})},Fv=(n,t,e,r,i,s,o,a,c,u,l)=>(h,d)=>{const f=o(h)?h:s(h);if(i.has(d)){const m=e();return Promise.reject(m)}try{i.add(d)}catch{}return t(c,()=>c(f))?f.decodeAudioData(d).then(m=>(Ml(d).catch(()=>{}),t(a,()=>a(m))||l(m),n.add(m),m)):new Promise((m,y)=>{const v=async()=>{try{await Ml(d)}catch{}},A=O=>{y(O),v()};try{f.decodeAudioData(d,O=>{typeof O.copyFromChannel!="function"&&(u(O),$c(O)),n.add(O),v().then(()=>m(O))},O=>{A(O===null?r():O)})}catch(O){A(O)}})},$v=(n,t,e,r,i,s,o,a)=>(c,u)=>{const l=t.get(c);if(l===void 0)throw new Error("Missing the expected cycle count.");const h=s(c.context),d=a(h);if(l===u){if(t.delete(c),!d&&o(c)){const f=r(c),{outputs:m}=e(c);for(const y of m)if(vs(y)){const v=r(y[0]);n(f,v,y[1],y[2])}else{const v=i(y[0]);f.connect(v,y[1])}}}else t.set(c,l-u)},Vv={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},jv=(n,t,e,r,i,s,o)=>class extends n{constructor(a,c){const u=i(a),l={...Vv,...c},h=r(u,l),d=s(u),f=d?e(l.maxDelayTime):null;super(a,!1,h,f),this._delayTime=t(this,d,h.delayTime),o(this,l.maxDelayTime)}get delayTime(){return this._delayTime}},Uv=(n,t,e,r,i)=>s=>{const o=new WeakMap,a=async(c,u)=>{let l=e(c);const h=we(l,u);if(!h){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:s};l=t(u,d)}return o.set(u,l),h?await n(u,c.delayTime,l.delayTime):await r(u,c.delayTime,l.delayTime),await i(c,u,l),l};return{render(c,u){const l=o.get(u);return l!==void 0?Promise.resolve(l):a(c,u)}}},qv=n=>(t,e,r,i)=>n(t[i],s=>s[0]===e&&s[1]===r),Lv=n=>(t,e)=>{n(t).delete(e)},zv=n=>"delayTime"in n,Wv=(n,t,e)=>function r(i,s){const o=eo(s)?s:e(n,s);if(zv(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];const{outputs:a}=t(o);return Array.from(a).map(c=>r([...i,o],c[0])).reduce((c,u)=>c.concat(u),[])},Ns=(n,t,e)=>{const r=t[e];if(r===void 0)throw n();return r},Hv=n=>(t,e=void 0,r=void 0,i=0)=>e===void 0?t.forEach(s=>s.disconnect()):typeof e=="number"?Ns(n,t,e).disconnect():io(e)?r===void 0?t.forEach(s=>s.disconnect(e)):i===void 0?Ns(n,t,r).disconnect(e,0):Ns(n,t,r).disconnect(e,0,i):r===void 0?t.forEach(s=>s.disconnect(e)):Ns(n,t,r).disconnect(e,0),Gv={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Yv=(n,t,e,r,i,s,o,a)=>class extends n{constructor(c,u){const l=s(c),h={...Gv,...u},d=r(l,h),f=o(l),m=f?e():null;super(c,!1,d,m),this._attack=t(this,f,d.attack),this._knee=t(this,f,d.knee),this._nativeDynamicsCompressorNode=d,this._ratio=t(this,f,d.ratio),this._release=t(this,f,d.release),this._threshold=t(this,f,d.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Xv=(n,t,e,r,i)=>()=>{const s=new WeakMap,o=async(a,c)=>{let u=e(a);const l=we(u,c);if(!l){const h={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=t(c,h)}return s.set(c,u),l?(await n(c,a.attack,u.attack),await n(c,a.knee,u.knee),await n(c,a.ratio,u.ratio),await n(c,a.release,u.release),await n(c,a.threshold,u.threshold)):(await r(c,a.attack,u.attack),await r(c,a.knee,u.knee),await r(c,a.ratio,u.ratio),await r(c,a.release,u.release),await r(c,a.threshold,u.threshold)),await i(a,c,u),u};return{render(a,c){const u=s.get(c);return u!==void 0?Promise.resolve(u):o(a,c)}}},Zv=()=>new DOMException("","EncodingError"),Jv=n=>t=>new Promise((e,r)=>{if(n===null){r(new SyntaxError);return}const i=n.document.head;if(i===null)r(new SyntaxError);else{const s=n.document.createElement("script"),o=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(o),c=n.onerror,u=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(l,h,d,f,m)=>{if(h===a||h===n.location.href&&d===1&&f===1)return u(),r(m),!1;if(c!==null)return c(l,h,d,f,m)},s.onerror=()=>{u(),r(new SyntaxError)},s.onload=()=>{u(),e()},s.src=a,s.type="module",i.appendChild(s)}}),Qv=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,e,r){if(e!==null){let i=this._listeners.get(e);i===void 0&&(i=n(this,e),typeof e=="function"&&this._listeners.set(e,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,r){const i=e===null?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},Kv=n=>(t,e,r)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(t*e)}},currentTime:{configurable:!0,get(){return t}}});try{return r()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},t_=n=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw n()},e_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},n_=(n,t,e,r,i,s)=>class extends n{constructor(o,a){const c=i(o),u={...e_,...a},l=r(c,u),h=s(c),d=h?e():null;super(o,!1,l,d),this._gain=t(this,h,l.gain,Ae,Ne)}get gain(){return this._gain}},r_=(n,t,e,r,i)=>()=>{const s=new WeakMap,o=async(a,c)=>{let u=e(a);const l=we(u,c);if(!l){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=t(c,h)}return s.set(c,u),l?await n(c,a.gain,u.gain):await r(c,a.gain,u.gain),await i(a,c,u),u};return{render(a,c){const u=s.get(c);return u!==void 0?Promise.resolve(u):o(a,c)}}},i_=(n,t)=>e=>t(n,e),s_=n=>t=>{const e=n(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},o_=n=>t=>{var e;return(e=n.get(t))!==null&&e!==void 0?e:0},a_=n=>t=>{const e=n(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},c_=n=>t=>n.get(t),he=()=>new DOMException("","InvalidStateError"),u_=n=>t=>{const e=n.get(t);if(e===void 0)throw he();return e},l_=(n,t)=>e=>{let r=n.get(e);if(r!==void 0)return r;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new t(1,1,44100),n.set(e,r),r},h_=n=>t=>{const e=n.get(t);if(e===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return e},Bo=()=>new DOMException("","InvalidAccessError"),d_=n=>{n.getFrequencyResponse=(t=>(e,r,i)=>{if(e.length!==r.length||r.length!==i.length)throw Bo();return t.call(n,e,r,i)})(n.getFrequencyResponse)},f_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},p_=(n,t,e,r,i,s)=>class extends n{constructor(o,a){const c=r(o),u=i(c),l={...f_,...a},h=t(c,u?null:o.baseLatency,l),d=u?e(l.feedback,l.feedforward):null;super(o,!1,h,d),d_(h),this._nativeIIRFilterNode=h,s(this,1)}getFrequencyResponse(o,a,c){return this._nativeIIRFilterNode.getFrequencyResponse(o,a,c)}},Bd=(n,t,e,r,i,s,o,a,c,u,l)=>{const h=u.length;let d=a;for(let f=0;f<h;f+=1){let m=e[0]*u[f];for(let y=1;y<i;y+=1){const v=d-y&c-1;m+=e[y]*s[v],m-=n[y]*o[v]}for(let y=i;y<r;y+=1)m+=e[y]*s[d-y&c-1];for(let y=i;y<t;y+=1)m-=n[y]*o[d-y&c-1];s[d]=u[f],o[d]=m,d=d+1&c-1,l[f]=m}return d},m_=(n,t,e,r)=>{const i=e instanceof Float64Array?e:new Float64Array(e),s=r instanceof Float64Array?r:new Float64Array(r),o=i.length,a=s.length,c=Math.min(o,a);if(i[0]!==1){for(let m=0;m<o;m+=1)s[m]/=i[0];for(let m=1;m<a;m+=1)i[m]/=i[0]}const u=32,l=new Float32Array(u),h=new Float32Array(u),d=t.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let m=0;m<f;m+=1){const y=n.getChannelData(m),v=d.getChannelData(m);l.fill(0),h.fill(0),Bd(i,o,s,a,c,l,h,0,u,y,v)}return d},g_=(n,t,e,r,i)=>(s,o)=>{const a=new WeakMap;let c=null;const u=async(l,h)=>{let d=null,f=t(l);const m=we(f,h);if(h.createIIRFilter===void 0?d=n(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):m||(f=h.createIIRFilter(o,s)),a.set(h,d===null?f:d),d!==null){if(c===null){if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");const v=new e(l.context.destination.channelCount,l.context.length,h.sampleRate);c=(async()=>{await r(l,v,v.destination);const A=await i(v);return m_(A,h,s,o)})()}const y=await c;return d.buffer=y,d.start(0),d}return await r(l,h,f),f};return{render(l,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):u(l,h)}}},v_=(n,t,e,r,i,s)=>o=>(a,c)=>{const u=n.get(a);if(u===void 0){if(!o&&s(a)){const l=r(a),{outputs:h}=e(a);for(const d of h)if(vs(d)){const f=r(d[0]);t(l,f,d[1],d[2])}else{const f=i(d[0]);l.disconnect(f,d[1])}}n.set(a,c)}else n.set(a,u+c)},__=(n,t)=>e=>{const r=n.get(e);return t(r)||t(e)},y_=(n,t)=>e=>n.has(e)||t(e),b_=(n,t)=>e=>n.has(e)||t(e),w_=(n,t)=>e=>{const r=n.get(e);return t(r)||t(e)},M_=n=>t=>n!==null&&t instanceof n,T_=n=>t=>n!==null&&typeof n.AudioNode=="function"&&t instanceof n.AudioNode,A_=n=>t=>n!==null&&typeof n.AudioParam=="function"&&t instanceof n.AudioParam,x_=(n,t)=>e=>n(e)||t(e),S_=n=>t=>n!==null&&t instanceof n,C_=n=>n!==null&&n.isSecureContext,E_=(n,t,e,r)=>class extends n{constructor(i,s){const o=e(i),a=t(o,s);if(r(o))throw TypeError();super(i,!0,a,null),this._nativeMediaElementAudioSourceNode=a}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},I_={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},k_=(n,t,e,r)=>class extends n{constructor(i,s){const o=e(i);if(r(o))throw new TypeError;const a={...I_,...s},c=t(o,a);super(i,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},O_=(n,t,e,r)=>class extends n{constructor(i,s){const o=e(i),a=t(o,s);if(r(o))throw new TypeError;super(i,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},P_=(n,t,e)=>class extends n{constructor(r,i){const s=e(r),o=t(s,i);super(r,!0,o,null)}},N_=(n,t,e,r,i,s)=>class extends e{constructor(o,a){super(o),this._nativeContext=o,Ro.set(this,o),r(o)&&i.set(o,new Set),this._destination=new n(this,a),this._listener=t(this,o),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(o){const a=typeof o=="function"?s(this,o):null;this._nativeContext.onstatechange=a;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===a?o:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Ji=n=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=n.decodeAudioData(t.buffer,()=>{});return e===void 0?!1:(e.catch(()=>{}),!0)}catch{}return!1},R_=(n,t)=>(e,r,i)=>{const s=new Set;return e.connect=(o=>(a,c=0,u=0)=>{const l=s.size===0;if(t(a))return o.call(e,a,c,u),n(s,[a,c,u],h=>h[0]===a&&h[1]===c&&h[2]===u,!0),l&&r(),a;o.call(e,a,c),n(s,[a,c],h=>h[0]===a&&h[1]===c,!0),l&&r()})(e.connect),e.disconnect=(o=>(a,c,u)=>{const l=s.size>0;if(a===void 0)o.apply(e),s.clear();else if(typeof a=="number"){o.call(e,a);for(const d of s)d[1]===a&&s.delete(d)}else{t(a)?o.call(e,a,c,u):o.call(e,a,c);for(const d of s)d[0]===a&&(c===void 0||d[1]===c)&&(u===void 0||d[2]===u)&&s.delete(d)}const h=s.size===0;l&&h&&i()})(e.disconnect),e},Zt=(n,t,e)=>{const r=t[e];r!==void 0&&r!==n[e]&&(n[e]=r)},oe=(n,t)=>{Zt(n,t,"channelCount"),Zt(n,t,"channelCountMode"),Zt(n,t,"channelInterpretation")},Tl=n=>typeof n.getFloatTimeDomainData=="function",D_=n=>{n.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);n.getByteTimeDomainData(e);const r=Math.max(e.length,n.fftSize);for(let i=0;i<r;i+=1)t[i]=(e[i]-128)*.0078125;return t}},B_=(n,t)=>(e,r)=>{const i=e.createAnalyser();if(oe(i,r),!(r.maxDecibels>r.minDecibels))throw t();return Zt(i,r,"fftSize"),Zt(i,r,"maxDecibels"),Zt(i,r,"minDecibels"),Zt(i,r,"smoothingTimeConstant"),n(Tl,()=>Tl(i))||D_(i),i},F_=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,Jt=(n,t,e)=>{const r=t[e];r!==void 0&&r!==n[e].value&&(n[e].value=r)},$_=n=>{n.start=(t=>{let e=!1;return(r=0,i=0,s)=>{if(e)throw he();t.call(n,r,i,s),e=!0}})(n.start)},Uc=n=>{n.start=(t=>(e=0,r=0,i)=>{if(typeof i=="number"&&i<0||r<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(n,e,r,i)})(n.start)},qc=n=>{n.stop=(t=>(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(n,e)})(n.stop)},V_=(n,t,e,r,i,s,o,a,c,u,l)=>(h,d)=>{const f=h.createBufferSource();return oe(f,d),Jt(f,d,"playbackRate"),Zt(f,d,"buffer"),Zt(f,d,"loop"),Zt(f,d,"loopEnd"),Zt(f,d,"loopStart"),t(e,()=>e(h))||$_(f),t(r,()=>r(h))||c(f),t(i,()=>i(h))||u(f,h),t(s,()=>s(h))||Uc(f),t(o,()=>o(h))||l(f,h),t(a,()=>a(h))||qc(f),n(h,f),f},j_=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,U_=(n,t)=>(e,r,i)=>{const s=e.destination;if(s.channelCount!==r)try{s.channelCount=r}catch{}i&&s.channelCountMode!=="explicit"&&(s.channelCountMode="explicit"),s.maxChannelCount===0&&Object.defineProperty(s,"maxChannelCount",{value:r});const o=n(e,{channelCount:r,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return t(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{s.channelCount=c}catch(u){if(c>s.maxChannelCount)throw u}}),t(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),s.channelCountMode=c}),t(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),s.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>s.maxChannelCount}),o.connect(s),o},q_=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,L_=n=>{const{port1:t}=new MessageChannel;try{t.postMessage(n)}finally{t.close()}},z_=(n,t,e,r,i)=>(s,o,a,c,u,l)=>{if(a!==null)try{const h=new a(s,c,l),d=new Map;let f=null;if(Object.defineProperties(h,{channelCount:{get:()=>l.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>f,set:m=>{typeof f=="function"&&h.removeEventListener("processorerror",f),f=typeof m=="function"?m:null,typeof f=="function"&&h.addEventListener("processorerror",f)}}}),h.addEventListener=(m=>(...y)=>{if(y[0]==="processorerror"){const v=typeof y[1]=="function"?y[1]:typeof y[1]=="object"&&y[1]!==null&&typeof y[1].handleEvent=="function"?y[1].handleEvent:null;if(v!==null){const A=d.get(y[1]);A!==void 0?y[1]=A:(y[1]=O=>{O.type==="error"?(Object.defineProperties(O,{type:{value:"processorerror"}}),v(O)):v(new ErrorEvent(y[0],{...O}))},d.set(v,y[1]))}}return m.call(h,"error",y[1],y[2]),m.call(h,...y)})(h.addEventListener),h.removeEventListener=(m=>(...y)=>{if(y[0]==="processorerror"){const v=d.get(y[1]);v!==void 0&&(d.delete(y[1]),y[1]=v)}return m.call(h,"error",y[1],y[2]),m.call(h,y[0],y[1],y[2])})(h.removeEventListener),l.numberOfOutputs!==0){const m=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(m).connect(s.destination),i(h,()=>m.disconnect(),()=>m.connect(s.destination))}return h}catch(h){throw h.code===11?r():h}if(u===void 0)throw r();return L_(l),t(s,o,u,l)},Fd=(n,t)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*t))))),W_=n=>new Promise((t,e)=>{const{port1:r,port2:i}=new MessageChannel;r.onmessage=({data:s})=>{r.close(),i.close(),t(s)},r.onmessageerror=({data:s})=>{r.close(),i.close(),e(s)},i.postMessage(n)}),H_=async(n,t)=>{const e=await W_(t);return new n(e)},G_=(n,t,e,r)=>{let i=Qa.get(n);i===void 0&&(i=new WeakMap,Qa.set(n,i));const s=H_(e,r);return i.set(t,s),s},Y_=(n,t,e,r,i,s,o,a,c,u,l,h,d)=>(f,m,y,v)=>{if(v.numberOfInputs===0&&v.numberOfOutputs===0)throw c();const A=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(A.some(b=>b<1))throw c();if(A.length!==v.numberOfOutputs)throw t();if(v.channelCountMode!=="explicit")throw c();const O=v.channelCount*v.numberOfInputs,D=A.reduce((b,k)=>b+k,0),E=y.parameterDescriptors===void 0?0:y.parameterDescriptors.length;if(O+E>6||D>6)throw c();const S=new MessageChannel,N=[],C=[];for(let b=0;b<v.numberOfInputs;b+=1)N.push(o(f,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),C.push(i(f,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const U=[];if(y.parameterDescriptors!==void 0)for(const{defaultValue:b,maxValue:k,minValue:j,name:V}of y.parameterDescriptors){const q=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:v.parameterData[V]!==void 0?v.parameterData[V]:b===void 0?0:b});Object.defineProperties(q.offset,{defaultValue:{get:()=>b===void 0?0:b},maxValue:{get:()=>k===void 0?Ae:k},minValue:{get:()=>j===void 0?Ne:j}}),U.push(q)}const z=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,O+E)}),W=Fd(m,f.sampleRate),$=a(f,W,O+E,Math.max(1,D)),K=i(f,{channelCount:Math.max(1,D),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,D)}),J=[];for(let b=0;b<v.numberOfOutputs;b+=1)J.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[b]}));for(let b=0;b<v.numberOfInputs;b+=1){N[b].connect(C[b]);for(let k=0;k<v.channelCount;k+=1)C[b].connect(z,k,b*v.channelCount+k)}const nt=new Rd(y.parameterDescriptors===void 0?[]:y.parameterDescriptors.map(({name:b},k)=>{const j=U[k];return j.connect(z,0,O+k),j.start(0),[b,j.offset]}));z.connect($);let M=v.channelInterpretation,g=null;const I=v.numberOfOutputs===0?[$]:J,T={get bufferSize(){return W},get channelCount(){return v.channelCount},set channelCount(b){throw e()},get channelCountMode(){return v.channelCountMode},set channelCountMode(b){throw e()},get channelInterpretation(){return M},set channelInterpretation(b){for(const k of N)k.channelInterpretation=b;M=b},get context(){return $.context},get inputs(){return N},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return g},set onprocessorerror(b){typeof g=="function"&&T.removeEventListener("processorerror",g),g=typeof b=="function"?b:null,typeof g=="function"&&T.addEventListener("processorerror",g)},get parameters(){return nt},get port(){return S.port2},addEventListener(...b){return $.addEventListener(b[0],b[1],b[2])},connect:n.bind(null,I),disconnect:u.bind(null,I),dispatchEvent(...b){return $.dispatchEvent(b[0])},removeEventListener(...b){return $.removeEventListener(b[0],b[1],b[2])}},P=new Map;S.port1.addEventListener=(b=>(...k)=>{if(k[0]==="message"){const j=typeof k[1]=="function"?k[1]:typeof k[1]=="object"&&k[1]!==null&&typeof k[1].handleEvent=="function"?k[1].handleEvent:null;if(j!==null){const V=P.get(k[1]);V!==void 0?k[1]=V:(k[1]=q=>{l(f.currentTime,f.sampleRate,()=>j(q))},P.set(j,k[1]))}}return b.call(S.port1,k[0],k[1],k[2])})(S.port1.addEventListener),S.port1.removeEventListener=(b=>(...k)=>{if(k[0]==="message"){const j=P.get(k[1]);j!==void 0&&(P.delete(k[1]),k[1]=j)}return b.call(S.port1,k[0],k[1],k[2])})(S.port1.removeEventListener);let F=null;Object.defineProperty(S.port1,"onmessage",{get:()=>F,set:b=>{typeof F=="function"&&S.port1.removeEventListener("message",F),F=typeof b=="function"?b:null,typeof F=="function"&&(S.port1.addEventListener("message",F),S.port1.start())}}),y.prototype.port=S.port1;let X=null;G_(f,T,y,v).then(b=>X=b);const et=oo(v.numberOfInputs,v.channelCount),rt=oo(v.numberOfOutputs,A),at=y.parameterDescriptors===void 0?[]:y.parameterDescriptors.reduce((b,{name:k})=>({...b,[k]:new Float32Array(128)}),{});let Z=!0;const Et=()=>{v.numberOfOutputs>0&&$.disconnect(K);for(let b=0,k=0;b<v.numberOfOutputs;b+=1){const j=J[b];for(let V=0;V<A[b];V+=1)K.disconnect(j,k+V,V);k+=A[b]}},gt=new Map;$.onaudioprocess=({inputBuffer:b,outputBuffer:k})=>{if(X!==null){const j=h(T);for(let V=0;V<W;V+=128){for(let q=0;q<v.numberOfInputs;q+=1)for(let G=0;G<v.channelCount;G+=1)so(b,et[q],G,G,V);y.parameterDescriptors!==void 0&&y.parameterDescriptors.forEach(({name:q},G)=>{so(b,at,q,O+G,V)});for(let q=0;q<v.numberOfInputs;q+=1)for(let G=0;G<A[q];G+=1)rt[q][G].byteLength===0&&(rt[q][G]=new Float32Array(128));try{const q=et.map((G,Y)=>{if(j[Y].size>0)return gt.set(Y,W/128),G;const Q=gt.get(Y);return Q===void 0?[]:(G.every(H=>H.every(dt=>dt===0))&&(Q===1?gt.delete(Y):gt.set(Y,Q-1)),G)});Z=l(f.currentTime+V/f.sampleRate,f.sampleRate,()=>X.process(q,rt,at));for(let G=0,Y=0;G<v.numberOfOutputs;G+=1){for(let Q=0;Q<A[G];Q+=1)Dd(k,rt[G],Q,Y+Q,V);Y+=A[G]}}catch(q){Z=!1,T.dispatchEvent(new ErrorEvent("processorerror",{colno:q.colno,filename:q.filename,lineno:q.lineno,message:q.message}))}if(!Z){for(let q=0;q<v.numberOfInputs;q+=1){N[q].disconnect(C[q]);for(let G=0;G<v.channelCount;G+=1)C[V].disconnect(z,G,q*v.channelCount+G)}if(y.parameterDescriptors!==void 0){const q=y.parameterDescriptors.length;for(let G=0;G<q;G+=1){const Y=U[G];Y.disconnect(z,0,O+G),Y.stop()}}z.disconnect($),$.onaudioprocess=null,ct?Et():ve();break}}}};let ct=!1;const Ht=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),qt=()=>$.connect(Ht).connect(f.destination),ve=()=>{$.disconnect(Ht),Ht.disconnect()},Bt=()=>{if(Z){ve(),v.numberOfOutputs>0&&$.connect(K);for(let b=0,k=0;b<v.numberOfOutputs;b+=1){const j=J[b];for(let V=0;V<A[b];V+=1)K.connect(j,k+V,V);k+=A[b]}}ct=!0},w=()=>{Z&&(qt(),Et()),ct=!1};return qt(),d(T,Bt,w)},$d=(n,t)=>{const e=n.createBiquadFilter();return oe(e,t),Jt(e,t,"Q"),Jt(e,t,"detune"),Jt(e,t,"frequency"),Jt(e,t,"gain"),Zt(e,t,"type"),e},X_=(n,t)=>(e,r)=>{const i=e.createChannelMerger(r.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&t(e,i),oe(i,r),i},Z_=n=>{const t=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw he()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:e=>{if(e!=="explicit")throw he()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:e=>{if(e!=="discrete")throw he()}})},_s=(n,t)=>{const e=n.createChannelSplitter(t.numberOfOutputs);return oe(e,t),Z_(e),e},J_=(n,t,e,r,i)=>(s,o)=>{if(s.createConstantSource===void 0)return e(s,o);const a=s.createConstantSource();return oe(a,o),Jt(a,o,"offset"),t(r,()=>r(s))||Uc(a),t(i,()=>i(s))||qc(a),n(s,a),a},wi=(n,t)=>(n.connect=t.connect.bind(t),n.disconnect=t.disconnect.bind(t),n),Q_=(n,t,e,r)=>(i,{offset:s,...o})=>{const a=i.createBuffer(1,2,44100),c=t(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=e(i,{...o,gain:s}),l=a.getChannelData(0);l[0]=1,l[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(m){u.channelCount=m},get channelCountMode(){return u.channelCountMode},set channelCountMode(m){u.channelCountMode=m},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(m){u.channelInterpretation=m},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return c.onended},set onended(m){c.onended=m},addEventListener(...m){return c.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return c.dispatchEvent(m[0])},removeEventListener(...m){return c.removeEventListener(m[0],m[1],m[2])},start(m=0){c.start.call(c,m)},stop(m=0){c.stop.call(c,m)}},d=()=>c.connect(u),f=()=>c.disconnect(u);return n(i,c),r(wi(h,u),d,f)},K_=(n,t)=>(e,r)=>{const i=e.createConvolver();if(oe(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),Zt(i,r,"buffer"),r.channelCount>2||(t(i,"channelCount",s=>()=>s.call(i),s=>o=>{if(o>2)throw n();return s.call(i,o)}),r.channelCountMode==="max"))throw n();return t(i,"channelCountMode",s=>()=>s.call(i),s=>o=>{if(o==="max")throw n();return s.call(i,o)}),i},Vd=(n,t)=>{const e=n.createDelay(t.maxDelayTime);return oe(e,t),Jt(e,t,"delayTime"),e},t1=n=>(t,e)=>{const r=t.createDynamicsCompressor();if(oe(r,e),e.channelCount>2||e.channelCountMode==="max")throw n();return Jt(r,e,"attack"),Jt(r,e,"knee"),Jt(r,e,"ratio"),Jt(r,e,"release"),Jt(r,e,"threshold"),r},Be=(n,t)=>{const e=n.createGain();return oe(e,t),Jt(e,t,"gain"),e},e1=n=>(t,e,r)=>{if(t.createIIRFilter===void 0)return n(t,e,r);const i=t.createIIRFilter(r.feedforward,r.feedback);return oe(i,r),i};function n1(n,t){const e=t[0]*t[0]+t[1]*t[1];return[(n[0]*t[0]+n[1]*t[1])/e,(n[1]*t[0]-n[0]*t[1])/e]}function r1(n,t){return[n[0]*t[0]-n[1]*t[1],n[0]*t[1]+n[1]*t[0]]}function Al(n,t){let e=[0,0];for(let r=n.length-1;r>=0;r-=1)e=r1(e,t),e[0]+=n[r];return e}const i1=(n,t,e,r)=>(i,s,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:u,feedforward:l})=>{const h=Fd(s,i.sampleRate),d=u instanceof Float64Array?u:new Float64Array(u),f=l instanceof Float64Array?l:new Float64Array(l),m=d.length,y=f.length,v=Math.min(m,y);if(m===0||m>20)throw r();if(d[0]===0)throw t();if(y===0||y>20)throw r();if(f[0]===0)throw t();if(d[0]!==1){for(let C=0;C<y;C+=1)f[C]/=d[0];for(let C=1;C<m;C+=1)d[C]/=d[0]}const A=e(i,h,o,o);A.channelCount=o,A.channelCountMode=a,A.channelInterpretation=c;const O=32,D=[],E=[],S=[];for(let C=0;C<o;C+=1){D.push(0);const U=new Float32Array(O),z=new Float32Array(O);U.fill(0),z.fill(0),E.push(U),S.push(z)}A.onaudioprocess=C=>{const U=C.inputBuffer,z=C.outputBuffer,W=U.numberOfChannels;for(let $=0;$<W;$+=1){const K=U.getChannelData($),J=z.getChannelData($);D[$]=Bd(d,m,f,y,v,E[$],S[$],D[$],O,K,J)}};const N=i.sampleRate/2;return wi({get bufferSize(){return h},get channelCount(){return A.channelCount},set channelCount(C){A.channelCount=C},get channelCountMode(){return A.channelCountMode},set channelCountMode(C){A.channelCountMode=C},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(C){A.channelInterpretation=C},get context(){return A.context},get inputs(){return[A]},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},addEventListener(...C){return A.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return A.dispatchEvent(C[0])},getFrequencyResponse(C,U,z){if(C.length!==U.length||U.length!==z.length)throw n();const W=C.length;for(let $=0;$<W;$+=1){const K=-Math.PI*(C[$]/N),J=[Math.cos(K),Math.sin(K)],nt=Al(f,J),M=Al(d,J),g=n1(nt,M);U[$]=Math.sqrt(g[0]*g[0]+g[1]*g[1]),z[$]=Math.atan2(g[1],g[0])}},removeEventListener(...C){return A.removeEventListener(C[0],C[1],C[2])}},A)},s1=(n,t)=>n.createMediaElementSource(t.mediaElement),o1=(n,t)=>{const e=n.createMediaStreamDestination();return oe(e,t),e.numberOfOutputs===1&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e},a1=(n,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((s,o)=>s.id<o.id?-1:s.id>o.id?1:0);const r=e.slice(0,1),i=n.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:t}),i},c1=(n,t)=>(e,{mediaStreamTrack:r})=>{if(typeof e.createMediaStreamTrackSource=="function")return e.createMediaStreamTrackSource(r);const i=new MediaStream([r]),s=e.createMediaStreamSource(i);if(r.kind!=="audio")throw n();if(t(e))throw new TypeError;return s},u1=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,l1=(n,t,e,r,i,s)=>(o,a)=>{const c=o.createOscillator();return oe(c,a),Jt(c,a,"detune"),Jt(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Zt(c,a,"type"),t(e,()=>e(o))||Uc(c),t(r,()=>r(o))||s(c,o),t(i,()=>i(o))||qc(c),n(o,c),c},h1=n=>(t,e)=>{const r=t.createPanner();return r.orientationX===void 0?n(t,e):(oe(r,e),Jt(r,e,"orientationX"),Jt(r,e,"orientationY"),Jt(r,e,"orientationZ"),Jt(r,e,"positionX"),Jt(r,e,"positionY"),Jt(r,e,"positionZ"),Zt(r,e,"coneInnerAngle"),Zt(r,e,"coneOuterAngle"),Zt(r,e,"coneOuterGain"),Zt(r,e,"distanceModel"),Zt(r,e,"maxDistance"),Zt(r,e,"panningModel"),Zt(r,e,"refDistance"),Zt(r,e,"rolloffFactor"),r)},d1=(n,t,e,r,i,s,o,a,c,u)=>(l,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:f,distanceModel:m,maxDistance:y,orientationX:v,orientationY:A,orientationZ:O,panningModel:D,positionX:E,positionY:S,positionZ:N,refDistance:C,rolloffFactor:U,...z})=>{const W=l.createPanner();if(z.channelCount>2||z.channelCountMode==="max")throw o();oe(W,z);const $={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},K=e(l,{...$,channelInterpretation:"speakers",numberOfInputs:6}),J=r(l,{...z,gain:1}),nt=r(l,{...$,gain:1}),M=r(l,{...$,gain:0}),g=r(l,{...$,gain:0}),I=r(l,{...$,gain:0}),T=r(l,{...$,gain:0}),P=r(l,{...$,gain:0}),F=i(l,256,6,1),X=s(l,{...$,curve:new Float32Array([1,1]),oversample:"none"});let et=[v,A,O],rt=[E,S,N];const at=new Float32Array(1);F.onaudioprocess=({inputBuffer:ct})=>{const Ht=[c(ct,at,0),c(ct,at,1),c(ct,at,2)];Ht.some((ve,Bt)=>ve!==et[Bt])&&(W.setOrientation(...Ht),et=Ht);const qt=[c(ct,at,3),c(ct,at,4),c(ct,at,5)];qt.some((ve,Bt)=>ve!==rt[Bt])&&(W.setPosition(...qt),rt=qt)},Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(g.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(T.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0});const Z={get bufferSize(){},get channelCount(){return W.channelCount},set channelCount(ct){if(ct>2)throw o();J.channelCount=ct,W.channelCount=ct},get channelCountMode(){return W.channelCountMode},set channelCountMode(ct){if(ct==="max")throw o();J.channelCountMode=ct,W.channelCountMode=ct},get channelInterpretation(){return W.channelInterpretation},set channelInterpretation(ct){J.channelInterpretation=ct,W.channelInterpretation=ct},get coneInnerAngle(){return W.coneInnerAngle},set coneInnerAngle(ct){W.coneInnerAngle=ct},get coneOuterAngle(){return W.coneOuterAngle},set coneOuterAngle(ct){W.coneOuterAngle=ct},get coneOuterGain(){return W.coneOuterGain},set coneOuterGain(ct){if(ct<0||ct>1)throw t();W.coneOuterGain=ct},get context(){return W.context},get distanceModel(){return W.distanceModel},set distanceModel(ct){W.distanceModel=ct},get inputs(){return[J]},get maxDistance(){return W.maxDistance},set maxDistance(ct){if(ct<0)throw new RangeError;W.maxDistance=ct},get numberOfInputs(){return W.numberOfInputs},get numberOfOutputs(){return W.numberOfOutputs},get orientationX(){return nt.gain},get orientationY(){return M.gain},get orientationZ(){return g.gain},get panningModel(){return W.panningModel},set panningModel(ct){W.panningModel=ct},get positionX(){return I.gain},get positionY(){return T.gain},get positionZ(){return P.gain},get refDistance(){return W.refDistance},set refDistance(ct){if(ct<0)throw new RangeError;W.refDistance=ct},get rolloffFactor(){return W.rolloffFactor},set rolloffFactor(ct){if(ct<0)throw new RangeError;W.rolloffFactor=ct},addEventListener(...ct){return J.addEventListener(ct[0],ct[1],ct[2])},dispatchEvent(...ct){return J.dispatchEvent(ct[0])},removeEventListener(...ct){return J.removeEventListener(ct[0],ct[1],ct[2])}};h!==Z.coneInnerAngle&&(Z.coneInnerAngle=h),d!==Z.coneOuterAngle&&(Z.coneOuterAngle=d),f!==Z.coneOuterGain&&(Z.coneOuterGain=f),m!==Z.distanceModel&&(Z.distanceModel=m),y!==Z.maxDistance&&(Z.maxDistance=y),v!==Z.orientationX.value&&(Z.orientationX.value=v),A!==Z.orientationY.value&&(Z.orientationY.value=A),O!==Z.orientationZ.value&&(Z.orientationZ.value=O),D!==Z.panningModel&&(Z.panningModel=D),E!==Z.positionX.value&&(Z.positionX.value=E),S!==Z.positionY.value&&(Z.positionY.value=S),N!==Z.positionZ.value&&(Z.positionZ.value=N),C!==Z.refDistance&&(Z.refDistance=C),U!==Z.rolloffFactor&&(Z.rolloffFactor=U),(et[0]!==1||et[1]!==0||et[2]!==0)&&W.setOrientation(...et),(rt[0]!==0||rt[1]!==0||rt[2]!==0)&&W.setPosition(...rt);const Et=()=>{J.connect(W),n(J,X,0,0),X.connect(nt).connect(K,0,0),X.connect(M).connect(K,0,1),X.connect(g).connect(K,0,2),X.connect(I).connect(K,0,3),X.connect(T).connect(K,0,4),X.connect(P).connect(K,0,5),K.connect(F).connect(l.destination)},gt=()=>{J.disconnect(W),a(J,X,0,0),X.disconnect(nt),nt.disconnect(K),X.disconnect(M),M.disconnect(K),X.disconnect(g),g.disconnect(K),X.disconnect(I),I.disconnect(K),X.disconnect(T),T.disconnect(K),X.disconnect(P),P.disconnect(K),K.disconnect(F),F.disconnect(l.destination)};return u(wi(Z,W),Et,gt)},f1=n=>(t,{disableNormalization:e,imag:r,real:i})=>{const s=r instanceof Float32Array?r:new Float32Array(r),o=i instanceof Float32Array?i:new Float32Array(i),a=t.createPeriodicWave(o,s,{disableNormalization:e});if(Array.from(r).length<2)throw n();return a},ys=(n,t,e,r)=>n.createScriptProcessor(t,e,r),p1=(n,t)=>(e,r)=>{const i=r.channelCountMode;if(i==="clamped-max")throw t();if(e.createStereoPanner===void 0)return n(e,r);const s=e.createStereoPanner();return oe(s,r),Jt(s,r,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>i,set:o=>{if(o!==i)throw t()}}),s},m1=(n,t,e,r,i,s)=>{const o=new Float32Array([1,1]),a=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},l=(f,m,y,v)=>{const A=new Float32Array(16385),O=new Float32Array(16385);for(let U=0;U<16385;U+=1){const z=U/16384*a;A[U]=Math.cos(z),O[U]=Math.sin(z)}const D=e(f,{...c,gain:0}),E=r(f,{...u,curve:A}),S=r(f,{...u,curve:o}),N=e(f,{...c,gain:0}),C=r(f,{...u,curve:O});return{connectGraph(){m.connect(D),m.connect(S.inputs===void 0?S:S.inputs[0]),m.connect(N),S.connect(y),y.connect(E.inputs===void 0?E:E.inputs[0]),y.connect(C.inputs===void 0?C:C.inputs[0]),E.connect(D.gain),C.connect(N.gain),D.connect(v,0,0),N.connect(v,0,1)},disconnectGraph(){m.disconnect(D),m.disconnect(S.inputs===void 0?S:S.inputs[0]),m.disconnect(N),S.disconnect(y),y.disconnect(E.inputs===void 0?E:E.inputs[0]),y.disconnect(C.inputs===void 0?C:C.inputs[0]),E.disconnect(D.gain),C.disconnect(N.gain),D.disconnect(v,0,0),N.disconnect(v,0,1)}}},h=(f,m,y,v)=>{const A=new Float32Array(16385),O=new Float32Array(16385),D=new Float32Array(16385),E=new Float32Array(16385),S=Math.floor(16385/2);for(let g=0;g<16385;g+=1)if(g>S){const I=(g-S)/(16384-S)*a;A[g]=Math.cos(I),O[g]=Math.sin(I),D[g]=0,E[g]=1}else{const I=g/(16384-S)*a;A[g]=1,O[g]=0,D[g]=Math.cos(I),E[g]=Math.sin(I)}const N=t(f,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=e(f,{...c,gain:0}),U=r(f,{...u,curve:A}),z=e(f,{...c,gain:0}),W=r(f,{...u,curve:O}),$=r(f,{...u,curve:o}),K=e(f,{...c,gain:0}),J=r(f,{...u,curve:D}),nt=e(f,{...c,gain:0}),M=r(f,{...u,curve:E});return{connectGraph(){m.connect(N),m.connect($.inputs===void 0?$:$.inputs[0]),N.connect(C,0),N.connect(z,0),N.connect(K,1),N.connect(nt,1),$.connect(y),y.connect(U.inputs===void 0?U:U.inputs[0]),y.connect(W.inputs===void 0?W:W.inputs[0]),y.connect(J.inputs===void 0?J:J.inputs[0]),y.connect(M.inputs===void 0?M:M.inputs[0]),U.connect(C.gain),W.connect(z.gain),J.connect(K.gain),M.connect(nt.gain),C.connect(v,0,0),K.connect(v,0,0),z.connect(v,0,1),nt.connect(v,0,1)},disconnectGraph(){m.disconnect(N),m.disconnect($.inputs===void 0?$:$.inputs[0]),N.disconnect(C,0),N.disconnect(z,0),N.disconnect(K,1),N.disconnect(nt,1),$.disconnect(y),y.disconnect(U.inputs===void 0?U:U.inputs[0]),y.disconnect(W.inputs===void 0?W:W.inputs[0]),y.disconnect(J.inputs===void 0?J:J.inputs[0]),y.disconnect(M.inputs===void 0?M:M.inputs[0]),U.disconnect(C.gain),W.disconnect(z.gain),J.disconnect(K.gain),M.disconnect(nt.gain),C.disconnect(v,0,0),K.disconnect(v,0,0),z.disconnect(v,0,1),nt.disconnect(v,0,1)}}},d=(f,m,y,v,A)=>{if(m===1)return l(f,y,v,A);if(m===2)return h(f,y,v,A);throw i()};return(f,{channelCount:m,channelCountMode:y,pan:v,...A})=>{if(y==="max")throw i();const O=n(f,{...A,channelCount:1,channelCountMode:y,numberOfInputs:2}),D=e(f,{...A,channelCount:m,channelCountMode:y,gain:1}),E=e(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:S,disconnectGraph:N}=d(f,m,D,E,O);Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"maxValue",{get:()=>1}),Object.defineProperty(E.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return D.channelCount},set channelCount($){D.channelCount!==$&&(U&&N(),{connectGraph:S,disconnectGraph:N}=d(f,$,D,E,O),U&&S()),D.channelCount=$},get channelCountMode(){return D.channelCountMode},set channelCountMode($){if($==="clamped-max"||$==="max")throw i();D.channelCountMode=$},get channelInterpretation(){return D.channelInterpretation},set channelInterpretation($){D.channelInterpretation=$},get context(){return D.context},get inputs(){return[D]},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},get pan(){return E.gain},addEventListener(...$){return D.addEventListener($[0],$[1],$[2])},dispatchEvent(...$){return D.dispatchEvent($[0])},removeEventListener(...$){return D.removeEventListener($[0],$[1],$[2])}};let U=!1;const z=()=>{S(),U=!0},W=()=>{N(),U=!1};return s(wi(C,O),z,W)}},g1=(n,t,e,r,i,s,o)=>(a,c)=>{const u=a.createWaveShaper();if(s!==null&&s.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return e(a,c);oe(u,c);const l=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(l!==null&&l.length<2)throw t();Zt(u,{curve:l},"curve"),Zt(u,c,"oversample");let h=null,d=!1;return o(u,"curve",f=>()=>f.call(u),f=>m=>(f.call(u,m),d&&(r(m)&&h===null?h=n(a,u):!r(m)&&h!==null&&(h(),h=null)),m)),i(u,()=>{d=!0,r(u.curve)&&(h=n(a,u))},()=>{d=!1,h!==null&&(h(),h=null)})},v1=(n,t,e,r,i)=>(s,{curve:o,oversample:a,...c})=>{const u=s.createWaveShaper(),l=s.createWaveShaper();oe(u,c),oe(l,c);const h=e(s,{...c,gain:1}),d=e(s,{...c,gain:-1}),f=e(s,{...c,gain:1}),m=e(s,{...c,gain:-1});let y=null,v=!1,A=null;const O={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(S){h.channelCount=S,d.channelCount=S,u.channelCount=S,f.channelCount=S,l.channelCount=S,m.channelCount=S},get channelCountMode(){return u.channelCountMode},set channelCountMode(S){h.channelCountMode=S,d.channelCountMode=S,u.channelCountMode=S,f.channelCountMode=S,l.channelCountMode=S,m.channelCountMode=S},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(S){h.channelInterpretation=S,d.channelInterpretation=S,u.channelInterpretation=S,f.channelInterpretation=S,l.channelInterpretation=S,m.channelInterpretation=S},get context(){return u.context},get curve(){return A},set curve(S){if(S!==null&&S.length<2)throw t();if(S===null)u.curve=S,l.curve=S;else{const N=S.length,C=new Float32Array(N+2-N%2),U=new Float32Array(N+2-N%2);C[0]=S[0],U[0]=-S[N-1];const z=Math.ceil((N+1)/2),W=(N+1)/2-1;for(let $=1;$<z;$+=1){const K=$/z*W,J=Math.floor(K),nt=Math.ceil(K);C[$]=J===nt?S[J]:(1-(K-J))*S[J]+(1-(nt-K))*S[nt],U[$]=J===nt?-S[N-1-J]:-((1-(K-J))*S[N-1-J])-(1-(nt-K))*S[N-1-nt]}C[z]=N%2===1?S[z-1]:(S[z-2]+S[z-1])/2,u.curve=C,l.curve=U}A=S,v&&(r(A)&&y===null?y=n(s,h):y!==null&&(y(),y=null))},get inputs(){return[h]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(S){u.oversample=S,l.oversample=S},addEventListener(...S){return h.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return h.dispatchEvent(S[0])},removeEventListener(...S){return h.removeEventListener(S[0],S[1],S[2])}};o!==null&&(O.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==O.oversample&&(O.oversample=a);const D=()=>{h.connect(u).connect(f),h.connect(d).connect(l).connect(m).connect(f),v=!0,r(A)&&(y=n(s,h))},E=()=>{h.disconnect(u),u.disconnect(f),h.disconnect(d),d.disconnect(l),l.disconnect(m),m.disconnect(f),v=!1,y!==null&&(y(),y=null)};return i(wi(O,f),D,E)},Ie=()=>new DOMException("","NotSupportedError"),_1={numberOfChannels:1},y1=(n,t,e,r,i)=>class extends n{constructor(s,o,a){let c;if(typeof s=="number"&&o!==void 0&&a!==void 0)c={length:o,numberOfChannels:s,sampleRate:a};else if(typeof s=="object")c=s;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:l,sampleRate:h}={..._1,...c},d=r(l,u,h);t(Ji,()=>Ji(d))||d.addEventListener("statechange",(()=>{let f=0;const m=y=>{this._state==="running"&&(f>0?(d.removeEventListener("statechange",m),y.stopImmediatePropagation(),this._waitForThePromiseToSettle(y)):f+=1)};return m})()),super(d,l),this._length=u,this._nativeOfflineAudioContext=d,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,kd(this)}))}_waitForThePromiseToSettle(s){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(s):setTimeout(()=>this._waitForThePromiseToSettle(s))}},b1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},w1=(n,t,e,r,i,s,o)=>class extends n{constructor(a,c){const u=i(a),l={...b1,...c},h=e(u,l),d=s(u),f=d?r():null,m=a.sampleRate/2;super(a,!1,h,f),this._detune=t(this,d,h.detune,153600,-153600),this._frequency=t(this,d,h.frequency,m,-m),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=f,this._oscillatorNodeRenderer!==null&&l.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(a){const c=typeof a=="function"?o(this,a):null;this._nativeOscillatorNode.onended=c;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===c?a:u}get type(){return this._nativeOscillatorNode.type}set type(a){this._nativeOscillatorNode.type=a,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(a){this._nativeOscillatorNode.setPeriodicWave(a),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=a)}start(a=0){if(this._nativeOscillatorNode.start(a),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=a),this.context.state!=="closed"){fi(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),On(this)&&ms(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(a=0){this._nativeOscillatorNode.stop(a),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=a)}},M1=(n,t,e,r,i)=>()=>{const s=new WeakMap;let o=null,a=null,c=null;const u=async(l,h)=>{let d=e(l);const f=we(d,h);if(!f){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=t(h,m),a!==null&&d.start(a),c!==null&&d.stop(c)}return s.set(h,d),f?(await n(h,l.detune,d.detune),await n(h,l.frequency,d.frequency)):(await r(h,l.detune,d.detune),await r(h,l.frequency,d.frequency)),await i(l,h,d),d};return{set periodicWave(l){o=l},set start(l){a=l},set stop(l){c=l},render(l,h){const d=s.get(h);return d!==void 0?Promise.resolve(d):u(l,h)}}},T1={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},A1=(n,t,e,r,i,s,o)=>class extends n{constructor(a,c){const u=i(a),l={...T1,...c},h=e(u,l),d=s(u),f=d?r():null;super(a,!1,h,f),this._nativePannerNode=h,this._orientationX=t(this,d,h.orientationX,Ae,Ne),this._orientationY=t(this,d,h.orientationY,Ae,Ne),this._orientationZ=t(this,d,h.orientationZ,Ae,Ne),this._positionX=t(this,d,h.positionX,Ae,Ne),this._positionY=t(this,d,h.positionY,Ae,Ne),this._positionZ=t(this,d,h.positionZ,Ae,Ne),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(a){this._nativePannerNode.coneInnerAngle=a}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(a){this._nativePannerNode.coneOuterAngle=a}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(a){this._nativePannerNode.coneOuterGain=a}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(a){this._nativePannerNode.distanceModel=a}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(a){this._nativePannerNode.maxDistance=a}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(a){this._nativePannerNode.panningModel=a}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(a){this._nativePannerNode.refDistance=a}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(a){this._nativePannerNode.rolloffFactor=a}},x1=(n,t,e,r,i,s,o,a,c,u)=>()=>{const l=new WeakMap;let h=null;const d=async(f,m)=>{let y=null,v=s(f);const A={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation},O={...A,coneInnerAngle:v.coneInnerAngle,coneOuterAngle:v.coneOuterAngle,coneOuterGain:v.coneOuterGain,distanceModel:v.distanceModel,maxDistance:v.maxDistance,panningModel:v.panningModel,refDistance:v.refDistance,rolloffFactor:v.rolloffFactor},D=we(v,m);if("bufferSize"in v)y=r(m,{...A,gain:1});else if(!D){const E={...O,orientationX:v.orientationX.value,orientationY:v.orientationY.value,orientationZ:v.orientationZ.value,positionX:v.positionX.value,positionY:v.positionY.value,positionZ:v.positionZ.value};v=i(m,E)}if(l.set(m,y===null?v:y),y!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const $=new o(6,f.context.length,m.sampleRate),K=t($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});K.connect($.destination),h=(async()=>{const J=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(nt,M)=>{const g=e($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:M===0?1:0});return await a($,nt,g.offset),g}));for(let nt=0;nt<6;nt+=1)J[nt].connect(K,0,nt),J[nt].start(0);return u($)})()}const E=await h,S=r(m,{...A,gain:1});await c(f,m,S);const N=[];for(let $=0;$<E.numberOfChannels;$+=1)N.push(E.getChannelData($));let C=[N[0][0],N[1][0],N[2][0]],U=[N[3][0],N[4][0],N[5][0]],z=r(m,{...A,gain:1}),W=i(m,{...O,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:U[0],positionY:U[1],positionZ:U[2]});S.connect(z).connect(W.inputs[0]),W.connect(y);for(let $=128;$<E.length;$+=128){const K=[N[0][$],N[1][$],N[2][$]],J=[N[3][$],N[4][$],N[5][$]];if(K.some((nt,M)=>nt!==C[M])||J.some((nt,M)=>nt!==U[M])){C=K,U=J;const nt=$/m.sampleRate;z.gain.setValueAtTime(0,nt),z=r(m,{...A,gain:0}),W=i(m,{...O,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:U[0],positionY:U[1],positionZ:U[2]}),z.gain.setValueAtTime(1,nt),S.connect(z).connect(W.inputs[0]),W.connect(y)}}return y}return D?(await n(m,f.orientationX,v.orientationX),await n(m,f.orientationY,v.orientationY),await n(m,f.orientationZ,v.orientationZ),await n(m,f.positionX,v.positionX),await n(m,f.positionY,v.positionY),await n(m,f.positionZ,v.positionZ)):(await a(m,f.orientationX,v.orientationX),await a(m,f.orientationY,v.orientationY),await a(m,f.orientationZ,v.orientationZ),await a(m,f.positionX,v.positionX),await a(m,f.positionY,v.positionY),await a(m,f.positionZ,v.positionZ)),bi(v)?await c(f,m,v.inputs[0]):await c(f,m,v),v};return{render(f,m){const y=l.get(m);return y!==void 0?Promise.resolve(y):d(f,m)}}},S1={disableNormalization:!1},C1=(n,t,e,r)=>class jd{constructor(s,o){const a=t(s),c=r({...S1,...o}),u=n(a,c);return e.add(u),u}static[Symbol.hasInstance](s){return s!==null&&typeof s=="object"&&Object.getPrototypeOf(s)===jd.prototype||e.has(s)}},E1=(n,t)=>(e,r,i)=>(n(r).replay(i),t(r,e,i)),I1=(n,t,e)=>async(r,i,s)=>{const o=n(r);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([u,l])=>{const h=await t(u).render(u,i),d=r.context.destination;!e(u)&&(r!==d||!e(r))&&h.connect(s,l,c)})).reduce((a,c)=>[...a,...c],[]))},k1=(n,t,e)=>async(r,i,s)=>{const o=t(r);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await n(a).render(a,i);e(a)||u.connect(s,c)}))},O1=(n,t,e,r)=>i=>n(Ji,()=>Ji(i))?Promise.resolve(n(r,r)).then(s=>{if(!s){const o=e(i,512,0,1);i.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>i.currentTime,o.connect(i.destination)}return i.startRendering()}):new Promise(s=>{const o=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=a=>{o.disconnect(),s(a.renderedBuffer)},o.connect(i.destination),i.startRendering()}),P1=n=>(t,e)=>{n.set(t,e)},N1=n=>(t,e)=>n.set(t,e),R1=(n,t,e,r,i,s,o,a)=>(c,u)=>e(c).render(c,u).then(()=>Promise.all(Array.from(r(u)).map(l=>e(l).render(l,u)))).then(()=>i(u)).then(l=>(typeof l.copyFromChannel!="function"?(o(l),$c(l)):t(s,()=>s(l))||a(l),n.add(l),l)),D1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},B1=(n,t,e,r,i,s)=>class extends n{constructor(o,a){const c=i(o),u={...D1,...a},l=e(c,u),h=s(c),d=h?r():null;super(o,!1,l,d),this._pan=t(this,h,l.pan)}get pan(){return this._pan}},F1=(n,t,e,r,i)=>()=>{const s=new WeakMap,o=async(a,c)=>{let u=e(a);const l=we(u,c);if(!l){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=t(c,h)}return s.set(c,u),l?await n(c,a.pan,u.pan):await r(c,a.pan,u.pan),bi(u)?await i(a,c,u.inputs[0]):await i(a,c,u),u};return{render(a,c){const u=s.get(c);return u!==void 0?Promise.resolve(u):o(a,c)}}},$1=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},V1=(n,t)=>async()=>{if(n===null)return!0;if(t===null)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new t(1,128,44100),i=URL.createObjectURL(e);let s=!1,o=!1;try{await r.audioWorklet.addModule(i);const a=new n(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>s=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await r.startRendering()}catch{}finally{URL.revokeObjectURL(i)}return s&&!o},j1=(n,t)=>()=>{if(t===null)return Promise.resolve(!1);const e=new t(1,1,44100),r=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{e.oncomplete=()=>{r.disconnect(),i(e.currentTime!==0)},e.startRendering()})},U1=()=>new DOMException("","UnknownError"),q1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},L1=(n,t,e,r,i,s,o)=>class extends n{constructor(a,c){const u=i(a),l={...q1,...c},h=e(u,l),d=s(u)?r():null;super(a,!0,h,d),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(a){if(a===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(a.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=a}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(a){this._nativeWaveShaperNode.oversample=a}},z1=(n,t,e)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=t(s);if(!we(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,c)}return r.set(o,a),bi(a)?await e(s,o,a.inputs[0]):await e(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},W1=()=>typeof window>"u"?null:window,H1=(n,t)=>e=>{e.copyFromChannel=(r,i,s=0)=>{const o=n(s),a=n(i);if(a>=e.numberOfChannels)throw t();const c=e.length,u=e.getChannelData(a),l=r.length;for(let h=o<0?-o:0;h+o<c&&h<l;h+=1)r[h]=u[h+o]},e.copyToChannel=(r,i,s=0)=>{const o=n(s),a=n(i);if(a>=e.numberOfChannels)throw t();const c=e.length,u=e.getChannelData(a),l=r.length;for(let h=o<0?-o:0;h+o<c&&h<l;h+=1)u[h+o]=r[h]}},G1=n=>t=>{t.copyFromChannel=(e=>(r,i,s=0)=>{const o=n(s),a=n(i);if(o<t.length)return e.call(t,r,a,o)})(t.copyFromChannel),t.copyToChannel=(e=>(r,i,s=0)=>{const o=n(s),a=n(i);if(o<t.length)return e.call(t,r,a,o)})(t.copyToChannel)},Y1=n=>(t,e)=>{const r=e.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=r),n(t,"buffer",i=>()=>{const s=i.call(t);return s===r?null:s},i=>s=>i.call(t,s===null?r:s))},X1=(n,t)=>(e,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const i=e.createBufferSource();t(r,()=>{const s=r.numberOfInputs;for(let o=0;o<s;o+=1)i.connect(r,0,o)},()=>i.disconnect(r))},Ud=(n,t,e)=>n.copyFromChannel===void 0?n.getChannelData(e)[0]:(n.copyFromChannel(t,e),t[0]),qd=n=>{if(n===null)return!1;const t=n.length;return t%2!==0?n[Math.floor(t/2)]!==0:n[t/2-1]+n[t/2]!==0},bs=(n,t,e,r)=>{let i=n;for(;!i.hasOwnProperty(t);)i=Object.getPrototypeOf(i);const{get:s,set:o}=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(n,t,{get:e(s),set:r(o)})},Z1=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),J1=n=>({...n,channelCount:n.numberOfOutputs}),Q1=n=>{const{imag:t,real:e}=n;return t===void 0?e===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(e,()=>0),real:e}:e===void 0?{...n,imag:t,real:Array.from(t,()=>0)}:{...n,imag:t,real:e}},Ld=(n,t,e)=>{try{n.setValueAtTime(t,e)}catch(r){if(r.code!==9)throw r;Ld(n,t,e+1e-7)}},K1=n=>{const t=n.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},ty=n=>{const t=n.createBufferSource(),e=n.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},ey=n=>{const t=n.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},Lc=n=>{const t=n.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},zd=n=>{const t=n.createBuffer(1,1,44100),e=n.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},zc=n=>{const t=n.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},ny=n=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(n)}finally{t.close(),e.close()}},ry=n=>{n.start=(t=>(e=0,r=0,i)=>{const s=n.buffer,o=s===null?r:Math.min(s.duration,r);s!==null&&o>s.duration-.5/n.context.sampleRate?t.call(n,e,0,0):t.call(n,e,o,i)})(n.start)},Wd=(n,t)=>{const e=t.createGain();n.connect(e);const r=(i=>()=>{i.call(n,e),n.removeEventListener("ended",r)})(n.disconnect);n.addEventListener("ended",r),wi(n,e),n.stop=(i=>{let s=!1;return(o=0)=>{if(s)try{i.call(n,o)}catch{e.gain.setValueAtTime(0,o)}else i.call(n,o),s=!0}})(n.stop)},Mi=(n,t)=>e=>{const r={value:n};return Object.defineProperties(e,{currentTarget:r,target:r}),typeof t=="function"?t.call(n,e):t.handleEvent.call(n,e)},iy=A0(Nr),sy=k0(Nr),oy=qv(Do),Hd=new WeakMap,ay=o_(Hd),ln=_v(new Map,new WeakMap),yn=W1(),Gd=B_(ln,bn),Wc=s_(xe),ge=I1(xe,Wc,Ar),cy=D0(Gd,Yt,ge),Wt=u_(Ro),Bn=u1(yn),Ut=S_(Bn),Yd=new WeakMap,Xd=Qv(Mi),ws=j_(yn),Hc=M_(ws),Gc=T_(yn),Zd=A_(yn),Qi=q_(yn),ee=ov(x0(Td),I0(iy,sy,no,oy,ro,xe,ay,ps,Yt,Nr,On,Ar,Ws),ln,v_(Za,ro,xe,Yt,Zi,On),bn,Bo,Ie,$v(no,Za,xe,Yt,Zi,Wt,On,Ut),Wv(Yd,xe,un),Xd,Wt,Hc,Gc,Zd,Ut,Qi),uy=R0(ee,cy,bn,Gd,Wt,Ut),Yc=new WeakSet,xl=F_(yn),Jd=Ov(new Uint32Array(1)),Xc=H1(Jd,bn),Zc=G1(Jd),Qd=F0(Yc,ln,Ie,xl,Bn,$1(xl),Xc,Zc),Fo=O0(Be),Kd=k1(Wc,gs,Ar),wn=xv(Kd),Ti=V_(Fo,ln,K1,ty,ey,Lc,zd,zc,ry,Y1(bs),Wd),Mn=E1(a_(gs),Kd),ly=j0(wn,Ti,Yt,Mn,ge),hn=av(S0(Ad),Yd,Fc,cv,_0,y0,b0,w0,M0,Ga,wd,ws,Ld),hy=V0(ee,ly,hn,he,Ti,Wt,Ut,Mi),dy=X0(ee,Z0,bn,he,U_(Be,bs),Wt,Ut,ge),fy=vv(wn,$d,Yt,Mn,ge),Rr=N1(Hd),py=gv(ee,hn,fy,Bo,$d,Wt,Ut,Rr),sr=R_(Nr,Gc),my=X1(he,sr),or=X_(ws,my),gy=wv(or,Yt,ge),vy=bv(ee,gy,or,Wt,Ut),_y=Av(_s,Yt,ge),yy=Tv(ee,_y,_s,Wt,Ut,J1),by=Q_(Fo,Ti,Be,sr),Ai=J_(Fo,ln,by,Lc,zc),wy=kv(wn,Ai,Yt,Mn,ge),My=Iv(ee,hn,wy,Ai,Wt,Ut,Mi),tf=K_(Ie,bs),Ty=Rv(tf,Yt,ge),Ay=Nv(ee,Ty,tf,Wt,Ut,Rr),xy=Uv(wn,Vd,Yt,Mn,ge),Sy=jv(ee,hn,xy,Vd,Wt,Ut,Rr),ef=t1(Ie),Cy=Xv(wn,ef,Yt,Mn,ge),Ey=Yv(ee,hn,Cy,ef,Ie,Wt,Ut,Rr),Iy=r_(wn,Be,Yt,Mn,ge),ky=n_(ee,hn,Iy,Be,Wt,Ut),Oy=i1(Bo,he,ys,Ie),$o=O1(ln,Be,ys,j1(Be,Bn)),Py=g_(Ti,Yt,Bn,ge,$o),Ny=e1(Oy),Ry=p_(ee,Ny,Py,Wt,Ut,Rr),Dy=J0(hn,or,Ai,ys,Ie,Ud,Ut,bs),nf=new WeakMap,By=N_(dy,Dy,Xd,Ut,nf,Mi),rf=l1(Fo,ln,Lc,zd,zc,Wd),Fy=M1(wn,rf,Yt,Mn,ge),$y=w1(ee,hn,rf,Fy,Wt,Ut,Mi),sf=Cv(Ti),Vy=v1(sf,he,Be,qd,sr),Vo=g1(sf,he,Vy,qd,sr,ws,bs),jy=d1(no,he,or,Be,ys,Vo,Ie,ro,Ud,sr),of=h1(jy),Uy=x1(wn,or,Ai,Be,of,Yt,Bn,Mn,ge,$o),qy=A1(ee,hn,of,Uy,Wt,Ut,Rr),Ly=f1(bn),zy=C1(Ly,Wt,new WeakSet,Q1),Wy=m1(or,_s,Be,Vo,Ie,sr),af=p1(Wy,Ie),Hy=F1(wn,af,Yt,Mn,ge),Gy=B1(ee,hn,af,Hy,Wt,Ut),Yy=z1(Vo,Yt,ge),Xy=L1(ee,he,Vo,Yy,Wt,Ut,Rr),cf=C_(yn),Jc=Kv(yn),uf=new WeakMap,Zy=l_(uf,Bn),Jy=cf?E0(ln,Ie,Jv(yn),Jc,t_(T0),Wt,Zy,Ut,Qi,new WeakMap,new WeakMap,V1(Qi,Bn),yn):void 0,Qy=x_(Hc,Ut),Ky=Fv(Yc,ln,Bv,Zv,new WeakSet,Wt,Qy,to,Ji,Xc,Zc),lf=pv(Jy,uy,Qd,hy,py,vy,yy,My,Ay,Ky,Sy,Ey,ky,Ry,By,$y,qy,zy,Gy,Xy),tb=E_(ee,s1,Wt,Ut),eb=k_(ee,o1,Wt,Ut),nb=O_(ee,a1,Wt,Ut),rb=c1(he,Ut),ib=P_(ee,rb,Wt),sb=Y0(lf,he,Ie,U1,tb,eb,nb,ib,ws),Qc=h_(nf),ob=P0(Qc),hf=Sv(bn),ab=Lv(Qc),df=Hv(bn),ff=new WeakMap,cb=i_(ff,un),ub=Y_(hf,bn,he,or,_s,Ai,Be,ys,Ie,df,Jc,cb,sr),lb=z_(he,ub,Be,Ie,sr),hb=fv(wn,hf,Ti,or,_s,Ai,Be,ab,df,Jc,Yt,Qi,Bn,Mn,ge,$o),db=c_(uf),fb=P1(ff),Sl=cf?lv(ob,ee,hn,hb,lb,xe,db,Wt,Ut,Qi,Z1,fb,ny,Mi):void 0,pb=Dv(Ie,Bn),mb=R1(Yc,ln,Wc,Qc,$o,to,Xc,Zc),gb=y1(lf,ln,he,pb,mb),vb=__(Ro,Hc),_b=y_(Bc,Gc),yb=b_(Fc,Zd),bb=w_(Ro,Ut);function qe(n){return typeof n>"u"}function Ot(n){return!qe(n)}function wb(n){return typeof n=="function"}function xr(n){return typeof n=="number"}function yr(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function Mb(n){return typeof n=="boolean"}function cn(n){return Array.isArray(n)}function Nn(n){return typeof n=="string"}function Rs(n){return Nn(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function xt(n,t){if(!n)throw new Error(t)}function er(n,t,e=1/0){if(!(t<=n&&n<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${n}`)}function pf(n){!n.isOffline&&n.state!=="running"&&Kc('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let mf=!1,Cl=!1;function El(n){mf=n}function Tb(n){qe(n)&&mf&&!Cl&&(Cl=!0,Kc("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let gf=console;function Ab(...n){gf.log(...n)}function Kc(...n){gf.warn(...n)}function xb(n){return new sb(n)}function Sb(n,t,e){return new gb(n,t,e)}const br=typeof self=="object"?self:null,Cb=br&&(br.hasOwnProperty("AudioContext")||br.hasOwnProperty("webkitAudioContext"));function Eb(n,t,e){return xt(Ot(Sl),"This node only works in a secure context (https or localhost)"),new Sl(n,t,e)}function dn(n,t,e,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,e,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(t,e,s):o(t,e))||s);return i>3&&s&&Object.defineProperty(t,e,s),s}function ne(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(h){o(h)}}function c(l){try{u(r.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,t||[])).next())})}class Ib{constructor(t,e,r,i){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(i||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=URL.createObjectURL(t),r=new Worker(e);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((e=this._worker)===null||e===void 0||e.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Sr(n){return yb(n)}function Qn(n){return _b(n)}function Hs(n){return bb(n)}function Gr(n){return vb(n)}function kb(n){return n instanceof Qd}function Ob(n,t){return n==="value"||Sr(t)||Qn(t)||kb(t)}function ri(n,...t){if(!t.length)return n;const e=t.shift();if(yr(n)&&yr(e))for(const r in e)Ob(r,e[r])?n[r]=e[r]:yr(e[r])?(n[r]||Object.assign(n,{[r]:{}}),ri(n[r],e[r])):Object.assign(n,{[r]:e[r]});return ri(n,...t)}function Pb(n,t){return n.length===t.length&&n.every((e,r)=>t[r]===e)}function ot(n,t,e=[],r){const i={},s=Array.from(t);if(yr(s[0])&&r&&!Reflect.has(s[0],r)&&(Object.keys(s[0]).some(o=>Reflect.has(n,o))||(ri(i,{[r]:s[0]}),e.splice(e.indexOf(r),1),s.shift())),s.length===1&&yr(s[0]))ri(i,s[0]);else for(let o=0;o<e.length;o++)Ot(s[o])&&(i[e[o]]=s[o]);return ri(n,i)}function Nb(n){return n.constructor.getDefaults()}function ii(n,t){return qe(n)?t:n}function Il(n,t){return t.forEach(e=>{Reflect.has(n,e)&&delete n[e]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class Fn{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||br&&this.toString()===br.TONE_DEBUG_CLASS)&&Ab(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Fn.version=bd;const tu=1e-6;function pi(n,t){return n>t+tu}function ec(n,t){return pi(n,t)||Ke(n,t)}function ao(n,t){return n+tu<t}function Ke(n,t){return Math.abs(n-t)<tu}function Rb(n,t,e){return Math.max(Math.min(n,e),t)}class Ye extends Fn{constructor(){super(),this.name="Timeline",this._timeline=[];const t=ot(Ye.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(xt(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];xt(ec(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(t){const e=this._timeline.indexOf(t);return e!==-1&&this._timeline.splice(e,1),this}get(t,e="time"){const r=this._search(t,e);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const r=this._search(t,e);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const r=this._search(t);return r-1>=0?this._timeline[r-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Ke(this._timeline[e].time,t)){for(let r=e;r>=0&&Ke(this._timeline[r].time,t);r--)e=r;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else this._timeline.length===1&&ec(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(this._timeline.length===0)return-1;let r=0;const i=this._timeline.length;let s=i;if(i>0&&this._timeline[i-1][e]<=t)return i-1;for(;r<s;){let o=Math.floor(r+(s-r)/2);const a=this._timeline[o],c=this._timeline[o+1];if(Ke(a[e],t)){for(let u=o;u<this._timeline.length;u++){const l=this._timeline[u];if(Ke(l[e],t))o=u;else break}return o}else{if(ao(a[e],t)&&pi(c[e],t))return o;pi(a[e],t)?s=o:r=o+1}}return-1}_iterate(t,e=0,r=this._timeline.length-1){this._timeline.slice(e,r+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const r=this._search(t);return r!==-1&&this._iterate(e,0,r),this}forEachAfter(t,e){const r=this._search(t);return this._iterate(e,r+1),this}forEachBetween(t,e,r){let i=this._search(t),s=this._search(e);return i!==-1&&s!==-1?(this._timeline[i].time!==t&&(i+=1),this._timeline[s].time===e&&(s-=1),this._iterate(r,i,s)):i===-1&&this._iterate(r,0,s),this}forEachFrom(t,e){let r=this._search(t);for(;r>=0&&this._timeline[r].time>=t;)r--;return this._iterate(e,r+1),this}forEachAtTime(t,e){const r=this._search(t);if(r!==-1&&Ke(this._timeline[r].time,t)){let i=r;for(let s=r;s>=0&&Ke(this._timeline[s].time,t);s--)i=s;this._iterate(s=>{e(s)},i,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const vf=[];function jo(n){vf.push(n)}function Db(n){vf.forEach(t=>t(n))}const _f=[];function Uo(n){_f.push(n)}function Bb(n){_f.forEach(t=>t(n))}class Ms extends Fn{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(r=>{qe(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(e)}),this}once(t,e){const r=(...i)=>{e(...i),this.off(t,r)};return this.on(t,r),this}off(t,e){return t.split(/\W+/).forEach(r=>{if(qe(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(qe(e))this._events[r]=[];else{const i=this._events[r];for(let s=i.length-1;s>=0;s--)i[s]===e&&i.splice(s,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const r=this._events[t].slice(0);for(let i=0,s=r.length;i<s;i++)r[i].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const r=Object.getOwnPropertyDescriptor(Ms.prototype,e);Object.defineProperty(t.prototype,e,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class yf extends Ms{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Ts extends yf{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new Ye,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletPromise=null;const r=ot(Ts.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=xb({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new Ib(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((e=arguments[0])===null||e===void 0)&&e.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(Db(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,r){return this._context.createBuffer(t,e,r)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,r){return this._context.createPeriodicWave(t,e,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return xt(Gr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return xt(Gr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return xt(Gr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){xt(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){xt(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){xt(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){xt(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return Eb(this.rawContext,t,e)}addAudioWorkletModule(t){return ne(this,void 0,void 0,function*(){xt(Ot(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return ne(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Gr(this._context)?this._context.resume():Promise.resolve()}close(){return ne(this,void 0,void 0,function*(){Gr(this._context)&&(yield this._context.close()),this._initialized&&Bb(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),r=e.getChannelData(0);for(let s=0;s<r.length;s++)r[s]=t;const i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=e,i.loop=!0,i.start(0),this._constants.set(t,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:r+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const r=++this._timeoutIds,i=()=>{const s=this.now();this._timeouts.add({callback:()=>{t(),i()},id:r,time:s+e})};return i(),r}}class Fb extends yf{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,r){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return ne(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function Qt(n,t){cn(t)?t.forEach(e=>Qt(n,e)):Object.defineProperty(n,t,{enumerable:!0,writable:!1})}function bf(n,t){cn(t)?t.forEach(e=>bf(n,e)):Object.defineProperty(n,t,{writable:!0})}const jt=()=>{};class Gt extends Fn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=jt;const t=ot(Gt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,Nn(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:jt,onload:jt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:He().sampleRate}set(t){return t instanceof Gt?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return ne(this,void 0,void 0,function*(){const e=Gt.load(t).then(r=>{this.set(r),this.onload(this)});Gt.downloads.push(e);try{yield e}finally{const r=Gt.downloads.indexOf(e);Gt.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=cn(t)&&t[0].length>0,r=e?t.length:1,i=e?t[0].length:t.length,s=He(),o=s.createBuffer(r,i,s.sampleRate),a=!e&&r===1?[t]:t;for(let c=0;c<r;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(t){if(xr(t))this.fromArray(this.toArray(t));else{let e=new Float32Array(this.length);const r=this.numberOfChannels;for(let i=0;i<r;i++){const s=this.toArray(i);for(let o=0;o<s.length;o++)e[o]+=s[o]}e=e.map(i=>i/r),this.fromArray(e)}return this}toArray(t){if(xr(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const e=[];for(let r=0;r<this.numberOfChannels;r++)e[r]=this.getChannelData(r);return e}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){xt(this.loaded,"Buffer is not loaded");const r=Math.floor(t*this.sampleRate),i=Math.floor(e*this.sampleRate);xt(r<i,"The start time must be less than the end time");const s=i-r,o=He().createBuffer(this.numberOfChannels,s,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(r,i),a);return new Gt(o)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new Gt().fromArray(t)}static fromUrl(t){return ne(this,void 0,void 0,function*(){return yield new Gt().load(t)})}static load(t){return ne(this,void 0,void 0,function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const a=e[1].split("|");let c=a[0];for(const u of a)if(Gt.supportsType(u)){c=u;break}t=t.replace(e[0],c)}const r=Gt.baseUrl===""||Gt.baseUrl.endsWith("/")?Gt.baseUrl:Gt.baseUrl+"/",i=document.createElement("a");i.href=r+t,i.pathname=(i.pathname+i.hash).split("/").map(encodeURIComponent).join("/");const s=yield fetch(i.href);if(!s.ok)throw new Error(`could not load url: ${t}`);const o=yield s.arrayBuffer();return yield He().decodeAudioData(o)})}static supportsType(t){const e=t.split("."),r=e[e.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return ne(this,void 0,void 0,function*(){for(yield Promise.resolve();Gt.downloads.length;)yield Gt.downloads[0]})}}Gt.baseUrl="";Gt.downloads=[];class eu extends Ts{constructor(){super({clockSource:"offline",context:Hs(arguments[0])?arguments[0]:Sb(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Hs(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Hs(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return ne(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const r=Math.floor(this.sampleRate/128);t&&e%r===0&&(yield new Promise(i=>setTimeout(i,1)))}})}render(t=!0){return ne(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Gt(e)})}close(){return Promise.resolve()}}const wf=new Fb;let Zr=wf;function He(){return Zr===wf&&Cb&&$b(new Ts),Zr}function $b(n,t=!1){t&&Zr.dispose(),Gr(n)?Zr=new Ts(n):Hs(n)?Zr=new eu(n):Zr=n}if(br&&!br.TONE_SILENCE_LOGGING){const n=` * Tone.js v${bd} * `;console.log(`%c${n}`,"background: #000; color: #fff")}function Vb(n){return Math.pow(10,n/20)}function jb(n){return 20*(Math.log(n)/Math.LN10)}function Mf(n){return Math.pow(2,n/12)}let qo=440;function Ub(){return qo}function qb(n){qo=n}function nc(n){return Math.round(Tf(n))}function Tf(n){return 69+12*Math.log2(n/qo)}function Lb(n){return qo*Math.pow(2,(n-69)/12)}class nu extends Fn{constructor(t,e,r){super(),this.defaultUnits="s",this._val=e,this._units=r,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const r=parseInt(t,10),i=e==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/r)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(e)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,e,r)=>{let i=0;return t&&t!=="0"&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(i+=this._beatsToUnits(parseFloat(e))),r&&r!=="0"&&(i+=this._beatsToUnits(parseFloat(r)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof nu&&this.fromType(this._val),qe(this._val))return this._noArg();if(Nn(this._val)&&qe(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(yr(this._val)){let t=0;for(const e in this._val)if(Ot(this._val[e])){const r=this._val[e];t+=new this.constructor(this.context,e).valueOf()*r}return t}if(Ot(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}else return Nn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class nn extends nu{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new nn(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const r=new this.constructor(this.context,t).valueOf(),i=this.valueOf(),s=Math.round(i/r)*r-i;return i+s*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let s=1;s<9;s++){const o=Math.pow(2,s);e.push(o+"n."),e.push(o+"n"),e.push(o+"t")}e.push("0");let r=e[0],i=new nn(this.context,e[0]).toSeconds();return e.forEach(s=>{const o=new nn(this.context,s).toSeconds();Math.abs(o-t)<Math.abs(i-t)&&(r=s,i=o)}),r}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const r=Math.floor(e/this._getTimeSignature());let i=e%1*4;e=Math.floor(e)%this._getTimeSignature();const s=i.toString();return s.length>3&&(i=parseFloat(parseFloat(s).toFixed(3))),[r,e,i].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return nc(this.toFrequency())}_now(){return this.context.now()}}class Ue extends nn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Ub()}static set A4(t){qb(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:Ue.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const r=zb[t.toLowerCase()]+(parseInt(e,10)+1)*12;return this.defaultUnits==="midi"?r:Ue.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,r){let i=1;return t&&t!=="0"&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(i*=this._beatsToUnits(parseFloat(e))),r&&r!=="0"&&(i*=this._beatsToUnits(parseFloat(r)/4)),i}}})}transpose(t){return new Ue(this.context,this.valueOf()*Mf(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return nc(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Ue.A4);let r=Math.round(12*e)+57;const i=Math.floor(r/12);return i<0&&(r+=-12*i),Wb[r%12]+i.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Lb(t)}static ftom(t){return nc(t)}}const zb={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},Wb=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function kl(n,t){return new Ue(He(),n,t)}class Vi extends nn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Re extends Fn{constructor(){super();const t=ot(Re.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:He()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return Tb(t),new nn(this.context,t).toSeconds()}toFrequency(t){return new Ue(this.context,t).toFrequency()}toTicks(t){return new Vi(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(r=>{qe(t[r])&&delete e[r]}),e}get(){const t=Nb(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const r=this[e];Ot(r)&&Ot(r.value)&&Ot(r.setValueAtTime)?t[e]=r.value:r instanceof Re?t[e]=r._getPartialProperties(t[e]):cn(r)||xr(r)||Nn(r)||Mb(r)?t[e]=r:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&Ot(this[e])&&(this[e]&&Ot(this[e].value)&&Ot(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Re?this[e].set(t[e]):this[e]=t[e])}),this}}class ru extends Ye{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return e!==null?e.state:this._initial}setStateAtTime(t,e,r){return er(e,0),this.add(Object.assign({},r,{state:t,time:e})),this}getLastState(t,e){const r=this._search(e);for(let i=r;i>=0;i--){const s=this._timeline[i];if(s.state===t)return s}}getNextState(t,e){const r=this._search(e);if(r!==-1)for(let i=r;i<this._timeline.length;i++){const s=this._timeline[i];if(s.state===t)return s}}}class Xt extends Re{constructor(){super(ot(Xt.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=ot(Xt.getDefaults(),arguments,["param","units","convert"]);for(xt(Ot(t.param)&&(Sr(t.param)||t.param instanceof Xt),"param must be an AudioParam");!Sr(t.param);)t.param=t.param._param;this._swappable=Ot(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Ye(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Ot(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Re.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Ot(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Ot(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Ot(this.maxValue)&&Ot(this.minValue)&&er(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Vb(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?jb(t):t}setValueAtTime(t,e){const r=this.toSeconds(e),i=this._fromType(t);return xt(isFinite(i)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",t,r),this._events.add({time:r,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,r),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),r=this._events.getAfter(e),i=this._events.get(e);let s=this._initialValue;if(i===null)s=this._initialValue;else if(i.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const o=this._events.getBefore(i.time);let a;o===null?a=this._initialValue:a=o.value,i.type==="setTargetAtTime"&&(s=this._exponentialApproach(i.time,a,i.value,i.constant,e))}else if(r===null)s=i.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let o=i.value;if(i.type==="setTargetAtTime"){const a=this._events.getBefore(i.time);a===null?o=this._initialValue:o=a.value}r.type==="linearRampToValueAtTime"?s=this._linearInterpolate(i.time,o,r.time,r.value,e):s=this._exponentialInterpolate(i.time,o,r.time,r.value,e)}else s=i.value;return this._toType(s)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(e)===0&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const r=this._fromType(t),i=this.toSeconds(e);return xt(isFinite(r)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(r),this._events.add({time:i,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",t,i),this._param.linearRampToValueAtTime(r,i),this}exponentialRampToValueAtTime(t,e){let r=this._fromType(t);r=Ke(r,0)?this._minOutput:r,this._assertRange(r);const i=this.toSeconds(e);return xt(isFinite(r)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",t,i),this._param.exponentialRampToValueAtTime(r,i),this}exponentialRampTo(t,e,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(t,r+this.toSeconds(e)),this}linearRampTo(t,e,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(t,r+this.toSeconds(e)),this}targetRampTo(t,e,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(t,r,e),this}exponentialApproachValueAtTime(t,e,r){e=this.toSeconds(e),r=this.toSeconds(r);const i=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(t,e,i),this.cancelAndHoldAtTime(e+r*.9),this.linearRampToValueAtTime(t,e+r),this}setTargetAtTime(t,e,r){const i=this._fromType(t);xt(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const s=this.toSeconds(e);return this._assertRange(i),xt(isFinite(i)&&isFinite(s),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:r,time:s,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",t,s,r),this._param.setTargetAtTime(i,s,r),this}setValueCurveAtTime(t,e,r,i=1){r=this.toSeconds(r),e=this.toSeconds(e);const s=this._fromType(t[0])*i;this.setValueAtTime(this._toType(s),e);const o=r/(t.length-1);for(let a=1;a<t.length;a++){const c=this._fromType(t[a])*i;this.linearRampToValueAtTime(this._toType(c),e+a*o)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return xt(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),r=this._fromType(this.getValueAtTime(e));xt(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+r);const i=this._events.get(e),s=this._events.getAfter(e);return i&&Ke(i.time,e)?s?(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):s&&(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time),s.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),e):s.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),e)),this._events.add({time:e,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,e),this}rampTo(t,e=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,e,r):this.linearRampTo(t,e,r),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const r=this._events.get(e);if(r&&r.type==="setTargetAtTime"){const i=this._events.getAfter(r.time),s=i?i.time:e+2,o=(s-e)/10;for(let a=e;a<s;a+=o)t.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,i=>{i.type==="cancelScheduledValues"?t.cancelScheduledValues(i.time):i.type==="setTargetAtTime"?t.setTargetAtTime(i.value,i.time,i.constant):t[i.type](i.value,i.time)}),this}setParam(t){xt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,r,i,s){return r+(e-r)*Math.exp(-(s-t)/i)}_linearInterpolate(t,e,r,i,s){return e+(i-e)*((s-t)/(r-t))}_exponentialInterpolate(t,e,r,i,s){return e*Math.pow(i/e,(s-t)/(r-t))}}class kt extends Re{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ot(this.input)?Sr(this.input)||this.input instanceof Xt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ot(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Ot(t)&&(t instanceof kt||Qn(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();xt(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,r=0){return xi(this,t,e,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Kc("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,r=0){return Hb(this,t,e,r),this}chain(...t){return rc(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),Ot(this.input)&&(this.input instanceof kt?this.input.dispose():Qn(this.input)&&this.input.disconnect()),Ot(this.output)&&(this.output instanceof kt?this.output.dispose():Qn(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function rc(...n){const t=n.shift();n.reduce((e,r)=>(e instanceof kt?e.connect(r):Qn(e)&&xi(e,r),r),t)}function xi(n,t,e=0,r=0){for(xt(Ot(n),"Cannot connect from undefined node"),xt(Ot(t),"Cannot connect to undefined node"),(t instanceof kt||Qn(t))&&xt(t.numberOfInputs>0,"Cannot connect to node with no inputs"),xt(n.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof kt||t instanceof Xt;)Ot(t.input)&&(t=t.input);for(;n instanceof kt;)Ot(n.output)&&(n=n.output);Sr(t)?n.connect(t,e):n.connect(t,e,r)}function Hb(n,t,e=0,r=0){if(Ot(t))for(;t instanceof kt;)t=t.input;for(;!Qn(n);)Ot(n.output)&&(n=n.output);Sr(t)?n.disconnect(t,e):Qn(t)?n.disconnect(t,e,r):n.disconnect()}class Ce extends kt{constructor(){super(ot(Ce.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=ot(Ce.getDefaults(),arguments,["gain","units"]);this.gain=new Xt({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Qt(this,"gain")}static getDefaults(){return Object.assign(kt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class mi extends kt{constructor(t){super(t),this.onended=jt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ce({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const r=this.toSeconds(e);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(kt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:jt})}_startGain(t,e=1){xt(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=t+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(e,t+r):this._gainNode.gain.exponentialApproachValueAtTime(e,t,r)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){xt(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?e*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==jt&&(this.onended(this),this.onended=jt,!this.context.isOffline)){const t=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),xt(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=jt,this}}class co extends mi{constructor(){super(ot(co.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=ot(co.getDefaults(),arguments,["offset"]);xi(this._source,this._gainNode),this.offset=new Xt({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(mi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ae extends kt{constructor(){super(ot(ae.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=ot(ae.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new co({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(kt.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,r=0){return iu(this,t,e,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,r){return this._param.exponentialRampTo(t,e,r),this}linearRampTo(t,e,r){return this._param.linearRampTo(t,e,r),this}targetRampTo(t,e,r){return this._param.targetRampTo(t,e,r),this}exponentialApproachValueAtTime(t,e,r){return this._param.exponentialApproachValueAtTime(t,e,r),this}setTargetAtTime(t,e,r){return this._param.setTargetAtTime(t,e,r),this}setValueCurveAtTime(t,e,r,i){return this._param.setValueCurveAtTime(t,e,r,i),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,r){return this._param.rampTo(t,e,r),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function iu(n,t,e,r){(t instanceof Xt||Sr(t)||t instanceof ae&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof ae&&(t.overridden=!0)),xi(n,t,e,r)}class uo extends Xt{constructor(){super(ot(uo.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Ye(1/0),this._multiplier=1;const t=ot(uo.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Xt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,r){e=this.toSeconds(e),this.setRampPoint(e);const i=this._fromType(t),s=this._events.get(e),o=Math.round(Math.max(1/r,1));for(let a=0;a<=o;a++){const c=r*a+e,u=this._exponentialApproach(s.time,s.value,i,r,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}setValueAtTime(t,e){const r=this.toSeconds(e);super.setValueAtTime(t,e);const i=this._events.get(r),s=this._events.previousEvent(i),o=this._getTicksUntilEvent(s,r);return i.ticks=Math.max(o,0),this}linearRampToValueAtTime(t,e){const r=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const i=this._events.get(r),s=this._events.previousEvent(i),o=this._getTicksUntilEvent(s,r);return i.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const r=this._fromType(t),i=this._events.get(e),s=Math.round(Math.max((e-i.time)*10,1)),o=(e-i.time)/s;for(let a=0;a<=s;a++){const c=o*a+i.time,u=this._exponentialInterpolate(i.time,i.value,e,r,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}_getTicksUntilEvent(t,e){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(qe(t.ticks)){const o=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(o,t.time)}const r=this._fromType(this.getValueAtTime(t.time));let i=this._fromType(this.getValueAtTime(e));const s=this._events.get(e);return s&&s.time===e&&s.type==="setValueAtTime"&&(i=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(r+i)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),r=this._events.get(e);return Math.max(this._getTicksUntilEvent(r,e),0)}getDurationOfTicks(t,e){const r=this.toSeconds(e),i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-r}getTimeOfTick(t){const e=this._events.get(t,"ticks"),r=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&r&&r.type==="linearRampToValueAtTime"&&e.value!==r.value){const i=this._fromType(this.getValueAtTime(e.time)),s=(this._fromType(this.getValueAtTime(r.time))-i)/(r.time-e.time),o=Math.sqrt(Math.pow(i,2)-2*s*(e.ticks-t)),a=(-i+o)/s,c=(-i-o)/s;return(a>0?a:c)+e.time}else return e?e.value===0?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const r=this.toSeconds(e),i=this.toSeconds(t),s=this.getTicksAtTime(r);return this.getTicksAtTime(r+i)-s}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class lo extends ae{constructor(){super(ot(lo.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=ot(lo.getDefaults(),arguments,["value"]);this.input=this._param=new uo({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(ae.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class ho extends Re{constructor(){super(ot(ho.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new ru,this._tickOffset=new Ye,this._ticksAtTime=new Ye,this._secondsAtTime=new Ye;const t=ot(ho.getDefaults(),arguments,["frequency"]);this.frequency=new lo({context:this.context,units:t.units,value:t.frequency}),Qt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Re.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const r=this.toSeconds(t);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),Ot(e)&&this.setTicksAtTime(e,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(t){const e=this.toSeconds(t);if(this._state.getValueAtTime(e)==="stopped"){const r=this._state.get(e);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),r=this._state.getLastState("stopped",e),i=this._ticksAtTime.get(e),s={state:"paused",time:e};this._state.add(s);let o=i||r,a=i?i.ticks:0,c=null;return this._state.forEachBetween(o.time,e+this.sampleTime,u=>{let l=o.time;const h=this._tickOffset.get(u.time);h&&h.time>=o.time&&(a=h.ticks,l=h.time),o.state==="started"&&u.state!=="started"&&(a+=this.frequency.getTicksAtTime(u.time)-this.frequency.getTicksAtTime(l),u.time!=s.time&&(c={state:u.state,time:u.time,ticks:a})),o=u}),this._state.remove(s),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),r=this.frequency.timeToTicks(t,e);this.setTicksAtTime(r,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),r={state:"paused",time:t};this._state.add(r);const i=this._secondsAtTime.get(t);let s=i||e,o=i?i.seconds:0,a=null;return this._state.forEachBetween(s.time,t+this.sampleTime,c=>{let u=s.time;const l=this._tickOffset.get(c.time);l&&l.time>=s.time&&(o=l.seconds,u=l.time),s.state==="started"&&c.state!=="started"&&(o+=c.time-u,c.time!=r.time&&(a={state:c.state,time:c.time,seconds:o})),s=c}),this._state.remove(r),a&&this._secondsAtTime.add(a),o}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const r=this._tickOffset.get(e),i=this._state.get(e),s=Math.max(r.time,i.time),o=this.frequency.getTicksAtTime(s)+t-r.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(t,e,r){let i=this._state.get(t);this._state.forEachBetween(t,e,o=>{i&&i.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(i.time,t),o.time-this.sampleTime,r),i=o});let s=null;if(i&&i.state==="started"){const o=Math.max(i.time,t),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(i.time),u=a-c;let l=Math.ceil(u)-u;l=Ke(l,1)?0:l;let h=this.frequency.getTimeOfTick(a+l);for(;h<e;){try{r(h,Math.round(this.getTicksAtTime(h)))}catch(d){s=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(s)throw s;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Ki extends Re{constructor(){super(ot(Ki.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=jt,this._lastUpdate=0,this._state=new ru("stopped"),this._boundLoop=this._loop.bind(this);const t=ot(Ki.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new ho({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Qt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Re.getDefaults(),{callback:jt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){pf(this.context);const r=this.toSeconds(t);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,e),r<this._lastUpdate&&this.emit("start",r,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const r=this.toSeconds(e),i=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(i+t,r)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,r=>{switch(r.state){case"started":const i=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,i);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(t,e,(r,i)=>{this.callback(r,i)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Ms.mixin(Ki);class su extends Fn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=ot(su.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;const r=t.urls[e];this.add(e,r,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:jt,onload:jt,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return xt(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,r=jt,i=jt){return Nn(e)?(this.baseUrl&&e.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new Gt(this.baseUrl+e,r,i))):this._buffers.set(t.toString(),new Gt(e,r,i)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class Jr extends Vi{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Gb extends Re{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ye,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}jo(n=>{n.draw=new Gb({context:n})});Uo(n=>{n.draw.dispose()});class Yb extends Fn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){xt(Ot(t.time),"Events must have a time property"),xt(Ot(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new Xb(t.time,t.time+t.duration,t);for(this._root===null?this._root=e:this._root.insert(e),this._length++;e!==null;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(this._root!==null){const e=[];this._root.search(t.time,e);for(const r of e)if(r.event===t){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,e){t.parent!==null?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const e=t.getBalance();let r,i=null;if(e>0)if(t.left.right===null)r=t.left,r.right=t.right,i=r;else{for(r=t.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,i=r.parent,r.left=t.left,r.right=t.right)}else if(t.right.left===null)r=t.right,r.left=t.left,i=r;else{for(r=t.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,i=r.parent,r.left=t.left,r.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=r:t.parent.right=r:this._setRoot(r),i&&this._rebalance(i)}t.dispose()}_rotateLeft(t){const e=t.parent,r=t.isLeftChild(),i=t.right;i&&(t.right=i.left,i.left=t),e!==null?r?e.left=i:e.right=i:this._setRoot(i)}_rotateRight(t){const e=t.parent,r=t.isLeftChild(),i=t.left;i&&(t.left=i.right,i.right=t),e!==null?r?e.left=i:e.right=i:this._setRoot(i)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const e=[];if(this._root.search(t,e),e.length>0){let r=e[0];for(let i=1;i<e.length;i++)e[i].low>r.low&&(r=e[i]);return r.event}}return null}forEach(t){if(this._root!==null){const e=[];this._root.traverse(r=>e.push(r)),e.forEach(r=>{r.event&&t(r.event)})}return this}forEachAtTime(t,e){if(this._root!==null){const r=[];this._root.search(t,r),r.forEach(i=>{i.event&&e(i.event)})}return this}forEachFrom(t,e){if(this._root!==null){const r=[];this._root.searchAfter(t,r),r.forEach(i=>{i.event&&e(i.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class Xb{constructor(t,e,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(this.left!==null&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),this.left!==null&&this.left.searchAfter(t,e)),this.right!==null&&this.right.searchAfter(t,e)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Cr extends kt{constructor(){super(ot(Cr.getDefaults(),arguments,["volume"])),this.name="Volume";const t=ot(Cr.getDefaults(),arguments,["volume"]);this.input=this.output=new Ce({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Qt(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(kt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class fo extends kt{constructor(){super(ot(fo.getDefaults(),arguments)),this.name="Destination",this.input=new Cr({context:this.context}),this.output=new Ce({context:this.context}),this.volume=this.input.volume;const t=ot(fo.getDefaults(),arguments);rc(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(kt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),rc(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}jo(n=>{n.destination=new fo({context:n})});Uo(n=>{n.destination.dispose()});class Zb extends Fn{constructor(t){super(),this.name="TimelineValue",this._timeline=new Ye({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class nr{constructor(t,e){this.id=nr._eventId++,this._remainderTime=0;const r=Object.assign(nr.getDefaults(),e);this.transport=t,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:jt,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}nr._eventId=0;class ou extends nr{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(ou.getDefaults(),e);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},nr.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return ao(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Jr(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){ao(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Jr(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);pi(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class ts extends Re{constructor(){super(ot(ts.getDefaults(),arguments)),this.name="Transport",this._loop=new Zb(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ye,this._repeatedEvents=new Yb,this._syncedSignals=[],this._swingAmount=0;const t=ot(ts.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new Ki({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Qt(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Re.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(this._swingTicks*2)!==0){const r=e%(this._swingTicks*2)/(this._swingTicks*2),i=Math.sin(r*Math.PI)*this._swingAmount;t+=new Jr(this.context,this._swingTicks*2/3).toSeconds()*i}El(!0),this._timeline.forEachAtTime(e,r=>r.invoke(t)),El(!1)}schedule(t,e){const r=new nr(this,{callback:t,time:new Vi(this.context,e).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(t,e,r,i=1/0){const s=new ou(this,{callback:t,duration:new nn(this.context,i).toTicks(),interval:new nn(this.context,e).toTicks(),time:new Vi(this.context,r).toTicks()});return this._addEvent(s,this._repeatedEvents)}scheduleOnce(t,e){const r=new nr(this,{callback:t,once:!0,time:new Vi(this.context,e).toTicks()});return this._addEvent(r,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(e,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new Jr(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){this.context.resume();let r;return Ot(e)&&(r=this.toTicks(e)),this._clock.start(t,r),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){cn(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new nn(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new nn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new Jr(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new Jr(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),r=this._clock.frequency.timeToTicks(t,e);this.ticks=r}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(e),i=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,e),s=e+i;this.emit("stop",s),this._clock.setTicksAtTime(t,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const e=this.now(),r=this.getTicksAtTime(e),i=t-r%t;return this._clock.nextTickTime(i,e)}}syncSignal(t,e){if(!e){const i=this.now();if(t.getValueAtTime(i)!==0){const s=this.bpm.getValueAtTime(i),o=1/(60/s/this.PPQ);e=t.getValueAtTime(i)/o}else e=0}const r=new Ce(e);return this.bpm.connect(r),r.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:r,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const r=this._syncedSignals[e];r.signal===t&&(r.ratio.dispose(),r.signal.value=r.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),bf(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Ms.mixin(ts);jo(n=>{n.transport=new ts({context:n})});Uo(n=>{n.transport.dispose()});class ze extends kt{constructor(t){super(t),this.input=void 0,this._state=new ru("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=jt,this._syncedStop=jt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Cr({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Qt(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(kt.getDefaults(),{mute:!1,onstop:jt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,r){let i=qe(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(i=this._clampToCurrentTime(i),!this._synced&&this._state.getValueAtTime(i)==="started")xt(pi(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,e,r);else if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){const s=this._state.get(i);s&&(s.offset=this.toSeconds(ii(e,0)),s.duration=r?this.toSeconds(r):void 0);const o=this.context.transport.schedule(a=>{this._start(a,e,r)},i);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else pf(this.context),this._start(i,e,r);return this}stop(t){let e=qe(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this._state.getValueAtTime(e)==="started"||Ot(this._state.getNextState("started",e))){if(this.log("stop",e),!this._synced)this._stop(e);else{const r=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(r)}this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,r){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,e,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(pi(e,0)){const r=this._state.get(e);if(r&&r.state==="started"&&r.time!==e){const i=e-this.toSeconds(r.time);let s;r.duration&&(s=this.toSeconds(r.duration)-i),this._start(t,this.toSeconds(r.offset)+i,s)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=jt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class es extends mi{constructor(){super(ot(es.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=ot(es.getDefaults(),arguments,["url","onload"]);xi(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Xt({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Gt(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(mi.getDefaults(),{url:new Gt,loop:!1,loopEnd:0,loopStart:0,onload:jt,onerror:jt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,r,i=1){xt(this.buffer.loaded,"buffer is either not set or not loaded");const s=this.toSeconds(t);this._startGain(s,i),this.loop?e=ii(e,this.loopStart):e=ii(e,0);let o=Math.max(this.toSeconds(e),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),u=a-c;ec(o,a)&&(o=(o-c)%u+c),Ke(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,ao(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(s,o)),Ot(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(s+a)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Dr(n,t){return ne(this,void 0,void 0,function*(){const e=t/n.context.sampleRate,r=new eu(1,e,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/e,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class po extends mi{constructor(){super(ot(po.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=ot(po.getDefaults(),arguments,["frequency","type"]);xi(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new Xt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new Xt({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Qt(this,["frequency","detune"])}static getDefaults(){return Object.assign(mi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class te extends ze{constructor(){super(ot(te.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=ot(te.getDefaults(),arguments,["frequency","type"]);this.frequency=new ae({context:this.context,units:"frequency",value:t.frequency}),Qt(this,"frequency"),this.detune=new ae({context:this.context,units:"cents",value:t.detune}),Qt(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(ze.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),r=new po({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return te._periodicWaveCache.find(t=>t.phase===this._phase&&Pb(t.partials,this._partials));{const t=te._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&e)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const r=this._getCachedPeriodicWave();if(Ot(r)){const{partials:i,wave:s}=r;this._wave=s,this._partials=i,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[i,s]=this._getRealImaginary(t,this._phase),o=this.context.createPeriodicWave(i,s);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),te._periodicWaveCache.push({imag:s,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type,wave:this._wave}),te._periodicWaveCache.length>100&&te._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){er(t,0);let e=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(e=r[1]),this._type!=="custom")t===0?this.type=e:this.type=e+t.toString();else{const i=new Float32Array(t);this._partials.forEach((s,o)=>i[o]=s),this._partials=Array.from(i),this.type=this._type}}_getRealImaginary(t,e){let r=2048;const i=new Float32Array(r),s=new Float32Array(r);let o=1;if(t==="custom"){if(o=this._partials.length+1,this._partialCount=this._partials.length,r=o,this._partials.length===0)return[i,s]}else{const a=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);a?(o=parseInt(a[2],10)+1,this._partialCount=parseInt(a[2],10),t=a[1],o=Math.max(o,2),r=o):this._partialCount=0,this._partials=[]}for(let a=1;a<r;++a){const c=2/(a*Math.PI);let u;switch(t){case"sine":u=a<=o?1:0,this._partials[a-1]=u;break;case"square":u=a&1?2*c:0,this._partials[a-1]=u;break;case"sawtooth":u=c*(a&1?1:-1),this._partials[a-1]=u;break;case"triangle":a&1?u=2*(c*c)*(a-1>>1&1?-1:1):u=0,this._partials[a-1]=u;break;case"custom":u=this._partials[a-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}u!==0?(i[a]=-u*Math.sin(e*a),s[a]=u*Math.cos(e*a)):(i[a]=0,s[a]=0)}return[i,s]}_inverseFFT(t,e,r){let i=0;const s=t.length;for(let o=0;o<s;o++)i+=t[o]*Math.cos(o*r)+e[o]*Math.sin(o*r);return i}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let r=0;const i=Math.PI*2,s=32;for(let o=0;o<s;o++)r=Math.max(this._inverseFFT(t,e,o/s*i),r);return Rb(-this._inverseFFT(t,e,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return ne(this,void 0,void 0,function*(){return Dr(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}te._periodicWaveCache=[];class Lo extends kt{constructor(){super(Object.assign(ot(Lo.getDefaults(),arguments,["context"])))}connect(t,e=0,r=0){return iu(this,t,e,r),this}}class ns extends Lo{constructor(){super(Object.assign(ot(ns.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=ot(ns.getDefaults(),arguments,["mapping","length"]);cn(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):wb(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(ae.getDefaults(),{length:1024})}setMap(t,e=1024){const r=new Float32Array(e);for(let i=0,s=e;i<s;i++){const o=i/(s-1)*2-1;r[i]=t(o,i)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const e=["none","2x","4x"].some(r=>r.includes(t));xt(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Jb extends Lo{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new ns({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Er extends ae{constructor(){super(Object.assign(ot(Er.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=ot(Er.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Ce({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ae.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class rs extends ze{constructor(){super(ot(rs.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Jb({context:this.context}),this._modulationNode=new Ce({context:this.context});const t=ot(rs.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new te({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new te({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Er({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Qt(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(te.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return ne(this,void 0,void 0,function*(){return Dr(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class is extends ze{constructor(){super(ot(is.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Ce({context:this.context,gain:0});const t=ot(is.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new te({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new ae({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new te({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Er({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new Er({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Qt(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(te.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return ne(this,void 0,void 0,function*(){return Dr(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class gi extends ze{constructor(){super(ot(gi.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Ce({context:this.context,gain:0}),this._thresh=new ns({context:this.context,mapping:e=>e<=0?-1:1});const t=ot(gi.getDefaults(),arguments,["frequency","width"]);this.width=new ae({context:this.context,units:"audioRange",value:t.width}),this._triangle=new te({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Qt(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ze.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return ne(this,void 0,void 0,function*(){return Dr(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class ss extends ze{constructor(){super(ot(ss.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=ot(ss.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new ae({context:this.context,units:"frequency",value:t.frequency}),this.detune=new ae({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Qt(this,["frequency","detune"])}static getDefaults(){return Object.assign(te.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,r=t/(this._oscillators.length-1);this._forEach((i,s)=>i.detune.value=e+r*s)}}get count(){return this._oscillators.length}set count(t){if(er(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const r=new te({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:e===0?()=>this.onstop(this):jt});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[e]=r}this.spread=this._spread,this.state==="started"&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,r)=>e.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return ne(this,void 0,void 0,function*(){return Dr(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class os extends ze{constructor(){super(ot(os.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Er({context:this.context,value:2});const t=ot(os.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new gi({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new te({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Qt(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ze.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return ne(this,void 0,void 0,function*(){return Dr(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Ol={am:rs,fat:ss,fm:is,oscillator:te,pulse:gi,pwm:os};class as extends ze{constructor(){super(ot(as.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=ot(as.getDefaults(),arguments,["frequency","type"]);this.frequency=new ae({context:this.context,units:"frequency",value:t.frequency}),this.detune=new ae({context:this.context,units:"cents",value:t.detune}),Qt(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(te.getDefaults(),is.getDefaults(),rs.getDefaults(),ss.getDefaults(),gi.getDefaults(),os.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Ol[t],r=this.now();if(this._oscillator){const i=this._oscillator;i.stop(r),this.context.setTimeout(()=>i.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(e=this._oscillator.type),t==="fm"?this.type="fm"+e:t==="am"?this.type="am"+e:t==="fat"?this.type="fat"+e:t==="oscillator"?this.type=e:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,e){return t instanceof Ol[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&xr(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&xr(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Nn(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(t=1024){return ne(this,void 0,void 0,function*(){return Dr(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function Af(n,t=1/0){const e=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(s){er(s,n,t),e.set(this,s)}})}}function $n(n,t=1/0){const e=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(s){er(this.toSeconds(s),n,t),e.set(this,s)}})}}class cs extends ze{constructor(){super(ot(cs.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=ot(cs.getDefaults(),arguments,["url","onload"]);this._buffer=new Gt({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ze.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:jt,onerror:jt,playbackRate:1,reverse:!1})}load(t){return ne(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=jt){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,r){return super.start(t,e,r),this}_start(t,e,r){this._loop?e=ii(e,this._loopStart):e=ii(e,0);const i=this.toSeconds(e),s=r;r=ii(r,Math.max(this._buffer.duration-i,0));let o=this.toSeconds(r);o=o/this._playbackRate,t=this.toSeconds(t);const a=new es({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+o),this._state.setStateAtTime("stopped",t+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&qe(s)?a.start(t,i):a.start(t,i,o-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(r=>r.stop(e))}restart(t,e,r){return super.restart(t,e,r),this}_restart(t,e,r){var i;(i=[...this._activeSources].pop())===null||i===void 0||i.stop(t),this._start(t,e,r)}seek(t,e){const r=this.toSeconds(e);if(this._state.getValueAtTime(r)==="started"){const i=this.toSeconds(t);this._stop(r),this._start(r,i)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&er(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&er(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),r=this._state.getNextState("stopped",e);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(i=>i.cancelStop())),this._activeSources.forEach(i=>{i.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}dn([$n(0)],cs.prototype,"fadeIn",void 0);dn([$n(0)],cs.prototype,"fadeOut",void 0);class Rn extends kt{constructor(){super(ot(Rn.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new ae({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=ot(Rn.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(kt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Nn(t))return t;{let r;for(r in Ds)if(Ds[r][e]===t)return r;return t}}_setCurve(t,e,r){if(Nn(r)&&Reflect.has(Ds,r)){const i=Ds[r];yr(i)?t!=="_decayCurve"&&(this[t]=i[e]):this[t]=i}else if(cn(r)&&t!=="_decayCurve")this[t]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){xt(["linear","exponential"].some(e=>e===t),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),s=this.getValueAtTime(t);if(s>0){const o=1/r;r=(1-s)/o}if(r<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(e,r,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(e,r,t);else{this._sig.cancelAndHoldAtTime(t);let o=this._attackCurve;for(let a=1;a<o.length;a++)if(o[a-1]<=s&&s<=o[a]){o=this._attackCurve.slice(a),o[0]=s;break}this._sig.setValueCurveAtTime(o,t,r,e)}if(i&&this.sustain<1){const o=e*this.sustain,a=t+r;this.log("decay",a),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(o,i+a):this._sig.exponentialApproachValueAtTime(o,a,i)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,t):(xt(cn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,r,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,r=1){return e=this.toSeconds(e),this.triggerAttack(e,r),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,r=0){return iu(this,t,e,r),this}asArray(t=1024){return ne(this,void 0,void 0,function*(){const e=t/this.context.sampleRate,r=new eu(1,e,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),s=i+this.toSeconds(this.release),o=s*.1,a=s+o,c=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/a,decay:e*this.toSeconds(this.decay)/a,release:e*this.toSeconds(this.release)/a,context:r}));return c._sig.toDestination(),c.triggerAttackRelease(e*(i+o)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}dn([$n(0)],Rn.prototype,"attack",void 0);dn([$n(0)],Rn.prototype,"decay",void 0);dn([Af(0,1)],Rn.prototype,"sustain",void 0);dn([$n(0)],Rn.prototype,"release",void 0);const Ds=(()=>{let n,t;const e=[];for(n=0;n<128;n++)e[n]=Math.sin(n/(128-1)*(Math.PI/2));const r=[],i=6.4;for(n=0;n<128-1;n++){t=n/(128-1);const h=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[n]=h/10+t*.83}r[128-1]=1;const s=[],o=5;for(n=0;n<128;n++)s[n]=Math.ceil(n/(128-1)*o)/o;const a=[];for(n=0;n<128;n++)t=n/(128-1),a[n]=.5*(1-Math.cos(Math.PI*t));const c=[];for(n=0;n<128;n++){t=n/(128-1);const h=Math.pow(t,3)*4+.2,d=Math.cos(h*Math.PI*2*t);c[n]=Math.abs(d*(1-t))}function u(h){const d=new Array(h.length);for(let f=0;f<h.length;f++)d[f]=1-h[f];return d}function l(h){return h.slice(0).reverse()}return{bounce:{In:u(c),Out:c},cosine:{In:e,Out:l(e)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:a,Out:u(a)},step:{In:s,Out:u(s)}}})();class Ir extends kt{constructor(){super(ot(Ir.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e);const t=ot(Ir.getDefaults(),arguments);this._volume=this.output=new Cr({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Qt(this,"volume")}static getDefaults(){return Object.assign(kt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const r=this["_original_"+t]=this[t];this[t]=(...i)=>{const s=i[e],o=this.context.transport.schedule(a=>{i[e]=a,r.apply(this,i)},s);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,r,i){const s=this.toSeconds(r),o=this.toSeconds(e);return this.triggerAttack(t,s,i),this.triggerRelease(s+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class kr extends Ir{constructor(){super(ot(kr.getDefaults(),arguments));const t=ot(kr.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(Ir.getDefaults(),{detune:0,onsilence:jt,portamento:0})}triggerAttack(t,e,r=1){this.log("triggerAttack",t,e,r);const i=this.toSeconds(e);return this._triggerEnvelopeAttack(i,r),this.setNote(t,i),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const r=this.toSeconds(e),i=t instanceof Ue?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const s=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,s,r)}else this.frequency.setValueAtTime(i,r);return this}}dn([$n(0)],kr.prototype,"portamento",void 0);class au extends Rn{constructor(){super(ot(au.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ce({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class us extends kr{constructor(){super(ot(us.getDefaults(),arguments)),this.name="Synth";const t=ot(us.getDefaults(),arguments);this.oscillator=new as(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new au(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Qt(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(kr.getDefaults(),{envelope:Object.assign(Il(Rn.getDefaults(),Object.keys(kt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Il(as.getDefaults(),[...Object.keys(ze.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),i=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+r+i)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ls extends us{constructor(){super(ot(ls.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=ot(ls.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Qt(this,["oscillator","envelope"])}static getDefaults(){return ri(kr.getDefaults(),us.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const r=this.toSeconds(e),i=this.toFrequency(t instanceof Ue?t.toFrequency():t),s=i*this.octaves;return this.oscillator.frequency.setValueAtTime(s,r),this.oscillator.frequency.exponentialRampToValueAtTime(i,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}dn([Af(0)],ls.prototype,"octaves",void 0);dn([$n(0)],ls.prototype,"pitchDecay",void 0);const xf=new Set;function cu(n){xf.add(n)}function Sf(n,t){const e=`registerProcessor("${n}", ${t})`;xf.add(e)}const Qb=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;cu(Qb);const Kb=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;cu(Kb);const tw=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;cu(tw);const ew="feedback-comb-filter",nw=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Sf(ew,nw);class hs extends Ir{constructor(){super(ot(hs.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=ot(hs.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach(r=>{const i=parseInt(r,10);if(xt(Rs(r)||xr(i)&&isFinite(i),`url key is neither a note or midi pitch: ${r}`),Rs(r)){const s=new Ue(this.context,r).toMidi();e[s]=t.urls[r]}else xr(i)&&isFinite(i)&&(e[i]=t.urls[i])}),this._buffers=new su({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(Ir.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:jt,onerror:jt,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,r=1){return this.log("triggerAttack",t,e,r),Array.isArray(t)||(t=[t]),t.forEach(i=>{const s=Tf(new Ue(this.context,i).toFrequency()),o=Math.round(s),a=s-o,c=this._findClosest(o),u=o-c,l=this._buffers.get(u),h=Mf(c+a),d=new es({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(e,0,l.duration/h,r),cn(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const f=this._activeSources.get(o),m=f.indexOf(d);m!==-1&&f.splice(m,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=new Ue(this.context,r).toMidi();if(this._activeSources.has(i)&&this._activeSources.get(i).length){const s=this._activeSources.get(i);e=this.toSeconds(e),s.forEach(o=>{o.stop(e)}),this._activeSources.set(i,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,r,i=1){const s=this.toSeconds(r);return this.triggerAttack(t,s,i),cn(e)?(xt(cn(t),"notes must be an array when duration is array"),t.forEach((o,a)=>{const c=e[Math.min(a,e.length-1)];this.triggerRelease(o,s+this.toSeconds(c))})):this.triggerRelease(t,s+this.toSeconds(e)),this}add(t,e,r){if(xt(Rs(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Rs(t)){const i=new Ue(this.context,t).toMidi();this._buffers.add(i,e,r)}else this._buffers.add(t,e,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}dn([$n(0)],hs.prototype,"attack",void 0);dn([$n(0)],hs.prototype,"release",void 0);class mo extends kt{constructor(){super(Object.assign(ot(mo.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=ot(mo.getDefaults(),arguments,["pan"]);this.pan=new Xt({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Qt(this,"pan")}static getDefaults(){return Object.assign(kt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const rw="bit-crusher",iw=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Sf(rw,iw);class Kt extends kt{constructor(){super(ot(Kt.getDefaults(),arguments,["solo"])),this.name="Solo";const t=ot(Kt.getDefaults(),arguments,["solo"]);this.input=this.output=new Ce({context:this.context}),Kt._allSolos.has(this.context)||Kt._allSolos.set(this.context,new Set),Kt._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(kt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Kt._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Kt._soloed.has(this.context)||Kt._soloed.set(this.context,new Set),Kt._soloed.get(this.context).add(this)}_removeSolo(){Kt._soloed.has(this.context)&&Kt._soloed.get(this.context).delete(this)}_isSoloed(){return Kt._soloed.has(this.context)&&Kt._soloed.get(this.context).has(this)}_noSolos(){return!Kt._soloed.has(this.context)||Kt._soloed.has(this.context)&&Kt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Kt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Kt._allSolos=new Map;Kt._soloed=new Map;class go extends kt{constructor(){super(ot(go.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=ot(go.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new mo({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Cr({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Qt(this,["pan","volume"])}static getDefaults(){return Object.assign(kt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class pr extends kt{constructor(){super(ot(pr.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=ot(pr.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Kt({solo:t.solo,context:this.context}),this._panVol=this.output=new go({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Qt(this,["pan","volume"])}static getDefaults(){return Object.assign(kt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return pr.buses.has(t)||pr.buses.set(t,new Ce({context:this.context})),pr.buses.get(t)}send(t,e=0){const r=this._getBus(t),i=new Ce({context:this.context,units:"decibels",gain:e});return this.connect(i),i.connect(r),i}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}pr.buses=new Map;class sw extends kt{constructor(){super(...arguments),this.name="Listener",this.positionX=new Xt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Xt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Xt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Xt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Xt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Xt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Xt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Xt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Xt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(kt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}jo(n=>{n.listener=new sw({context:n})});Uo(n=>{n.listener.dispose()});He().transport;He().destination;He().destination;He().listener;He().draw;He();var ow=function(n){n=n||{};var t;t||(t=typeof n<"u"?n:{});var e={},r;for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);t.arguments=[],t.thisProgram="./this.program",t.quit=function(p,_){throw _},t.preRun=[],t.postRun=[];var i=!1,s=!1,o=!1,a=!1;i=typeof window=="object",s=typeof importScripts=="function",o=typeof process=="object"&&typeof require=="function"&&!i&&!s,a=!i&&!o&&!s;var c="";function u(p){return t.locateFile?t.locateFile(p,c):c+p}if(o){c=__dirname+"/";var l,h;t.read=function(p,_){return l||(l=require("fs")),h||(h=require("path")),p=h.normalize(p),p=l.readFileSync(p),_?p:p.toString()},t.readBinary=function(p){return p=t.read(p,!0),p.buffer||(p=new Uint8Array(p)),O(p.buffer),p},1<process.argv.length&&(t.thisProgram=process.argv[1].replace(/\\/g,"/")),t.arguments=process.argv.slice(2),process.on("uncaughtException",function(p){throw p}),process.on("unhandledRejection",function(){process.exit(1)}),t.quit=function(p){process.exit(p)},t.inspect=function(){return"[Emscripten Module object]"}}else if(a)typeof read<"u"&&(t.read=function(p){return read(p)}),t.readBinary=function(p){return typeof readbuffer=="function"?new Uint8Array(readbuffer(p)):(p=read(p,"binary"),O(typeof p=="object"),p)},typeof scriptArgs<"u"?t.arguments=scriptArgs:typeof arguments<"u"&&(t.arguments=arguments),typeof quit=="function"&&(t.quit=function(p){quit(p)});else if(i||s){if(i){var d=this._currentScript;d.src.indexOf("blob:")!==0&&(c="/")}else s&&(c="/");t.read=function(p){var _=new XMLHttpRequest;return _.open("GET",p,!1),_.send(null),_.responseText},s&&(t.readBinary=function(p){var _=new XMLHttpRequest;return _.open("GET",p,!1),_.responseType="arraybuffer",_.send(null),new Uint8Array(_.response)}),t.readAsync=function(p,_,R){var B=new XMLHttpRequest;B.open("GET",p,!0),B.responseType="arraybuffer",B.onload=function(){B.status==200||B.status==0&&B.response?_(B.response):R()},B.onerror=R,B.send(null)},t.setWindowTitle=function(p){}}var f=t.print||(typeof console<"u"?console.log.bind(console):typeof print<"u"?print:null),m=t.printErr||(typeof printErr<"u"?printErr:typeof console<"u"&&console.warn.bind(console)||f);for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);e=void 0;function y(p){var _;return _||(_=16),Math.ceil(p/_)*_}var v={"f64-rem":function(p,_){return p%_},debugger:function(){debugger}},A=0;function O(p,_){p||An("Assertion failed: "+_)}var D=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;typeof TextDecoder<"u"&&new TextDecoder("utf-16le");var E,S,N,C,U,z,W,$,K;function J(){t.HEAP8=S=new Int8Array(E),t.HEAP16=C=new Int16Array(E),t.HEAP32=z=new Int32Array(E),t.HEAPU8=N=new Uint8Array(E),t.HEAPU16=U=new Uint16Array(E),t.HEAPU32=W=new Uint32Array(E),t.HEAPF32=$=new Float32Array(E),t.HEAPF64=K=new Float64Array(E)}var nt,M,g,I,T,P,F;nt=M=g=I=T=P=F=0;function X(){An("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+rt+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}var et=t.TOTAL_STACK||5242880,rt=t.TOTAL_MEMORY||16777216;rt<et&&m("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+rt+"! (TOTAL_STACK="+et+")"),t.buffer?E=t.buffer:(typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(t.wasmMemory=new WebAssembly.Memory({initial:rt/65536,maximum:rt/65536}),E=t.wasmMemory.buffer):E=new ArrayBuffer(rt),t.buffer=E),J();function at(p){for(;0<p.length;){var _=p.shift();if(typeof _=="function")_();else{var R=_.B;typeof R=="number"?_.F===void 0?t.dynCall_v(R):t.dynCall_vi(R,_.F):R(_.F===void 0?null:_.F)}}}var Z=[],Et=[],gt=[],ct=[],Ht=!1;function qt(){var p=t.preRun.shift();Z.unshift(p)}var ve=Math.cos,Bt=Math.sin,w=0,b=null;t.preloadedImages={},t.preloadedAudios={};function k(p){return String.prototype.startsWith?p.startsWith("data:application/octet-stream;base64,"):p.indexOf("data:application/octet-stream;base64,")===0}(function(){function p(){try{if(t.wasmBinary)return new Uint8Array(t.wasmBinary);if(t.readBinary)return t.readBinary(ut);throw"both async and sync fetching of the wasm failed"}catch(st){An(st)}}function _(){return t.wasmBinary||!i&&!s||typeof fetch!="function"?new Promise(function(st){st(p())}):fetch(ut,{credentials:"same-origin"}).then(function(st){if(!st.ok)throw"failed to load wasm binary file at '"+ut+"'";return st.arrayBuffer()}).catch(function(){return p()})}function R(st){function yt(wt){if(ht=wt.exports,ht.memory){wt=ht.memory;var $t=t.buffer;wt.byteLength<$t.byteLength&&m("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),$t=new Int8Array($t),new Int8Array(wt).set($t),t.buffer=E=wt,J()}t.asm=ht,t.usingWasm=!0,w--,t.monitorRunDependencies&&t.monitorRunDependencies(w),w==0&&b&&(wt=b,b=null,wt())}function vt(wt){yt(wt.instance)}function fe(wt){_().then(function($t){return WebAssembly.instantiate($t,Mt)}).then(wt).catch(function($t){m("failed to asynchronously prepare wasm: "+$t),An($t)})}if(typeof WebAssembly!="object")return m("no native wasm support detected"),!1;if(!(t.wasmMemory instanceof WebAssembly.Memory))return m("no native wasm Memory in use"),!1;if(st.memory=t.wasmMemory,Mt.global={NaN:NaN,Infinity:1/0},Mt["global.Math"]=Math,Mt.env=st,w++,t.monitorRunDependencies&&t.monitorRunDependencies(w),t.instantiateWasm)try{return t.instantiateWasm(Mt,yt)}catch(wt){return m("Module.instantiateWasm callback failed with error: "+wt),!1}return t.wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||k(ut)||typeof fetch!="function"?fe(vt):WebAssembly.instantiateStreaming(fetch(ut,{credentials:"same-origin"}),Mt).then(vt).catch(function(wt){m("wasm streaming compile failed: "+wt),m("falling back to ArrayBuffer instantiation"),fe(vt)}),{}}var B="aubio.wast",ut="aubio.wasm",mt="aubio.temp.asm.js";k(B)||(B=u(B)),k(ut)||(ut=u(ut)),k(mt)||(mt=u(mt));var Mt={global:null,env:null,asm2wasm:v,parent:t},ht=null;t.asmPreload=t.asm;var Tt=t.reallocBuffer;t.reallocBuffer=function(st){if(_t==="asmjs")var yt=Tt(st);else t:{var vt=t.usingWasm?65536:16777216;if(0<st%vt&&(st+=vt-st%vt),vt=t.buffer.byteLength,t.usingWasm)try{yt=t.wasmMemory.grow((st-vt)/65536)!==-1?t.buffer=t.wasmMemory.buffer:null;break t}catch{yt=null;break t}yt=void 0}return yt};var _t="";t.asm=function(st,yt){if(!yt.table){st=t.wasmTableSize,st===void 0&&(st=1024);var vt=t.wasmMaxTableSize;yt.table=typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?vt!==void 0?new WebAssembly.Table({initial:st,maximum:vt,element:"anyfunc"}):new WebAssembly.Table({initial:st,element:"anyfunc"}):Array(st),t.wasmTable=yt.table}return yt.memoryBase||(yt.memoryBase=t.STATIC_BASE),yt.tableBase||(yt.tableBase=0),yt=R(yt),O(yt,"no binaryen method succeeded."),yt}})(),nt=1024,M=nt+9312,Et.push({B:function(){Up()}},{B:function(){Lp()}},{B:function(){qp()}},{B:function(){jp()}}),t.STATIC_BASE=nt,t.STATIC_BUMP=9312,M+=16;var j=0;function V(){return j+=4,z[j-4>>2]}var q={};function G(p,_){j=_;try{var R=V(),B=V(),ut=V();for(p=0,G.J||(G.J=[null,[],[]],G.P=function(Tt,_t){var st=G.J[Tt];if(O(st),_t===0||_t===10){Tt=Tt===1?f:m;t:{for(var yt=_t=0;st[yt];)++yt;if(16<yt-_t&&st.subarray&&D)_t=D.decode(st.subarray(_t,yt));else for(yt="";;){var vt=st[_t++];if(!vt){_t=yt;break t}if(vt&128){var fe=st[_t++]&63;if((vt&224)==192)yt+=String.fromCharCode((vt&31)<<6|fe);else{var wt=st[_t++]&63;if((vt&240)==224)vt=(vt&15)<<12|fe<<6|wt;else{var $t=st[_t++]&63;if((vt&248)==240)vt=(vt&7)<<18|fe<<12|wt<<6|$t;else{var St=st[_t++]&63;if((vt&252)==248)vt=(vt&3)<<24|fe<<18|wt<<12|$t<<6|St;else{var Qe=st[_t++]&63;vt=(vt&1)<<30|fe<<24|wt<<18|$t<<12|St<<6|Qe}}}65536>vt?yt+=String.fromCharCode(vt):(vt-=65536,yt+=String.fromCharCode(55296|vt>>10,56320|vt&1023))}}else yt+=String.fromCharCode(vt)}}Tt(_t),st.length=0}else st.push(_t)}),_=0;_<ut;_++){for(var mt=z[B+8*_>>2],Mt=z[B+(8*_+4)>>2],ht=0;ht<Mt;ht++)G.P(R,N[mt+ht]);p+=Mt}return p}catch(Tt){return typeof FS<"u"&&Tt instanceof FS.I||An(Tt),-Tt.L}}function Y(p){switch(p){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+p)}}var Q=void 0;function H(p){for(var _="";N[p];)_+=Q[N[p++]];return _}var dt={},lt={},pt={};function bt(p){if(p===void 0)return"_unknown";p=p.replace(/[^a-zA-Z0-9_]/g,"$");var _=p.charCodeAt(0);return 48<=_&&57>=_?"_"+p:p}function It(p,_){return p=bt(p),new Function("body","return function "+p+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(_)}function Ft(p){var _=Error,R=It(p,function(B){this.name=p,this.message=B,B=Error(B).stack,B!==void 0&&(this.stack=this.toString()+`
`+B.replace(/^Error(:[^\n]*)?\n/,""))});return R.prototype=Object.create(_.prototype),R.prototype.constructor=R,R.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},R}var Pt=void 0;function ft(p){throw new Pt(p)}var Oe=void 0;function Je(p){throw new Oe(p)}function Vn(p,_,R){function B(ht){ht=R(ht),ht.length!==p.length&&Je("Mismatched type converter count");for(var Tt=0;Tt<p.length;++Tt)Me(p[Tt],ht[Tt])}p.forEach(function(ht){pt[ht]=_});var ut=Array(_.length),mt=[],Mt=0;_.forEach(function(ht,Tt){lt.hasOwnProperty(ht)?ut[Tt]=lt[ht]:(mt.push(ht),dt.hasOwnProperty(ht)||(dt[ht]=[]),dt[ht].push(function(){ut[Tt]=lt[ht],++Mt,Mt===mt.length&&B(ut)}))}),mt.length===0&&B(ut)}function Me(p,_,R){if(R=R||{},!("argPackAdvance"in _))throw new TypeError("registerType registeredInstance requires argPackAdvance");var B=_.name;if(p||ft('type "'+B+'" must have a positive integer typeid pointer'),lt.hasOwnProperty(p)){if(R.X)return;ft("Cannot register type '"+B+"' twice")}lt[p]=_,delete pt[p],dt.hasOwnProperty(p)&&(_=dt[p],delete dt[p],_.forEach(function(ut){ut()}))}function Br(p){ft(p.a.f.b.name+" instance already deleted")}var ie=void 0,_e=[];function Fr(){for(;_e.length;){var p=_e.pop();p.a.s=!1,p.delete()}}function jn(){}var xu={};function Su(p,_,R){if(p[_].j===void 0){var B=p[_];p[_]=function(){return p[_].j.hasOwnProperty(arguments.length)||ft("Function '"+R+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+p[_].j+")!"),p[_].j[arguments.length].apply(this,arguments)},p[_].j=[],p[_].j[B.A]=B}}function Ep(p,_){t.hasOwnProperty(p)?(ft("Cannot register public name '"+p+"' twice"),Su(t,p,p),t.hasOwnProperty(void 0)&&ft("Cannot register multiple overloads of a function with the same number of arguments (undefined)!"),t[p].j[void 0]=_):t[p]=_}function Ip(p,_,R,B,ut,mt,Mt,ht){this.name=p,this.constructor=_,this.u=R,this.o=B,this.i=ut,this.T=mt,this.w=Mt,this.S=ht,this.Z=[]}function na(p,_,R){for(;_!==R;)_.w||ft("Expected null or instance of "+R.name+", got an instance of "+_.name),p=_.w(p),_=_.i;return p}function kp(p,_){return _===null?(this.G&&ft("null is not a valid "+this.name),0):(_.a||ft('Cannot pass "'+Vr(_)+'" as a '+this.name),_.a.c||ft("Cannot pass deleted object as a pointer of type "+this.name),na(_.a.c,_.a.f.b,this.b))}function Op(p,_){if(_===null){if(this.G&&ft("null is not a valid "+this.name),this.D){var R=this.$();return p!==null&&p.push(this.o,R),R}return 0}if(_.a||ft('Cannot pass "'+Vr(_)+'" as a '+this.name),_.a.c||ft("Cannot pass deleted object as a pointer of type "+this.name),!this.C&&_.a.f.C&&ft("Cannot convert argument of type "+(_.a.h?_.a.h.name:_.a.f.name)+" to parameter type "+this.name),R=na(_.a.c,_.a.f.b,this.b),this.D)switch(_.a.g===void 0&&ft("Passing raw pointer to smart pointer is illegal"),this.ba){case 0:_.a.h===this?R=_.a.g:ft("Cannot convert argument of type "+(_.a.h?_.a.h.name:_.a.f.name)+" to parameter type "+this.name);break;case 1:R=_.a.g;break;case 2:if(_.a.h===this)R=_.a.g;else{var B=_.clone();R=this.aa(R,Un(function(){B.delete()})),p!==null&&p.push(this.o,R)}break;default:ft("Unsupporting sharing policy")}return R}function Pp(p,_){return _===null?(this.G&&ft("null is not a valid "+this.name),0):(_.a||ft('Cannot pass "'+Vr(_)+'" as a '+this.name),_.a.c||ft("Cannot pass deleted object as a pointer of type "+this.name),_.a.f.C&&ft("Cannot convert argument of type "+_.a.f.name+" to parameter type "+this.name),na(_.a.c,_.a.f.b,this.b))}function As(p){return this.fromWireType(W[p>>2])}function Cu(p,_,R){return _===R?p:R.i===void 0?null:(p=Cu(p,_,R.i),p===null?null:R.S(p))}var Ii={};function Np(p,_){for(_===void 0&&ft("ptr should not be undefined");p.i;)_=p.w(_),p=p.i;return Ii[_]}function xs(p,_){return _.f&&_.c||Je("makeClassHandle requires ptr and ptrType"),!!_.h!=!!_.g&&Je("Both smartPtrType and smartPtr must be specified"),_.count={value:1},Object.create(p,{a:{value:_}})}function Tn(p,_,R,B,ut,mt,Mt,ht,Tt,_t,st){this.name=p,this.b=_,this.G=R,this.C=B,this.D=ut,this.Y=mt,this.ba=Mt,this.M=ht,this.$=Tt,this.aa=_t,this.o=st,ut||_.i!==void 0?this.toWireType=Op:(this.toWireType=B?kp:Pp,this.l=null)}function Rp(p,_){t.hasOwnProperty(p)||Je("Replacing nonexistant public symbol"),t[p]=_,t[p].A=void 0}function $r(p,_){if(p=H(p),t["FUNCTION_TABLE_"+p]!==void 0)var R=t["FUNCTION_TABLE_"+p][_];else if(typeof FUNCTION_TABLE<"u")R=FUNCTION_TABLE[_];else{R=t.asm["dynCall_"+p],R===void 0&&(R=t.asm["dynCall_"+p.replace(/f/g,"d")],R===void 0&&ft("No dynCall invoker for signature: "+p));for(var B=[],ut=1;ut<p.length;++ut)B.push("a"+ut);ut="return function "+("dynCall_"+p+"_"+_)+"("+B.join(", ")+`) {
`,ut+="    return dynCall(rawFunction"+(B.length?", ":"")+B.join(", ")+`);
`,R=new Function("dynCall","rawFunction",ut+`};
`)(R,_)}return typeof R!="function"&&ft("unknown function pointer with signature "+p+": "+_),R}var Eu=void 0;function Iu(p){p=zp(p);var _=H(p);return qn(p),_}function ra(p,_){function R(mt){ut[mt]||lt[mt]||(pt[mt]?pt[mt].forEach(R):(B.push(mt),ut[mt]=!0))}var B=[],ut={};throw _.forEach(R),new Eu(p+": "+B.map(Iu).join([", "]))}function ku(p,_){for(var R=[],B=0;B<p;B++)R.push(z[(_>>2)+B]);return R}function ia(p){for(;p.length;){var _=p.pop();p.pop()(_)}}function Dp(p){var _=Function;if(!(_ instanceof Function))throw new TypeError("new_ called with constructor type "+typeof _+" which is not a function");var R=It(_.name||"unknownFunctionName",function(){});return R.prototype=_.prototype,R=new R,p=_.apply(R,p),p instanceof Object?p:R}var sa=[],Fe=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function oa(p){4<p&&--Fe[p].H===0&&(Fe[p]=void 0,sa.push(p))}function Un(p){switch(p){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var _=sa.length?sa.pop():Fe.length;return Fe[_]={H:1,value:p},_}}function Vr(p){if(p===null)return"null";var _=typeof p;return _==="object"||_==="array"||_==="function"?p.toString():""+p}function Bp(p,_){switch(_){case 2:return function(R){return this.fromWireType($[R>>2])};case 3:return function(R){return this.fromWireType(K[R>>3])};default:throw new TypeError("Unknown float type: "+p)}}function Fp(p,_,R){switch(_){case 0:return R?function(B){return S[B]}:function(B){return N[B]};case 1:return R?function(B){return C[B>>1]}:function(B){return U[B>>1]};case 2:return R?function(B){return z[B>>2]}:function(B){return W[B>>2]};default:throw new TypeError("Unknown integer type: "+p)}}function jr(p){return p||ft("Cannot use deleted val. handle = "+p),Fe[p].value}function Ou(p,_){var R=lt[p];return R===void 0&&ft(_+" has unknown type "+Iu(p)),R}for(var $p={},Pu=Array(256),Ss=0;256>Ss;++Ss)Pu[Ss]=String.fromCharCode(Ss);Q=Pu,Pt=t.BindingError=Ft("BindingError"),Oe=t.InternalError=Ft("InternalError"),jn.prototype.isAliasOf=function(p){if(!(this instanceof jn&&p instanceof jn))return!1;var _=this.a.f.b,R=this.a.c,B=p.a.f.b;for(p=p.a.c;_.i;)R=_.w(R),_=_.i;for(;B.i;)p=B.w(p),B=B.i;return _===B&&R===p},jn.prototype.clone=function(){if(this.a.c||Br(this),this.a.v)return this.a.count.value+=1,this;var p=this.a;return p=Object.create(Object.getPrototypeOf(this),{a:{value:{count:p.count,s:p.s,v:p.v,c:p.c,f:p.f,g:p.g,h:p.h}}}),p.a.count.value+=1,p.a.s=!1,p},jn.prototype.delete=function(){if(this.a.c||Br(this),this.a.s&&!this.a.v&&ft("Object already scheduled for deletion"),--this.a.count.value,this.a.count.value===0){var p=this.a;p.g?p.h.o(p.g):p.f.b.o(p.c)}this.a.v||(this.a.g=void 0,this.a.c=void 0)},jn.prototype.isDeleted=function(){return!this.a.c},jn.prototype.deleteLater=function(){return this.a.c||Br(this),this.a.s&&!this.a.v&&ft("Object already scheduled for deletion"),_e.push(this),_e.length===1&&ie&&ie(Fr),this.a.s=!0,this},Tn.prototype.U=function(p){return this.M&&(p=this.M(p)),p},Tn.prototype.K=function(p){this.o&&this.o(p)},Tn.prototype.argPackAdvance=8,Tn.prototype.readValueFromPointer=As,Tn.prototype.deleteObject=function(p){p!==null&&p.delete()},Tn.prototype.fromWireType=function(p){function _(){return this.D?xs(this.b.u,{f:this.Y,c:R,h:this,g:p}):xs(this.b.u,{f:this,c:p})}var R=this.U(p);if(!R)return this.K(p),null;var B=Np(this.b,R);if(B!==void 0)return B.a.count.value===0?(B.a.c=R,B.a.g=p,B.clone()):(B=B.clone(),this.K(p),B);if(B=this.b.T(R),B=xu[B],!B)return _.call(this);B=this.C?B.R:B.pointerType;var ut=Cu(R,this.b,B.b);return ut===null?_.call(this):this.D?xs(B.b.u,{f:B,c:ut,h:this,g:p}):xs(B.b.u,{f:B,c:ut})},t.getInheritedInstanceCount=function(){return Object.keys(Ii).length},t.getLiveInheritedInstances=function(){var p=[],_;for(_ in Ii)Ii.hasOwnProperty(_)&&p.push(Ii[_]);return p},t.flushPendingDeletes=Fr,t.setDelayFunction=function(p){ie=p,_e.length&&ie&&ie(Fr)},Eu=t.UnboundTypeError=Ft("UnboundTypeError"),t.count_emval_handles=function(){for(var p=0,_=5;_<Fe.length;++_)Fe[_]!==void 0&&++p;return p},t.get_first_emval=function(){for(var p=5;p<Fe.length;++p)if(Fe[p]!==void 0)return Fe[p];return null};var Vp=M;M=M+4+15&-16,F=Vp,g=I=y(M),T=g+et,P=y(T),z[F>>2]=P,t.wasmTableSize=83,t.wasmMaxTableSize=83,t.N={},t.O={abort:An,enlargeMemory:function(){X()},getTotalMemory:function(){return rt},abortOnCannotGrowMemory:X,___setErrNo:function(p){return t.___errno_location&&(z[t.___errno_location()>>2]=p),p},___syscall140:function(p,_){j=_;try{var R=q.V();V();var B=V(),ut=V(),mt=V();return FS.ea(R,B,mt),z[ut>>2]=R.position,R.W&&B===0&&mt===0&&(R.W=null),0}catch(Mt){return typeof FS<"u"&&Mt instanceof FS.I||An(Mt),-Mt.L}},___syscall146:G,___syscall54:function(p,_){return j=_,0},___syscall6:function(p,_){j=_;try{var R=q.V();return FS.close(R),0}catch(B){return typeof FS<"u"&&B instanceof FS.I||An(B),-B.L}},__embind_register_bool:function(p,_,R,B,ut){var mt=Y(R);_=H(_),Me(p,{name:_,fromWireType:function(Mt){return!!Mt},toWireType:function(Mt,ht){return ht?B:ut},argPackAdvance:8,readValueFromPointer:function(Mt){if(R===1)var ht=S;else if(R===2)ht=C;else if(R===4)ht=z;else throw new TypeError("Unknown boolean type size: "+_);return this.fromWireType(ht[Mt>>mt])},l:null})},__embind_register_class:function(p,_,R,B,ut,mt,Mt,ht,Tt,_t,st,yt,vt){st=H(st),mt=$r(ut,mt),ht&&(ht=$r(Mt,ht)),_t&&(_t=$r(Tt,_t)),vt=$r(yt,vt);var fe=bt(st);Ep(fe,function(){ra("Cannot construct "+st+" due to unbound types",[B])}),Vn([p,_,R],B?[B]:[],function(wt){if(wt=wt[0],B)var $t=wt.b,St=$t.u;else St=jn.prototype;wt=It(fe,function(){if(Object.getPrototypeOf(this)!==Qe)throw new Pt("Use 'new' to construct "+st);if(ye.m===void 0)throw new Pt(st+" has no accessible constructor");var ar=ye.m[arguments.length];if(ar===void 0)throw new Pt("Tried to invoke ctor of "+st+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(ye.m).toString()+") parameters instead!");return ar.apply(this,arguments)});var Qe=Object.create(St,{constructor:{value:wt}});wt.prototype=Qe;var ye=new Ip(st,wt,Qe,vt,$t,mt,ht,_t);$t=new Tn(st,ye,!0,!1,!1),St=new Tn(st+"*",ye,!1,!1,!1);var Ur=new Tn(st+" const*",ye,!1,!0,!1);return xu[p]={pointerType:St,R:Ur},Rp(fe,wt),[$t,St,Ur]})},__embind_register_class_constructor:function(p,_,R,B,ut,mt){var Mt=ku(_,R);ut=$r(B,ut),Vn([],[p],function(ht){ht=ht[0];var Tt="constructor "+ht.name;if(ht.b.m===void 0&&(ht.b.m=[]),ht.b.m[_-1]!==void 0)throw new Pt("Cannot register multiple constructors with identical number of parameters ("+(_-1)+") for class '"+ht.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return ht.b.m[_-1]=function(){ra("Cannot construct "+ht.name+" due to unbound types",Mt)},Vn([],Mt,function(_t){return ht.b.m[_-1]=function(){arguments.length!==_-1&&ft(Tt+" called with "+arguments.length+" arguments, expected "+(_-1));var st=[],yt=Array(_);yt[0]=mt;for(var vt=1;vt<_;++vt)yt[vt]=_t[vt].toWireType(st,arguments[vt-1]);return yt=ut.apply(null,yt),ia(st),_t[0].fromWireType(yt)},[]}),[]})},__embind_register_class_function:function(p,_,R,B,ut,mt,Mt,ht){var Tt=ku(R,B);_=H(_),mt=$r(ut,mt),Vn([],[p],function(_t){function st(){ra("Cannot call "+yt+" due to unbound types",Tt)}_t=_t[0];var yt=_t.name+"."+_;ht&&_t.b.Z.push(_);var vt=_t.b.u,fe=vt[_];return fe===void 0||fe.j===void 0&&fe.className!==_t.name&&fe.A===R-2?(st.A=R-2,st.className=_t.name,vt[_]=st):(Su(vt,_,yt),vt[_].j[R-2]=st),Vn([],Tt,function(wt){var $t=yt,St=_t,Qe=mt,ye=wt.length;2>ye&&ft("argTypes array size mismatch! Must at least get return value and 'this' types!");var Ur=wt[1]!==null&&St!==null,ar=!1;for(St=1;St<wt.length;++St)if(wt[St]!==null&&wt[St].l===void 0){ar=!0;break}var Du=wt[0].name!=="void",cr="",qr="";for(St=0;St<ye-2;++St)cr+=(St!==0?", ":"")+"arg"+St,qr+=(St!==0?", ":"")+"arg"+St+"Wired";$t="return function "+bt($t)+"("+cr+`) {
if (arguments.length !== `+(ye-2)+`) {
throwBindingError('function `+$t+" called with ' + arguments.length + ' arguments, expected "+(ye-2)+` args!');
}
`,ar&&($t+=`var destructors = [];
`);var Bu=ar?"destructors":"null";for(cr="throwBindingError invoker fn runDestructors retType classParam".split(" "),Qe=[ft,Qe,Mt,ia,wt[0],wt[1]],Ur&&($t+="var thisWired = classParam.toWireType("+Bu+`, this);
`),St=0;St<ye-2;++St)$t+="var arg"+St+"Wired = argType"+St+".toWireType("+Bu+", arg"+St+"); // "+wt[St+2].name+`
`,cr.push("argType"+St),Qe.push(wt[St+2]);if(Ur&&(qr="thisWired"+(0<qr.length?", ":"")+qr),$t+=(Du?"var rv = ":"")+"invoker(fn"+(0<qr.length?", ":"")+qr+`);
`,ar)$t+=`runDestructors(destructors);
`;else for(St=Ur?1:2;St<wt.length;++St)ye=St===1?"thisWired":"arg"+(St-2)+"Wired",wt[St].l!==null&&($t+=ye+"_dtor("+ye+"); // "+wt[St].name+`
`,cr.push(ye+"_dtor"),Qe.push(wt[St].l));return Du&&($t+=`var ret = retType.fromWireType(rv);
return ret;
`),cr.push($t+`}
`),wt=Dp(cr).apply(null,Qe),vt[_].j===void 0?(wt.A=R-2,vt[_]=wt):vt[_].j[R-2]=wt,[]}),[]})},__embind_register_emval:function(p,_){_=H(_),Me(p,{name:_,fromWireType:function(R){var B=Fe[R].value;return oa(R),B},toWireType:function(R,B){return Un(B)},argPackAdvance:8,readValueFromPointer:As,l:null})},__embind_register_float:function(p,_,R){R=Y(R),_=H(_),Me(p,{name:_,fromWireType:function(B){return B},toWireType:function(B,ut){if(typeof ut!="number"&&typeof ut!="boolean")throw new TypeError('Cannot convert "'+Vr(ut)+'" to '+this.name);return ut},argPackAdvance:8,readValueFromPointer:Bp(_,R),l:null})},__embind_register_integer:function(p,_,R,B,ut){function mt(_t){return _t}_=H(_),ut===-1&&(ut=4294967295);var Mt=Y(R);if(B===0){var ht=32-8*R;mt=function(_t){return _t<<ht>>>ht}}var Tt=_.indexOf("unsigned")!=-1;Me(p,{name:_,fromWireType:mt,toWireType:function(_t,st){if(typeof st!="number"&&typeof st!="boolean")throw new TypeError('Cannot convert "'+Vr(st)+'" to '+this.name);if(st<B||st>ut)throw new TypeError('Passing a number "'+Vr(st)+'" from JS side to C/C++ side to an argument of type "'+_+'", which is outside the valid range ['+B+", "+ut+"]!");return Tt?st>>>0:st|0},argPackAdvance:8,readValueFromPointer:Fp(_,Mt,B!==0),l:null})},__embind_register_memory_view:function(p,_,R){function B(mt){mt>>=2;var Mt=W;return new ut(Mt.buffer,Mt[mt+1],Mt[mt])}var ut=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][_];R=H(R),Me(p,{name:R,fromWireType:B,argPackAdvance:8,readValueFromPointer:B},{X:!0})},__embind_register_std_string:function(p,_){_=H(_),Me(p,{name:_,fromWireType:function(R){for(var B=W[R>>2],ut=Array(B),mt=0;mt<B;++mt)ut[mt]=String.fromCharCode(N[R+4+mt]);return qn(R),ut.join("")},toWireType:function(R,B){function ut(yt,vt){return yt[vt]}function mt(yt,vt){return yt.charCodeAt(vt)}B instanceof ArrayBuffer&&(B=new Uint8Array(B));var Mt;B instanceof Uint8Array||B instanceof Uint8ClampedArray||B instanceof Int8Array?Mt=ut:typeof B=="string"?Mt=mt:ft("Cannot pass non-string to std::string");var ht=B.length,Tt=Ru(4+ht);W[Tt>>2]=ht;for(var _t=0;_t<ht;++_t){var st=Mt(B,_t);255<st&&(qn(Tt),ft("String has UTF-16 code units that do not fit in 8 bits")),N[Tt+4+_t]=st}return R!==null&&R.push(qn,Tt),Tt},argPackAdvance:8,readValueFromPointer:As,l:function(R){qn(R)}})},__embind_register_std_wstring:function(p,_,R){if(R=H(R),_===2)var B=function(){return U},ut=1;else _===4&&(B=function(){return W},ut=2);Me(p,{name:R,fromWireType:function(mt){for(var Mt=B(),ht=W[mt>>2],Tt=Array(ht),_t=mt+4>>ut,st=0;st<ht;++st)Tt[st]=String.fromCharCode(Mt[_t+st]);return qn(mt),Tt.join("")},toWireType:function(mt,Mt){var ht=B(),Tt=Mt.length,_t=Ru(4+Tt*_);W[_t>>2]=Tt;for(var st=_t+4>>ut,yt=0;yt<Tt;++yt)ht[st+yt]=Mt.charCodeAt(yt);return mt!==null&&mt.push(qn,_t),_t},argPackAdvance:8,readValueFromPointer:As,l:function(mt){qn(mt)}})},__embind_register_void:function(p,_){_=H(_),Me(p,{da:!0,name:_,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},__emval_as:function(p,_,R){p=jr(p),_=Ou(_,"emval::as");var B=[],ut=Un(B);return z[R>>2]=ut,_.toWireType(B,p)},__emval_decref:oa,__emval_get_property:function(p,_){return p=jr(p),_=jr(_),Un(p[_])},__emval_incref:function(p){4<p&&(Fe[p].H+=1)},__emval_new_array:function(){return Un([])},__emval_new_cstring:function(p){var _=$p[p];return Un(_===void 0?H(p):_)},__emval_new_object:function(){return Un({})},__emval_run_destructors:function(p){ia(Fe[p].value),oa(p)},__emval_set_property:function(p,_,R){p=jr(p),_=jr(_),R=jr(R),p[_]=R},__emval_take_value:function(p,_){return p=Ou(p,"_emval_take_value"),p=p.readValueFromPointer(_),Un(p)},_abort:function(){t.abort()},_emscripten_memcpy_big:function(p,_,R){return N.set(N.subarray(_,_+R),p),p},_llvm_cos_f32:ve,_llvm_log10_f32:function(p){return Math.log(p)/Math.LN10},_llvm_sin_f32:Bt,DYNAMICTOP_PTR:F,STACKTOP:I};var Nu=t.asm(t.N,t.O,E);t.asm=Nu;var jp=t.__GLOBAL__sub_I_bind_cpp=function(){return t.asm.__GLOBAL__sub_I_bind_cpp.apply(null,arguments)},Up=t.__GLOBAL__sub_I_fft_cc=function(){return t.asm.__GLOBAL__sub_I_fft_cc.apply(null,arguments)},qp=t.__GLOBAL__sub_I_pitch_cc=function(){return t.asm.__GLOBAL__sub_I_pitch_cc.apply(null,arguments)},Lp=t.__GLOBAL__sub_I_tempo_cc=function(){return t.asm.__GLOBAL__sub_I_tempo_cc.apply(null,arguments)},zp=t.___getTypeName=function(){return t.asm.___getTypeName.apply(null,arguments)},qn=t._free=function(){return t.asm._free.apply(null,arguments)},Ru=t._malloc=function(){return t.asm._malloc.apply(null,arguments)};t.dynCall_ffii=function(){return t.asm.dynCall_ffii.apply(null,arguments)},t.dynCall_fi=function(){return t.asm.dynCall_fi.apply(null,arguments)},t.dynCall_fii=function(){return t.asm.dynCall_fii.apply(null,arguments)},t.dynCall_fiii=function(){return t.asm.dynCall_fiii.apply(null,arguments)},t.dynCall_ii=function(){return t.asm.dynCall_ii.apply(null,arguments)},t.dynCall_iii=function(){return t.asm.dynCall_iii.apply(null,arguments)},t.dynCall_iiii=function(){return t.asm.dynCall_iiii.apply(null,arguments)},t.dynCall_iiiii=function(){return t.asm.dynCall_iiiii.apply(null,arguments)},t.dynCall_iiiiii=function(){return t.asm.dynCall_iiiiii.apply(null,arguments)},t.dynCall_v=function(){return t.asm.dynCall_v.apply(null,arguments)},t.dynCall_vi=function(){return t.asm.dynCall_vi.apply(null,arguments)},t.dynCall_viii=function(){return t.asm.dynCall_viii.apply(null,arguments)},t.asm=Nu,t.then=function(p){if(t.calledRun)p(t);else{var _=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){_&&_(),p(t)}}return t},b=function p(){t.calledRun||aa(),t.calledRun||(b=p)};function aa(){function p(){if(!t.calledRun&&(t.calledRun=!0,!A)){if(Ht||(Ht=!0,at(Et)),at(gt),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;){var _=t.postRun.shift();ct.unshift(_)}at(ct)}}if(!(0<w)){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)qt();at(Z),0<w||t.calledRun||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),p()},1)):p())}}t.run=aa;function An(p){throw t.onAbort&&t.onAbort(p),p!==void 0?(f(p),m(p),p=JSON.stringify(p)):p="",A=!0,"abort("+p+"). Build with -s ASSERTIONS=1 for more info."}if(t.abort=An,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return t.noExitRuntime=!0,aa(),n};const aw=ow.bind({_currentScript:{src:"/aubio.js"}});var Pl;const ds=typeof window<"u",cw=n=>typeof n=="function",uw=n=>typeof n=="string",ic=()=>+Date.now(),Nl=(n,t,e)=>Math.min(e,Math.max(t,n)),ma=()=>{};ds&&((Pl=window==null?void 0:window.navigator)==null?void 0:Pl.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function mr(n){return typeof n=="function"?n():Ec(n)}function lw(n,t){function e(...r){n(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})}return e}const Cf=n=>n();function hw(n=Cf){const t=le(!0);function e(){t.value=!1}function r(){t.value=!0}return{isActive:t,pause:e,resume:r,eventFilter:(...i)=>{t.value&&n(...i)}}}function dw(n){return n}function fw(n){let t;function e(){return t||(t=n()),t}return e.reset=async()=>{const r=t;t=void 0,r&&await r},e}function vo(n){return om()?(am(n),!0):!1}function pw(n,t=!0){Fg()?rd(n):t?n():kc(n)}function mw(n,t=1e3,e={}){const{immediate:r=!0,immediateCallback:i=!1}=e;let s=null;const o=le(!1);function a(){s&&(clearInterval(s),s=null)}function c(){o.value=!1,a()}function u(){Ec(t)<=0||(o.value=!0,i&&n(),a(),s=setInterval(n,mr(t)))}if(r&&ds&&u(),me(t)){const l=_n(t,()=>{o.value&&ds&&u()});vo(l)}return vo(c),{isActive:o,pause:c,resume:u}}function gw(n,t={}){var e;const r=le((e=t.initialValue)!=null?e:null);return _n(n,()=>r.value=ic(),t),r}var Rl=Object.getOwnPropertySymbols,vw=Object.prototype.hasOwnProperty,_w=Object.prototype.propertyIsEnumerable,yw=(n,t)=>{var e={};for(var r in n)vw.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&Rl)for(var r of Rl(n))t.indexOf(r)<0&&_w.call(n,r)&&(e[r]=n[r]);return e};function bw(n,t,e={}){const r=e,{eventFilter:i=Cf}=r,s=yw(r,["eventFilter"]);return _n(n,lw(i,t),s)}var ww=Object.defineProperty,Mw=Object.defineProperties,Tw=Object.getOwnPropertyDescriptors,_o=Object.getOwnPropertySymbols,Ef=Object.prototype.hasOwnProperty,If=Object.prototype.propertyIsEnumerable,Dl=(n,t,e)=>t in n?ww(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Aw=(n,t)=>{for(var e in t||(t={}))Ef.call(t,e)&&Dl(n,e,t[e]);if(_o)for(var e of _o(t))If.call(t,e)&&Dl(n,e,t[e]);return n},xw=(n,t)=>Mw(n,Tw(t)),Sw=(n,t)=>{var e={};for(var r in n)Ef.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&_o)for(var r of _o(n))t.indexOf(r)<0&&If.call(n,r)&&(e[r]=n[r]);return e};function Cw(n,t,e={}){const r=e,{eventFilter:i}=r,s=Sw(r,["eventFilter"]),{eventFilter:o,pause:a,resume:c,isActive:u}=hw(i);return{stop:bw(n,t,xw(Aw({},s),{eventFilter:o})),pause:a,resume:c,isActive:u}}function Ew(n){var t;const e=mr(n);return(t=e==null?void 0:e.$el)!=null?t:e}const yo=ds?window:void 0,kf=ds?window.navigator:void 0;function zo(...n){let t,e,r,i;if(uw(n[0])?([e,r,i]=n,t=yo):[t,e,r,i]=n,!t)return ma;let s=ma;const o=_n(()=>Ew(t),c=>{s(),c&&(c.addEventListener(e,r,i),s=()=>{c.removeEventListener(e,r,i),s=ma})},{immediate:!0,flush:"post"}),a=()=>{o(),s()};return vo(a),a}function Of(n,t=!1){const e=le(),r=()=>e.value=Boolean(n());return r(),pw(r,t),e}const sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oc="__vueuse_ssr_handlers__";sc[oc]=sc[oc]||{};const Iw=sc[oc];function kw(n,t){return Iw[n]||t}function Ow(n){return n==null?"any":n instanceof Set?"set":n instanceof Map?"map":n instanceof Date?"date":typeof n=="boolean"?"boolean":typeof n=="string"?"string":typeof n=="object"||Array.isArray(n)?"object":Number.isNaN(n)?"any":"number"}var Pw=Object.defineProperty,Bl=Object.getOwnPropertySymbols,Nw=Object.prototype.hasOwnProperty,Rw=Object.prototype.propertyIsEnumerable,Fl=(n,t,e)=>t in n?Pw(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,$l=(n,t)=>{for(var e in t||(t={}))Nw.call(t,e)&&Fl(n,e,t[e]);if(Bl)for(var e of Bl(t))Rw.call(t,e)&&Fl(n,e,t[e]);return n};const Dw={boolean:{read:n=>n==="true",write:n=>String(n)},object:{read:n=>JSON.parse(n),write:n=>JSON.stringify(n)},number:{read:n=>Number.parseFloat(n),write:n=>String(n)},any:{read:n=>n,write:n=>String(n)},string:{read:n=>n,write:n=>String(n)},map:{read:n=>new Map(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n.entries()))},set:{read:n=>new Set(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n))},date:{read:n=>new Date(n),write:n=>n.toISOString()}};function re(n,t,e,r={}){var i;const{flush:s="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:c=!0,mergeDefaults:u=!1,shallow:l,window:h=yo,eventFilter:d,onError:f=C=>{console.error(C)}}=r,m=(l?dr:le)(t);if(!e)try{e=kw("getDefaultStorage",()=>{var C;return(C=yo)==null?void 0:C.localStorage})()}catch(C){f(C)}if(!e)return m;const y=mr(t),v=Ow(y),A=(i=r.serializer)!=null?i:Dw[v],{pause:O,resume:D}=Cw(m,()=>E(m.value),{flush:s,deep:o,eventFilter:d});return h&&a&&zo(h,"storage",N),N(),m;function E(C){try{C==null?e.removeItem(n):e.setItem(n,A.write(C))}catch(U){f(U)}}function S(C){if(!(C&&C.key!==n)){O();try{const U=C?C.newValue:e.getItem(n);if(U==null)return c&&y!==null&&e.setItem(n,A.write(y)),y;if(!C&&u){const z=A.read(U);return cw(u)?u(z,y):v==="object"&&!Array.isArray(z)?$l($l({},y),z):z}else return typeof U!="string"?U:A.read(U)}catch(U){f(U)}finally{D()}}}function N(C){C&&C.key!==n||(m.value=S(C))}}function Bw(n,t){var e;const r=dr((e=t==null?void 0:t.initialValue)!=null?e:n[0]),i=zt({get(){var u;let l=t!=null&&t.getIndexOf?t.getIndexOf(r.value,n):n.indexOf(r.value);return l<0&&(l=(u=t==null?void 0:t.fallbackIndex)!=null?u:0),l},set(u){s(u)}});function s(u){const l=n.length,h=(u%l+l)%l,d=n[h];return r.value=d,d}function o(u=1){return s(i.value+u)}function a(u=1){return o(u)}function c(u=1){return o(-u)}return{state:r,index:i,next:a,prev:c}}function Fw(n,t={}){const{controls:e=!1,navigator:r=kf}=t,i=Of(()=>r&&"permissions"in r);let s;const o=typeof n=="string"?{name:n}:n,a=le(),c=()=>{s&&(a.value=s.state)},u=fw(async()=>{if(i.value){if(!s)try{s=await r.permissions.query(o),zo(s,"change",c),c()}catch{a.value="prompt"}return s}});return u(),e?{state:a,isSupported:i,query:u}:a}function $w(n={}){const{navigator:t=kf,requestPermissions:e=!1,constraints:r={audio:!0,video:!0},onUpdated:i}=n,s=le([]),o=zt(()=>s.value.filter(f=>f.kind==="videoinput")),a=zt(()=>s.value.filter(f=>f.kind==="audioinput")),c=zt(()=>s.value.filter(f=>f.kind==="audiooutput")),u=Of(()=>t&&t.mediaDevices&&t.mediaDevices.enumerateDevices),l=le(!1);async function h(){!u.value||(s.value=await t.mediaDevices.enumerateDevices(),i==null||i(s.value))}async function d(){if(!u.value)return!1;if(l.value)return!0;const{state:f,query:m}=Fw("camera",{controls:!0});return await m(),f.value!=="granted"&&((await t.mediaDevices.getUserMedia(r)).getTracks().forEach(y=>y.stop()),h()),l.value=!0,l.value}return u.value&&(e&&d(),zo(t.mediaDevices,"devicechange",h),h()),{devices:s,ensurePermissions:d,permissionGranted:l,videoInputs:o,audioInputs:a,audioOutputs:c,isSupported:u}}function Vw(n,t={}){const{immediate:e=!0,window:r=yo}=t,i=le(!1);let s=null;function o(){!i.value||!r||(n(),s=r.requestAnimationFrame(o))}function a(){!i.value&&r&&(i.value=!0,o())}function c(){i.value=!1,s!=null&&r&&(r.cancelAnimationFrame(s),s=null)}return e&&a(),vo(c),{isActive:i,pause:c,resume:a}}var Vl;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(Vl||(Vl={}));var jw=Object.defineProperty,jl=Object.getOwnPropertySymbols,Uw=Object.prototype.hasOwnProperty,qw=Object.prototype.propertyIsEnumerable,Ul=(n,t,e)=>t in n?jw(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Lw=(n,t)=>{for(var e in t||(t={}))Uw.call(t,e)&&Ul(n,e,t[e]);if(jl)for(var e of jl(t))qw.call(t,e)&&Ul(n,e,t[e]);return n};function Pf(n={}){const{controls:t=!1,offset:e=0,immediate:r=!0,interval:i="requestAnimationFrame"}=n,s=le(ic()+e),o=()=>s.value=ic()+e,a=i==="requestAnimationFrame"?Vw(o,{immediate:r}):mw(o,i,{immediate:r});return t?Lw({timestamp:s},a):s}var zw=Object.defineProperty,ql=Object.getOwnPropertySymbols,Ww=Object.prototype.hasOwnProperty,Hw=Object.prototype.propertyIsEnumerable,Ll=(n,t,e)=>t in n?zw(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Gw=(n,t)=>{for(var e in t||(t={}))Ww.call(t,e)&&Ll(n,e,t[e]);if(ql)for(var e of ql(t))Hw.call(t,e)&&Ll(n,e,t[e]);return n};const Yw={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Gw({linear:dw},Yw);function rr(n,t,e){const r=le(n);return zt({get(){return r.value=Nl(r.value,mr(t),mr(e))},set(i){r.value=Nl(i,mr(t),mr(e))}})}const Xn=re("cast-camera","default"),si=re("cast-mic","default");le();const Xw=le(""),zl=le(!0),Wl=re("slidev-record-mimetype","video/webm"),Zw={"video/webm":"webm","video/webm;codecs=h264":"mp4","video/x-matroska;codecs=avc1":"mkv"};function bo(n,t){const e=new Date,r=o=>`${o}`.padStart(2,"0"),i=`${r(e.getMonth()+1)}${r(e.getDate())}-${r(e.getHours())}${r(e.getMinutes())}`,s=t?Zw[t]:"webm";return`${[i,n,Xw.value].filter(o=>!!o).join("-")}.${s}`}De({screen:zt(()=>bo("screen",Wl.value)),camera:zt(()=>bo("camera",Wl.value))});const{devices:Ox,videoInputs:Hl,audioInputs:Gl,ensurePermissions:Yl}=$w({onUpdated:function(){var n,t;Xn.value!=="none"&&(Hl.value.find(e=>e.deviceId===Xn.value)||(Xn.value=((n=Hl.value[0])==null?void 0:n.deviceId)||"default")),si.value!=="none"&&(Gl.value.find(e=>e.deviceId===si.value)||(si.value=((t=Gl.value[0])==null?void 0:t.deviceId)||"default"))}});function Xl(n,t){const e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("download",n),document.body.appendChild(e),e.click(),document.body.removeChild(e)}function Jw(){const n=le(!1),t=le(),e=Pf();_n(n,A=>A?t.value=Date.now():t.value=null);const r=zt(()=>t.value?e.value-t.value:0),i=le(!1),s=dr(),o=dr(),a=dr(),c=dr(),u=dr(),l={type:"video",bitsPerSecond:4*256*8*1024,timeSlice:24*60*60*1e3};async function h(){Xn.value!=="none"&&(i.value?(i.value=!1,n.value||y(a)):(await d(),a.value&&(i.value=!!a.value)))}async function d(){if(await Yl(),await kc(),!a.value){if(Xn.value==="none"&&si.value==="none")return;a.value=await navigator.mediaDevices.getUserMedia({video:Xn.value==="none"||zl.value!==!0?!1:{deviceId:Xn.value},audio:si.value==="none"?!1:{deviceId:si.value}})}}_n(Xn,async A=>{if(A==="none")y(a);else{if(n.value)return;a.value&&(y(a),await d())}});async function f(A){var O;await Yl();const{default:D}=await p0(()=>import("./RecordRTC.4fb36e33.39e0ddc6.js"),[]).then(E=>E.R);await d(),c.value=await navigator.mediaDevices.getDisplayMedia({video:{frameRate:30,width:3840,height:2160,cursor:"motion",resizeMode:"crop-and-scale"}}),c.value.addEventListener("inactive",m),u.value=new MediaStream,c.value.getVideoTracks().forEach(E=>u.value.addTrack(E)),Object.assign(l,A),a.value&&(u.value.addTrack((O=eM.stream.stream.getAudioTracks())==null?void 0:O[0]),s.value=new D(a.value,l),s.value.startRecording()),o.value=new D(u.value,l),o.value.startRecording(),n.value=!0}async function m(){var A,O;n.value=!1,(A=s.value)==null||A.stopRecording(()=>{if(zl.value){const D=s.value.getBlob(),E=URL.createObjectURL(D);Xl(bo("camera",l.mimeType),E),window.URL.revokeObjectURL(E)}s.value=void 0,i.value||y(a)}),(O=o.value)==null||O.stopRecording(()=>{const D=o.value.getBlob(),E=URL.createObjectURL(D);Xl(bo("screen",l.mimeType),E),window.URL.revokeObjectURL(E),y(c),y(u),o.value=void 0})}function y(A){const O=A.value;!O||(O.getTracks().forEach(D=>{D.stop(),O.removeTrack(D)}),A.value=void 0)}function v(){n.value?m():f()}return zo("beforeunload",A=>{!n.value||confirm("Recording is not saved yet, do you want to leave?")||(A.preventDefault(),A.returnValue="")}),{recording:n,recordingTime:r,showAvatar:i,toggleRecording:v,startRecording:f,stopRecording:m,toggleAvatar:h,recorderCamera:s,recorderSlides:o,streamCamera:a,streamCapture:c,streamSlides:u}}Jw();const Qw=le(!1),Kw=gw(Qw),tM=Pf();zt(()=>tM.value-Kw.value);De({initiated:!1,mute:re("mute",!1),volume:rr(re("main-vol",1),0,2),meter:0});const eM=xc({});xc({});function nM(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,!window.AudioContext)return alert("AudioContext not supported");navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(n){const t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t||alert("getUserMedia is not implemented in this browser"),new Promise(function(e,r){t.call(navigator,n,e,r)})})}function Nf(n=0,t,e=1,r=1){return t=t||Math.floor(n/12)+4,`hsla(${n%12*30},${e*100}%,${Math.abs(t+2)*8}%,${r})`}function rM(n,t=440){return 12*(Math.log(n/t)/Math.log(2))}function Px(n=0,t=12,e=35,r=100){let i=(n-t/4)/(t/2)*Math.PI,s=e*Math.cos(i)+r/2,o=e*Math.sin(i)+r/2;return{x:s,y:o}}function Nx(n,t=1){return[...n.slice(t,n.length),...n.slice(0,t)]}class rn{constructor(t=!1){this.eventMap={},this.eventsSuspended=t==1}addListener(t,e,r={}){if(typeof t=="string"&&t.length<1||t instanceof String&&t.length<1||typeof t!="string"&&!(t instanceof String)&&t!==rn.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof e!="function")throw new TypeError("The callback must be a function.");const i=new Zl(t,this,e,r);return this.eventMap[t]||(this.eventMap[t]=[]),r.prepend?this.eventMap[t].unshift(i):this.eventMap[t].push(i),i}addOneTimeListener(t,e,r={}){r.remaining=1,this.addListener(t,e,r)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(t,e){return t===void 0?!!(this.eventMap[rn.ANY_EVENT]&&this.eventMap[rn.ANY_EVENT].length>0)||Object.entries(this.eventMap).some(([,r])=>r.length>0):this.eventMap[t]&&this.eventMap[t].length>0?e instanceof Zl?this.eventMap[t].filter(r=>r===e).length>0:typeof e=="function"?this.eventMap[t].filter(r=>r.callback===e).length>0:e==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(t){return this.eventMap[t]||[]}suspendEvent(t){this.getListeners(t).forEach(e=>{e.suspended=!0})}unsuspendEvent(t){this.getListeners(t).forEach(e=>{e.suspended=!1})}getListenerCount(t){return this.getListeners(t).length}emit(t,...e){if(typeof t!="string"&&!(t instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let r=[],i=this.eventMap[rn.ANY_EVENT]||[];return this.eventMap[t]&&(i=i.concat(this.eventMap[t])),i.forEach(s=>{if(s.suspended)return;let o=[...e];Array.isArray(s.arguments)&&(o=o.concat(s.arguments)),s.remaining>0&&(r.push(s.callback.apply(s.context,o)),s.count++),--s.remaining<1&&s.remove()}),r}removeListener(t,e,r={}){if(t===void 0)return void(this.eventMap={});if(!this.eventMap[t])return;let i=this.eventMap[t].filter(s=>e&&s.callback!==e||r.remaining&&r.remaining!==s.remaining||r.context&&r.context!==s.context);i.length?this.eventMap[t]=i:delete this.eventMap[t]}async waitFor(t,e={}){return e.duration=parseInt(e.duration),(isNaN(e.duration)||e.duration<=0)&&(e.duration=1/0),new Promise((r,i)=>{let s,o=this.addListener(t,()=>{clearTimeout(s),r()},{remaining:1});e.duration!==1/0&&(s=setTimeout(()=>{o.remove(),i("The duration expired before the event was emitted.")},e.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Zl{constructor(t,e,r,i={}){if(typeof t!="string"&&!(t instanceof String)&&t!==rn.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!e)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof r!="function")throw new TypeError("The 'callback' must be a function.");i.arguments===void 0||Array.isArray(i.arguments)||(i.arguments=[i.arguments]),(i=Object.assign({context:e,remaining:1/0,arguments:void 0,duration:1/0},i)).duration!==1/0&&setTimeout(()=>this.remove(),i.duration),this.arguments=i.arguments,this.callback=r,this.context=i.context,this.count=0,this.event=t,this.remaining=parseInt(i.remaining)>=1?parseInt(i.remaining):1/0,this.suspended=!1,this.target=e}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All properties are static and should be referenced using the class name. For example:
 * `Enumerations.MIDI_CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class L{static get MIDI_CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get MIDI_CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CONTROL_CHANGE_MESSAGES(){return{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Qr{constructor(t,e={}){this.duration=it.defaults.note.duration,this.attack=it.defaults.note.attack,this.release=it.defaults.note.release,e.duration!=null&&(this.duration=e.duration),e.attack!=null&&(this.attack=e.attack),e.rawAttack!=null&&(this.attack=tt.from7bitToFloat(e.rawAttack)),e.release!=null&&(this.release=e.release),e.rawRelease!=null&&(this.release=tt.from7bitToFloat(e.rawRelease)),Number.isInteger(t)?this.identifier=tt.toNoteIdentifier(t):this.identifier=t}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(t){const e=tt.getNoteDetails(t);if(it.validation&&!t)throw new Error("Invalid note identifier");this._name=e.name,this._accidental=e.accidental,this._octave=e.octave}get name(){return this._name}set name(t){if(it.validation&&(t=t.toUpperCase(),!["C","D","E","F","G","A","B"].includes(t)))throw new Error("Invalid name value");this._name=t}get accidental(){return this._accidental}set accidental(t){if(it.validation&&(t=t.toLowerCase(),!["#","##","b","bb"].includes(t)))throw new Error("Invalid accidental value");this._accidental=t}get octave(){return this._octave}set octave(t){if(it.validation&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid octave value");this._octave=t}get duration(){return this._duration}set duration(t){if(it.validation&&(t=parseFloat(t),isNaN(t)||t===null||t<0))throw new RangeError("Invalid duration value.");this._duration=t}get attack(){return this._attack}set attack(t){if(it.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid attack value.");this._attack=t}get release(){return this._release}set release(t){if(it.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid release value.");this._release=t}get rawAttack(){return tt.fromFloatTo7Bit(this._attack)}set rawAttack(t){this._attack=tt.from7bitToFloat(t)}get rawRelease(){return tt.fromFloatTo7Bit(this._release)}set rawRelease(t){this._release=tt.from7bitToFloat(t)}get number(){return tt.toNoteNumber(this.identifier)}getOffsetNumber(t=0,e=0){return it.validation&&(t=parseInt(t)||0,e=parseInt(e)||0),Math.min(Math.max(this.number+12*t+e,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class tt{static toNoteNumber(t,e=0){if(e=e==null?0:parseInt(e),isNaN(e))throw new RangeError("Invalid 'octaveOffset' value");typeof t!="string"&&(t="");const r=this.getNoteDetails(t);if(!r)throw new TypeError("Invalid note identifier");let i=12*(r.octave+1+e);if(i+={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[r.name],r.accidental&&(r.accidental.startsWith("b")?i-=r.accidental.length:i+=r.accidental.length),i<0||i>127)throw new RangeError("Invalid octaveOffset value");return i}static getNoteDetails(t){Number.isInteger(t)&&(t=this.toNoteIdentifier(t));const e=t.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!e)throw new TypeError("Invalid note identifier");const r=e[1].toUpperCase(),i=parseInt(e[3]);let s=e[2].toLowerCase();return s=s===""?void 0:s,{accidental:s,identifier:r+(s||"")+i,name:r,octave:i}}static sanitizeChannels(t){let e;if(this.validation){if(t==="all")e=["all"];else if(t==="none")return[]}return e=Array.isArray(t)?t:[t],e.indexOf("all")>-1&&(e=L.MIDI_CHANNEL_NUMBERS),e.map(function(r){return parseInt(r)}).filter(function(r){return r>=1&&r<=16})}static toTimestamp(t){let e=!1;const r=parseFloat(t);return!isNaN(r)&&(typeof t=="string"&&t.substring(0,1)==="+"?r>=0&&(e=it.time+r):r>=0&&(e=r),e)}static guessNoteNumber(t,e){e=parseInt(e)||0;let r=!1;if(Number.isInteger(t)&&t>=0&&t<=127)r=parseInt(t);else if(parseInt(t)>=0&&parseInt(t)<=127)r=parseInt(t);else if(typeof t=="string"||t instanceof String)try{r=this.toNoteNumber(t.trim(),e)}catch{return!1}return r}static toNoteIdentifier(t,e){if(t=parseInt(t),isNaN(t)||t<0||t>127)throw new RangeError("Invalid note number");if(e=e==null?0:parseInt(e),isNaN(e))throw new RangeError("Invalid octaveOffset value");const r=Math.floor(t/12-1)+e;return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][t%12]+r.toString()}static buildNote(t,e={}){if(e.octaveOffset=parseInt(e.octaveOffset)||0,t instanceof Qr)return t;let r=this.guessNoteNumber(t,e.octaveOffset);if(r===!1)throw new TypeError(`The input could not be parsed as a note (${t})`);return e.octaveOffset=void 0,new Qr(r,e)}static buildNoteArray(t,e={}){let r=[];return Array.isArray(t)||(t=[t]),t.forEach(i=>{r.push(this.buildNote(i,e))}),r}static from7bitToFloat(t){return t===1/0&&(t=127),t=parseInt(t)||0,Math.min(Math.max(t/127,0),1)}static fromFloatTo7Bit(t){return t===1/0&&(t=1),t=parseFloat(t)||0,Math.min(Math.max(Math.round(127*t),0),127)}static fromMsbLsbToFloat(t,e=0){it.validation&&(t=Math.min(Math.max(parseInt(t)||0,0),127),e=Math.min(Math.max(parseInt(e)||0,0),127));const r=((t<<7)+e)/16383;return Math.min(Math.max(r,0),1)}static fromFloatToMsbLsb(t){it.validation&&(t=Math.min(Math.max(parseFloat(t)||0,0),1));const e=Math.round(16383*t);return{msb:e>>7,lsb:127&e}}static offsetNumber(t,e=0,r=0){if(it.validation){if(t=parseInt(t),isNaN(t))throw new Error("Invalid note number");e=parseInt(e)||0,r=parseInt(r)||0}return Math.min(Math.max(t+12*e+r,0),127)}static getPropertyByValue(t,e){return Object.keys(t).find(r=>t[r]===e)}static getCcNameByNumber(t){return tt.getPropertyByValue(L.MIDI_CONTROL_CHANGE_MESSAGES,t)}static getChannelModeByNumber(t){if(!(t>=120&&t<=127))return!1;for(let e in L.MIDI_CHANNEL_MODE_MESSAGES)if(L.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(e)&&t===L.MIDI_CHANNEL_MODE_MESSAGES[e])return e;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&window.document!==void 0}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class iM extends rn{constructor(t,e){super(),this._output=t,this._number=e,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(t,e={time:0}){return this.output.send(t,e),this}sendKeyAftertouch(t,e,r={}){if(it.validation){if(r.useRawValue&&(r.rawValue=r.useRawValue),isNaN(parseFloat(e)))throw new RangeError("Invalid key aftertouch value.");if(r.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}r.rawValue||(e=tt.fromFloatTo7Bit(e));const i=it.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(t)||(t=[t]),tt.buildNoteArray(t).forEach(s=>{this.send([(L.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),s.getOffsetNumber(i),e],{time:tt.toTimestamp(r.time)})}),this}sendControlChange(t,e,r={}){if(typeof t=="string"&&(t=L.MIDI_CONTROL_CHANGE_MESSAGES[t]),Array.isArray(e)||(e=[e]),it.validation){if(t===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if((e=e.map(i=>{const s=Math.min(Math.max(parseInt(i),0),127);if(isNaN(s))throw new TypeError("Values must be integers between 0 and 127");return s})).length===2&&t>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return e.forEach((i,s)=>{this.send([(L.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t+32*s,e[s]],{time:tt.toTimestamp(r.time)})}),this}_selectNonRegisteredParameter(t,e={}){return this.sendControlChange(99,t[0],e),this.sendControlChange(98,t[1],e),this}_deselectRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_deselectNonRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_selectRegisteredParameter(t,e={}){return this.sendControlChange(101,t[0],e),this.sendControlChange(100,t[1],e),this}_setCurrentParameter(t,e={}){return t=[].concat(t),this.sendControlChange(6,t[0],e),t.length<2||this.sendControlChange(38,t[1],e),this}sendRpnDecrement(t,e={}){if(Array.isArray(t)||(t=L.MIDI_REGISTERED_PARAMETERS[t]),it.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(L.MIDI_REGISTERED_PARAMETERS).forEach(i=>{L.MIDI_REGISTERED_PARAMETERS[i][0]===t[0]&&L.MIDI_REGISTERED_PARAMETERS[i][1]===t[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,e),this.sendControlChange(97,0,e),this._deselectRegisteredParameter(e),this}sendRpnIncrement(t,e={}){if(Array.isArray(t)||(t=L.MIDI_REGISTERED_PARAMETERS[t]),it.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(L.MIDI_REGISTERED_PARAMETERS).forEach(i=>{L.MIDI_REGISTERED_PARAMETERS[i][0]===t[0]&&L.MIDI_REGISTERED_PARAMETERS[i][1]===t[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,e),this.sendControlChange(96,0,e),this._deselectRegisteredParameter(e),this}playNote(t,e={}){if(this.sendNoteOn(t,e),e.duration>0&&isFinite(String(e.duration).trim()||NaN)){let r={time:(tt.toTimestamp(e.time)||it.time)+e.duration,release:e.release,rawRelease:e.rawRelease};this.sendNoteOff(t,r)}return this}sendNoteOff(t,e={}){if(it.validation){if(e.rawRelease!=null&&!(e.rawRelease>=0&&e.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(e.release!=null&&!(e.release>=0&&e.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");e.rawVelocity&&(e.rawRelease=e.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),e.velocity&&(e.release=e.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;e.rawRelease!=null?r=e.rawRelease:isNaN(e.release)||(r=Math.round(127*e.release));const i=it.octaveOffset+this.output.octaveOffset+this.octaveOffset;return tt.buildNoteArray(t,{rawRelease:parseInt(r)}).forEach(s=>{this.send([(L.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),s.getOffsetNumber(i),s.rawRelease],{time:tt.toTimestamp(e.time)})}),this}stopNote(t,e={}){return this.sendNoteOff(t,e)}sendNoteOn(t,e={}){if(it.validation){if(e.rawAttack!=null&&!(e.rawAttack>=0&&e.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(e.attack!=null&&!(e.attack>=0&&e.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");e.rawVelocity&&(e.rawAttack=e.velocity,e.rawRelease=e.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),e.velocity&&(e.attack=e.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;e.rawAttack!=null?r=e.rawAttack:isNaN(e.attack)||(r=Math.round(127*e.attack));const i=it.octaveOffset+this.output.octaveOffset+this.octaveOffset;return tt.buildNoteArray(t,{rawAttack:r}).forEach(s=>{this.send([(L.MIDI_CHANNEL_MESSAGES.noteon<<4)+(this.number-1),s.getOffsetNumber(i),s.rawAttack],{time:tt.toTimestamp(e.time)})}),this}sendChannelMode(t,e=0,r={}){if(typeof t=="string"&&(t=L.MIDI_CHANNEL_MODE_MESSAGES[t]),it.validation){if(t===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(t)||!(t>=120&&t<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(e))||e<0||e>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(L.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t,e],{time:tt.toTimestamp(r.time)}),this}sendOmniMode(t,e={}){return t===void 0||t?this.sendChannelMode("omnimodeon",0,e):this.sendChannelMode("omnimodeoff",0,e),this}sendChannelAftertouch(t,e={}){if(it.validation){if(isNaN(parseFloat(t)))throw new RangeError("Invalid channel aftertouch value.");if(e.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return this.send([(L.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(127*t)],{time:tt.toTimestamp(e.time)}),this}sendMasterTuning(t,e={}){if(t=parseFloat(t)||0,it.validation&&!(t>-65&&t<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let r=Math.floor(t)+64,i=t-Math.floor(t);i=Math.round((i+1)/2*16383);let s=i>>7&127,o=127&i;return this.sendRpnValue("channelcoarsetuning",r,e),this.sendRpnValue("channelfinetuning",[s,o],e),this}sendModulationRange(t,e,r={}){if(it.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!(e==null||Number.isInteger(e)&&e>=0&&e<=127))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return e>=0&&e<=127||(e=0),this.sendRpnValue("modulationrange",[t,e],r),this}sendNrpnValue(t,e,r={}){if(e=[].concat(e),it.validation){if(!Array.isArray(t)||!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");e.forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(t,r),this._setCurrentParameter(e,r),this._deselectNonRegisteredParameter(r),this}sendPitchBend(t,e={}){if(it.validation)if(e.rawValue&&Array.isArray(t)){if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(e.rawValue&&!Array.isArray(t)){if(!(t>=0&&t<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(t)||t===null)throw new RangeError("Invalid pitch bend value.");if(!(t>=-1&&t<=1))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}let r=0,i=0;if(e.rawValue&&Array.isArray(t))r=t[0],i=t[1];else if(e.rawValue&&!Array.isArray(t))r=t;else{const s=tt.fromFloatToMsbLsb((t+1)/2);r=s.msb,i=s.lsb}return this.send([(L.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),i,r],{time:tt.toTimestamp(e.time)}),this}sendPitchBendRange(t,e,r={}){if(it.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[t,e],r),this}sendProgramChange(t,e={}){if(t=parseInt(t)||0,it.validation&&!(t>=0&&t<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(L.MIDI_CHANNEL_MESSAGES.programchange<<4)+(this.number-1),t],{time:tt.toTimestamp(e.time)}),this}sendRpnValue(t,e,r={}){if(Array.isArray(t)||(t=L.MIDI_REGISTERED_PARAMETERS[t]),it.validation){if(!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(e).forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(t,r),this._setCurrentParameter(e,r),this._deselectRegisteredParameter(r),this}sendTuningBank(t,e={}){if(it.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",t,e),this}sendTuningProgram(t,e={}){if(it.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",t,e),this}sendLocalControl(t,e={}){return t?this.sendChannelMode("localcontrol",127,e):this.sendChannelMode("localcontrol",0,e)}sendAllNotesOff(t={}){return this.sendChannelMode("allnotesoff",0,t)}sendAllSoundOff(t={}){return this.sendChannelMode("allsoundoff",0,t)}sendResetAllControllers(t={}){return this.sendChannelMode("resetallcontrollers",0,t)}sendPolyphonicMode(t,e={}){return t==="mono"?this.sendChannelMode("monomodeon",0,e):this.sendChannelMode("polymodeon",0,e)}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class ac extends rn{constructor(t){super(),this._midiOutput=t,this._octaveOffset=0,this.channels=[];for(let e=1;e<=16;e++)this.channels[e]=new iM(this,e);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._midiOutput.onstatechange=null,await this.close(),this._midiOutput=null}_onStateChange(t){let e={timestamp:it.time};t.port.connection==="open"?(e.type="opened",e.target=this,e.port=e.target,this.emit("opened",e)):t.port.connection==="closed"&&t.port.state==="connected"?(e.type="closed",e.target=this,e.port=e.target,this.emit("closed",e)):t.port.connection==="closed"&&t.port.state==="disconnected"?(e.type="disconnected",e.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",e)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught:",t.port.connection,t.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(t){return Promise.reject(t)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(t,e={time:0},r=0){if(t instanceof Rf&&(t=tt.isNode?t.data:t.rawData),t instanceof Uint8Array&&tt.isNode&&(t=Array.from(t)),it.validation){if(Array.isArray(t)||t instanceof Uint8Array||(t=[t],Array.isArray(e)&&(t=t.concat(e)),e=isNaN(r)?{time:0}:{time:r}),!(parseInt(t[0])>=128&&parseInt(t[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");t.slice(1).forEach(i=>{if(!((i=parseInt(i))>=0&&i<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),e||(e={time:0})}return this._midiOutput.send(t,tt.toTimestamp(e.time)),this}sendSysex(t,e=[],r={}){if(t=[].concat(t),e instanceof Uint8Array){const i=new Uint8Array(1+t.length+e.length+1);i[0]=L.MIDI_SYSTEM_MESSAGES.sysex,i.set(Uint8Array.from(t),1),i.set(e,1+t.length),i[i.length-1]=L.MIDI_SYSTEM_MESSAGES.sysexend,this.send(i,{time:r.time})}else{const i=t.concat(e,L.MIDI_SYSTEM_MESSAGES.sysexend);this.send([L.MIDI_SYSTEM_MESSAGES.sysex].concat(i),{time:r.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():it.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(t,e={}){if(it.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([L.MIDI_SYSTEM_MESSAGES.timecode,t],{time:e.time}),this}sendSongPosition(t=0,e={}){var r=(t=Math.floor(t)||0)>>7&127,i=127&t;return this.send([L.MIDI_SYSTEM_MESSAGES.songposition,r,i],{time:e.time}),this}sendSongSelect(t=0,e={}){if(it.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([L.MIDI_SYSTEM_MESSAGES.songselect,t],{time:e.time}),this}sendTuneRequest(t={}){return this.send([L.MIDI_SYSTEM_MESSAGES.tunerequest],{time:t.time}),this}sendClock(t={}){return this.send([L.MIDI_SYSTEM_MESSAGES.clock],{time:t.time}),this}sendStart(t={}){return this.send([L.MIDI_SYSTEM_MESSAGES.start],{time:t.time}),this}sendContinue(t={}){return this.send([L.MIDI_SYSTEM_MESSAGES.continue],{time:t.time}),this}sendStop(t={}){return this.send([L.MIDI_SYSTEM_MESSAGES.stop],{time:t.time}),this}sendActiveSensing(t={}){return this.send([L.MIDI_SYSTEM_MESSAGES.activesensing],{time:t.time}),this}sendReset(t={}){return this.send([L.MIDI_SYSTEM_MESSAGES.reset],{time:t.time}),this}sendTuningRequest(t={}){return it.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(t)}sendKeyAftertouch(t,e,r={}){return r.channels==null&&(r.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendKeyAftertouch(t,e,r)}),this}sendControlChange(t,e,r={},i={}){if(it.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const s=r;(r=i).channels=s,r.channels==="all"&&(r.channels=L.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendControlChange(t,e,r)}),this}sendPitchBendRange(t=0,e=0,r={}){return r.channels==null&&(r.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendPitchBendRange(t,e,r)}),this}setPitchBendRange(t=0,e=0,r="all",i={}){return it.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),i.channels=r,i.channels==="all"&&(i.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(t,e,i)}sendRpnValue(t,e,r={}){return r.channels==null&&(r.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendRpnValue(t,e,r)}),this}setRegisteredParameter(t,e=[],r="all",i={}){return it.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),i.channels=r,i.channels==="all"&&(i.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(t,e,i)}sendChannelAftertouch(t,e={},r={}){if(it.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const i=e;(e=r).channels=i,e.channels==="all"&&(e.channels=L.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(i=>{this.channels[i].sendChannelAftertouch(t,e)}),this}sendPitchBend(t,e={},r={}){if(it.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const i=e;(e=r).channels=i,e.channels==="all"&&(e.channels=L.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(i=>{this.channels[i].sendPitchBend(t,e)}),this}sendProgramChange(t=0,e={},r={}){if(it.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const i=e;(e=r).channels=i,e.channels==="all"&&(e.channels=L.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(i=>{this.channels[i].sendProgramChange(t,e)}),this}sendModulationRange(t,e,r={}){return r.channels==null&&(r.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendModulationRange(t,e,r)}),this}setModulationRange(t=0,e=0,r="all",i={}){return it.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),i.channels=r,i.channels==="all"&&(i.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(t,e,i)}sendMasterTuning(t,e={}){return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendMasterTuning(t,e)}),this}setMasterTuning(t,e={},r={}){return it.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),r.channels=e,r.channels==="all"&&(r.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(t,r)}sendTuningProgram(t,e={}){return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendTuningProgram(t,e)}),this}setTuningProgram(t,e="all",r={}){return it.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),r.channels=e,r.channels==="all"&&(r.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(t,r)}sendTuningBank(t=0,e={}){return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendTuningBank(t,e)}),this}setTuningBank(t,e="all",r={}){return it.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),r.channels=e,r.channels==="all"&&(r.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(t,r)}sendChannelMode(t,e=0,r={},i={}){if(it.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const s=r;(r=i).channels=s,r.channels==="all"&&(r.channels=L.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendChannelMode(t,e,r)}),this}sendAllSoundOff(t={}){return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(t.channels).forEach(e=>{this.channels[e].sendAllSoundOff(t)}),this}sendAllNotesOff(t={}){return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(t.channels).forEach(e=>{this.channels[e].sendAllNotesOff(t)}),this}sendResetAllControllers(t={},e={}){if(it.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=e).channels=r,t.channels==="all"&&(t.channels=L.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendResetAllControllers(t)}),this}sendPolyphonicMode(t,e={},r={}){if(it.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const i=e;(e=r).channels=i,e.channels==="all"&&(e.channels=L.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(i=>{this.channels[i].sendPolyphonicMode(t,e)}),this}sendLocalControl(t,e={},r={}){if(it.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const i=e;(e=r).channels=i,e.channels==="all"&&(e.channels=L.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(i=>{this.channels[i].sendLocalControl(t,e)}),this}sendOmniMode(t,e={},r={}){if(it.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const i=e;(e=r).channels=i,e.channels==="all"&&(e.channels=L.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(i=>{this.channels[i].sendOmniMode(t,e)}),this}sendNrpnValue(t,e,r={}){return r.channels==null&&(r.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendNrpnValue(t,e,r)}),this}setNonRegisteredParameter(t,e=[],r="all",i={}){return it.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),i.channels=r,i.channels==="all"&&(i.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(t,e,i)}sendRpnIncrement(t,e={}){return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendRpnIncrement(t,e)}),this}incrementRegisteredParameter(t,e="all",r={}){return it.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),r.channels=e,r.channels==="all"&&(r.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(t,r)}sendRpnDecrement(t,e={}){return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendRpnDecrement(t,e)}),this}decrementRegisteredParameter(t,e="all",r={}){return it.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),r.channels=e,r.channels==="all"&&(r.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(t,r)}sendNoteOff(t,e={},r={}){if(it.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const i=e;(e=r).channels=i,e.channels==="all"&&(e.channels=L.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(i=>{this.channels[i].sendNoteOff(t,e)}),this}stopNote(t,e){return this.sendNoteOff(t,e)}playNote(t,e={},r={}){if(it.validation&&(e.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),e.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(e)||Number.isInteger(e)||e==="all")){const i=e;(e=r).channels=i,e.channels==="all"&&(e.channels=L.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(i=>{this.channels[i].playNote(t,e)}),this}sendNoteOn(t,e={},r={}){if(it.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const i=e;(e=r).channels=i,e.channels==="all"&&(e.channels=L.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(e.channels).forEach(i=>{this.channels[i].sendNoteOn(t,e)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Jl{constructor(t=[],e={}){this.destinations=[],this.types=[...Object.keys(L.MIDI_SYSTEM_MESSAGES),...Object.keys(L.MIDI_CHANNEL_MESSAGES)],this.channels=L.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(t)||(t=[t]),e.types&&!Array.isArray(e.types)&&(e.types=[e.types]),e.channels&&!Array.isArray(e.channels)&&(e.channels=[e.channels]),it.validation&&(t.forEach(r=>{if(!(r instanceof ac))throw new TypeError("Destinations must be of type 'Output'.")}),e.types!==void 0&&e.types.forEach(r=>{if(!L.MIDI_SYSTEM_MESSAGES.hasOwnProperty(r)&&!L.MIDI_CHANNEL_MESSAGES.hasOwnProperty(r))throw new TypeError("Type must be a valid message type.")}),e.channels!==void 0&&e.channels.forEach(r=>{if(!L.MIDI_CHANNEL_NUMBERS.includes(r))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=t,e.types&&(this.types=e.types),e.channels&&(this.channels=e.channels)}forward(t){this.suspended||this.types.includes(t.type)&&(t.channel&&!this.channels.includes(t.channel)||this.destinations.forEach(e=>{(!it.validation||e instanceof ac)&&e.send(t)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 * @fires InputChannel#controlchange
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-databuttonincrement
 * @fires InputChannel#event:nrpn-databuttondecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-databuttonincrement
 * @fires InputChannel#event:rpn-databuttondecrement
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class sM extends rn{constructor(t,e){super(),this._input=t,this._number=e,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(t){const e=Object.assign({},t);e.port=this.input,e.target=this,e.type="midimessage",this.emit(e.type,e),this._parseEventForStandardMessages(e)}_parseEventForStandardMessages(t){const e=Object.assign({},t);e.type=e.message.type||"unknownmessage";const r=t.message.dataBytes[0],i=t.message.dataBytes[1];if(e.type==="noteoff"||e.type==="noteon"&&i===0)this.notesState[r]=!1,e.type="noteoff",e.note=new Qr(tt.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+it.octaveOffset),{rawAttack:0,rawRelease:i}),e.value=tt.from7bitToFloat(i),e.rawValue=i,e.velocity=e.note.release,e.rawVelocity=e.note.rawRelease;else if(e.type==="noteon")this.notesState[r]=!0,e.note=new Qr(tt.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+it.octaveOffset),{rawAttack:i}),e.value=tt.from7bitToFloat(i),e.rawValue=i,e.velocity=e.note.attack,e.rawVelocity=e.note.rawAttack;else if(e.type==="keyaftertouch")e.note=new Qr(tt.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+it.octaveOffset)),e.value=tt.from7bitToFloat(i),e.rawValue=i,e.identifier=e.note.identifier,e.key=e.note.number,e.rawKey=r;else if(e.type==="controlchange"){e.controller={number:r,name:tt.getCcNameByNumber(r)},e.subtype=e.controller.name||"controller"+r,e.value=tt.from7bitToFloat(i),e.rawValue=i;const s=Object.assign({},e);s.type=`${e.type}-controller${r}`,delete s.subtype,this.emit(s.type,s),e.message.dataBytes[0]>=120&&this._parseChannelModeMessage(e),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(e.message.dataBytes[0])&&this._parseEventForParameterNumber(e)}else e.type==="programchange"?(e.value=r,e.rawValue=e.value):e.type==="channelaftertouch"?(e.value=tt.from7bitToFloat(r),e.rawValue=r):e.type==="pitchbend"?(e.value=((i<<7)+r-8192)/8192,e.rawValue=(i<<7)+r):e.type="unknownmessage";this.emit(e.type,e)}_parseChannelModeMessage(t){const e=Object.assign({},t);e.type=e.controller.name,e.type==="localcontrol"&&(e.value=e.message.data[2]===127,e.rawValue=e.message.data[2]),e.type==="omnimodeon"?(e.type="omnimode",e.value=!0,e.rawValue=e.message.data[2]):e.type==="omnimodeoff"&&(e.type="omnimode",e.value=!1,e.rawValue=e.message.data[2]),e.type==="monomodeon"?(e.type="monomode",e.value=!0,e.rawValue=e.message.data[2]):e.type==="polymodeon"&&(e.type="monomode",e.value=!1,e.rawValue=e.message.data[2]),this.emit(e.type,e)}_parseEventForParameterNumber(t){const e=t.message.dataBytes[0],r=t.message.dataBytes[1],i=L.MIDI_CONTROL_CHANGE_MESSAGES;e===i.nonregisteredparameterfine||e===i.registeredparameterfine?(this._nrpnBuffer=[],this._rpnBuffer=[],e===i.nonregisteredparameterfine?this._nrpnBuffer=[t.message]:r!==127&&(this._rpnBuffer=[t.message])):e===i.nonregisteredparametercoarse||e===i.registeredparametercoarse?e===i.nonregisteredparametercoarse?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(t.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&r!==127?this._rpnBuffer.push(t.message):this._rpnBuffer=[]):e!==i.dataentrycoarse&&e!==i.dataentryfine&&e!==i.databuttonincrement&&e!==i.databuttondecrement||(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],t):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],t):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(t){return t===L.MIDI_CONTROL_CHANGE_MESSAGES.dataentrycoarse||t===L.MIDI_CONTROL_CHANGE_MESSAGES.dataentryfine||t===L.MIDI_CONTROL_CHANGE_MESSAGES.databuttonincrement||t===L.MIDI_CONTROL_CHANGE_MESSAGES.databuttondecrement||t===L.MIDI_CONTROL_CHANGE_MESSAGES.nonregisteredparametercoarse||t===L.MIDI_CONTROL_CHANGE_MESSAGES.nonregisteredparameterfine||t===L.MIDI_CONTROL_CHANGE_MESSAGES.registeredparametercoarse||t===L.MIDI_CONTROL_CHANGE_MESSAGES.registeredparameterfine}_dispatchParameterNumberEvent(t,e,r,i){t=t==="nrpn"?"nrpn":"rpn";const s={target:i.target,timestamp:i.timestamp,message:i.message,parameterMsb:e,parameterLsb:r,value:tt.from7bitToFloat(i.message.dataBytes[1]),rawValue:i.message.dataBytes[1]};s.parameter=t==="rpn"?Object.keys(L.MIDI_REGISTERED_PARAMETERS).find(a=>L.MIDI_REGISTERED_PARAMETERS[a][0]===e&&L.MIDI_REGISTERED_PARAMETERS[a][1]===r):(e<<7)+r;const o=tt.getPropertyByValue(L.MIDI_CONTROL_CHANGE_MESSAGES,i.message.dataBytes[0]);s.type=`${t}-${o}`,this.emit(s.type,s),s.type=t,s.subtype=o,this.emit(s.type,s)}getChannelModeByNumber(t){return it.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),t=Math.floor(t)),tt.getChannelModeByNumber(t)}getCcNameByNumber(t){if(it.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),!((t=parseInt(t))>=0&&t<=127)))throw new RangeError("Invalid control change number.");return tt.getCcNameByNumber(t)}getNoteState(t){t instanceof Qr&&(t=t.identifier);const e=tt.guessNoteNumber(t,it.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[e]}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(t){this.validation&&(t=!!t),this.parameterNumberEventsEnabled=t}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Rf{constructor(t){this.rawData=t,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=1+(15&this.statusByte)):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=tt.getPropertyByValue(L.MIDI_CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=tt.getPropertyByValue(L.MIDI_SYSTEM_MESSAGES,this.command)),this.statusByte===L.MIDI_SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class oM extends rn{constructor(t){super(),this._midiInput=t,this._octaveOffset=0,this.channels=[];for(let e=1;e<=16;e++)this.channels[e]=new sM(this,e);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(t){let e={timestamp:it.time,target:this,port:this};t.port.connection==="open"?(e.type="opened",this.emit("opened",e)):t.port.connection==="closed"&&t.port.state==="connected"?(e.type="closed",this.emit("closed",e)):t.port.connection==="closed"&&t.port.state==="disconnected"?(e.type="disconnected",e.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",e)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught: ",t.port.connection,t.port.state)}_onMidiMessage(t){const e=new Rf(t.data),r={port:this,target:this,message:e,timestamp:t.timeStamp,type:"midimessage",data:e.data,rawData:e.data,statusByte:e.data[0],dataBytes:e.dataBytes};this.emit("midimessage",r),e.isSystemMessage?this._parseEvent(r):e.isChannelMessage&&this.channels[e.channel]._processMidiMessageEvent(r),this._forwarders.forEach(i=>i.forward(e))}_parseEvent(t){const e=Object.assign({},t);e.type=e.message.type||"unknownmidimessage",e.type==="songselect"&&(e.song=t.data[1]+1,e.value=t.data[1],e.rawValue=e.value),this.emit(e.type,e)}async open(){try{await this._midiInput.open()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}getChannelModeByNumber(){it.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(t,e,r={}){if(it.validation&&typeof r=="function"){let i=e!=null?[].concat(e):void 0;e=r,r={channels:i}}if(L.CHANNEL_EVENTS.includes(t)){r.channels===void 0&&(r.channels=L.MIDI_CHANNEL_NUMBERS);let i=[];return tt.sanitizeChannels(r.channels).forEach(s=>{i.push(this.channels[s].addListener(t,e,r))}),i}return super.addListener(t,e,r)}addOneTimeListener(t,e,r={}){return r.remaining=1,this.addListener(t,e,r)}on(t,e,r,i){return this.addListener(t,e,r,i)}hasListener(t,e,r={}){if(it.validation&&typeof r=="function"){let i=[].concat(e);e=r,r={channels:i}}return L.CHANNEL_EVENTS.includes(t)?(r.channels===void 0&&(r.channels=L.MIDI_CHANNEL_NUMBERS),tt.sanitizeChannels(r.channels).every(i=>this.channels[i].hasListener(t,e))):super.hasListener(t,e)}removeListener(t,e,r={}){if(it.validation&&typeof r=="function"){let i=[].concat(e);e=r,r={channels:i}}if(r.channels===void 0&&(r.channels=L.MIDI_CHANNEL_NUMBERS),t==null)return tt.sanitizeChannels(r.channels).forEach(i=>{this.channels[i]&&this.channels[i].removeListener()}),super.removeListener();L.CHANNEL_EVENTS.includes(t)?tt.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].removeListener(t,e,r)}):super.removeListener(t,e,r)}addForwarder(t,e={}){let r;return r=t instanceof Jl?t:new Jl(t,e),this._forwarders.push(r),r}removeForwarder(t){this._forwarders=this._forwarders.filter(e=>e!==t)}hasForwarder(t){return this._forwarders.includes(t)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return it.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */const it=new class extends rn{constructor(){super(),this.defaults={note:{attack:tt.from7bitToFloat(64),release:tt.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(n={},t=!1){if(tt.isNode)try{window.navigator}catch{global.navigator=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)()}if(this.validation=n.validation!==!1,this.validation&&(typeof n=="function"&&(n={callback:n,sysex:t}),t&&(n.sysex=!0)),this.enabled)return typeof n.callback=="function"&&n.callback(),Promise.resolve();const e={timestamp:this.time,target:this,type:"error",error:void 0},r={timestamp:this.time,target:this,type:"midiaccessgranted"},i={timestamp:this.time,target:this,type:"enabled"};try{typeof n.requestMIDIAccessFunction=="function"?this.interface=await n.requestMIDIAccessFunction({sysex:n.sysex,software:n.software}):this.interface=await navigator.requestMIDIAccess({sysex:n.sysex,software:n.software})}catch(s){return e.error=s,this.emit("error",e),typeof n.callback=="function"&&n.callback(s),Promise.reject(s)}this.emit("midiaccessgranted",r),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(s){return e.error=s,this.emit("error",e),typeof n.callback=="function"&&n.callback(s),Promise.reject(s)}return this.emit("enabled",i),typeof n.callback=="function"&&n.callback(),Promise.resolve(this)}async disable(){return this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface&&(this.interface.onstatechange=void 0),this.interface=null;let n={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",n),this.removeListener()})}getInputById(n,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return}if(t.disconnected){for(let e=0;e<this._disconnectedInputs.length;e++)if(this._disconnectedInputs[e].id===n.toString())return this._disconnectedInputs[e]}else for(let e=0;e<this.inputs.length;e++)if(this.inputs[e].id===n.toString())return this.inputs[e]}getInputByName(n,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return;n=n.toString()}if(t.disconnected){for(let e=0;e<this._disconnectedInputs.length;e++)if(~this._disconnectedInputs[e].name.indexOf(n))return this._disconnectedInputs[e]}else for(let e=0;e<this.inputs.length;e++)if(~this.inputs[e].name.indexOf(n))return this.inputs[e]}getOutputByName(n,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return;n=n.toString()}if(t.disconnected){for(let e=0;e<this._disconnectedOutputs.length;e++)if(~this._disconnectedOutputs[e].name.indexOf(n))return this._disconnectedOutputs[e]}else for(let e=0;e<this.outputs.length;e++)if(~this.outputs[e].name.indexOf(n))return this.outputs[e]}getOutputById(n,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return}if(t.disconnected){for(let e=0;e<this._disconnectedOutputs.length;e++)if(this._disconnectedOutputs[e].id===n.toString())return this._disconnectedOutputs[e]}else for(let e=0;e<this.outputs.length;e++)if(this.outputs[e].id===n.toString())return this.outputs[e]}noteNameToNumber(n){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),tt.toNoteNumber(n,this.octaveOffset)}getOctave(n){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),n=parseInt(n)),!isNaN(n)&&n>=0&&n<=127&&tt.getNoteDetails(tt.offsetNumber(n,this.octaveOffset)).octave}sanitizeChannels(n){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),tt.sanitizeChannels(n)}toMIDIChannels(n){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),tt.sanitizeChannels(n)}guessNoteNumber(n){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),tt.guessNoteNumber(n,this.octaveOffset)}getValidNoteArray(n,t={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),tt.buildNoteArray(n,t)}convertToTimestamp(n){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),tt.toTimestamp(n)}async _destroyInputsAndOutputs(){let n=[];return this.inputs.forEach(t=>n.push(t.destroy())),this.outputs.forEach(t=>n.push(t.destroy())),Promise.all(n).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(n){this._updateInputsAndOutputs();let t={timestamp:n.timeStamp,type:n.port.state,target:this};if(n.port.state==="connected"&&n.port.connection==="open"){n.port.type==="output"?t.port=this.getOutputById(n.port.id):n.port.type==="input"&&(t.port=this.getInputById(n.port.id)),this.emit(n.port.state,t);const e=Object.assign({},t);e.type="portschanged",this.emit(e.type,e)}else if(n.port.state==="disconnected"&&n.port.connection==="pending"){n.port.type==="input"?t.port=this.getInputById(n.port.id,{disconnected:!0}):n.port.type==="output"&&(t.port=this.getOutputById(n.port.id,{disconnected:!0})),this.emit(n.port.state,t);const e=Object.assign({},t);e.type="portschanged",this.emit(e.type,e)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let t=this._inputs.length-1;t>=0;t--){const e=this._inputs[t];Array.from(this.interface.inputs.values()).find(r=>r===e._midiInput)||(this._disconnectedInputs.push(e),this._inputs.splice(t,1))}let n=[];return this.interface.inputs.forEach(t=>{if(!this._inputs.find(e=>e._midiInput===t)){let e=this._disconnectedInputs.find(r=>r._midiInput===t);e||(e=new oM(t)),this._inputs.push(e),n.push(e.open())}}),Promise.all(n)}async _updateOutputs(){if(!this.interface)return;for(let t=this._outputs.length-1;t>=0;t--){const e=this._outputs[t];Array.from(this.interface.outputs.values()).find(r=>r===e._midiOutput)||(this._disconnectedOutputs.push(e),this._outputs.splice(t,1))}let n=[];return this.interface.outputs.forEach(t=>{if(!this._outputs.find(e=>e._midiOutput===t)){let e=this._disconnectedOutputs.find(r=>r._midiOutput===t);e||(e=new ac(t)),this._outputs.push(e),n.push(e.open())}}),Promise.all(n)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),tt.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),tt.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(n){if(this.validation&&(n=parseInt(n),isNaN(n)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=n}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&navigator.requestMIDIAccess}get sysexEnabled(){return!(!this.interface||!this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.0.21"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),L.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.MIDI_SYSTEM_MESSAGES."),L.MIDI_SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.MIDI_CHANNEL_MODE_MESSAGES."),L.MIDI_CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been moved to Enumerations.MIDI_CONTROL_CHANGE_MESSAGES."),L.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.MIDI_REGISTERED_PARAMETERS."),this.MIDI_REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}};it.constructor=null;const Oi=De({enabled:!1,initiated:!1,out:!0,inputs:{},outputs:{},forwards:{},playing:!1,channels:{},channel:re("global-midi-channel",1),note:{pitch:0,channel:1},offset:rr(0,-2,2),keyboard:!0,cc:{},ccLearn:{},message:null,log:[],clock:0,filter:re("global-midi-filter",{}),available:zt(()=>Object.entries(Oi.outputs).length>0),activeNotes:zt(()=>{let n={};for(let t in Oi.channels)for(let e in Oi.channels[t].activeNotes)n[e]=Oi.channels[t].activeNotes[e];return n}),activeChroma:zt(()=>{let n=new Array(12);for(let t in Oi.activeNotes)n[(t-9)%12]=t;return n})}),aM=["+0","@8n","@16n","@32n"];De({midi:re("synth-midi",!0),initiated:!1,mute:!1,quantize:Bw(aM,{initialValue:"+0"}),volume:rr(1,0,2)}),De({maxPolyphony:50,oscillator:{type:re("synth-osc","sawtooth8")},volume:-30,envelope:{attack:.01,decay:.1,sustain:.6,release:1},filterEnvelope:{attack:.001,decay:.7,sustain:.5,release:1,baseFrequency:60,octaves:5}});const wo=(n,t)=>Array(Math.abs(t)+1).join(n);function Si(n,t,e){return function(...r){return console.warn(`${n} is deprecated. Use ${t}.`),e.apply(this,r)}}function Df(n){return n!==null&&typeof n=="object"&&typeof n.name=="string"}function Bf(n){return n!==null&&typeof n=="object"&&typeof n.step=="number"&&typeof n.alt=="number"}const Ff=[0,2,4,-1,1,3,5],$f=Ff.map(n=>Math.floor(n*7/12));function Vf(n){const{step:t,alt:e,oct:r,dir:i=1}=n,s=Ff[t]+7*e;if(r===void 0)return[i*s];const o=r-$f[t]-4*e;return[i*s,i*o]}const cM=[3,0,4,1,5,2,6];function uM(n){const[t,e,r]=n,i=cM[lM(t)],s=Math.floor((t+1)/7);if(e===void 0)return{step:i,alt:s,dir:r};const o=e+4*s+$f[i];return{step:i,alt:s,oct:o,dir:r}}function lM(n){const t=(n+1)%7;return t<0?7+t:t}const jf={empty:!0,name:"",pc:"",acc:""},Ql=new Map,hM=n=>"CDEFGAB".charAt(n),dM=n=>n<0?wo("b",-n):wo("#",n),fM=n=>n[0]==="b"?-n.length:n.length;function be(n){const t=Ql.get(n);if(t)return t;const e=typeof n=="string"?vM(n):Bf(n)?be(_M(n)):Df(n)?be(n.name):jf;return Ql.set(n,e),e}const pM=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function mM(n){const t=pM.exec(n);return[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]}function Uf(n){return be(uM(n))}const gM=(n,t)=>(n%t+t)%t,ga=[0,2,4,5,7,9,11];function vM(n){const t=mM(n);if(t[0]===""||t[3]!=="")return jf;const e=t[0],r=t[1],i=t[2],s=(e.charCodeAt(0)+3)%7,o=fM(r),a=i.length?+i:void 0,c=Vf({step:s,alt:o,oct:a}),u=e+r+i,l=e+r,h=(ga[s]+o+120)%12,d=a===void 0?gM(ga[s]+o,12)-12*99:ga[s]+o+12*(a+1),f=d>=0&&d<=127?d:null,m=a===void 0?null:Math.pow(2,(d-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:h,coord:c,freq:m,height:d,letter:e,midi:f,name:u,oct:a,pc:l,step:s}}function _M(n){const{step:t,alt:e,oct:r}=n,i=hM(t);if(!i)return"";const s=i+dM(e);return r||r===0?s+r:s}const cc={empty:!0,name:"",acc:""},yM="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",bM="(AA|A|P|M|m|d|dd)([-+]?\\d+)",wM=new RegExp("^"+yM+"|"+bM+"$");function MM(n){const t=wM.exec(`${n}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}const Kl={};function Mo(n){return typeof n=="string"?Kl[n]||(Kl[n]=TM(n)):Bf(n)?Mo(xM(n)):Df(n)?Mo(n.name):cc}const th=[0,2,4,5,7,9,11],qf="PMMPPMM";function TM(n){const t=MM(n);if(t[0]==="")return cc;const e=+t[0],r=t[1],i=(Math.abs(e)-1)%7,s=qf[i];if(s==="M"&&r==="P")return cc;const o=s==="M"?"majorable":"perfectable",a=""+e+r,c=e<0?-1:1,u=e===8||e===-8?e:c*(i+1),l=AM(o,r),h=Math.floor((Math.abs(e)-1)/7),d=c*(th[i]+l+12*h),f=(c*(th[i]+l)%12+12)%12,m=Vf({step:i,alt:l,oct:h,dir:c});return{empty:!1,name:a,num:e,q:r,step:i,alt:l,dir:c,type:o,simple:u,semitones:d,chroma:f,coord:m,oct:h}}function AM(n,t){return t==="M"&&n==="majorable"||t==="P"&&n==="perfectable"?0:t==="m"&&n==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(n==="perfectable"?t.length:t.length+1):0}function xM(n){const{step:t,alt:e,oct:r=0,dir:i}=n;if(!i)return"";const s=t+1+7*r,o=s===0?t+1:s,a=i<0?"-":"",c=qf[t]==="M"?"majorable":"perfectable";return a+o+SM(c,e)}function SM(n,t){return t===0?n==="majorable"?"M":"P":t===-1&&n==="majorable"?"m":t>0?wo("A",t):wo("d",n==="perfectable"?t:t+1)}function Wo(n,t){const e=be(n),r=Mo(t);if(e.empty||r.empty)return"";const i=e.coord,s=r.coord,o=i.length===1?[i[0]+s[0]]:[i[0]+s[0],i[1]+s[1]];return Uf(o).name}function CM(n,t){const e=[];for(;t--;e[t]=t+n);return e}function EM(n,t){const e=[];for(;t--;e[t]=n-t);return e}function Lf(n,t){return n<t?CM(n,t-n+1):EM(n,n-t+1)}function Ho(n,t){const e=t.length,r=(n%e+e)%e;return t.slice(r,e).concat(t.slice(0,r))}function IM(n){return n.filter(t=>t===0||t)}const Or={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},uu=n=>Number(n).toString(2),eh=n=>parseInt(n,2),kM=/^[01]{12}$/;function zf(n){return kM.test(n)}const OM=n=>typeof n=="number"&&n>=0&&n<=4095,PM=n=>n&&zf(n.chroma),nh={[Or.chroma]:Or};function Ee(n){const t=zf(n)?n:OM(n)?uu(n):Array.isArray(n)?WM(n):PM(n)?n.chroma:Or.chroma;return nh[t]=nh[t]||zM(t)}const NM=Si("Pcset.pcset","Pcset.get",Ee),RM=n=>Ee(n).chroma,DM=n=>Ee(n).intervals,BM=n=>Ee(n).setNum,FM=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function $M(n){const t=[];for(let e=0;e<12;e++)n.charAt(e)==="1"&&t.push(FM[e]);return t}function VM(){return Lf(2048,4095).map(uu)}function Wf(n,t=!0){const e=Ee(n).chroma.split("");return IM(e.map((r,i)=>{const s=Ho(i,e);return t&&s[0]==="0"?null:s.join("")}))}function jM(n,t){return Ee(n).setNum===Ee(t).setNum}function lu(n){const t=Ee(n).setNum;return e=>{const r=Ee(e).setNum;return t&&t!==r&&(r&t)===r}}function Hf(n){const t=Ee(n).setNum;return e=>{const r=Ee(e).setNum;return t&&t!==r&&(r|t)===r}}function Gf(n){const t=Ee(n);return e=>{const r=be(e);return t&&!r.empty&&t.chroma.charAt(r.chroma)==="1"}}function UM(n){const t=Gf(n);return e=>e.filter(t)}var qM={get:Ee,chroma:RM,num:BM,intervals:DM,chromas:VM,isSupersetOf:Hf,isSubsetOf:lu,isNoteIncludedIn:Gf,isEqual:jM,filter:UM,modes:Wf,pcset:NM};function LM(n){const t=n.split("");return t.map((e,r)=>Ho(r,t).join(""))}function zM(n){const t=eh(n),e=LM(n).map(eh).filter(s=>s>=2048).sort()[0],r=uu(e),i=$M(n);return{empty:!1,name:"",setNum:t,chroma:n,normalized:r,intervals:i}}function WM(n){if(n.length===0)return Or.chroma;let t;const e=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<n.length;r++)t=be(n[r]),t.empty&&(t=Mo(n[r])),t.empty||(e[t.chroma]=1);return e.join("")}const HM=[["1P 3M 5P","major","M ^ "],["1P 3M 5P 7M","major seventh","maj7 \u0394 ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 \u03949 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 \u0394#4 \u0394#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -\u03947 m\u0394 -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim \xB0 o"],["1P 3m 5d 7d","diminished seventh","dim7 \xB07 o7"],["1P 3m 5d 7m","half-diminished","m7b5 \xF8 -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 \u03949#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],GM={...Or,name:"",quality:"Unknown",intervals:[],aliases:[]};let Ci=[],wr={};function Yf(n){return wr[n]||GM}const YM=Si("ChordType.chordType","ChordType.get",Yf);function XM(){return Ci.map(n=>n.name).filter(n=>n)}function ZM(){return Ci.map(n=>n.aliases[0]).filter(n=>n)}function JM(){return Object.keys(wr)}function hu(){return Ci.slice()}const QM=Si("ChordType.entries","ChordType.all",hu);function KM(){Ci=[],wr={}}function Xf(n,t,e){const r=eT(n),i={...Ee(n),name:e||"",quality:r,intervals:n,aliases:t};Ci.push(i),i.name&&(wr[i.name]=i),wr[i.setNum]=i,wr[i.chroma]=i,i.aliases.forEach(s=>tT(i,s))}function tT(n,t){wr[t]=n}function eT(n){const t=e=>n.indexOf(e)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}HM.forEach(([n,t,e])=>Xf(n.split(" "),e.split(" "),t));Ci.sort((n,t)=>n.setNum-t.setNum);var Ze={names:XM,symbols:ZM,get:Yf,all:hu,add:Xf,removeAll:KM,keys:JM,entries:QM,chordType:YM};const nT=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 7m","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3m 4P 5P 6m 7m","aeolian","minor"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],rT={...Or,intervals:[],aliases:[]};let Go=[],Mr={};function Zf(){return Go.map(n=>n.name)}function Yo(n){return Mr[n]||rT}const iT=Si("ScaleDictionary.scaleType","ScaleType.get",Yo);function Xo(){return Go.slice()}const sT=Si("ScaleDictionary.entries","ScaleType.all",Xo);function oT(){return Object.keys(Mr)}function aT(){Go=[],Mr={}}function Jf(n,t,e=[]){const r={...Ee(n),name:t,intervals:n,aliases:e};return Go.push(r),Mr[r.name]=r,Mr[r.setNum]=r,Mr[r.chroma]=r,r.aliases.forEach(i=>cT(r,i)),r}function cT(n,t){Mr[t]=n}nT.forEach(([n,t,...e])=>Jf(n.split(" "),t,e));var Qf={names:Zf,get:Yo,all:Xo,add:Jf,removeAll:aT,keys:oT,entries:sT,scaleType:iT};const uT=Math.log(2),lT=Math.log(440);function Kf(n){const t=12*(Math.log(n)-lT)/uT+69;return Math.round(t*100)/100}const hT="C C# D D# E F F# G G# A A# B".split(" "),dT="C Db D Eb E F Gb G Ab A Bb B".split(" ");function Ei(n,t={}){if(isNaN(n)||n===-1/0||n===1/0)return"";n=Math.round(n);const e=(t.sharps===!0?hT:dT)[n%12];if(t.pitchClass)return e;const r=Math.floor(n/12)-1;return e+r}const fT=["C","D","E","F","G","A","B"],tp=n=>n.name,ep=n=>n.map(be).filter(t=>!t.empty);function pT(n){return n===void 0?fT.slice():Array.isArray(n)?ep(n).map(tp):[]}const Xe=be,mT=n=>Xe(n).name,gT=n=>Xe(n).pc,vT=n=>Xe(n).acc,_T=n=>Xe(n).oct,yT=n=>Xe(n).midi,bT=n=>Xe(n).freq,wT=n=>Xe(n).chroma;function np(n){return Ei(n)}function MT(n){return Ei(Kf(n))}function TT(n){return Ei(Kf(n),{sharps:!0})}function AT(n){return Ei(n,{sharps:!0})}const du=Wo,xT=Wo,rp=n=>t=>du(t,n),ST=rp,ip=n=>t=>du(n,t),CT=ip;function sp(n,t){const e=Xe(n);if(e.empty)return"";const[r,i]=e.coord;return Uf(i===void 0?[r+t]:[r+t,i]).name}const ET=sp,fu=(n,t)=>n.height-t.height,IT=(n,t)=>t.height-n.height;function op(n,t){return t=t||fu,ep(n).sort(t).map(tp)}function ap(n){return op(n,fu).filter((t,e,r)=>e===0||t!==r[e-1])}const kT=n=>{const t=Xe(n);return t.empty?"":Ei(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:t.midi===null})};function cp(n,t){const e=Xe(n);if(e.empty)return"";const r=Xe(t||Ei(e.midi||e.chroma,{sharps:e.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==e.chroma)return"";if(e.oct===void 0)return r.pc;const i=e.chroma-e.alt,s=r.chroma-r.alt,o=i>11||s<0?-1:i<0||s>11?1:0,a=e.oct+o;return r.pc+a}var rh={names:pT,get:Xe,name:mT,pitchClass:gT,accidentals:vT,octave:_T,midi:yT,ascending:fu,descending:IT,sortedNames:op,sortedUniqNames:ap,fromMidi:np,fromMidiSharps:AT,freq:bT,fromFreq:MT,fromFreqSharps:TT,chroma:wT,transpose:du,tr:xT,transposeBy:rp,trBy:ST,transposeFrom:ip,trFrom:CT,transposeFifths:sp,trFifths:ET,simplify:kT,enharmonic:cp};Object.freeze([]);const pu=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],ih={...Or,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},OT=pu.map(PT),uc={};OT.forEach(n=>{uc[n.name]=n,n.aliases.forEach(t=>{uc[t]=n})});function up(n){return typeof n=="string"?uc[n.toLowerCase()]||ih:n&&n.name?up(n.name):ih}function PT(n){const[t,e,r,i,s,o,a]=n,c=a?[a]:[],u=Number(e).toString(2),l=Yo(i).intervals;return{empty:!1,intervals:l,modeNum:t,chroma:u,normalized:u,name:i,setNum:e,alt:r,triad:s,seventh:o,aliases:c}}function lp(n){return(t,e)=>{const r=up(t);if(r.empty)return[];const i=Ho(r.modeNum,n),s=r.intervals.map(o=>Wo(e,o));return i.map((o,a)=>s[a]+o)}}lp(pu.map(n=>n[4]));lp(pu.map(n=>n[5]));const NT={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function hp(n){if(typeof n!="string")return["",""];const t=n.indexOf(" "),e=be(n.substring(0,t));if(e.empty){const i=be(n);return i.empty?["",n]:[i.name,""]}const r=n.substring(e.name.length+1);return[e.name,r.length?r:""]}const RT=Zf;function ir(n){const t=Array.isArray(n)?n:hp(n),e=be(t[0]).name,r=Yo(t[1]);if(r.empty)return NT;const i=r.name,s=e?r.intervals.map(a=>Wo(e,a)):[],o=e?e+" "+i:i;return{...r,name:o,type:i,tonic:e,notes:s}}const DT=Si("Scale.scale","Scale.get",ir);function BT(n){const t=ir(n),e=lu(t.chroma);return hu().filter(r=>e(r.chroma)).map(r=>r.aliases[0])}function FT(n){const t=ir(n),e=Hf(t.chroma);return Xo().filter(r=>e(r.chroma)).map(r=>r.name)}function $T(n){const t=lu(ir(n).chroma);return Xo().filter(e=>t(e.chroma)).map(e=>e.name)}function dp(n){const t=n.map(i=>be(i).pc).filter(i=>i),e=t[0],r=ap(t);return Ho(r.indexOf(e),r)}function VT(n){const t=ir(n);if(t.empty)return[];const e=t.tonic?t.notes:t.intervals;return Wf(t.chroma).map((r,i)=>{const s=ir(r).name;return s?[e[i],s]:["",""]}).filter(r=>r[0])}function jT(n){const t=Array.isArray(n)?dp(n):ir(n).notes,e=t.map(r=>be(r).chroma);return r=>{const i=be(typeof r=="number"?np(r):r),s=i.height;if(s===void 0)return;const o=s%12,a=e.indexOf(o);if(a!==-1)return cp(i.name,t[a])}}function UT(n){const t=jT(n);return(e,r)=>{const i=be(e).height,s=be(r).height;return i===void 0||s===void 0?[]:Lf(i,s).map(t).filter(o=>o)}}var sh={get:ir,names:RT,extended:FT,modeNames:VT,reduced:$T,scaleChords:BT,scaleNotes:dp,tokenize:hp,rangeOf:UT,scale:DT};Ze.add(["1P","2m"],["2m"],"minor second");Ze.add(["1P","2M"],["2M"],"major second");Ze.add(["1P","3m"],["3m"],"minor third");Ze.add(["1P","3M"],["3M"],"major third");Ze.add(["1P","4P"],["4P"],"perfect fourth");Ze.add(["1P","5d"],["TT"],"tritone");Ze.add(["1P","5P"],["5P"],"perfect fifth");Ze.add(["1P","6m"],["6m"],"minor sixth");Ze.add(["1P","6M"],["6M"],"major sixth");Ze.add(["1P","7m"],["7m"],"minor seventh");Ze.add(["1P","7M"],["7M"],"major seventh");Ze.all();Qf.all();const fp=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];fp.forEach((n,t)=>{});const qT=fp,LT=[...qT].map((n,t)=>({name:n,pitch:t})),Lr=De({tonic:rr(re("global-tonic",0),0,11),note:zt(()=>LT[Lr.tonic]),chroma:re("global-chroma","101011010101"),set:zt(()=>Qf.get(Lr.chroma)),full:zt(()=>{let n=Lr.note.name+"4 "+Lr.set.name;return sh.get(n)}),pcs:zt(()=>sh.scaleNotes(Lr.full.notes)),isIn:zt(()=>qM.isNoteIncludedIn(Lr.pcs))});var zT={grad:.9,turn:360,rad:360/(2*Math.PI)},xn=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},ue=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},Ge=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},pp=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},oh=function(n){return{r:Ge(n.r,0,255),g:Ge(n.g,0,255),b:Ge(n.b,0,255),a:Ge(n.a)}},va=function(n){return{r:ue(n.r),g:ue(n.g),b:ue(n.b),a:ue(n.a,3)}},WT=/^#([0-9a-f]{3,8})$/i,Bs=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},mp=function(n){var t=n.r,e=n.g,r=n.b,i=n.a,s=Math.max(t,e,r),o=s-Math.min(t,e,r),a=o?s===t?(e-r)/o:s===e?2+(r-t)/o:4+(t-e)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},gp=function(n){var t=n.h,e=n.s,r=n.v,i=n.a;t=t/360*6,e/=100,r/=100;var s=Math.floor(t),o=r*(1-e),a=r*(1-(t-s)*e),c=r*(1-(1-t+s)*e),u=s%6;return{r:255*[r,a,o,o,c,r][u],g:255*[c,r,r,a,o,o][u],b:255*[o,o,c,r,r,a][u],a:i}},ah=function(n){return{h:pp(n.h),s:Ge(n.s,0,100),l:Ge(n.l,0,100),a:Ge(n.a)}},ch=function(n){return{h:ue(n.h),s:ue(n.s),l:ue(n.l),a:ue(n.a,3)}},uh=function(n){return gp((e=(t=n).s,{h:t.h,s:(e*=((r=t.l)<50?r:100-r)/100)>0?2*e/(r+e)*100:0,v:r+e,a:t.a}));var t,e,r},ji=function(n){return{h:(t=mp(n)).h,s:(i=(200-(e=t.s))*(r=t.v)/100)>0&&i<200?e*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,e,r,i},HT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,GT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,YT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,XT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,lc={string:[[function(n){var t=WT.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?ue(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?ue(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=YT.exec(n)||XT.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:oh({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=HT.exec(n)||GT.exec(n);if(!t)return null;var e,r,i=ah({h:(e=t[1],r=t[2],r===void 0&&(r="deg"),Number(e)*(zT[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return uh(i)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return xn(t)&&xn(e)&&xn(r)?oh({r:Number(t),g:Number(e),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var t=n.h,e=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!xn(t)||!xn(e)||!xn(r))return null;var o=ah({h:Number(t),s:Number(e),l:Number(r),a:Number(s)});return uh(o)},"hsl"],[function(n){var t=n.h,e=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!xn(t)||!xn(e)||!xn(r))return null;var o=function(a){return{h:pp(a.h),s:Ge(a.s,0,100),v:Ge(a.v,0,100),a:Ge(a.a)}}({h:Number(t),s:Number(e),v:Number(r),a:Number(s)});return gp(o)},"hsv"]]},lh=function(n,t){for(var e=0;e<t.length;e++){var r=t[e][0](n);if(r)return[r,t[e][1]]}return[null,void 0]},ZT=function(n){return typeof n=="string"?lh(n.trim(),lc.string):typeof n=="object"&&n!==null?lh(n,lc.object):[null,void 0]},_a=function(n,t){var e=ji(n);return{h:e.h,s:Ge(e.s+100*t,0,100),l:e.l,a:e.a}},ya=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},hh=function(n,t){var e=ji(n);return{h:e.h,s:e.s,l:Ge(e.l+100*t,0,100),a:e.a}},hc=function(){function n(t){this.parsed=ZT(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return ue(ya(this.rgba),2)},n.prototype.isDark=function(){return ya(this.rgba)<.5},n.prototype.isLight=function(){return ya(this.rgba)>=.5},n.prototype.toHex=function(){return t=va(this.rgba),e=t.r,r=t.g,i=t.b,o=(s=t.a)<1?Bs(ue(255*s)):"","#"+Bs(e)+Bs(r)+Bs(i)+o;var t,e,r,i,s,o},n.prototype.toRgb=function(){return va(this.rgba)},n.prototype.toRgbString=function(){return t=va(this.rgba),e=t.r,r=t.g,i=t.b,(s=t.a)<1?"rgba("+e+", "+r+", "+i+", "+s+")":"rgb("+e+", "+r+", "+i+")";var t,e,r,i,s},n.prototype.toHsl=function(){return ch(ji(this.rgba))},n.prototype.toHslString=function(){return t=ch(ji(this.rgba)),e=t.h,r=t.s,i=t.l,(s=t.a)<1?"hsla("+e+", "+r+"%, "+i+"%, "+s+")":"hsl("+e+", "+r+"%, "+i+"%)";var t,e,r,i,s},n.prototype.toHsv=function(){return t=mp(this.rgba),{h:ue(t.h),s:ue(t.s),v:ue(t.v),a:ue(t.a,3)};var t},n.prototype.invert=function(){return Sn({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),Sn(_a(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),Sn(_a(this.rgba,-t))},n.prototype.grayscale=function(){return Sn(_a(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),Sn(hh(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),Sn(hh(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?Sn({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):ue(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=ji(this.rgba);return typeof t=="number"?Sn({h:t,s:e.s,l:e.l,a:e.a}):ue(e.h)},n.prototype.isEqual=function(t){return this.toHex()===Sn(t).toHex()},n}(),Sn=function(n){return n instanceof hc?n:new hc(n)},dh=[],JT=function(n){n.forEach(function(t){dh.indexOf(t)<0&&(t(hc,lc),dh.push(t))})},QT={grad:.9,turn:360,rad:360/(2*Math.PI)},ba=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Kr=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},kn=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},wa=function(n){var t=n/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Ma=function(n){return 255*(n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n)},mu=96.422,gu=100,vu=82.521,KT=function(n){var t,e,r={x:.9555766*(t=n).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return e={r:Ma(.032404542*r.x-.015371385*r.y-.004985314*r.z),g:Ma(-.00969266*r.x+.018760108*r.y+41556e-8*r.z),b:Ma(556434e-9*r.x-.002040259*r.y+.010572252*r.z),a:n.a},{r:kn(e.r,0,255),g:kn(e.g,0,255),b:kn(e.b,0,255),a:kn(e.a)}},tA=function(n){var t=wa(n.r),e=wa(n.g),r=wa(n.b);return function(i){return{x:kn(i.x,0,mu),y:kn(i.y,0,gu),z:kn(i.z,0,vu),a:kn(i.a)}}(function(i){return{x:1.0478112*i.x+.0228866*i.y+-.050127*i.z,y:.0295424*i.x+.9904844*i.y+-.0170491*i.z,z:-.0092345*i.x+.0150436*i.y+.7521316*i.z,a:i.a}}({x:100*(.4124564*t+.3575761*e+.1804375*r),y:100*(.2126729*t+.7151522*e+.072175*r),z:100*(.0193339*t+.119192*e+.9503041*r),a:n.a}))},Ui=216/24389,oi=24389/27,vp=function(n){return{l:kn(n.l,0,100),c:n.c,h:(t=n.h,(t=isFinite(t)?t%360:0)>0?t:t+360),a:n.a};var t},fh=function(n){return{l:Kr(n.l,2),c:Kr(n.c,2),h:Kr(n.h,2),a:Kr(n.a,3)}},eA=function(n){var t=n.l,e=n.c,r=n.h,i=n.a,s=i===void 0?1:i;if(!ba(t)||!ba(e)||!ba(r))return null;var o=vp({l:Number(t),c:Number(e),h:Number(r),a:Number(s)});return _p(o)},ph=function(n){var t=function(s){var o=tA(s),a=o.x/mu,c=o.y/gu,u=o.z/vu;return a=a>Ui?Math.cbrt(a):(oi*a+16)/116,{l:116*(c=c>Ui?Math.cbrt(c):(oi*c+16)/116)-16,a:500*(a-c),b:200*(c-(u=u>Ui?Math.cbrt(u):(oi*u+16)/116)),alpha:o.a}}(n),e=Kr(t.a,3),r=Kr(t.b,3),i=Math.atan2(r,e)/Math.PI*180;return{l:t.l,c:Math.sqrt(e*e+r*r),h:i<0?i+360:i,a:t.alpha}},_p=function(n){return t={l:n.l,a:n.c*Math.cos(n.h*Math.PI/180),b:n.c*Math.sin(n.h*Math.PI/180),alpha:n.a},r=t.a/500+(e=(t.l+16)/116),i=e-t.b/200,KT({x:(Math.pow(r,3)>Ui?Math.pow(r,3):(116*r-16)/oi)*mu,y:(t.l>8?Math.pow((t.l+16)/116,3):t.l/oi)*gu,z:(Math.pow(i,3)>Ui?Math.pow(i,3):(116*i-16)/oi)*vu,a:t.alpha});var t,e,r,i},nA=/^lch\(\s*([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)\s+([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rA=function(n){var t=nA.exec(n);if(!t)return null;var e,r,i=vp({l:Number(t[1]),c:Number(t[2]),h:(e=t[3],r=t[4],r===void 0&&(r="deg"),Number(e)*(QT[r]||1)),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return _p(i)};function iA(n,t){n.prototype.toLch=function(){return fh(ph(this.rgba))},n.prototype.toLchString=function(){return e=fh(ph(this.rgba)),r=e.l,i=e.c,s=e.h,(o=e.a)<1?"lch("+r+"% "+i+" "+s+" / "+o+")":"lch("+r+"% "+i+" "+s+")";var e,r,i,s,o},t.string.push([rA,"lch"]),t.object.push([eA,"lch"])}var vn=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},Ta=function(n){var t=n/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Aa=function(n){return 255*(n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n)},_u=96.422,yu=100,bu=82.521,sA=function(n){var t,e,r={x:.9555766*(t=n).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return e={r:Aa(.032404542*r.x-.015371385*r.y-.004985314*r.z),g:Aa(-.00969266*r.x+.018760108*r.y+41556e-8*r.z),b:Aa(556434e-9*r.x-.002040259*r.y+.010572252*r.z),a:n.a},{r:vn(e.r,0,255),g:vn(e.g,0,255),b:vn(e.b,0,255),a:vn(e.a)}},oA=function(n){var t=Ta(n.r),e=Ta(n.g),r=Ta(n.b);return function(i){return{x:vn(i.x,0,_u),y:vn(i.y,0,yu),z:vn(i.z,0,bu),a:vn(i.a)}}(function(i){return{x:1.0478112*i.x+.0228866*i.y+-.050127*i.z,y:.0295424*i.x+.9904844*i.y+-.0170491*i.z,z:-.0092345*i.x+.0150436*i.y+.7521316*i.z,a:i.a}}({x:100*(.4124564*t+.3575761*e+.1804375*r),y:100*(.2126729*t+.7151522*e+.072175*r),z:100*(.0193339*t+.119192*e+.9503041*r),a:n.a}))},qi=216/24389,ai=24389/27,mh=function(n){var t=oA(n),e=t.x/_u,r=t.y/yu,i=t.z/bu;return e=e>qi?Math.cbrt(e):(ai*e+16)/116,{l:116*(r=r>qi?Math.cbrt(r):(ai*r+16)/116)-16,a:500*(e-r),b:200*(r-(i=i>qi?Math.cbrt(i):(ai*i+16)/116)),alpha:t.a}},aA=function(n,t,e){var r,i=mh(n),s=mh(t);return function(o){var a=(o.l+16)/116,c=o.a/500+a,u=a-o.b/200;return sA({x:(Math.pow(c,3)>qi?Math.pow(c,3):(116*c-16)/ai)*_u,y:(o.l>8?Math.pow((o.l+16)/116,3):o.l/ai)*yu,z:(Math.pow(u,3)>qi?Math.pow(u,3):(116*u-16)/ai)*bu,a:o.alpha})}({l:vn((r={l:i.l*(1-e)+s.l*e,a:i.a*(1-e)+s.a*e,b:i.b*(1-e)+s.b*e,alpha:i.alpha*(1-e)+s.alpha*e}).l,0,400),a:r.a,b:r.b,alpha:vn(r.alpha)})};function cA(n){function t(e,r,i){i===void 0&&(i=5);for(var s=[],o=1/(i-1),a=0;a<=i-1;a++)s.push(e.mix(r,o*a));return s}n.prototype.mix=function(e,r){r===void 0&&(r=.5);var i=e instanceof n?e:new n(e),s=aA(this.toRgb(),i.toRgb(),r);return new n(s)},n.prototype.tints=function(e){return t(this,"#fff",e)},n.prototype.shades=function(e){return t(this,"#000",e)},n.prototype.tones=function(e){return t(this,"#808080",e)}}function uA(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in e)r[e[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,c,u=r[this.toHex()];if(u)return u;if(o!=null&&o.closest){var l=this.toRgb(),h=1/0,d="black";if(!s.length)for(var f in e)s[f]=new n(e[f]).toRgb();for(var m in e){var y=(a=l,c=s[m],Math.pow(a.r-c.r,2)+Math.pow(a.g-c.g,2)+Math.pow(a.b-c.b,2));y<h&&(h=y,d=m)}return d}},t.string.push([function(o){var a=o.toLowerCase(),c=a==="transparent"?"#0000":e[a];return c?new n(c).toRgb():null},"name"])}var xa=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Pi=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},sn=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},Sa=function(n){var t=n/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Ca=function(n){return 255*(n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n)},wu=96.422,Mu=100,Tu=82.521,lA=function(n){var t,e,r={x:.9555766*(t=n).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return e={r:Ca(.032404542*r.x-.015371385*r.y-.004985314*r.z),g:Ca(-.00969266*r.x+.018760108*r.y+41556e-8*r.z),b:Ca(556434e-9*r.x-.002040259*r.y+.010572252*r.z),a:n.a},{r:sn(e.r,0,255),g:sn(e.g,0,255),b:sn(e.b,0,255),a:sn(e.a)}},hA=function(n){var t=Sa(n.r),e=Sa(n.g),r=Sa(n.b);return function(i){return{x:sn(i.x,0,wu),y:sn(i.y,0,Mu),z:sn(i.z,0,Tu),a:sn(i.a)}}(function(i){return{x:1.0478112*i.x+.0228866*i.y+-.050127*i.z,y:.0295424*i.x+.9904844*i.y+-.0170491*i.z,z:-.0092345*i.x+.0150436*i.y+.7521316*i.z,a:i.a}}({x:100*(.4124564*t+.3575761*e+.1804375*r),y:100*(.2126729*t+.7151522*e+.072175*r),z:100*(.0193339*t+.119192*e+.9503041*r),a:n.a}))},Li=216/24389,ci=24389/27,dA=function(n){var t=n.l,e=n.a,r=n.b,i=n.alpha,s=i===void 0?1:i;if(!xa(t)||!xa(e)||!xa(r))return null;var o=function(a){return{l:sn(a.l,0,400),a:a.a,b:a.b,alpha:sn(a.alpha)}}({l:Number(t),a:Number(e),b:Number(r),alpha:Number(s)});return fA(o)},fA=function(n){var t=(n.l+16)/116,e=n.a/500+t,r=t-n.b/200;return lA({x:(Math.pow(e,3)>Li?Math.pow(e,3):(116*e-16)/ci)*wu,y:(n.l>8?Math.pow((n.l+16)/116,3):n.l/ci)*Mu,z:(Math.pow(r,3)>Li?Math.pow(r,3):(116*r-16)/ci)*Tu,a:n.alpha})};function pA(n,t){n.prototype.toLab=function(){return r=hA(this.rgba),s=r.y/Mu,o=r.z/Tu,i=(i=r.x/wu)>Li?Math.cbrt(i):(ci*i+16)/116,e={l:116*(s=s>Li?Math.cbrt(s):(ci*s+16)/116)-16,a:500*(i-s),b:200*(s-(o=o>Li?Math.cbrt(o):(ci*o+16)/116)),alpha:r.a},{l:Pi(e.l,2),a:Pi(e.a,2),b:Pi(e.b,2),alpha:Pi(e.alpha,3)};var e,r,i,s,o},n.prototype.delta=function(e){e===void 0&&(e="#FFF");var r=e instanceof n?e:new n(e),i=function(s,o){var a=s.l,c=s.a,u=s.b,l=o.l,h=o.a,d=o.b,f=180/Math.PI,m=Math.PI/180,y=Math.pow(Math.pow(c,2)+Math.pow(u,2),.5),v=Math.pow(Math.pow(h,2)+Math.pow(d,2),.5),A=(a+l)/2,O=Math.pow((y+v)/2,7),D=.5*(1-Math.pow(O/(O+Math.pow(25,7)),.5)),E=c*(1+D),S=h*(1+D),N=Math.pow(Math.pow(E,2)+Math.pow(u,2),.5),C=Math.pow(Math.pow(S,2)+Math.pow(d,2),.5),U=(N+C)/2,z=E===0&&u===0?0:Math.atan2(u,E)*f,W=S===0&&d===0?0:Math.atan2(d,S)*f;z<0&&(z+=360),W<0&&(W+=360);var $=W-z,K=Math.abs(W-z);K>180&&W<=z?$+=360:K>180&&W>z&&($-=360);var J=z+W;K<=180?J/=2:J=(z+W<360?J+360:J-360)/2;var nt=1-.17*Math.cos(m*(J-30))+.24*Math.cos(2*m*J)+.32*Math.cos(m*(3*J+6))-.2*Math.cos(m*(4*J-63)),M=l-a,g=C-N,I=2*Math.sin(m*$/2)*Math.pow(N*C,.5),T=1+.015*Math.pow(A-50,2)/Math.pow(20+Math.pow(A-50,2),.5),P=1+.045*U,F=1+.015*U*nt,X=30*Math.exp(-1*Math.pow((J-275)/25,2)),et=-2*Math.pow(O/(O+Math.pow(25,7)),.5)*Math.sin(2*m*X);return Math.pow(Math.pow(M/1/T,2)+Math.pow(g/1/P,2)+Math.pow(I/1/F,2)+et*g*I/(1*P*1*F),.5)}(this.toLab(),r.toLab())/100;return sn(Pi(i,3))},t.object.push([dA,"lab"])}var Fs=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},We=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},Ni=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},yp=function(n){return{c:Ni(n.c,0,100),m:Ni(n.m,0,100),y:Ni(n.y,0,100),k:Ni(n.k,0,100),a:Ni(n.a)}},gh=function(n){return{c:We(n.c,2),m:We(n.m,2),y:We(n.y,2),k:We(n.k,2),a:We(n.a,3)}};function bp(n){return{r:We(255*(1-n.c/100)*(1-n.k/100)),g:We(255*(1-n.m/100)*(1-n.k/100)),b:We(255*(1-n.y/100)*(1-n.k/100)),a:n.a}}function vh(n){var t=1-Math.max(n.r/255,n.g/255,n.b/255),e=(1-n.r/255-t)/(1-t),r=(1-n.g/255-t)/(1-t),i=(1-n.b/255-t)/(1-t);return{c:isNaN(e)?0:We(100*e),m:isNaN(r)?0:We(100*r),y:isNaN(i)?0:We(100*i),k:We(100*t),a:n.a}}function mA(n){var t=n.c,e=n.m,r=n.y,i=n.k,s=n.a,o=s===void 0?1:s;return Fs(t)&&Fs(e)&&Fs(r)&&Fs(i)?bp(yp({c:Number(t),m:Number(e),y:Number(r),k:Number(i),a:Number(o)})):null}var gA=/^device-cmyk\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vA=function(n){var t=gA.exec(n);return t?bp(yp({c:Number(t[1])*(t[2]?1:100),m:Number(t[3])*(t[4]?1:100),y:Number(t[5])*(t[6]?1:100),k:Number(t[7])*(t[8]?1:100),a:t[9]===void 0?1:Number(t[9])/(t[10]?100:1)})):null};function _A(n,t){n.prototype.toCmyk=function(){return gh(vh(this.rgba))},n.prototype.toCmykString=function(){return e=gh(vh(this.rgba)),r=e.c,i=e.m,s=e.y,o=e.k,(a=e.a)<1?"device-cmyk("+r+"% "+i+"% "+s+"% "+o+"% / "+a+")":"device-cmyk("+r+"% "+i+"% "+s+"% "+o+"%)";var e,r,i,s,o,a},t.object.push([mA,"cmyk"]),t.string.push([vA,"cmyk"])}var yA={grad:.9,turn:360,rad:360/(2*Math.PI)},Ea=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},$s=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},Ia=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},wp=function(n){return{h:(t=n.h,(t=isFinite(t)?t%360:0)>0?t:t+360),w:Ia(n.w,0,100),b:Ia(n.b,0,100),a:Ia(n.a)};var t},_h=function(n){return{h:$s(n.h),w:$s(n.w),b:$s(n.b),a:$s(n.a,3)}},yh=function(n){return{h:function(t){var e=t.r,r=t.g,i=t.b,s=t.a,o=Math.max(e,r,i),a=o-Math.min(e,r,i),c=a?o===e?(r-i)/a:o===r?2+(i-e)/a:4+(e-r)/a:0;return{h:60*(c<0?c+6:c),s:o?a/o*100:0,v:o/255*100,a:s}}(n).h,w:Math.min(n.r,n.g,n.b)/255*100,b:100-Math.max(n.r,n.g,n.b)/255*100,a:n.a}},Mp=function(n){return function(t){var e=t.h,r=t.s,i=t.v,s=t.a;e=e/360*6,r/=100,i/=100;var o=Math.floor(e),a=i*(1-r),c=i*(1-(e-o)*r),u=i*(1-(1-e+o)*r),l=o%6;return{r:255*[i,c,a,a,u,i][l],g:255*[u,i,i,c,a,a][l],b:255*[a,a,u,i,i,c][l],a:s}}({h:n.h,s:n.b===100?0:100-n.w/(100-n.b)*100,v:100-n.b,a:n.a})},bA=function(n){var t=n.h,e=n.w,r=n.b,i=n.a,s=i===void 0?1:i;if(!Ea(t)||!Ea(e)||!Ea(r))return null;var o=wp({h:Number(t),w:Number(e),b:Number(r),a:Number(s)});return Mp(o)},wA=/^hwb\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,MA=function(n){var t=wA.exec(n);if(!t)return null;var e,r,i=wp({h:(e=t[1],r=t[2],r===void 0&&(r="deg"),Number(e)*(yA[r]||1)),w:Number(t[3]),b:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Mp(i)};function TA(n,t){n.prototype.toHwb=function(){return _h(yh(this.rgba))},n.prototype.toHwbString=function(){return e=_h(yh(this.rgba)),r=e.h,i=e.w,s=e.b,(o=e.a)<1?"hwb("+r+" "+i+"% "+s+"% / "+o+")":"hwb("+r+" "+i+"% "+s+"%)";var e,r,i,s,o},t.string.push([MA,"hwb"]),t.object.push([bA,"hwb"])}JT([cA,iA,uA,pA,_A,TA]);const pn=De({initialized:!1,bpm:rr(re("tempo-bpm",100),10,500),blink:!1,started:!1,playing:!1,stopped:!1,mute:re("tempo-mute",!0),volume:rr(re("tempo-volume",.5),0,1),progress:0,position:0,ticks:0,metre:{over:4,under:4,num:zt(()=>(pn.metre.over/(pn.metre.under/4)).toFixed(2))},hz:zt(()=>(pn.bpm/60).toFixed(2)),note:zt(()=>rh.pitchClass(kl(pn.hz).toNote())),tune:zt(()=>rh.pitchClass(pn.note)+4),pitch:zt(()=>rM(pn.hz)),digit:zt(()=>(kl(pn.hz).toMidi()+12*10+3)%12),color:zt(()=>Nf(pn.digit)),tap:{last:0,diff:0,timeout:2e3,times:[],bpm:null},set(n){pn.bpm=Math.round(n+pn.bpm)}});var gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function AA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function xA(n){var t=n.default;if(typeof t=="function"){var e=function(){return t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),e}var SA={},Zo={};function CA(n){var t=new ke(n),e=t.readChunk();if(e.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+e.id+"'";for(var r=EA(e.data),i=[],s=0;!t.eof()&&s<r.numTracks;s++){var o=t.readChunk();if(o.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+o.id+"'";var a=IA(o.data);i.push(a)}return{header:r,tracks:i}}function EA(n){var t=new ke(n),e=t.readUInt16(),r=t.readUInt16(),i={format:e,numTracks:r},s=t.readUInt16();return s&32768?(i.framesPerSecond=256-(s>>8),i.ticksPerFrame=s&255):i.ticksPerBeat=s,i}function IA(n){for(var t=new ke(n),e=[];!t.eof();){var r=s();e.push(r)}return e;var i;function s(){var o={};o.deltaTime=t.readVarInt();var a=t.readUInt8();if((a&240)===240)if(a===255){o.meta=!0;var c=t.readUInt8(),u=t.readVarInt();switch(c){case 0:if(o.type="sequenceNumber",u!==2)throw"Expected length for sequenceNumber event is 2, got "+u;return o.number=t.readUInt16(),o;case 1:return o.type="text",o.text=t.readString(u),o;case 2:return o.type="copyrightNotice",o.text=t.readString(u),o;case 3:return o.type="trackName",o.text=t.readString(u),o;case 4:return o.type="instrumentName",o.text=t.readString(u),o;case 5:return o.type="lyrics",o.text=t.readString(u),o;case 6:return o.type="marker",o.text=t.readString(u),o;case 7:return o.type="cuePoint",o.text=t.readString(u),o;case 32:if(o.type="channelPrefix",u!=1)throw"Expected length for channelPrefix event is 1, got "+u;return o.channel=t.readUInt8(),o;case 33:if(o.type="portPrefix",u!=1)throw"Expected length for portPrefix event is 1, got "+u;return o.port=t.readUInt8(),o;case 47:if(o.type="endOfTrack",u!=0)throw"Expected length for endOfTrack event is 0, got "+u;return o;case 81:if(o.type="setTempo",u!=3)throw"Expected length for setTempo event is 3, got "+u;return o.microsecondsPerBeat=t.readUInt24(),o;case 84:if(o.type="smpteOffset",u!=5)throw"Expected length for smpteOffset event is 5, got "+u;var l=t.readUInt8(),h={0:24,32:25,64:29,96:30};return o.frameRate=h[l&96],o.hour=l&31,o.min=t.readUInt8(),o.sec=t.readUInt8(),o.frame=t.readUInt8(),o.subFrame=t.readUInt8(),o;case 88:if(o.type="timeSignature",u!=2&&u!=4)throw"Expected length for timeSignature event is 4 or 2, got "+u;return o.numerator=t.readUInt8(),o.denominator=1<<t.readUInt8(),u===4?(o.metronome=t.readUInt8(),o.thirtyseconds=t.readUInt8()):(o.metronome=36,o.thirtyseconds=8),o;case 89:if(o.type="keySignature",u!=2)throw"Expected length for keySignature event is 2, got "+u;return o.key=t.readInt8(),o.scale=t.readUInt8(),o;case 127:return o.type="sequencerSpecific",o.data=t.readBytes(u),o;default:return o.type="unknownMeta",o.data=t.readBytes(u),o.metatypeByte=c,o}}else if(a==240){o.type="sysEx";var u=t.readVarInt();return o.data=t.readBytes(u),o}else if(a==247){o.type="endSysEx";var u=t.readVarInt();return o.data=t.readBytes(u),o}else throw"Unrecognised MIDI event type byte: "+a;else{var d;if((a&128)===0){if(i===null)throw"Running status byte encountered before status byte";d=a,a=i,o.running=!0}else d=t.readUInt8(),i=a;var f=a>>4;switch(o.channel=a&15,f){case 8:return o.type="noteOff",o.noteNumber=d,o.velocity=t.readUInt8(),o;case 9:var m=t.readUInt8();return o.type=m===0?"noteOff":"noteOn",o.noteNumber=d,o.velocity=m,m===0&&(o.byte9=!0),o;case 10:return o.type="noteAftertouch",o.noteNumber=d,o.amount=t.readUInt8(),o;case 11:return o.type="controller",o.controllerType=d,o.value=t.readUInt8(),o;case 12:return o.type="programChange",o.programNumber=d,o;case 13:return o.type="channelAftertouch",o.amount=d,o;case 14:return o.type="pitchBend",o.value=d+(t.readUInt8()<<7)-8192,o;default:throw"Unrecognised MIDI event type: "+f}}}}function ke(n){this.buffer=n,this.bufferLen=this.buffer.length,this.pos=0}ke.prototype.eof=function(){return this.pos>=this.bufferLen};ke.prototype.readUInt8=function(){var n=this.buffer[this.pos];return this.pos+=1,n};ke.prototype.readInt8=function(){var n=this.readUInt8();return n&128?n-256:n};ke.prototype.readUInt16=function(){var n=this.readUInt8(),t=this.readUInt8();return(n<<8)+t};ke.prototype.readInt16=function(){var n=this.readUInt16();return n&32768?n-65536:n};ke.prototype.readUInt24=function(){var n=this.readUInt8(),t=this.readUInt8(),e=this.readUInt8();return(n<<16)+(t<<8)+e};ke.prototype.readInt24=function(){var n=this.readUInt24();return n&8388608?n-16777216:n};ke.prototype.readUInt32=function(){var n=this.readUInt8(),t=this.readUInt8(),e=this.readUInt8(),r=this.readUInt8();return(n<<24)+(t<<16)+(e<<8)+r};ke.prototype.readBytes=function(n){var t=this.buffer.slice(this.pos,this.pos+n);return this.pos+=n,t};ke.prototype.readString=function(n){var t=this.readBytes(n);return String.fromCharCode.apply(null,t)};ke.prototype.readVarInt=function(){for(var n=0;!this.eof();){var t=this.readUInt8();if(t&128)n+=t&127,n<<=7;else return n+t}return n};ke.prototype.readChunk=function(){var n=this.readString(4),t=this.readUInt32(),e=this.readBytes(t);return{id:n,length:t,data:e}};var kA=CA;function OA(n,t){if(typeof n!="object")throw"Invalid MIDI data";t=t||{};var e=n.header||{},r=n.tracks||[],i,s=r.length,o=new ce;for(PA(o,e,s),i=0;i<s;i++)NA(o,r[i],t);return o.buffer}function PA(n,t,e){var r=t.format==null?1:t.format,i=128;t.timeDivision?i=t.timeDivision:t.ticksPerFrame&&t.framesPerSecond?i=-(t.framesPerSecond&255)<<8|t.ticksPerFrame&255:t.ticksPerBeat&&(i=t.ticksPerBeat&32767);var s=new ce;s.writeUInt16(r),s.writeUInt16(e),s.writeUInt16(i),n.writeChunk("MThd",s.buffer)}function NA(n,t,e){var r=new ce,i,s=t.length,o=null;for(i=0;i<s;i++)(e.running===!1||!e.running&&!t[i].running)&&(o=null),o=RA(r,t[i],o,e.useByte9ForNoteOff);n.writeChunk("MTrk",r.buffer)}function RA(n,t,e,r){var i=t.type,s=t.deltaTime,o=t.text||"",a=t.data||[],c=null;switch(n.writeVarInt(s),i){case"sequenceNumber":n.writeUInt8(255),n.writeUInt8(0),n.writeVarInt(2),n.writeUInt16(t.number);break;case"text":n.writeUInt8(255),n.writeUInt8(1),n.writeVarInt(o.length),n.writeString(o);break;case"copyrightNotice":n.writeUInt8(255),n.writeUInt8(2),n.writeVarInt(o.length),n.writeString(o);break;case"trackName":n.writeUInt8(255),n.writeUInt8(3),n.writeVarInt(o.length),n.writeString(o);break;case"instrumentName":n.writeUInt8(255),n.writeUInt8(4),n.writeVarInt(o.length),n.writeString(o);break;case"lyrics":n.writeUInt8(255),n.writeUInt8(5),n.writeVarInt(o.length),n.writeString(o);break;case"marker":n.writeUInt8(255),n.writeUInt8(6),n.writeVarInt(o.length),n.writeString(o);break;case"cuePoint":n.writeUInt8(255),n.writeUInt8(7),n.writeVarInt(o.length),n.writeString(o);break;case"channelPrefix":n.writeUInt8(255),n.writeUInt8(32),n.writeVarInt(1),n.writeUInt8(t.channel);break;case"portPrefix":n.writeUInt8(255),n.writeUInt8(33),n.writeVarInt(1),n.writeUInt8(t.port);break;case"endOfTrack":n.writeUInt8(255),n.writeUInt8(47),n.writeVarInt(0);break;case"setTempo":n.writeUInt8(255),n.writeUInt8(81),n.writeVarInt(3),n.writeUInt24(t.microsecondsPerBeat);break;case"smpteOffset":n.writeUInt8(255),n.writeUInt8(84),n.writeVarInt(5);var u={24:0,25:32,29:64,30:96},l=t.hour&31|u[t.frameRate];n.writeUInt8(l),n.writeUInt8(t.min),n.writeUInt8(t.sec),n.writeUInt8(t.frame),n.writeUInt8(t.subFrame);break;case"timeSignature":n.writeUInt8(255),n.writeUInt8(88),n.writeVarInt(4),n.writeUInt8(t.numerator);var h=Math.floor(Math.log(t.denominator)/Math.LN2)&255;n.writeUInt8(h),n.writeUInt8(t.metronome),n.writeUInt8(t.thirtyseconds||8);break;case"keySignature":n.writeUInt8(255),n.writeUInt8(89),n.writeVarInt(2),n.writeInt8(t.key),n.writeUInt8(t.scale);break;case"sequencerSpecific":n.writeUInt8(255),n.writeUInt8(127),n.writeVarInt(a.length),n.writeBytes(a);break;case"unknownMeta":t.metatypeByte!=null&&(n.writeUInt8(255),n.writeUInt8(t.metatypeByte),n.writeVarInt(a.length),n.writeBytes(a));break;case"sysEx":n.writeUInt8(240),n.writeVarInt(a.length),n.writeBytes(a);break;case"endSysEx":n.writeUInt8(247),n.writeVarInt(a.length),n.writeBytes(a);break;case"noteOff":var d=r!==!1&&t.byte9||r&&t.velocity==0?144:128;c=d|t.channel,c!==e&&n.writeUInt8(c),n.writeUInt8(t.noteNumber),n.writeUInt8(t.velocity);break;case"noteOn":c=144|t.channel,c!==e&&n.writeUInt8(c),n.writeUInt8(t.noteNumber),n.writeUInt8(t.velocity);break;case"noteAftertouch":c=160|t.channel,c!==e&&n.writeUInt8(c),n.writeUInt8(t.noteNumber),n.writeUInt8(t.amount);break;case"controller":c=176|t.channel,c!==e&&n.writeUInt8(c),n.writeUInt8(t.controllerType),n.writeUInt8(t.value);break;case"programChange":c=192|t.channel,c!==e&&n.writeUInt8(c),n.writeUInt8(t.programNumber);break;case"channelAftertouch":c=208|t.channel,c!==e&&n.writeUInt8(c),n.writeUInt8(t.amount);break;case"pitchBend":c=224|t.channel,c!==e&&n.writeUInt8(c);var f=8192+t.value,m=f&127,y=f>>7&127;n.writeUInt8(m),n.writeUInt8(y);break;default:throw"Unrecognized event type: "+i}return c}function ce(){this.buffer=[]}ce.prototype.writeUInt8=function(n){this.buffer.push(n&255)};ce.prototype.writeInt8=ce.prototype.writeUInt8;ce.prototype.writeUInt16=function(n){var t=n>>8&255,e=n&255;this.writeUInt8(t),this.writeUInt8(e)};ce.prototype.writeInt16=ce.prototype.writeUInt16;ce.prototype.writeUInt24=function(n){var t=n>>16&255,e=n>>8&255,r=n&255;this.writeUInt8(t),this.writeUInt8(e),this.writeUInt8(r)};ce.prototype.writeInt24=ce.prototype.writeUInt24;ce.prototype.writeUInt32=function(n){var t=n>>24&255,e=n>>16&255,r=n>>8&255,i=n&255;this.writeUInt8(t),this.writeUInt8(e),this.writeUInt8(r),this.writeUInt8(i)};ce.prototype.writeInt32=ce.prototype.writeUInt32;ce.prototype.writeBytes=function(n){this.buffer=this.buffer.concat(Array.prototype.slice.call(n,0))};ce.prototype.writeString=function(n){var t,e=n.length,r=[];for(t=0;t<e;t++)r.push(n.codePointAt(t));this.writeBytes(r)};ce.prototype.writeVarInt=function(n){if(n<0)throw"Cannot write negative variable-length integer";if(n<=127)this.writeUInt8(n);else{var t=n,e=[];for(e.push(t&127),t>>=7;t;){var r=t&127|128;e.push(r),t>>=7}this.writeBytes(e.reverse())}};ce.prototype.writeChunk=function(n,t){this.writeString(n),this.writeUInt32(t.length),this.writeBytes(t)};var DA=OA;Zo.parseMidi=kA;Zo.writeMidi=DA;var To={},Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.insert=Pr.search=void 0;function Tp(n,t,e){e===void 0&&(e="ticks");var r=0,i=n.length,s=i;if(i>0&&n[i-1][e]<=t)return i-1;for(;r<s;){var o=Math.floor(r+(s-r)/2),a=n[o],c=n[o+1];if(a[e]===t){for(var u=o;u<n.length;u++){var l=n[u];l[e]===t&&(o=u)}return o}else{if(a[e]<t&&c[e]>t)return o;a[e]>t?s=o:a[e]<t&&(r=o+1)}}return-1}Pr.search=Tp;function BA(n,t,e){if(e===void 0&&(e="ticks"),n.length){var r=Tp(n,t[e],e);n.splice(r+1,0,t)}else n.push(t)}Pr.insert=BA;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Header=n.keySignatureKeys=void 0;var t=Pr,e=new WeakMap;n.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var r=function(){function i(s){var o=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",e.set(this,480),s){e.set(this,s.header.ticksPerBeat),s.tracks.forEach(function(c){c.forEach(function(u){u.meta&&(u.type==="timeSignature"?o.timeSignatures.push({ticks:u.absoluteTime,timeSignature:[u.numerator,u.denominator]}):u.type==="setTempo"?o.tempos.push({bpm:6e7/u.microsecondsPerBeat,ticks:u.absoluteTime}):u.type==="keySignature"&&o.keySignatures.push({key:n.keySignatureKeys[u.key+7],scale:u.scale===0?"major":"minor",ticks:u.absoluteTime}))})});var a=0;s.tracks[0].forEach(function(c){a+=c.deltaTime,c.meta&&(c.type==="trackName"?o.name=c.text:(c.type==="text"||c.type==="cuePoint"||c.type==="marker"||c.type==="lyrics")&&o.meta.push({text:c.text,ticks:a,type:c.type}))}),this.update()}}return i.prototype.update=function(){var s=this,o=0,a=0;this.tempos.sort(function(c,u){return c.ticks-u.ticks}),this.tempos.forEach(function(c,u){var l=u>0?s.tempos[u-1].bpm:s.tempos[0].bpm,h=c.ticks/s.ppq-a,d=60/l*h;c.time=d+o,o=c.time,a+=h}),this.timeSignatures.sort(function(c,u){return c.ticks-u.ticks}),this.timeSignatures.forEach(function(c,u){var l=u>0?s.timeSignatures[u-1]:s.timeSignatures[0],h=(c.ticks-l.ticks)/s.ppq,d=h/l.timeSignature[0]/(l.timeSignature[1]/4);l.measures=l.measures||0,c.measures=d+l.measures})},i.prototype.ticksToSeconds=function(s){var o=(0,t.search)(this.tempos,s);if(o!==-1){var a=this.tempos[o],c=a.time,u=(s-a.ticks)/this.ppq;return c+60/a.bpm*u}else{var l=s/this.ppq;return 60/120*l}},i.prototype.ticksToMeasures=function(s){var o=(0,t.search)(this.timeSignatures,s);if(o!==-1){var a=this.timeSignatures[o],c=(s-a.ticks)/this.ppq;return a.measures+c/(a.timeSignature[0]/a.timeSignature[1])/4}else return s/this.ppq/4},Object.defineProperty(i.prototype,"ppq",{get:function(){return e.get(this)},enumerable:!1,configurable:!0}),i.prototype.secondsToTicks=function(s){var o=(0,t.search)(this.tempos,s,"time");if(o!==-1){var a=this.tempos[o],c=a.time,u=s-c,l=u/(60/a.bpm);return Math.round(a.ticks+l*this.ppq)}else{var h=s/.5;return Math.round(h*this.ppq)}},i.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(s){return{bpm:s.bpm,ticks:s.ticks}}),timeSignatures:this.timeSignatures}},i.prototype.fromJSON=function(s){this.name=s.name,this.tempos=s.tempos.map(function(o){return Object.assign({},o)}),this.timeSignatures=s.timeSignatures.map(function(o){return Object.assign({},o)}),this.keySignatures=s.keySignatures.map(function(o){return Object.assign({},o)}),this.meta=s.meta.map(function(o){return Object.assign({},o)}),e.set(this,s.ppq),this.update()},i.prototype.setTempo=function(s){this.tempos=[{bpm:s,ticks:0}],this.update()},i}();n.Header=r})(To);var fs={},Au={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ControlChange=n.controlChangeIds=n.controlChangeNames=void 0,n.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},n.controlChangeIds=Object.keys(n.controlChangeNames).reduce(function(i,s){return i[n.controlChangeNames[s]]=s,i},{});var t=new WeakMap,e=new WeakMap,r=function(){function i(s,o){t.set(this,o),e.set(this,s.controllerType),this.ticks=s.absoluteTime,this.value=s.value}return Object.defineProperty(i.prototype,"number",{get:function(){return e.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return n.controlChangeNames[this.number]?n.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){var s=t.get(this);return s.ticksToSeconds(this.ticks)},set:function(s){var o=t.get(this);this.ticks=o.secondsToTicks(s)},enumerable:!1,configurable:!0}),i.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},i}();n.ControlChange=r})(Au);var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.createControlChanges=void 0;var Vs=Au;function FA(){return new Proxy({},{get:function(n,t){if(n[t])return n[t];if(Vs.controlChangeIds.hasOwnProperty(t))return n[Vs.controlChangeIds[t]]},set:function(n,t,e){return Vs.controlChangeIds.hasOwnProperty(t)?n[Vs.controlChangeIds[t]]=e:n[t]=e,!0}})}Jo.createControlChanges=FA;var Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.PitchBend=void 0;var ka=new WeakMap,$A=function(){function n(t,e){ka.set(this,e),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(n.prototype,"time",{get:function(){var t=ka.get(this);return t.ticksToSeconds(this.ticks)},set:function(t){var e=ka.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},n}();Qo.PitchBend=$A;var Ko={},Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.DrumKitByPatchID=Kn.InstrumentFamilyByID=Kn.instrumentByPatchID=void 0;Kn.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];Kn.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];Kn.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.Instrument=void 0;var js=Kn,bh=new WeakMap,VA=function(){function n(t,e){if(this.number=0,bh.set(this,e),this.number=0,t){var r=t.find(function(i){return i.type==="programChange"});r&&(this.number=r.programNumber)}}return Object.defineProperty(n.prototype,"name",{get:function(){return this.percussion?js.DrumKitByPatchID[this.number]:js.instrumentByPatchID[this.number]},set:function(t){var e=js.instrumentByPatchID.indexOf(t);e!==-1&&(this.number=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"family",{get:function(){return this.percussion?"drums":js.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"percussion",{get:function(){var t=bh.get(this);return t.channel===9},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},n.prototype.fromJSON=function(t){this.number=t.number},n}();Ko.Instrument=VA;var ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.Note=void 0;function jA(n){var t=Math.floor(n/12)-1;return Ap(n)+t.toString()}function Ap(n){var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],e=n%12;return t[e]}function UA(n){var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.indexOf(n)}var qA=function(){var n=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,t={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(e){var r=n.exec(e),i=r[1],s=r[2],o=t[i.toLowerCase()];return o+(parseInt(s,10)+1)*12}}(),zr=new WeakMap,LA=function(){function n(t,e,r){zr.set(this,r),this.midi=t.midi,this.velocity=t.velocity,this.noteOffVelocity=e.velocity,this.ticks=t.ticks,this.durationTicks=e.ticks-t.ticks}return Object.defineProperty(n.prototype,"name",{get:function(){return jA(this.midi)},set:function(t){this.midi=qA(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(t){var e=t-this.octave;this.midi+=e*12},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pitch",{get:function(){return Ap(this.midi)},set:function(t){this.midi=12*(this.octave+1)+UA(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){var t=zr.get(this);return t.ticksToSeconds(this.ticks+this.durationTicks)-t.ticksToSeconds(this.ticks)},set:function(t){var e=zr.get(this),r=e.secondsToTicks(this.time+t);this.durationTicks=r-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"time",{get:function(){var t=zr.get(this);return t.ticksToSeconds(this.ticks)},set:function(t){var e=zr.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bars",{get:function(){var t=zr.get(this);return t.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},n}();ta.Note=LA;Object.defineProperty(fs,"__esModule",{value:!0});fs.Track=void 0;var Oa=Pr,zA=Au,WA=Jo,HA=Qo,wh=Ko,GA=ta,Us=new WeakMap,YA=function(){function n(t,e){var r=this;if(this.name="",this.notes=[],this.controlChanges=(0,WA.createControlChanges)(),this.pitchBends=[],Us.set(this,e),t){var i=t.find(function(d){return d.type==="trackName"});this.name=i?i.text:""}if(this.instrument=new wh.Instrument(t,this),this.channel=0,t){for(var s=t.filter(function(d){return d.type==="noteOn"}),o=t.filter(function(d){return d.type==="noteOff"}),a=function(){var d=s.shift();c.channel=d.channel;var f=o.findIndex(function(y){return y.noteNumber===d.noteNumber&&y.absoluteTime>=d.absoluteTime});if(f!==-1){var m=o.splice(f,1)[0];c.addNote({durationTicks:m.absoluteTime-d.absoluteTime,midi:d.noteNumber,noteOffVelocity:m.velocity/127,ticks:d.absoluteTime,velocity:d.velocity/127})}},c=this;s.length;)a();var u=t.filter(function(d){return d.type==="controller"});u.forEach(function(d){r.addCC({number:d.controllerType,ticks:d.absoluteTime,value:d.value/127})});var l=t.filter(function(d){return d.type==="pitchBend"});l.forEach(function(d){r.addPitchBend({ticks:d.absoluteTime,value:d.value/Math.pow(2,13)})});var h=t.find(function(d){return d.type==="endOfTrack"});this.endOfTrackTicks=h!==void 0?h.absoluteTime:void 0}}return n.prototype.addNote=function(t){var e=Us.get(this),r=new GA.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},e);return Object.assign(r,t),(0,Oa.insert)(this.notes,r,"ticks"),this},n.prototype.addCC=function(t){var e=Us.get(this),r=new zA.ControlChange({controllerType:t.number},e);return delete t.number,Object.assign(r,t),Array.isArray(this.controlChanges[r.number])||(this.controlChanges[r.number]=[]),(0,Oa.insert)(this.controlChanges[r.number],r,"ticks"),this},n.prototype.addPitchBend=function(t){var e=Us.get(this),r=new HA.PitchBend({},e);return Object.assign(r,t),(0,Oa.insert)(this.pitchBends,r,"ticks"),this},Object.defineProperty(n.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,e=0;e<this.notes.length-1;e++){var r=this.notes[e].time+this.notes[e].duration;t<r&&(t=r)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,e=0;e<this.notes.length-1;e++){var r=this.notes[e].ticks+this.notes[e].durationTicks;t<r&&(t=r)}return t},enumerable:!1,configurable:!0}),n.prototype.fromJSON=function(t){var e=this;this.name=t.name,this.channel=t.channel,this.instrument=new wh.Instrument(void 0,this),this.instrument.fromJSON(t.instrument),t.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=t.endOfTrackTicks);for(var r in t.controlChanges)t.controlChanges[r]&&t.controlChanges[r].forEach(function(i){e.addCC({number:i.number,ticks:i.ticks,value:i.value})});t.notes.forEach(function(i){e.addNote({durationTicks:i.durationTicks,midi:i.midi,ticks:i.ticks,velocity:i.velocity})})},n.prototype.toJSON=function(){for(var t={},e=0;e<127;e++)this.controlChanges.hasOwnProperty(e)&&(t[e]=this.controlChanges[e].map(function(i){return i.toJSON()}));var r={channel:this.channel,controlChanges:t,pitchBends:this.pitchBends.map(function(i){return i.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(i){return i.toJSON()})};return this.endOfTrackTicks!==void 0&&(r.endOfTrackTicks=this.endOfTrackTicks),r},n}();fs.Track=YA;var ea={};function XA(n){var t=[];return xp(n,t),t}function xp(n,t){for(var e=0;e<n.length;e++){var r=n[e];Array.isArray(r)?xp(r,t):t.push(r)}}const ZA=Object.freeze(Object.defineProperty({__proto__:null,flatten:XA},Symbol.toStringTag,{value:"Module"})),JA=xA(ZA);var Wn=gr&&gr.__spreadArray||function(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return n.concat(s||Array.prototype.slice.call(t))};Object.defineProperty(ea,"__esModule",{value:!0});ea.encode=void 0;var QA=Zo,KA=To,tx=JA;function ex(n,t){return[{absoluteTime:n.ticks,channel:t,deltaTime:0,noteNumber:n.midi,type:"noteOn",velocity:Math.floor(n.velocity*127)},{absoluteTime:n.ticks+n.durationTicks,channel:t,deltaTime:0,noteNumber:n.midi,type:"noteOff",velocity:Math.floor(n.noteOffVelocity*127)}]}function nx(n){return(0,tx.flatten)(n.notes.map(function(t){return ex(t,n.channel)}))}function rx(n,t){return{absoluteTime:n.ticks,channel:t,controllerType:n.number,deltaTime:0,type:"controller",value:Math.floor(n.value*127)}}function ix(n){for(var t=[],e=0;e<127;e++)n.controlChanges.hasOwnProperty(e)&&n.controlChanges[e].forEach(function(r){t.push(rx(r,n.channel))});return t}function sx(n,t){return{absoluteTime:n.ticks,channel:t,deltaTime:0,type:"pitchBend",value:n.value}}function ox(n){var t=[];return n.pitchBends.forEach(function(e){t.push(sx(e,n.channel))}),t}function ax(n){return{absoluteTime:0,channel:n.channel,deltaTime:0,programNumber:n.instrument.number,type:"programChange"}}function cx(n){return{absoluteTime:0,deltaTime:0,meta:!0,text:n,type:"trackName"}}function ux(n){return{absoluteTime:n.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/n.bpm),type:"setTempo"}}function lx(n){return{absoluteTime:n.ticks,deltaTime:0,denominator:n.timeSignature[1],meta:!0,metronome:24,numerator:n.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function hx(n){var t=KA.keySignatureKeys.indexOf(n.key);return{absoluteTime:n.ticks,deltaTime:0,key:t+7,meta:!0,scale:n.scale==="major"?0:1,type:"keySignature"}}function dx(n){return{absoluteTime:n.ticks,deltaTime:0,meta:!0,text:n.text,type:n.type}}function fx(n){var t={header:{format:1,numTracks:n.tracks.length+1,ticksPerBeat:n.header.ppq},tracks:Wn([Wn(Wn(Wn(Wn([{absoluteTime:0,deltaTime:0,meta:!0,text:n.header.name,type:"trackName"}],n.header.keySignatures.map(function(e){return hx(e)}),!0),n.header.meta.map(function(e){return dx(e)}),!0),n.header.tempos.map(function(e){return ux(e)}),!0),n.header.timeSignatures.map(function(e){return lx(e)}),!0)],n.tracks.map(function(e){return Wn(Wn(Wn([cx(e.name),ax(e)],nx(e),!0),ix(e),!0),ox(e),!0)}),!0)};return t.tracks=t.tracks.map(function(e){e=e.sort(function(i,s){return i.absoluteTime-s.absoluteTime});var r=0;return e.forEach(function(i){i.deltaTime=i.absoluteTime-r,r=i.absoluteTime,delete i.absoluteTime}),e.push({deltaTime:0,meta:!0,type:"endOfTrack"}),e}),new Uint8Array((0,QA.writeMidi)(t))}ea.encode=fx;(function(n){var t=gr&&gr.__awaiter||function(h,d,f,m){function y(v){return v instanceof f?v:new f(function(A){A(v)})}return new(f||(f=Promise))(function(v,A){function O(S){try{E(m.next(S))}catch(N){A(N)}}function D(S){try{E(m.throw(S))}catch(N){A(N)}}function E(S){S.done?v(S.value):y(S.value).then(O,D)}E((m=m.apply(h,d||[])).next())})},e=gr&&gr.__generator||function(h,d){var f={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},m,y,v,A;return A={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function O(E){return function(S){return D([E,S])}}function D(E){if(m)throw new TypeError("Generator is already executing.");for(;f;)try{if(m=1,y&&(v=E[0]&2?y.return:E[0]?y.throw||((v=y.return)&&v.call(y),0):y.next)&&!(v=v.call(y,E[1])).done)return v;switch(y=0,v&&(E=[E[0]&2,v.value]),E[0]){case 0:case 1:v=E;break;case 4:return f.label++,{value:E[1],done:!1};case 5:f.label++,y=E[1],E=[0];continue;case 7:E=f.ops.pop(),f.trys.pop();continue;default:if(v=f.trys,!(v=v.length>0&&v[v.length-1])&&(E[0]===6||E[0]===2)){f=0;continue}if(E[0]===3&&(!v||E[1]>v[0]&&E[1]<v[3])){f.label=E[1];break}if(E[0]===6&&f.label<v[1]){f.label=v[1],v=E;break}if(v&&f.label<v[2]){f.label=v[2],f.ops.push(E);break}v[2]&&f.ops.pop(),f.trys.pop();continue}E=d.call(h,f)}catch(S){E=[6,S],y=0}finally{m=v=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Header=n.Track=n.Midi=void 0;var r=Zo,i=To,s=fs,o=ea,a=function(){function h(d){var f=this,m=null;if(d){var y=d instanceof ArrayBuffer?new Uint8Array(d):d;m=(0,r.parseMidi)(y),m.tracks.forEach(function(v){var A=0;v.forEach(function(O){A+=O.deltaTime,O.absoluteTime=A})}),m.tracks=l(m.tracks)}this.header=new i.Header(m),this.tracks=[],d&&(this.tracks=m.tracks.map(function(v){return new s.Track(v,f.header)}),m.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return h.fromUrl=function(d){return t(this,void 0,void 0,function(){var f,m;return e(this,function(y){switch(y.label){case 0:return[4,fetch(d)];case 1:return f=y.sent(),f.ok?[4,f.arrayBuffer()]:[3,3];case 2:return m=y.sent(),[2,new h(m)];case 3:throw new Error("Could not load '".concat(d,"'"))}})})},Object.defineProperty(h.prototype,"name",{get:function(){return this.header.name},set:function(d){this.header.name=d},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"duration",{get:function(){var d=this.tracks.map(function(f){return f.duration});return Math.max.apply(Math,d)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"durationTicks",{get:function(){var d=this.tracks.map(function(f){return f.durationTicks});return Math.max.apply(Math,d)},enumerable:!1,configurable:!0}),h.prototype.addTrack=function(){var d=new s.Track(void 0,this.header);return this.tracks.push(d),d},h.prototype.toArray=function(){return(0,o.encode)(this)},h.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(d){return d.toJSON()})}},h.prototype.fromJSON=function(d){var f=this;this.header=new i.Header,this.header.fromJSON(d.header),this.tracks=d.tracks.map(function(m){var y=new s.Track(void 0,f.header);return y.fromJSON(m),y})},h.prototype.clone=function(){var d=new h;return d.fromJSON(this.toJSON()),d},h}();n.Midi=a;var c=fs;Object.defineProperty(n,"Track",{enumerable:!0,get:function(){return c.Track}});var u=To;Object.defineProperty(n,"Header",{enumerable:!0,get:function(){return u.Header}});function l(h){for(var d=[],f=0;f<h.length;f++)for(var m=d.length,y=new Map,v=Array(16).fill(0),A=0,O=h[f];A<O.length;A++){var D=O[A],E=m,S=D.channel;if(S!==void 0){D.type==="programChange"&&(v[S]=D.programNumber);var N=v[S],C="".concat(N," ").concat(S);y.has(C)?E=y.get(C):(E=m+y.size,y.set(C,E))}d[E]||d.push([]),d[E].push(D)}return d}})(SA);De([]);De({initiated:!1,open:!1,opened:!1,monitor:!1,meter:0,volume:rr(re("mic-vol",1),0,2),gate:rr(re("mic-gate",-60),-100,-40)});re("noise-options",{noise:{type:"pink"},envelope:{attack:.1,decay:.1,sustain:.9,release:1},volume:1});re("filter-options",{on:!1,play:!1,volume:.5,baseFrequency:50,depth:.1,frequency:1,octaves:2,wet:1,type:"sine",filter:{Q:1,type:"lowpass"}});re("panner-options",{on:!1,play:!1,wet:1,frequency:1,depth:1,volume:1});re("bit-options",{on:!1,bits:16,wet:1,volume:1});De([]);var Sp={exports:{}};(function(n,t){(function(e,r){n.exports=r()})(gr,function(){function e(M,g,I){if(I||arguments.length===2)for(var T,P=0,F=g.length;P<F;P++)!T&&P in g||(T||(T=Array.prototype.slice.call(g,0,P)),T[P]=g[P]);return M.concat(T||Array.prototype.slice.call(g))}var r=Object.freeze({__proto__:null,blackman:function(M){for(var g=new Float32Array(M),I=2*Math.PI/(M-1),T=2*I,P=0;P<M/2;P++)g[P]=.42-.5*Math.cos(P*I)+.08*Math.cos(P*T);for(P=Math.ceil(M/2);P>0;P--)g[M-P]=g[P-1];return g},sine:function(M){for(var g=Math.PI/(M-1),I=new Float32Array(M),T=0;T<M;T++)I[T]=Math.sin(g*T);return I},hanning:function(M){for(var g=new Float32Array(M),I=0;I<M;I++)g[I]=.5-.5*Math.cos(2*Math.PI*I/(M-1));return g},hamming:function(M){for(var g=new Float32Array(M),I=0;I<M;I++)g[I]=.54-.46*Math.cos(2*Math.PI*(I/M-1));return g}}),i={};function s(M){for(;M%2==0&&M>1;)M/=2;return M===1}function o(M,g){if(g!=="rect"){if(g!==""&&g||(g="hanning"),i[g]||(i[g]={}),!i[g][M.length])try{i[g][M.length]=r[g](M.length)}catch{throw new Error("Invalid windowing function")}M=function(I,T){for(var P=[],F=0;F<Math.min(I.length,T.length);F++)P[F]=I[F]*T[F];return P}(M,i[g][M.length])}return M}function a(M,g,I){for(var T=new Float32Array(M),P=0;P<T.length;P++)T[P]=P*g/I,T[P]=13*Math.atan(T[P]/1315.8)+3.5*Math.atan(Math.pow(T[P]/7518,2));return T}function c(M){return Float32Array.from(M)}function u(M){return 1125*Math.log(1+M/700)}function l(M,g,I){for(var T,P=new Float32Array(M+2),F=new Float32Array(M+2),X=g/2,et=u(0),rt=(u(X)-et)/(M+1),at=new Array(M+2),Z=0;Z<P.length;Z++)P[Z]=Z*rt,F[Z]=(T=P[Z],700*(Math.exp(T/1125)-1)),at[Z]=Math.floor((I+1)*F[Z]/g);for(var Et=new Array(M),gt=0;gt<Et.length;gt++){for(Et[gt]=new Array(I/2+1).fill(0),Z=at[gt];Z<at[gt+1];Z++)Et[gt][Z]=(Z-at[gt])/(at[gt+1]-at[gt]);for(Z=at[gt+1];Z<at[gt+2];Z++)Et[gt][Z]=(at[gt+2]-Z)/(at[gt+2]-at[gt+1])}return Et}function h(M,g,I,T,P,F,X){T===void 0&&(T=5),P===void 0&&(P=2),F===void 0&&(F=!0),X===void 0&&(X=440);var et=Math.floor(I/2)+1,rt=new Array(I).fill(0).map(function(Bt,w){return M*function(b,k){return Math.log2(16*b/k)}(g*w/I,X)});rt[0]=rt[1]-1.5*M;var at,Z,Et,gt=rt.slice(1).map(function(Bt,w){return Math.max(Bt-rt[w])},1).concat([1]),ct=Math.round(M/2),Ht=new Array(M).fill(0).map(function(Bt,w){return rt.map(function(b){return(10*M+ct+b-w)%M-ct})}),qt=Ht.map(function(Bt,w){return Bt.map(function(b,k){return Math.exp(-.5*Math.pow(2*Ht[w][k]/gt[k],2))})});if(Z=(at=qt)[0].map(function(){return 0}),Et=at.reduce(function(Bt,w){return w.forEach(function(b,k){Bt[k]+=Math.pow(b,2)}),Bt},Z).map(Math.sqrt),qt=at.map(function(Bt,w){return Bt.map(function(b,k){return b/(Et[k]||1)})}),P){var ve=rt.map(function(Bt){return Math.exp(-.5*Math.pow((Bt/M-T)/P,2))});qt=qt.map(function(Bt){return Bt.map(function(w,b){return w*ve[b]})})}return F&&(qt=e(e([],qt.slice(3),!0),qt.slice(0,3),!0)),qt.map(function(Bt){return Bt.slice(0,et)})}function d(M,g){for(var I=0,T=0,P=0;P<g.length;P++)I+=Math.pow(P,M)*Math.abs(g[P]),T+=g[P];return I/T}function f(M){var g=M.ampSpectrum,I=M.barkScale,T=M.numberOfBarkBands,P=T===void 0?24:T;if(typeof g!="object"||typeof I!="object")throw new TypeError;var F=P,X=new Float32Array(F),et=0,rt=g,at=new Int32Array(F+1);at[0]=0;for(var Z=I[rt.length-1]/F,Et=1,gt=0;gt<rt.length;gt++)for(;I[gt]>Z;)at[Et++]=gt,Z=Et*I[rt.length-1]/F;for(at[F]=rt.length-1,gt=0;gt<F;gt++){for(var ct=0,Ht=at[gt];Ht<at[gt+1];Ht++)ct+=rt[Ht];X[gt]=Math.pow(ct,.23)}for(gt=0;gt<X.length;gt++)et+=X[gt];return{specific:X,total:et}}function m(M){var g=M.ampSpectrum;if(typeof g!="object")throw new TypeError;for(var I=new Float32Array(g.length),T=0;T<I.length;T++)I[T]=Math.pow(g[T],2);return I}function y(M){var g=M.ampSpectrum,I=M.melFilterBank,T=M.bufferSize;if(typeof g!="object")throw new TypeError("Valid ampSpectrum is required to generate melBands");if(typeof I!="object")throw new TypeError("Valid melFilterBank is required to generate melBands");for(var P=m({ampSpectrum:g}),F=I.length,X=Array(F),et=new Float32Array(F),rt=0;rt<et.length;rt++){X[rt]=new Float32Array(T/2),et[rt]=0;for(var at=0;at<T/2;at++)X[rt][at]=I[rt][at]*P[at],et[rt]+=X[rt][at];et[rt]=Math.log(et[rt]+1)}return Array.prototype.slice.call(et)}function v(M){return M&&M.__esModule&&Object.prototype.hasOwnProperty.call(M,"default")?M.default:M}var A={exports:{}},O=null,D=function(M,g){var I=M.length;return g=g||2,O&&O[I]||function(T){(O=O||{})[T]=new Array(T*T);for(var P=Math.PI/T,F=0;F<T;F++)for(var X=0;X<T;X++)O[T][X+F*T]=Math.cos(P*(X+.5)*F)}(I),M.map(function(){return 0}).map(function(T,P){return g*M.reduce(function(F,X,et,rt){return F+X*O[I][et+P*I]},0)})};(function(M){M.exports=D})(A);var E=v(A.exports),S=Object.freeze({__proto__:null,buffer:function(M){return M.signal},rms:function(M){var g=M.signal;if(typeof g!="object")throw new TypeError;for(var I=0,T=0;T<g.length;T++)I+=Math.pow(g[T],2);return I/=g.length,I=Math.sqrt(I)},energy:function(M){var g=M.signal;if(typeof g!="object")throw new TypeError;for(var I=0,T=0;T<g.length;T++)I+=Math.pow(Math.abs(g[T]),2);return I},complexSpectrum:function(M){return M.complexSpectrum},spectralSlope:function(M){var g=M.ampSpectrum,I=M.sampleRate,T=M.bufferSize;if(typeof g!="object")throw new TypeError;for(var P=0,F=0,X=new Float32Array(g.length),et=0,rt=0,at=0;at<g.length;at++){P+=g[at];var Z=at*I/T;X[at]=Z,et+=Z*Z,F+=Z,rt+=Z*g[at]}return(g.length*rt-F*P)/(P*(et-Math.pow(F,2)))},spectralCentroid:function(M){var g=M.ampSpectrum;if(typeof g!="object")throw new TypeError;return d(1,g)},spectralRolloff:function(M){var g=M.ampSpectrum,I=M.sampleRate;if(typeof g!="object")throw new TypeError;for(var T=g,P=I/(2*(T.length-1)),F=0,X=0;X<T.length;X++)F+=T[X];for(var et=.99*F,rt=T.length-1;F>et&&rt>=0;)F-=T[rt],--rt;return(rt+1)*P},spectralFlatness:function(M){var g=M.ampSpectrum;if(typeof g!="object")throw new TypeError;for(var I=0,T=0,P=0;P<g.length;P++)I+=Math.log(g[P]),T+=g[P];return Math.exp(I/g.length)*g.length/T},spectralSpread:function(M){var g=M.ampSpectrum;if(typeof g!="object")throw new TypeError;return Math.sqrt(d(2,g)-Math.pow(d(1,g),2))},spectralSkewness:function(M){var g=M.ampSpectrum;if(typeof g!="object")throw new TypeError;var I=d(1,g),T=d(2,g),P=d(3,g);return(2*Math.pow(I,3)-3*I*T+P)/Math.pow(Math.sqrt(T-Math.pow(I,2)),3)},spectralKurtosis:function(M){var g=M.ampSpectrum;if(typeof g!="object")throw new TypeError;var I=g,T=d(1,I),P=d(2,I),F=d(3,I),X=d(4,I);return(-3*Math.pow(T,4)+6*T*P-4*T*F+X)/Math.pow(Math.sqrt(P-Math.pow(T,2)),4)},amplitudeSpectrum:function(M){return M.ampSpectrum},zcr:function(M){var g=M.signal;if(typeof g!="object")throw new TypeError;for(var I=0,T=1;T<g.length;T++)(g[T-1]>=0&&g[T]<0||g[T-1]<0&&g[T]>=0)&&I++;return I},loudness:f,perceptualSpread:function(M){for(var g=f({ampSpectrum:M.ampSpectrum,barkScale:M.barkScale}),I=0,T=0;T<g.specific.length;T++)g.specific[T]>I&&(I=g.specific[T]);return Math.pow((g.total-I)/g.total,2)},perceptualSharpness:function(M){for(var g=f({ampSpectrum:M.ampSpectrum,barkScale:M.barkScale}),I=g.specific,T=0,P=0;P<I.length;P++)T+=P<15?(P+1)*I[P+1]:.066*Math.exp(.171*(P+1));return T*=.11/g.total},powerSpectrum:m,mfcc:function(M){var g=M.ampSpectrum,I=M.melFilterBank,T=M.numberOfMFCCCoefficients,P=M.bufferSize,F=Math.min(40,Math.max(1,T||13));if(I.length<F)throw new Error("Insufficient filter bank for requested number of coefficients");var X=y({ampSpectrum:g,melFilterBank:I,bufferSize:P});return E(X).slice(0,F)},chroma:function(M){var g=M.ampSpectrum,I=M.chromaFilterBank;if(typeof g!="object")throw new TypeError("Valid ampSpectrum is required to generate chroma");if(typeof I!="object")throw new TypeError("Valid chromaFilterBank is required to generate chroma");var T=I.map(function(F,X){return g.reduce(function(et,rt,at){return et+rt*F[at]},0)}),P=Math.max.apply(Math,T);return P?T.map(function(F){return F/P}):T},spectralFlux:function(M){var g=M.signal,I=M.previousSignal,T=M.bufferSize;if(typeof g!="object"||typeof I!="object")throw new TypeError;for(var P=0,F=-T/2;F<g.length/2-1;F++)x=Math.abs(g[F])-Math.abs(I[F]),P+=(x+Math.abs(x))/2;return P},spectralCrest:function(M){var g=M.ampSpectrum;if(typeof g!="object")throw new TypeError;var I=0,T=-1/0;return g.forEach(function(P){I+=Math.pow(P,2),T=P>T?P:T}),I/=g.length,I=Math.sqrt(I),T/I},melBands:y});function N(M){if(Array.isArray(M)){for(var g=0,I=Array(M.length);g<M.length;g++)I[g]=M[g];return I}return Array.from(M)}var C={},U={},z={bitReverseArray:function(M){if(C[M]===void 0){for(var g=(M-1).toString(2).length,I="0".repeat(g),T={},P=0;P<M;P++){var F=P.toString(2);F=I.substr(F.length)+F,F=[].concat(N(F)).reverse().join(""),T[P]=parseInt(F,2)}C[M]=T}return C[M]},multiply:function(M,g){return{real:M.real*g.real-M.imag*g.imag,imag:M.real*g.imag+M.imag*g.real}},add:function(M,g){return{real:M.real+g.real,imag:M.imag+g.imag}},subtract:function(M,g){return{real:M.real-g.real,imag:M.imag-g.imag}},euler:function(M,g){var I=-2*Math.PI*M/g;return{real:Math.cos(I),imag:Math.sin(I)}},conj:function(M){return M.imag*=-1,M},constructComplexArray:function(M){var g={};g.real=M.real===void 0?M.slice():M.real.slice();var I=g.real.length;return U[I]===void 0&&(U[I]=Array.apply(null,Array(I)).map(Number.prototype.valueOf,0)),g.imag=U[I].slice(),g}},W=function(M){var g={};M.real===void 0||M.imag===void 0?g=z.constructComplexArray(M):(g.real=M.real.slice(),g.imag=M.imag.slice());var I=g.real.length,T=Math.log2(I);if(Math.round(T)!=T)throw new Error("Input size must be a power of 2.");if(g.real.length!=g.imag.length)throw new Error("Real and imaginary components must have the same length.");for(var P=z.bitReverseArray(I),F={real:[],imag:[]},X=0;X<I;X++)F.real[P[X]]=g.real[X],F.imag[P[X]]=g.imag[X];for(var et=0;et<I;et++)g.real[et]=F.real[et],g.imag[et]=F.imag[et];for(var rt=1;rt<=T;rt++)for(var at=Math.pow(2,rt),Z=0;Z<at/2;Z++)for(var Et=z.euler(Z,at),gt=0;gt<I/at;gt++){var ct=at*gt+Z,Ht=at*gt+Z+at/2,qt={real:g.real[ct],imag:g.imag[ct]},ve={real:g.real[Ht],imag:g.imag[Ht]},Bt=z.multiply(Et,ve),w=z.subtract(qt,Bt);g.real[Ht]=w.real,g.imag[Ht]=w.imag;var b=z.add(Bt,qt);g.real[ct]=b.real,g.imag[ct]=b.imag}return g},$=W,K=function(){function M(g,I){var T=this;if(this._m=I,!g.audioContext)throw this._m.errors.noAC;if(g.bufferSize&&!s(g.bufferSize))throw this._m._errors.notPow2;if(!g.source)throw this._m._errors.noSource;this._m.audioContext=g.audioContext,this._m.bufferSize=g.bufferSize||this._m.bufferSize||256,this._m.hopSize=g.hopSize||this._m.hopSize||this._m.bufferSize,this._m.sampleRate=g.sampleRate||this._m.audioContext.sampleRate||44100,this._m.callback=g.callback,this._m.windowingFunction=g.windowingFunction||"hanning",this._m.featureExtractors=S,this._m.EXTRACTION_STARTED=g.startImmediately||!1,this._m.channel=typeof g.channel=="number"?g.channel:0,this._m.inputs=g.inputs||1,this._m.outputs=g.outputs||1,this._m.numberOfMFCCCoefficients=g.numberOfMFCCCoefficients||this._m.numberOfMFCCCoefficients||13,this._m.numberOfBarkBands=g.numberOfBarkBands||this._m.numberOfBarkBands||24,this._m.spn=this._m.audioContext.createScriptProcessor(this._m.bufferSize,this._m.inputs,this._m.outputs),this._m.spn.connect(this._m.audioContext.destination),this._m._featuresToExtract=g.featureExtractors||[],this._m.barkScale=a(this._m.bufferSize,this._m.sampleRate,this._m.bufferSize),this._m.melFilterBank=l(Math.max(this._m.melBands,this._m.numberOfMFCCCoefficients),this._m.sampleRate,this._m.bufferSize),this._m.inputData=null,this._m.previousInputData=null,this._m.frame=null,this._m.previousFrame=null,this.setSource(g.source),this._m.spn.onaudioprocess=function(P){var F;T._m.inputData!==null&&(T._m.previousInputData=T._m.inputData),T._m.inputData=P.inputBuffer.getChannelData(T._m.channel),T._m.previousInputData?((F=new Float32Array(T._m.previousInputData.length+T._m.inputData.length-T._m.hopSize)).set(T._m.previousInputData.slice(T._m.hopSize)),F.set(T._m.inputData,T._m.previousInputData.length-T._m.hopSize)):F=T._m.inputData,function(X,et,rt){if(X.length<et)throw new Error("Buffer is too short for frame length");if(rt<1)throw new Error("Hop length cannot be less that 1");if(et<1)throw new Error("Frame length cannot be less that 1");var at=1+Math.floor((X.length-et)/rt);return new Array(at).fill(0).map(function(Z,Et){return X.slice(Et*rt,Et*rt+et)})}(F,T._m.bufferSize,T._m.hopSize).forEach(function(X){T._m.frame=X;var et=T._m.extract(T._m._featuresToExtract,T._m.frame,T._m.previousFrame);typeof T._m.callback=="function"&&T._m.EXTRACTION_STARTED&&T._m.callback(et),T._m.previousFrame=T._m.frame})}}return M.prototype.start=function(g){this._m._featuresToExtract=g||this._m._featuresToExtract,this._m.EXTRACTION_STARTED=!0},M.prototype.stop=function(){this._m.EXTRACTION_STARTED=!1},M.prototype.setSource=function(g){this._m.source&&this._m.source.disconnect(this._m.spn),this._m.source=g,this._m.source.connect(this._m.spn)},M.prototype.setChannel=function(g){g<=this._m.inputs?this._m.channel=g:console.error("Channel ".concat(g," does not exist. Make sure you've provided a value for 'inputs' that is greater than ").concat(g," when instantiating the MeydaAnalyzer"))},M.prototype.get=function(g){return this._m.inputData?this._m.extract(g||this._m._featuresToExtract,this._m.inputData,this._m.previousInputData):null},M}(),J={audioContext:null,spn:null,bufferSize:512,sampleRate:44100,melBands:26,chromaBands:12,callback:null,windowingFunction:"hanning",featureExtractors:S,EXTRACTION_STARTED:!1,numberOfMFCCCoefficients:13,numberOfBarkBands:24,_featuresToExtract:[],windowing:o,_errors:{notPow2:new Error("Meyda: Buffer size must be a power of 2, e.g. 64 or 512"),featureUndef:new Error("Meyda: No features defined."),invalidFeatureFmt:new Error("Meyda: Invalid feature format"),invalidInput:new Error("Meyda: Invalid input."),noAC:new Error("Meyda: No AudioContext specified."),noSource:new Error("Meyda: No source node specified.")},createMeydaAnalyzer:function(M){return new K(M,Object.assign({},J))},listAvailableFeatureExtractors:function(){return Object.keys(this.featureExtractors)},extract:function(M,g,I){var T=this;if(!g)throw this._errors.invalidInput;if(typeof g!="object")throw this._errors.invalidInput;if(!M)throw this._errors.featureUndef;if(!s(g.length))throw this._errors.notPow2;this.barkScale!==void 0&&this.barkScale.length==this.bufferSize||(this.barkScale=a(this.bufferSize,this.sampleRate,this.bufferSize)),this.melFilterBank!==void 0&&this.barkScale.length==this.bufferSize&&this.melFilterBank.length==this.melBands||(this.melFilterBank=l(Math.max(this.melBands,this.numberOfMFCCCoefficients),this.sampleRate,this.bufferSize)),this.chromaFilterBank!==void 0&&this.chromaFilterBank.length==this.chromaBands||(this.chromaFilterBank=h(this.chromaBands,this.sampleRate,this.bufferSize)),"buffer"in g&&g.buffer===void 0?this.signal=c(g):this.signal=g;var P=nt(g,this.windowingFunction,this.bufferSize);if(this.signal=P.windowedSignal,this.complexSpectrum=P.complexSpectrum,this.ampSpectrum=P.ampSpectrum,I){var F=nt(I,this.windowingFunction,this.bufferSize);this.previousSignal=F.windowedSignal,this.previousComplexSpectrum=F.complexSpectrum,this.previousAmpSpectrum=F.ampSpectrum}var X=function(et){return T.featureExtractors[et]({ampSpectrum:T.ampSpectrum,chromaFilterBank:T.chromaFilterBank,complexSpectrum:T.complexSpectrum,signal:T.signal,bufferSize:T.bufferSize,sampleRate:T.sampleRate,barkScale:T.barkScale,melFilterBank:T.melFilterBank,previousSignal:T.previousSignal,previousAmpSpectrum:T.previousAmpSpectrum,previousComplexSpectrum:T.previousComplexSpectrum,numberOfMFCCCoefficients:T.numberOfMFCCCoefficients,numberOfBarkBands:T.numberOfBarkBands})};if(typeof M=="object")return M.reduce(function(et,rt){var at;return Object.assign({},et,((at={})[rt]=X(rt),at))},{});if(typeof M=="string")return X(M);throw this._errors.invalidFeatureFmt}},nt=function(M,g,I){var T={};M.buffer===void 0?T.signal=c(M):T.signal=M,T.windowedSignal=o(T.signal,g),T.complexSpectrum=$(T.windowedSignal),T.ampSpectrum=new Float32Array(I/2);for(var P=0;P<I/2;P++)T.ampSpectrum[P]=Math.sqrt(Math.pow(T.complexSpectrum.real[P],2)+Math.pow(T.complexSpectrum.imag[P],2));return T};return typeof window<"u"&&(window.Meyda=J),J})})(Sp);const px=AA(Sp.exports),mx=["C","C\u266F","D","D\u266F","E","F","F\u266F","G","G\u266F","A","A\u266F","B"],dc={middleA:440,semitone:69},Dt=De({initiated:!1,stream:null,middleA:dc.middleA,semitone:dc.semitone,note:{name:"A",value:69,cents:0,octave:4,frequency:440,color:Cp(440),silent:!1},span:64,bufferSize:4096,tempoBufferSize:512,frequencyData:null,running:!1,frame:0,beat:0,bpm:0,confidence:0,listenBeat:!1,prevBeat:0,blink:!1,chroma:[0,0,0,0,0,0,0,0,0,0,0,0],chromaAvg:zt(()=>Dt.chroma.reduce((n,t)=>n+t,0)/12),spec:[],rms:0}),Rt={};function Rx(){return nM(),{init:gx,tuner:Dt,chain:Rt}}function gx(){Dt.initiated=!0,Rt.audioContext=new window.AudioContext,Rt.analyser=Rt.audioContext.createAnalyser(),Rt.scriptProcessor=Rt.audioContext.createScriptProcessor(Dt.bufferSize,1,1),Rt.beatProcessor=Rt.audioContext.createScriptProcessor(Dt.tempoBufferSize,1,1),_n(()=>Dt.frame,()=>{!Dt.listen||Dt.beat>Dt.prevBeat&&(Dt.prevBeat=Dt.beat,Dt.blink=!0,setTimeout(()=>{Dt.blink=!1},60))}),Rt.meyda=px.createMeydaAnalyzer({audioContext:Rt.audioContext,source:Rt.analyser,bufferSize:4096,featureExtractors:["chroma","amplitudeSpectrum","rms"],callback:n=>{Dt.rms=n.rms,Dt.chroma=n.chroma,Dt.spec=n.amplitudeSpectrum}}),Rt.meyda.start(),Dt.frequencyData=new Uint8Array(Rt.analyser.frequencyBinCount),aw().then(function(n){Rt.pitchDetector=new n.Pitch("default",Dt.bufferSize,1,Rt.audioContext.sampleRate),Rt.tempoAnalyzer=new n.Tempo(Dt.tempoBufferSize*4,Dt.tempoBufferSize,Rt.audioContext.sampleRate),Dt.running=!0,vx()})}function vx(){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(n){Dt.stream=n,Rt.audioContext.createMediaStreamSource(n).connect(Rt.analyser),Rt.analyser.connect(Rt.scriptProcessor),Rt.analyser.connect(Rt.beatProcessor),Rt.scriptProcessor.connect(Rt.audioContext.destination),Rt.beatProcessor.connect(Rt.audioContext.destination),Rt.beatProcessor.addEventListener("audioprocess",t=>{Rt.tempoAnalyzer.do(t.inputBuffer.getChannelData(0))&&(Dt.beat++,Dt.confidence=Rt.tempoAnalyzer.getConfidence(),Dt.bpm=Rt.tempoAnalyzer.getBpm())}),Rt.scriptProcessor.addEventListener("audioprocess",function(t){const e=Rt.pitchDetector.do(t.inputBuffer.getChannelData(0));if(Dt.frame++,e){const r=_x(e);Dt.note={name:mx[r%12],value:r,cents:bx(e,r),octave:parseInt(r/12)-1,frequency:e,color:Cp(e),silent:!1}}else Dt.note.silent=!0})}).catch(function(n){console.log(n.name+": "+n.message)})}function _x(n){const t=12*(Math.log(n/Dt.middleA)/Math.log(2));return Math.round(t)+Dt.semitone}function yx(n){return Dt.middleA*Math.pow(2,(n-Dt.semitone)/12)}function bx(n,t){return Math.floor(1200*Math.log(n/yx(t))/Math.log(2))}function Cp(n){const t=wx(n);if(!t)return"#333";const e=parseInt(t/12)+2;return Nf(t,e)}function wx(n){return 12*(Math.log(n/dc.middleA)/Math.log(2))%12}export{Pg as A,Tx as B,Ax as C,Nf as D,Nx as E,En as F,kx as G,gr as H,qT as O,Px as R,p0 as _,le as a,om as b,zt as c,xx as d,am as e,id as f,Fg as g,Ix as h,ha as i,Rx as j,Cg as k,Cx as l,gd as m,kc as n,rd as o,Zm as p,Sx as q,De as r,dr as s,je as t,Ec as u,Lm as v,_n as w,pc as x,Ex as y,Mx as z};
