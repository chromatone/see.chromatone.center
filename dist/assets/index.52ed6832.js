(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function il(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const qg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Wg=il(qg);function Kf(t){return!!t||t===""}function hi(t){if(Ne(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=_t(r)?Gg(r):hi(r);if(s)for(const i in s)e[i]=s[i]}return e}else{if(_t(t))return t;if(lt(t))return t}}const zg=/;(?![^(]*\))/g,Hg=/:(.+)/;function Gg(t){const e={};return t.split(zg).forEach(n=>{if(n){const r=n.split(Hg);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ol(t){let e="";if(_t(t))e=t;else if(Ne(t))for(let n=0;n<t.length;n++){const r=ol(t[n]);r&&(e+=r+" ")}else if(lt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const hc=t=>_t(t)?t:t==null?"":Ne(t)||lt(t)&&(t.toString===Jf||!Oe(t.toString))?JSON.stringify(t,Xf,2):String(t),Xf=(t,e)=>e&&e.__v_isRef?Xf(t,e.value):ms(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:Zf(e)?{[`Set(${e.size})`]:[...e.values()]}:lt(e)&&!Ne(e)&&!ed(e)?String(e):e,Ye={},ps=[],un=()=>{},Yg=()=>!1,Kg=/^on[^a-z]/,Jo=t=>Kg.test(t),al=t=>t.startsWith("onUpdate:"),kt=Object.assign,cl=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Xg=Object.prototype.hasOwnProperty,Le=(t,e)=>Xg.call(t,e),Ne=Array.isArray,ms=t=>ea(t)==="[object Map]",Zf=t=>ea(t)==="[object Set]",Oe=t=>typeof t=="function",_t=t=>typeof t=="string",ll=t=>typeof t=="symbol",lt=t=>t!==null&&typeof t=="object",Qf=t=>lt(t)&&Oe(t.then)&&Oe(t.catch),Jf=Object.prototype.toString,ea=t=>Jf.call(t),Zg=t=>ea(t).slice(8,-1),ed=t=>ea(t)==="[object Object]",ul=t=>_t(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,mo=il(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ta=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Qg=/-(\w)/g,Ss=ta(t=>t.replace(Qg,(e,n)=>n?n.toUpperCase():"")),Jg=/\B([A-Z])/g,Rs=ta(t=>t.replace(Jg,"-$1").toLowerCase()),td=ta(t=>t.charAt(0).toUpperCase()+t.slice(1)),La=ta(t=>t?`on${td(t)}`:""),fi=(t,e)=>!Object.is(t,e),Va=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},To=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},e_=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let xu;const t_=()=>xu||(xu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let $t;class n_{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&$t&&(this.parent=$t,this.index=($t.scopes||($t.scopes=[])).push(this)-1)}run(e){if(this.active){const n=$t;try{return $t=this,e()}finally{$t=n}}}on(){$t=this}off(){$t=this.parent}stop(e){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.active=!1}}}function r_(t,e=$t){e&&e.active&&e.effects.push(t)}function nd(){return $t}function rd(t){$t&&$t.cleanups.push(t)}const hl=t=>{const e=new Set(t);return e.w=0,e.n=0,e},sd=t=>(t.w&hr)>0,id=t=>(t.n&hr)>0,s_=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=hr},i_=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];sd(s)&&!id(s)?s.delete(t):e[n++]=s,s.w&=~hr,s.n&=~hr}e.length=n}},fc=new WeakMap;let Js=0,hr=1;const dc=30;let sn;const Ir=Symbol(""),pc=Symbol("");class fl{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,r_(this,r)}run(){if(!this.active)return this.fn();let e=sn,n=or;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=sn,sn=this,or=!0,hr=1<<++Js,Js<=dc?s_(this):Ru(this),this.fn()}finally{Js<=dc&&i_(this),hr=1<<--Js,sn=this.parent,or=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){sn===this?this.deferStop=!0:this.active&&(Ru(this),this.onStop&&this.onStop(),this.active=!1)}}function Ru(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let or=!0;const od=[];function Ds(){od.push(or),or=!1}function Fs(){const t=od.pop();or=t===void 0?!0:t}function Ht(t,e,n){if(or&&sn){let r=fc.get(t);r||fc.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=hl()),ad(s)}}function ad(t,e){let n=!1;Js<=dc?id(t)||(t.n|=hr,n=!sd(t)):n=!t.has(sn),n&&(t.add(sn),sn.deps.push(t))}function Ln(t,e,n,r,s,i){const o=fc.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Ne(t))o.forEach((c,l)=>{(l==="length"||l>=r)&&a.push(c)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Ne(t)?ul(n)&&a.push(o.get("length")):(a.push(o.get(Ir)),ms(t)&&a.push(o.get(pc)));break;case"delete":Ne(t)||(a.push(o.get(Ir)),ms(t)&&a.push(o.get(pc)));break;case"set":ms(t)&&a.push(o.get(Ir));break}if(a.length===1)a[0]&&mc(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);mc(hl(c))}}function mc(t,e){const n=Ne(t)?t:[...t];for(const r of n)r.computed&&Du(r);for(const r of n)r.computed||Du(r)}function Du(t,e){(t!==sn||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const o_=il("__proto__,__v_isRef,__isVue"),cd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ll)),a_=dl(),c_=dl(!1,!0),l_=dl(!0),Fu=u_();function u_(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=We(this);for(let i=0,o=this.length;i<o;i++)Ht(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(We)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Ds();const r=We(this)[e].apply(this,n);return Fs(),r}}),t}function dl(t=!1,e=!1){return function(r,s,i){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&i===(t?e?C_:dd:e?fd:hd).get(r))return r;const o=Ne(r);if(!t&&o&&Le(Fu,s))return Reflect.get(Fu,s,i);const a=Reflect.get(r,s,i);return(ll(s)?cd.has(s):o_(s))||(t||Ht(r,"get",s),e)?a:yt(a)?o&&ul(s)?a:a.value:lt(a)?t?pd(a):Et(a):a}}const h_=ld(),f_=ld(!0);function ld(t=!1){return function(n,r,s,i){let o=n[r];if(di(o)&&yt(o)&&!yt(s))return!1;if(!t&&!di(s)&&(gc(s)||(s=We(s),o=We(o)),!Ne(n)&&yt(o)&&!yt(s)))return o.value=s,!0;const a=Ne(n)&&ul(r)?Number(r)<n.length:Le(n,r),c=Reflect.set(n,r,s,i);return n===We(i)&&(a?fi(s,o)&&Ln(n,"set",r,s):Ln(n,"add",r,s)),c}}function d_(t,e){const n=Le(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&Ln(t,"delete",e,void 0),r}function p_(t,e){const n=Reflect.has(t,e);return(!ll(e)||!cd.has(e))&&Ht(t,"has",e),n}function m_(t){return Ht(t,"iterate",Ne(t)?"length":Ir),Reflect.ownKeys(t)}const ud={get:a_,set:h_,deleteProperty:d_,has:p_,ownKeys:m_},g_={get:l_,set(t,e){return!0},deleteProperty(t,e){return!0}},__=kt({},ud,{get:c_,set:f_}),pl=t=>t,na=t=>Reflect.getPrototypeOf(t);function Qi(t,e,n=!1,r=!1){t=t.__v_raw;const s=We(t),i=We(e);n||(e!==i&&Ht(s,"get",e),Ht(s,"get",i));const{has:o}=na(s),a=r?pl:n?vl:pi;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function Ji(t,e=!1){const n=this.__v_raw,r=We(n),s=We(t);return e||(t!==s&&Ht(r,"has",t),Ht(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function eo(t,e=!1){return t=t.__v_raw,!e&&Ht(We(t),"iterate",Ir),Reflect.get(t,"size",t)}function Bu(t){t=We(t);const e=We(this);return na(e).has.call(e,t)||(e.add(t),Ln(e,"add",t,t)),this}function Lu(t,e){e=We(e);const n=We(this),{has:r,get:s}=na(n);let i=r.call(n,t);i||(t=We(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?fi(e,o)&&Ln(n,"set",t,e):Ln(n,"add",t,e),this}function Vu(t){const e=We(this),{has:n,get:r}=na(e);let s=n.call(e,t);s||(t=We(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&Ln(e,"delete",t,void 0),i}function Uu(){const t=We(this),e=t.size!==0,n=t.clear();return e&&Ln(t,"clear",void 0,void 0),n}function to(t,e){return function(r,s){const i=this,o=i.__v_raw,a=We(o),c=e?pl:t?vl:pi;return!t&&Ht(a,"iterate",Ir),o.forEach((l,u)=>r.call(s,c(l),c(u),i))}}function no(t,e,n){return function(...r){const s=this.__v_raw,i=We(s),o=ms(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=s[t](...r),u=n?pl:e?vl:pi;return!e&&Ht(i,"iterate",c?pc:Ir),{next(){const{value:h,done:f}=l.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function Kn(t){return function(...e){return t==="delete"?!1:this}}function v_(){const t={get(i){return Qi(this,i)},get size(){return eo(this)},has:Ji,add:Bu,set:Lu,delete:Vu,clear:Uu,forEach:to(!1,!1)},e={get(i){return Qi(this,i,!1,!0)},get size(){return eo(this)},has:Ji,add:Bu,set:Lu,delete:Vu,clear:Uu,forEach:to(!1,!0)},n={get(i){return Qi(this,i,!0)},get size(){return eo(this,!0)},has(i){return Ji.call(this,i,!0)},add:Kn("add"),set:Kn("set"),delete:Kn("delete"),clear:Kn("clear"),forEach:to(!0,!1)},r={get(i){return Qi(this,i,!0,!0)},get size(){return eo(this,!0)},has(i){return Ji.call(this,i,!0)},add:Kn("add"),set:Kn("set"),delete:Kn("delete"),clear:Kn("clear"),forEach:to(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=no(i,!1,!1),n[i]=no(i,!0,!1),e[i]=no(i,!1,!0),r[i]=no(i,!0,!0)}),[t,n,e,r]}const[y_,b_,w_,T_]=v_();function ml(t,e){const n=e?t?T_:w_:t?b_:y_;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Le(n,s)&&s in r?n:r,s,i)}const M_={get:ml(!1,!1)},S_={get:ml(!1,!0)},E_={get:ml(!0,!1)},hd=new WeakMap,fd=new WeakMap,dd=new WeakMap,C_=new WeakMap;function A_(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function I_(t){return t.__v_skip||!Object.isExtensible(t)?0:A_(Zg(t))}function Et(t){return di(t)?t:_l(t,!1,ud,M_,hd)}function gl(t){return _l(t,!1,__,S_,fd)}function pd(t){return _l(t,!0,g_,E_,dd)}function _l(t,e,n,r,s){if(!lt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=I_(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function gs(t){return di(t)?gs(t.__v_raw):!!(t&&t.__v_isReactive)}function di(t){return!!(t&&t.__v_isReadonly)}function gc(t){return!!(t&&t.__v_isShallow)}function md(t){return gs(t)||di(t)}function We(t){const e=t&&t.__v_raw;return e?We(e):t}function gd(t){return To(t,"__v_skip",!0),t}const pi=t=>lt(t)?Et(t):t,vl=t=>lt(t)?pd(t):t;function _d(t){or&&sn&&(t=We(t),ad(t.dep||(t.dep=hl())))}function vd(t,e){t=We(t),t.dep&&mc(t.dep)}function yt(t){return!!(t&&t.__v_isRef===!0)}function et(t){return yd(t,!1)}function rr(t){return yd(t,!0)}function yd(t,e){return yt(t)?t:new N_(t,e)}class N_{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:We(e),this._value=n?e:pi(e)}get value(){return _d(this),this._value}set value(e){e=this.__v_isShallow?e:We(e),fi(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:pi(e),vd(this))}}function qe(t){return yt(t)?t.value:t}const P_={get:(t,e,n)=>qe(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return yt(s)&&!yt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function bd(t){return gs(t)?t:new Proxy(t,P_)}class k_{constructor(e,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new fl(e,()=>{this._dirty||(this._dirty=!0,vd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=We(this);return _d(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function O_(t,e,n=!1){let r,s;const i=Oe(t);return i?(r=t,s=un):(r=t.get,s=t.set),new k_(r,s,i||!s,n)}function ar(t,e,n,r){let s;try{s=r?t(...r):t()}catch(i){ra(i,e,n)}return s}function hn(t,e,n,r){if(Oe(t)){const i=ar(t,e,n,r);return i&&Qf(i)&&i.catch(o=>{ra(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(hn(t[i],e,n,r));return s}function ra(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){ar(c,null,10,[t,o,a]);return}}x_(t,n,s,r)}function x_(t,e,n,r=!0){console.error(t)}let Mo=!1,_c=!1;const qt=[];let Dn=0;const ti=[];let ei=null,ss=0;const ni=[];let Jn=null,is=0;const wd=Promise.resolve();let yl=null,vc=null;function Bi(t){const e=yl||wd;return t?e.then(this?t.bind(this):t):e}function R_(t){let e=Dn+1,n=qt.length;for(;e<n;){const r=e+n>>>1;mi(qt[r])<t?e=r+1:n=r}return e}function Td(t){(!qt.length||!qt.includes(t,Mo&&t.allowRecurse?Dn+1:Dn))&&t!==vc&&(t.id==null?qt.push(t):qt.splice(R_(t.id),0,t),Md())}function Md(){!Mo&&!_c&&(_c=!0,yl=wd.then(Cd))}function D_(t){const e=qt.indexOf(t);e>Dn&&qt.splice(e,1)}function Sd(t,e,n,r){Ne(t)?n.push(...t):(!e||!e.includes(t,t.allowRecurse?r+1:r))&&n.push(t),Md()}function F_(t){Sd(t,ei,ti,ss)}function B_(t){Sd(t,Jn,ni,is)}function sa(t,e=null){if(ti.length){for(vc=e,ei=[...new Set(ti)],ti.length=0,ss=0;ss<ei.length;ss++)ei[ss]();ei=null,ss=0,vc=null,sa(t,e)}}function Ed(t){if(sa(),ni.length){const e=[...new Set(ni)];if(ni.length=0,Jn){Jn.push(...e);return}for(Jn=e,Jn.sort((n,r)=>mi(n)-mi(r)),is=0;is<Jn.length;is++)Jn[is]();Jn=null,is=0}}const mi=t=>t.id==null?1/0:t.id;function Cd(t){_c=!1,Mo=!0,sa(t),qt.sort((n,r)=>mi(n)-mi(r));const e=un;try{for(Dn=0;Dn<qt.length;Dn++){const n=qt[Dn];n&&n.active!==!1&&ar(n,null,14)}}finally{Dn=0,qt.length=0,Ed(),Mo=!1,yl=null,(qt.length||ti.length||ni.length)&&Cd(t)}}function L_(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ye;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=r[u]||Ye;f&&(s=n.map(d=>d.trim())),h&&(s=n.map(e_))}let a,c=r[a=La(e)]||r[a=La(Ss(e))];!c&&i&&(c=r[a=La(Rs(e))]),c&&hn(c,t,6,s);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,hn(l,t,6,s)}}function Ad(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Oe(t)){const c=l=>{const u=Ad(l,e,!0);u&&(a=!0,kt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(r.set(t,null),null):(Ne(i)?i.forEach(c=>o[c]=null):kt(o,i),r.set(t,o),o)}function ia(t,e){return!t||!Jo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Le(t,e[0].toLowerCase()+e.slice(1))||Le(t,Rs(e))||Le(t,e))}let Mn=null,oa=null;function So(t){const e=Mn;return Mn=t,oa=t&&t.type.__scopeId||null,e}function V_(t){oa=t}function U_(){oa=null}function yc(t,e=Mn,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Ku(-1);const i=So(e),o=t(...s);return So(i),r._d&&Ku(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function Ua(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:f,setupState:d,ctx:p,inheritAttrs:g}=t;let _,y;const A=So(t);try{if(n.shapeFlag&4){const N=s||r;_=Tn(u.call(N,N,h,i,d,f,p)),y=c}else{const N=e;_=Tn(N.length>1?N(i,{attrs:c,slots:a,emit:l}):N(i,null)),y=e.props?c:j_(c)}}catch(N){ri.length=0,ra(N,t,1),_=St(Dr)}let F=_;if(y&&g!==!1){const N=Object.keys(y),{shapeFlag:S}=F;N.length&&S&7&&(o&&N.some(al)&&(y=$_(y,o)),F=Es(F,y))}return n.dirs&&(F=Es(F),F.dirs=F.dirs?F.dirs.concat(n.dirs):n.dirs),n.transition&&(F.transition=n.transition),_=F,So(A),_}const j_=t=>{let e;for(const n in t)(n==="class"||n==="style"||Jo(n))&&((e||(e={}))[n]=t[n]);return e},$_=(t,e)=>{const n={};for(const r in t)(!al(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function q_(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?ju(r,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==r[f]&&!ia(l,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ju(r,o,l):!0:!!o;return!1}function ju(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ia(n,i))return!0}return!1}function W_({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const z_=t=>t.__isSuspense;function H_(t,e){e&&e.pendingBranch?Ne(t)?e.effects.push(...t):e.effects.push(t):B_(t)}function go(t,e){if(vt){let n=vt.provides;const r=vt.parent&&vt.parent.provides;r===n&&(n=vt.provides=Object.create(r)),n[t]=e}}function cr(t,e,n=!1){const r=vt||Mn;if(r){const s=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Oe(e)?e.call(r.proxy):e}}const $u={};function fn(t,e,n){return Id(t,e,n)}function Id(t,e,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=Ye){const a=vt;let c,l=!1,u=!1;if(yt(t)?(c=()=>t.value,l=gc(t)):gs(t)?(c=()=>t,r=!0):Ne(t)?(u=!0,l=t.some(y=>gs(y)||gc(y)),c=()=>t.map(y=>{if(yt(y))return y.value;if(gs(y))return cs(y);if(Oe(y))return ar(y,a,2)})):Oe(t)?e?c=()=>ar(t,a,2):c=()=>{if(!(a&&a.isUnmounted))return h&&h(),hn(t,a,3,[f])}:c=un,e&&r){const y=c;c=()=>cs(y())}let h,f=y=>{h=_.onStop=()=>{ar(y,a,4)}};if(_i)return f=un,e?n&&hn(e,a,3,[c(),u?[]:void 0,f]):c(),un;let d=u?[]:$u;const p=()=>{if(!!_.active)if(e){const y=_.run();(r||l||(u?y.some((A,F)=>fi(A,d[F])):fi(y,d)))&&(h&&h(),hn(e,a,3,[y,d===$u?void 0:d,f]),d=y)}else _.run()};p.allowRecurse=!!e;let g;s==="sync"?g=p:s==="post"?g=()=>Bt(p,a&&a.suspense):g=()=>F_(p);const _=new fl(c,g);return e?n?p():d=_.run():s==="post"?Bt(_.run.bind(_),a&&a.suspense):_.run(),()=>{_.stop(),a&&a.scope&&cl(a.scope.effects,_)}}function G_(t,e,n){const r=this.proxy,s=_t(t)?t.includes(".")?Nd(r,t):()=>r[t]:t.bind(r,r);let i;Oe(e)?i=e:(i=e.handler,n=e);const o=vt;Cs(this);const a=Id(s,i.bind(r),n);return o?Cs(o):Pr(),a}function Nd(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function cs(t,e){if(!lt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),yt(t))cs(t.value,e);else if(Ne(t))for(let n=0;n<t.length;n++)cs(t[n],e);else if(Zf(t)||ms(t))t.forEach(n=>{cs(n,e)});else if(ed(t))for(const n in t)cs(t[n],e);return t}function Pd(t){return Oe(t)?{setup:t,name:t.name}:t}const _o=t=>!!t.type.__asyncLoader,kd=t=>t.type.__isKeepAlive;function Y_(t,e){Od(t,"a",e)}function K_(t,e){Od(t,"da",e)}function Od(t,e,n=vt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(aa(e,r,n),n){let s=n.parent;for(;s&&s.parent;)kd(s.parent.vnode)&&X_(r,e,n,s),s=s.parent}}function X_(t,e,n,r){const s=aa(e,t,r,!0);wl(()=>{cl(r[e],s)},n)}function aa(t,e,n=vt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Ds(),Cs(n);const a=hn(e,n,t,o);return Pr(),Fs(),a});return r?s.unshift(i):s.push(i),i}}const jn=t=>(e,n=vt)=>(!_i||t==="sp")&&aa(t,e,n),Z_=jn("bm"),bl=jn("m"),Q_=jn("bu"),J_=jn("u"),e0=jn("bum"),wl=jn("um"),t0=jn("sp"),n0=jn("rtg"),r0=jn("rtc");function s0(t,e=vt){aa("ec",t,e)}function br(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Ds(),hn(c,n,8,[t.el,a,t,e]),Fs())}}const i0=Symbol();function o0(t,e,n,r){let s;const i=n&&n[r];if(Ne(t)||_t(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(lt(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];s[a]=e(t[l],l,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const bc=t=>t?zd(t)?Cl(t)||t.proxy:bc(t.parent):null,Eo=kt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>bc(t.parent),$root:t=>bc(t.root),$emit:t=>t.emit,$options:t=>Rd(t),$forceUpdate:t=>t.f||(t.f=()=>Td(t.update)),$nextTick:t=>t.n||(t.n=Bi.bind(t.proxy)),$watch:t=>G_.bind(t)}),a0={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(r!==Ye&&Le(r,e))return o[e]=1,r[e];if(s!==Ye&&Le(s,e))return o[e]=2,s[e];if((l=t.propsOptions[0])&&Le(l,e))return o[e]=3,i[e];if(n!==Ye&&Le(n,e))return o[e]=4,n[e];wc&&(o[e]=0)}}const u=Eo[e];let h,f;if(u)return e==="$attrs"&&Ht(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Ye&&Le(n,e))return o[e]=4,n[e];if(f=c.config.globalProperties,Le(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return s!==Ye&&Le(s,e)?(s[e]=n,!0):r!==Ye&&Le(r,e)?(r[e]=n,!0):Le(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==Ye&&Le(t,o)||e!==Ye&&Le(e,o)||(a=i[0])&&Le(a,o)||Le(r,o)||Le(Eo,o)||Le(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Le(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let wc=!0;function c0(t){const e=Rd(t),n=t.proxy,r=t.ctx;wc=!1,e.beforeCreate&&qu(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:p,activated:g,deactivated:_,beforeDestroy:y,beforeUnmount:A,destroyed:F,unmounted:N,render:S,renderTracked:R,renderTriggered:O,errorCaptured:D,serverPrefetch:q,expose:W,inheritAttrs:K,components:H,directives:ne,filters:re}=e;if(l&&l0(l,r,null,t.appContext.config.unwrapInjectedRef),o)for(const E in o){const M=o[E];Oe(M)&&(r[E]=M.bind(n))}if(s){const E=s.call(n,n);lt(E)&&(t.data=Et(E))}if(wc=!0,i)for(const E in i){const M=i[E],k=Oe(M)?M.bind(n,n):Oe(M.get)?M.get.bind(n,n):un,j=!Oe(M)&&Oe(M.set)?M.set.bind(n):un,J=Re({get:k,set:j});Object.defineProperty(r,E,{enumerable:!0,configurable:!0,get:()=>J.value,set:se=>J.value=se})}if(a)for(const E in a)xd(a[E],r,n,E);if(c){const E=Oe(c)?c.call(n):c;Reflect.ownKeys(E).forEach(M=>{go(M,E[M])})}u&&qu(u,t,"c");function v(E,M){Ne(M)?M.forEach(k=>E(k.bind(n))):M&&E(M.bind(n))}if(v(Z_,h),v(bl,f),v(Q_,d),v(J_,p),v(Y_,g),v(K_,_),v(s0,D),v(r0,R),v(n0,O),v(e0,A),v(wl,N),v(t0,q),Ne(W))if(W.length){const E=t.exposed||(t.exposed={});W.forEach(M=>{Object.defineProperty(E,M,{get:()=>n[M],set:k=>n[M]=k})})}else t.exposed||(t.exposed={});S&&t.render===un&&(t.render=S),K!=null&&(t.inheritAttrs=K),H&&(t.components=H),ne&&(t.directives=ne)}function l0(t,e,n=un,r=!1){Ne(t)&&(t=Tc(t));for(const s in t){const i=t[s];let o;lt(i)?"default"in i?o=cr(i.from||s,i.default,!0):o=cr(i.from||s):o=cr(i),yt(o)&&r?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[s]=o}}function qu(t,e,n){hn(Ne(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function xd(t,e,n,r){const s=r.includes(".")?Nd(n,r):()=>n[r];if(_t(t)){const i=e[t];Oe(i)&&fn(s,i)}else if(Oe(t))fn(s,t.bind(n));else if(lt(t))if(Ne(t))t.forEach(i=>xd(i,e,n,r));else{const i=Oe(t.handler)?t.handler.bind(n):e[t.handler];Oe(i)&&fn(s,i,t)}}function Rd(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(l=>Co(c,l,o,!0)),Co(c,e,o)),i.set(e,c),c}function Co(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Co(t,i,n,!0),s&&s.forEach(o=>Co(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=u0[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const u0={data:Wu,props:Tr,emits:Tr,methods:Tr,computed:Tr,beforeCreate:It,created:It,beforeMount:It,mounted:It,beforeUpdate:It,updated:It,beforeDestroy:It,beforeUnmount:It,destroyed:It,unmounted:It,activated:It,deactivated:It,errorCaptured:It,serverPrefetch:It,components:Tr,directives:Tr,watch:f0,provide:Wu,inject:h0};function Wu(t,e){return e?t?function(){return kt(Oe(t)?t.call(this,this):t,Oe(e)?e.call(this,this):e)}:e:t}function h0(t,e){return Tr(Tc(t),Tc(e))}function Tc(t){if(Ne(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function It(t,e){return t?[...new Set([].concat(t,e))]:e}function Tr(t,e){return t?kt(kt(Object.create(null),t),e):e}function f0(t,e){if(!t)return e;if(!e)return t;const n=kt(Object.create(null),t);for(const r in e)n[r]=It(t[r],e[r]);return n}function d0(t,e,n,r=!1){const s={},i={};To(i,ca,1),t.propsDefaults=Object.create(null),Dd(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:gl(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function p0(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=We(s),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(ia(t.emitsOptions,f))continue;const d=e[f];if(c)if(Le(i,f))d!==i[f]&&(i[f]=d,l=!0);else{const p=Ss(f);s[p]=Mc(c,a,p,d,t,!1)}else d!==i[f]&&(i[f]=d,l=!0)}}}else{Dd(t,e,s,i)&&(l=!0);let u;for(const h in a)(!e||!Le(e,h)&&((u=Rs(h))===h||!Le(e,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Mc(c,a,h,void 0,t,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!Le(e,h)&&!0)&&(delete i[h],l=!0)}l&&Ln(t,"set","$attrs")}function Dd(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(mo(c))continue;const l=e[c];let u;s&&Le(s,u=Ss(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:ia(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=We(n),l=a||Ye;for(let u=0;u<i.length;u++){const h=i[u];n[h]=Mc(s,c,h,l[h],t,!Le(l,h))}}return o}function Mc(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Le(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&Oe(c)){const{propsDefaults:l}=s;n in l?r=l[n]:(Cs(s),r=l[n]=c.call(null,e),Pr())}else r=c}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Rs(n))&&(r=!0))}return r}function Fd(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!Oe(t)){const u=h=>{c=!0;const[f,d]=Fd(h,e,!0);kt(o,f),d&&a.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return r.set(t,ps),ps;if(Ne(i))for(let u=0;u<i.length;u++){const h=Ss(i[u]);zu(h)&&(o[h]=Ye)}else if(i)for(const u in i){const h=Ss(u);if(zu(h)){const f=i[u],d=o[h]=Ne(f)||Oe(f)?{type:f}:f;if(d){const p=Yu(Boolean,d.type),g=Yu(String,d.type);d[0]=p>-1,d[1]=g<0||p<g,(p>-1||Le(d,"default"))&&a.push(h)}}}const l=[o,a];return r.set(t,l),l}function zu(t){return t[0]!=="$"}function Hu(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Gu(t,e){return Hu(t)===Hu(e)}function Yu(t,e){return Ne(e)?e.findIndex(n=>Gu(n,t)):Oe(e)&&Gu(e,t)?0:-1}const Bd=t=>t[0]==="_"||t==="$stable",Tl=t=>Ne(t)?t.map(Tn):[Tn(t)],m0=(t,e,n)=>{if(e._n)return e;const r=yc((...s)=>Tl(e(...s)),n);return r._c=!1,r},Ld=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Bd(s))continue;const i=t[s];if(Oe(i))e[s]=m0(s,i,r);else if(i!=null){const o=Tl(i);e[s]=()=>o}}},Vd=(t,e)=>{const n=Tl(e);t.slots.default=()=>n},g0=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=We(e),To(e,"_",n)):Ld(e,t.slots={})}else t.slots={},e&&Vd(t,e);To(t.slots,ca,1)},_0=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Ye;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(kt(s,e),!n&&a===1&&delete s._):(i=!e.$stable,Ld(e,s)),o=e}else e&&(Vd(t,e),o={default:1});if(i)for(const a in s)!Bd(a)&&!(a in o)&&delete s[a]};function Ud(){return{app:null,config:{isNativeTag:Yg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let v0=0;function y0(t,e){return function(r,s=null){Oe(r)||(r=Object.assign({},r)),s!=null&&!lt(s)&&(s=null);const i=Ud(),o=new Set;let a=!1;const c=i.app={_uid:v0++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:L0,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&Oe(l.install)?(o.add(l),l.install(c,...u)):Oe(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const f=St(r,s);return f.appContext=i,u&&e?e(f,l):t(f,l,h),a=!0,c._container=l,l.__vue_app__=c,Cl(f.component)||f.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c}};return c}}function Sc(t,e,n,r,s=!1){if(Ne(t)){t.forEach((f,d)=>Sc(f,e&&(Ne(e)?e[d]:e),n,r,s));return}if(_o(r)&&!s)return;const i=r.shapeFlag&4?Cl(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===Ye?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(_t(l)?(u[l]=null,Le(h,l)&&(h[l]=null)):yt(l)&&(l.value=null)),Oe(c))ar(c,a,12,[o,u]);else{const f=_t(c),d=yt(c);if(f||d){const p=()=>{if(t.f){const g=f?u[c]:c.value;s?Ne(g)&&cl(g,i):Ne(g)?g.includes(i)||g.push(i):f?(u[c]=[i],Le(h,c)&&(h[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else f?(u[c]=o,Le(h,c)&&(h[c]=o)):d&&(c.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,Bt(p,n)):p()}}}const Bt=H_;function b0(t){return w0(t)}function w0(t,e){const n=t_();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=un,cloneNode:p,insertStaticContent:g}=t,_=(w,I,C,B=null,$=null,Z=null,Q=!1,X=null,te=!!I.dynamicChildren)=>{if(w===I)return;w&&!Gs(w,I)&&(B=z(w),oe(w,$,Z,!0),w=null),I.patchFlag===-2&&(te=!1,I.dynamicChildren=null);const{type:G,ref:pe,shapeFlag:fe}=I;switch(G){case Ml:y(w,I,C,B);break;case Dr:A(w,I,C,B);break;case ja:w==null&&F(I,C,B,Q);break;case nn:ne(w,I,C,B,$,Z,Q,X,te);break;default:fe&1?R(w,I,C,B,$,Z,Q,X,te):fe&6?re(w,I,C,B,$,Z,Q,X,te):(fe&64||fe&128)&&G.process(w,I,C,B,$,Z,Q,X,te,Ce)}pe!=null&&$&&Sc(pe,w&&w.ref,Z,I||w,!I)},y=(w,I,C,B)=>{if(w==null)r(I.el=a(I.children),C,B);else{const $=I.el=w.el;I.children!==w.children&&l($,I.children)}},A=(w,I,C,B)=>{w==null?r(I.el=c(I.children||""),C,B):I.el=w.el},F=(w,I,C,B)=>{[w.el,w.anchor]=g(w.children,I,C,B,w.el,w.anchor)},N=({el:w,anchor:I},C,B)=>{let $;for(;w&&w!==I;)$=f(w),r(w,C,B),w=$;r(I,C,B)},S=({el:w,anchor:I})=>{let C;for(;w&&w!==I;)C=f(w),s(w),w=C;s(I)},R=(w,I,C,B,$,Z,Q,X,te)=>{Q=Q||I.type==="svg",w==null?O(I,C,B,$,Z,Q,X,te):W(w,I,$,Z,Q,X,te)},O=(w,I,C,B,$,Z,Q,X)=>{let te,G;const{type:pe,props:fe,shapeFlag:ge,transition:Se,patchFlag:xe,dirs:Ue}=w;if(w.el&&p!==void 0&&xe===-1)te=w.el=p(w.el);else{if(te=w.el=o(w.type,Z,fe&&fe.is,fe),ge&8?u(te,w.children):ge&16&&q(w.children,te,null,B,$,Z&&pe!=="foreignObject",Q,X),Ue&&br(w,null,B,"created"),fe){for(const _e in fe)_e!=="value"&&!mo(_e)&&i(te,_e,null,fe[_e],Z,w.children,B,$,U);"value"in fe&&i(te,"value",null,fe.value),(G=fe.onVnodeBeforeMount)&&yn(G,B,w)}D(te,w,w.scopeId,Q,B)}Ue&&br(w,null,B,"beforeMount");const Be=(!$||$&&!$.pendingBranch)&&Se&&!Se.persisted;Be&&Se.beforeEnter(te),r(te,I,C),((G=fe&&fe.onVnodeMounted)||Be||Ue)&&Bt(()=>{G&&yn(G,B,w),Be&&Se.enter(te),Ue&&br(w,null,B,"mounted")},$)},D=(w,I,C,B,$)=>{if(C&&d(w,C),B)for(let Z=0;Z<B.length;Z++)d(w,B[Z]);if($){let Z=$.subTree;if(I===Z){const Q=$.vnode;D(w,Q,Q.scopeId,Q.slotScopeIds,$.parent)}}},q=(w,I,C,B,$,Z,Q,X,te=0)=>{for(let G=te;G<w.length;G++){const pe=w[G]=X?er(w[G]):Tn(w[G]);_(null,pe,I,C,B,$,Z,Q,X)}},W=(w,I,C,B,$,Z,Q)=>{const X=I.el=w.el;let{patchFlag:te,dynamicChildren:G,dirs:pe}=I;te|=w.patchFlag&16;const fe=w.props||Ye,ge=I.props||Ye;let Se;C&&wr(C,!1),(Se=ge.onVnodeBeforeUpdate)&&yn(Se,C,I,w),pe&&br(I,w,C,"beforeUpdate"),C&&wr(C,!0);const xe=$&&I.type!=="foreignObject";if(G?K(w.dynamicChildren,G,X,C,B,xe,Z):Q||k(w,I,X,null,C,B,xe,Z,!1),te>0){if(te&16)H(X,I,fe,ge,C,B,$);else if(te&2&&fe.class!==ge.class&&i(X,"class",null,ge.class,$),te&4&&i(X,"style",fe.style,ge.style,$),te&8){const Ue=I.dynamicProps;for(let Be=0;Be<Ue.length;Be++){const _e=Ue[Be],Ft=fe[_e],en=ge[_e];(en!==Ft||_e==="value")&&i(X,_e,Ft,en,$,w.children,C,B,U)}}te&1&&w.children!==I.children&&u(X,I.children)}else!Q&&G==null&&H(X,I,fe,ge,C,B,$);((Se=ge.onVnodeUpdated)||pe)&&Bt(()=>{Se&&yn(Se,C,I,w),pe&&br(I,w,C,"updated")},B)},K=(w,I,C,B,$,Z,Q)=>{for(let X=0;X<I.length;X++){const te=w[X],G=I[X],pe=te.el&&(te.type===nn||!Gs(te,G)||te.shapeFlag&70)?h(te.el):C;_(te,G,pe,null,B,$,Z,Q,!0)}},H=(w,I,C,B,$,Z,Q)=>{if(C!==B){for(const X in B){if(mo(X))continue;const te=B[X],G=C[X];te!==G&&X!=="value"&&i(w,X,G,te,Q,I.children,$,Z,U)}if(C!==Ye)for(const X in C)!mo(X)&&!(X in B)&&i(w,X,C[X],null,Q,I.children,$,Z,U);"value"in B&&i(w,"value",C.value,B.value)}},ne=(w,I,C,B,$,Z,Q,X,te)=>{const G=I.el=w?w.el:a(""),pe=I.anchor=w?w.anchor:a("");let{patchFlag:fe,dynamicChildren:ge,slotScopeIds:Se}=I;Se&&(X=X?X.concat(Se):Se),w==null?(r(G,C,B),r(pe,C,B),q(I.children,C,pe,$,Z,Q,X,te)):fe>0&&fe&64&&ge&&w.dynamicChildren?(K(w.dynamicChildren,ge,C,$,Z,Q,X),(I.key!=null||$&&I===$.subTree)&&jd(w,I,!0)):k(w,I,C,pe,$,Z,Q,X,te)},re=(w,I,C,B,$,Z,Q,X,te)=>{I.slotScopeIds=X,w==null?I.shapeFlag&512?$.ctx.activate(I,C,B,Q,te):T(I,C,B,$,Z,Q,te):v(w,I,te)},T=(w,I,C,B,$,Z,Q)=>{const X=w.component=O0(w,B,$);if(kd(w)&&(X.ctx.renderer=Ce),x0(X),X.asyncDep){if($&&$.registerDep(X,E),!w.el){const te=X.subTree=St(Dr);A(null,te,I,C)}return}E(X,w,I,C,$,Z,Q)},v=(w,I,C)=>{const B=I.component=w.component;if(q_(w,I,C))if(B.asyncDep&&!B.asyncResolved){M(B,I,C);return}else B.next=I,D_(B.update),B.update();else I.el=w.el,B.vnode=I},E=(w,I,C,B,$,Z,Q)=>{const X=()=>{if(w.isMounted){let{next:pe,bu:fe,u:ge,parent:Se,vnode:xe}=w,Ue=pe,Be;wr(w,!1),pe?(pe.el=xe.el,M(w,pe,Q)):pe=xe,fe&&Va(fe),(Be=pe.props&&pe.props.onVnodeBeforeUpdate)&&yn(Be,Se,pe,xe),wr(w,!0);const _e=Ua(w),Ft=w.subTree;w.subTree=_e,_(Ft,_e,h(Ft.el),z(Ft),w,$,Z),pe.el=_e.el,Ue===null&&W_(w,_e.el),ge&&Bt(ge,$),(Be=pe.props&&pe.props.onVnodeUpdated)&&Bt(()=>yn(Be,Se,pe,xe),$)}else{let pe;const{el:fe,props:ge}=I,{bm:Se,m:xe,parent:Ue}=w,Be=_o(I);if(wr(w,!1),Se&&Va(Se),!Be&&(pe=ge&&ge.onVnodeBeforeMount)&&yn(pe,Ue,I),wr(w,!0),fe&&de){const _e=()=>{w.subTree=Ua(w),de(fe,w.subTree,w,$,null)};Be?I.type.__asyncLoader().then(()=>!w.isUnmounted&&_e()):_e()}else{const _e=w.subTree=Ua(w);_(null,_e,C,B,w,$,Z),I.el=_e.el}if(xe&&Bt(xe,$),!Be&&(pe=ge&&ge.onVnodeMounted)){const _e=I;Bt(()=>yn(pe,Ue,_e),$)}(I.shapeFlag&256||Ue&&_o(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&w.a&&Bt(w.a,$),w.isMounted=!0,I=C=B=null}},te=w.effect=new fl(X,()=>Td(G),w.scope),G=w.update=()=>te.run();G.id=w.uid,wr(w,!0),G()},M=(w,I,C)=>{I.component=w;const B=w.vnode.props;w.vnode=I,w.next=null,p0(w,I.props,B,C),_0(w,I.children,C),Ds(),sa(void 0,w.update),Fs()},k=(w,I,C,B,$,Z,Q,X,te=!1)=>{const G=w&&w.children,pe=w?w.shapeFlag:0,fe=I.children,{patchFlag:ge,shapeFlag:Se}=I;if(ge>0){if(ge&128){J(G,fe,C,B,$,Z,Q,X,te);return}else if(ge&256){j(G,fe,C,B,$,Z,Q,X,te);return}}Se&8?(pe&16&&U(G,$,Z),fe!==G&&u(C,fe)):pe&16?Se&16?J(G,fe,C,B,$,Z,Q,X,te):U(G,$,Z,!0):(pe&8&&u(C,""),Se&16&&q(fe,C,B,$,Z,Q,X,te))},j=(w,I,C,B,$,Z,Q,X,te)=>{w=w||ps,I=I||ps;const G=w.length,pe=I.length,fe=Math.min(G,pe);let ge;for(ge=0;ge<fe;ge++){const Se=I[ge]=te?er(I[ge]):Tn(I[ge]);_(w[ge],Se,C,null,$,Z,Q,X,te)}G>pe?U(w,$,Z,!0,!1,fe):q(I,C,B,$,Z,Q,X,te,fe)},J=(w,I,C,B,$,Z,Q,X,te)=>{let G=0;const pe=I.length;let fe=w.length-1,ge=pe-1;for(;G<=fe&&G<=ge;){const Se=w[G],xe=I[G]=te?er(I[G]):Tn(I[G]);if(Gs(Se,xe))_(Se,xe,C,null,$,Z,Q,X,te);else break;G++}for(;G<=fe&&G<=ge;){const Se=w[fe],xe=I[ge]=te?er(I[ge]):Tn(I[ge]);if(Gs(Se,xe))_(Se,xe,C,null,$,Z,Q,X,te);else break;fe--,ge--}if(G>fe){if(G<=ge){const Se=ge+1,xe=Se<pe?I[Se].el:B;for(;G<=ge;)_(null,I[G]=te?er(I[G]):Tn(I[G]),C,xe,$,Z,Q,X,te),G++}}else if(G>ge)for(;G<=fe;)oe(w[G],$,Z,!0),G++;else{const Se=G,xe=G,Ue=new Map;for(G=xe;G<=ge;G++){const ct=I[G]=te?er(I[G]):Tn(I[G]);ct.key!=null&&Ue.set(ct.key,G)}let Be,_e=0;const Ft=ge-xe+1;let en=!1,zn=0;const At=new Array(Ft);for(G=0;G<Ft;G++)At[G]=0;for(G=Se;G<=fe;G++){const ct=w[G];if(_e>=Ft){oe(ct,$,Z,!0);continue}let Tt;if(ct.key!=null)Tt=Ue.get(ct.key);else for(Be=xe;Be<=ge;Be++)if(At[Be-xe]===0&&Gs(ct,I[Be])){Tt=Be;break}Tt===void 0?oe(ct,$,Z,!0):(At[Tt-xe]=G+1,Tt>=zn?zn=Tt:en=!0,_(ct,I[Tt],C,null,$,Z,Q,X,te),_e++)}const Yr=en?T0(At):ps;for(Be=Yr.length-1,G=Ft-1;G>=0;G--){const ct=xe+G,Tt=I[ct],Kr=ct+1<pe?I[ct+1].el:B;At[G]===0?_(null,Tt,C,Kr,$,Z,Q,X,te):en&&(Be<0||G!==Yr[Be]?se(Tt,C,Kr,2):Be--)}}},se=(w,I,C,B,$=null)=>{const{el:Z,type:Q,transition:X,children:te,shapeFlag:G}=w;if(G&6){se(w.component.subTree,I,C,B);return}if(G&128){w.suspense.move(I,C,B);return}if(G&64){Q.move(w,I,C,Ce);return}if(Q===nn){r(Z,I,C);for(let fe=0;fe<te.length;fe++)se(te[fe],I,C,B);r(w.anchor,I,C);return}if(Q===ja){N(w,I,C);return}if(B!==2&&G&1&&X)if(B===0)X.beforeEnter(Z),r(Z,I,C),Bt(()=>X.enter(Z),$);else{const{leave:fe,delayLeave:ge,afterLeave:Se}=X,xe=()=>r(Z,I,C),Ue=()=>{fe(Z,()=>{xe(),Se&&Se()})};ge?ge(Z,xe,Ue):Ue()}else r(Z,I,C)},oe=(w,I,C,B=!1,$=!1)=>{const{type:Z,props:Q,ref:X,children:te,dynamicChildren:G,shapeFlag:pe,patchFlag:fe,dirs:ge}=w;if(X!=null&&Sc(X,null,C,w,!0),pe&256){I.ctx.deactivate(w);return}const Se=pe&1&&ge,xe=!_o(w);let Ue;if(xe&&(Ue=Q&&Q.onVnodeBeforeUnmount)&&yn(Ue,I,w),pe&6)ee(w.component,C,B);else{if(pe&128){w.suspense.unmount(C,B);return}Se&&br(w,null,I,"beforeUnmount"),pe&64?w.type.remove(w,I,C,$,Ce,B):G&&(Z!==nn||fe>0&&fe&64)?U(G,I,C,!1,!0):(Z===nn&&fe&384||!$&&pe&16)&&U(te,I,C),B&&le(w)}(xe&&(Ue=Q&&Q.onVnodeUnmounted)||Se)&&Bt(()=>{Ue&&yn(Ue,I,w),Se&&br(w,null,I,"unmounted")},C)},le=w=>{const{type:I,el:C,anchor:B,transition:$}=w;if(I===nn){P(C,B);return}if(I===ja){S(w);return}const Z=()=>{s(C),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(w.shapeFlag&1&&$&&!$.persisted){const{leave:Q,delayLeave:X}=$,te=()=>Q(C,Z);X?X(w.el,Z,te):te()}else Z()},P=(w,I)=>{let C;for(;w!==I;)C=f(w),s(w),w=C;s(I)},ee=(w,I,C)=>{const{bum:B,scope:$,update:Z,subTree:Q,um:X}=w;B&&Va(B),$.stop(),Z&&(Z.active=!1,oe(Q,w,I,C)),X&&Bt(X,I),Bt(()=>{w.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},U=(w,I,C,B=!1,$=!1,Z=0)=>{for(let Q=Z;Q<w.length;Q++)oe(w[Q],I,C,B,$)},z=w=>w.shapeFlag&6?z(w.component.subTree):w.shapeFlag&128?w.suspense.next():f(w.anchor||w.el),Me=(w,I,C)=>{w==null?I._vnode&&oe(I._vnode,null,null,!0):_(I._vnode||null,w,I,null,null,null,C),Ed(),I._vnode=w},Ce={p:_,um:oe,m:se,r:le,mt:T,mc:q,pc:k,pbc:K,n:z,o:t};let we,de;return e&&([we,de]=e(Ce)),{render:Me,hydrate:we,createApp:y0(Me,we)}}function wr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function jd(t,e,n=!1){const r=t.children,s=e.children;if(Ne(r)&&Ne(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=er(s[i]),a.el=o.el),n||jd(o,a))}}function T0(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(s=n[n.length-1],t[s]<l){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const M0=t=>t.__isTeleport,nn=Symbol(void 0),Ml=Symbol(void 0),Dr=Symbol(void 0),ja=Symbol(void 0),ri=[];let on=null;function Nr(t=!1){ri.push(on=t?null:[])}function S0(){ri.pop(),on=ri[ri.length-1]||null}let gi=1;function Ku(t){gi+=t}function $d(t){return t.dynamicChildren=gi>0?on||ps:null,S0(),gi>0&&on&&on.push(t),t}function _s(t,e,n,r,s,i){return $d(pt(t,e,n,r,s,i,!0))}function E0(t,e,n,r,s){return $d(St(t,e,n,r,s,!0))}function Ec(t){return t?t.__v_isVNode===!0:!1}function Gs(t,e){return t.type===e.type&&t.key===e.key}const ca="__vInternal",qd=({key:t})=>t!=null?t:null,vo=({ref:t,ref_key:e,ref_for:n})=>t!=null?_t(t)||yt(t)||Oe(t)?{i:Mn,r:t,k:e,f:!!n}:t:null;function pt(t,e=null,n=null,r=0,s=null,i=t===nn?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&qd(e),ref:e&&vo(e),scopeId:oa,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null};return a?(El(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=_t(n)?8:16),gi>0&&!o&&on&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&on.push(c),c}const St=C0;function C0(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===i0)&&(t=Dr),Ec(t)){const a=Es(t,e,!0);return n&&El(a,n),gi>0&&!i&&on&&(a.shapeFlag&6?on[on.indexOf(t)]=a:on.push(a)),a.patchFlag|=-2,a}if(B0(t)&&(t=t.__vccOpts),e){e=A0(e);let{class:a,style:c}=e;a&&!_t(a)&&(e.class=ol(a)),lt(c)&&(md(c)&&!Ne(c)&&(c=kt({},c)),e.style=hi(c))}const o=_t(t)?1:z_(t)?128:M0(t)?64:lt(t)?4:Oe(t)?2:0;return pt(t,e,n,r,s,o,i,!0)}function A0(t){return t?md(t)||ca in t?kt({},t):t:null}function Es(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?N0(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&qd(a),ref:e&&e.ref?n&&s?Ne(s)?s.concat(vo(e)):[s,vo(e)]:vo(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==nn?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Es(t.ssContent),ssFallback:t.ssFallback&&Es(t.ssFallback),el:t.el,anchor:t.anchor}}function Sl(t=" ",e=0){return St(Ml,null,t,e)}function I0(t="",e=!1){return e?(Nr(),E0(Dr,null,t)):St(Dr,null,t)}function Tn(t){return t==null||typeof t=="boolean"?St(Dr):Ne(t)?St(nn,null,t.slice()):typeof t=="object"?er(t):St(Ml,null,String(t))}function er(t){return t.el===null||t.memo?t:Es(t)}function El(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ne(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),El(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(ca in e)?e._ctx=Mn:s===3&&Mn&&(Mn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Oe(e)?(e={default:e,_ctx:Mn},n=32):(e=String(e),r&64?(n=16,e=[Sl(e)]):n=8);t.children=e,t.shapeFlag|=n}function N0(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=ol([e.class,r.class]));else if(s==="style")e.style=hi([e.style,r.style]);else if(Jo(s)){const i=e[s],o=r[s];o&&i!==o&&!(Ne(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function yn(t,e,n,r=null){hn(t,e,7,[n,r])}const P0=Ud();let k0=0;function O0(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||P0,i={uid:k0++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new n_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fd(r,s),emitsOptions:Ad(r,s),emit:null,emitted:null,propsDefaults:Ye,inheritAttrs:r.inheritAttrs,ctx:Ye,data:Ye,props:Ye,attrs:Ye,slots:Ye,refs:Ye,setupState:Ye,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=L_.bind(null,i),t.ce&&t.ce(i),i}let vt=null;const Wd=()=>vt||Mn,Cs=t=>{vt=t,t.scope.on()},Pr=()=>{vt&&vt.scope.off(),vt=null};function zd(t){return t.vnode.shapeFlag&4}let _i=!1;function x0(t,e=!1){_i=e;const{props:n,children:r}=t.vnode,s=zd(t);d0(t,n,s,e),g0(t,r);const i=s?R0(t,e):void 0;return _i=!1,i}function R0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=gd(new Proxy(t.ctx,a0));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?F0(t):null;Cs(t),Ds();const i=ar(r,t,0,[t.props,s]);if(Fs(),Pr(),Qf(i)){if(i.then(Pr,Pr),e)return i.then(o=>{Xu(t,o,e)}).catch(o=>{ra(o,t,0)});t.asyncDep=i}else Xu(t,i,e)}else Hd(t,e)}function Xu(t,e,n){Oe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:lt(e)&&(t.setupState=bd(e)),Hd(t,n)}let Zu;function Hd(t,e,n){const r=t.type;if(!t.render){if(!e&&Zu&&!r.render){const s=r.template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=r,l=kt(kt({isCustomElement:i,delimiters:a},o),c);r.render=Zu(s,l)}}t.render=r.render||un}Cs(t),Ds(),c0(t),Fs(),Pr()}function D0(t){return new Proxy(t.attrs,{get(e,n){return Ht(t,"get","$attrs"),e[n]}})}function F0(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=D0(t))},slots:t.slots,emit:t.emit,expose:e}}function Cl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(bd(gd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Eo)return Eo[n](t)}}))}function B0(t){return Oe(t)&&"__vccOpts"in t}const Re=(t,e)=>O_(t,e,_i);function Gd(t,e,n){const r=arguments.length;return r===2?lt(e)&&!Ne(e)?Ec(e)?St(t,null,[e]):St(t,e):St(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ec(n)&&(n=[n]),St(t,e,n))}const L0="3.2.37",V0="http://www.w3.org/2000/svg",Sr=typeof document<"u"?document:null,Qu=Sr&&Sr.createElement("template"),U0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e?Sr.createElementNS(V0,t):Sr.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Sr.createTextNode(t),createComment:t=>Sr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Sr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Qu.innerHTML=r?`<svg>${t}</svg>`:t;const a=Qu.content;if(r){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function j0(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function $0(t,e,n){const r=t.style,s=_t(n);if(n&&!s){for(const i in n)Cc(r,i,n[i]);if(e&&!_t(e))for(const i in e)n[i]==null&&Cc(r,i,"")}else{const i=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=i)}}const Ju=/\s*!important$/;function Cc(t,e,n){if(Ne(n))n.forEach(r=>Cc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=q0(t,e);Ju.test(n)?t.setProperty(Rs(r),n.replace(Ju,""),"important"):t[r]=n}}const eh=["Webkit","Moz","ms"],$a={};function q0(t,e){const n=$a[e];if(n)return n;let r=Ss(e);if(r!=="filter"&&r in t)return $a[e]=r;r=td(r);for(let s=0;s<eh.length;s++){const i=eh[s]+r;if(i in t)return $a[e]=i}return e}const th="http://www.w3.org/1999/xlink";function W0(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(th,e.slice(6,e.length)):t.setAttributeNS(th,e,n);else{const i=Wg(e);n==null||i&&!Kf(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function z0(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const c=n==null?"":n;(t.value!==c||t.tagName==="OPTION")&&(t.value=c),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Kf(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}const[Yd,H0]=(()=>{let t=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(n&&Number(n[1])<=53)}return[t,e]})();let Ac=0;const G0=Promise.resolve(),Y0=()=>{Ac=0},K0=()=>Ac||(G0.then(Y0),Ac=Yd());function X0(t,e,n,r){t.addEventListener(e,n,r)}function Z0(t,e,n,r){t.removeEventListener(e,n,r)}function Q0(t,e,n,r,s=null){const i=t._vei||(t._vei={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=J0(e);if(r){const l=i[e]=ev(r,s);X0(t,a,l,c)}else o&&(Z0(t,a,o,c),i[e]=void 0)}}const nh=/(?:Once|Passive|Capture)$/;function J0(t){let e;if(nh.test(t)){e={};let n;for(;n=t.match(nh);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[Rs(t.slice(2)),e]}function ev(t,e){const n=r=>{const s=r.timeStamp||Yd();(H0||s>=n.attached-1)&&hn(tv(r,n.value),e,5,[r])};return n.value=t,n.attached=K0(),n}function tv(t,e){if(Ne(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const rh=/^on[a-z]/,nv=(t,e,n,r,s=!1,i,o,a,c)=>{e==="class"?j0(t,r,s):e==="style"?$0(t,n,r):Jo(e)?al(e)||Q0(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):rv(t,e,r,s))?z0(t,e,r,i,o,a,c):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),W0(t,e,r,s))};function rv(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&rh.test(e)&&Oe(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||rh.test(e)&&_t(n)?!1:e in t}const sv=kt({patchProp:nv},U0);let sh;function iv(){return sh||(sh=b0(sv))}const ov=(...t)=>{const e=iv().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=av(r);if(!s)return;const i=e._component;!Oe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function av(t){return _t(t)?document.querySelector(t):t}const cv="/assets/logo.04a85aa8.svg";/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const os=typeof window<"u";function lv(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Ge=Object.assign;function qa(t,e){const n={};for(const r in e){const s=e[r];n[r]=pn(s)?s.map(t):t(s)}return n}const si=()=>{},pn=Array.isArray,uv=/\/$/,hv=t=>t.replace(uv,"");function Wa(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=mv(r!=null?r:e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function fv(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function ih(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function dv(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&As(e.matched[r],n.matched[s])&&Kd(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function As(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Kd(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!pv(t[n],e[n]))return!1;return!0}function pv(t,e){return pn(t)?oh(t,e):pn(e)?oh(e,t):t===e}function oh(t,e){return pn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function mv(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let s=n.length-1,i,o;for(i=0;i<r.length;i++)if(o=r[i],o!==".")if(o==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var vi;(function(t){t.pop="pop",t.push="push"})(vi||(vi={}));var ii;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ii||(ii={}));function gv(t){if(!t)if(os){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),hv(t)}const _v=/^[^#]+#/;function vv(t,e){return t.replace(_v,"#")+e}function yv(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const la=()=>({left:window.pageXOffset,top:window.pageYOffset});function bv(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=yv(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function ah(t,e){return(history.state?history.state.position-e:-1)+t}const Ic=new Map;function wv(t,e){Ic.set(t,e)}function Tv(t){const e=Ic.get(t);return Ic.delete(t),e}let Mv=()=>location.protocol+"//"+location.host;function Xd(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),ih(c,"")}return ih(n,t)+r+s}function Sv(t,e,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const d=Xd(t,location),p=n.value,g=e.value;let _=0;if(f){if(n.value=d,e.value=f,o&&o===p){o=null;return}_=g?f.position-g.position:0}else r(d);s.forEach(y=>{y(n.value,p,{delta:_,type:vi.pop,direction:_?_>0?ii.forward:ii.back:ii.unknown})})};function c(){o=n.value}function l(f){s.push(f);const d=()=>{const p=s.indexOf(f);p>-1&&s.splice(p,1)};return i.push(d),d}function u(){const{history:f}=window;!f.state||f.replaceState(Ge({},f.state,{scroll:la()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:c,listen:l,destroy:h}}function ch(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?la():null}}function Ev(t){const{history:e,location:n}=window,r={value:Xd(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const h=t.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:Mv()+t+c;try{e[u?"replaceState":"pushState"](l,"",f),s.value=l}catch(d){console.error(d),n[u?"replace":"assign"](f)}}function o(c,l){const u=Ge({},e.state,ch(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,u,!0),r.value=c}function a(c,l){const u=Ge({},s.value,e.state,{forward:c,scroll:la()});i(u.current,u,!0);const h=Ge({},ch(r.value,c,null),{position:u.position+1},l);i(c,h,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function Cv(t){t=gv(t);const e=Ev(t),n=Sv(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Ge({location:"",base:t,go:r,createHref:vv.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function Av(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Cv(t)}function Iv(t){return typeof t=="string"||t&&typeof t=="object"}function Zd(t){return typeof t=="string"||typeof t=="symbol"}const Xn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Qd=Symbol("");var lh;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(lh||(lh={}));function Is(t,e){return Ge(new Error,{type:t,[Qd]:!0},e)}function kn(t,e){return t instanceof Error&&Qd in t&&(e==null||!!(t.type&e))}const uh="[^/]+?",Nv={sensitive:!1,strict:!1,start:!0,end:!0},Pv=/[.+*?^${}()[\]/\\]/g;function kv(t,e){const n=Ge({},Nv,e),r=[];let s=n.start?"^":"";const i=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let h=0;h<l.length;h++){const f=l[h];let d=40+(n.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(Pv,"\\$&"),d+=40;else if(f.type===1){const{value:p,repeatable:g,optional:_,regexp:y}=f;i.push({name:p,repeatable:g,optional:_});const A=y||uh;if(A!==uh){d+=10;try{new RegExp(`(${A})`)}catch(N){throw new Error(`Invalid custom RegExp for param "${p}" (${A}): `+N.message)}}let F=g?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;h||(F=_&&l.length<2?`(?:/${F})`:"/"+F),_&&(F+="?"),s+=F,d+=20,_&&(d+=-8),g&&(d+=-20),A===".*"&&(d+=-50)}u.push(d)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const d=u[f]||"",p=i[f-1];h[p.name]=d&&p.repeatable?d.split("/"):d}return h}function c(l){let u="",h=!1;for(const f of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const d of f)if(d.type===0)u+=d.value;else if(d.type===1){const{value:p,repeatable:g,optional:_}=d,y=p in l?l[p]:"";if(pn(y)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const A=pn(y)?y.join("/"):y;if(!A)if(_)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=A}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function Ov(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function xv(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=Ov(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(hh(r))return 1;if(hh(s))return-1}return s.length-r.length}function hh(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Rv={type:0,value:""},Dv=/[a-zA-Z0-9_]/;function Fv(t){if(!t)return[[]];if(t==="/")return[[Rv]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(d){throw new Error(`ERR (${n})/"${l}": ${d}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",u="";function h(){!l||(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function f(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:c==="("?n=2:Dv.test(c)?f():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),s}function Bv(t,e,n){const r=kv(Fv(t.path),n),s=Ge(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Lv(t,e){const n=[],r=new Map;e=dh({strict:!1,end:!0,sensitive:!1},e);function s(u){return r.get(u)}function i(u,h,f){const d=!f,p=Uv(u);p.aliasOf=f&&f.record;const g=dh(e,u),_=[p];if("alias"in u){const F=typeof u.alias=="string"?[u.alias]:u.alias;for(const N of F)_.push(Ge({},p,{components:f?f.record.components:p.components,path:N,aliasOf:f?f.record:p}))}let y,A;for(const F of _){const{path:N}=F;if(h&&N[0]!=="/"){const S=h.record.path,R=S[S.length-1]==="/"?"":"/";F.path=h.record.path+(N&&R+N)}if(y=Bv(F,h,g),f?f.alias.push(y):(A=A||y,A!==y&&A.alias.push(y),d&&u.name&&!fh(y)&&o(u.name)),p.children){const S=p.children;for(let R=0;R<S.length;R++)i(S[R],y,f&&f.children[R])}f=f||y,c(y)}return A?()=>{o(A)}:si}function o(u){if(Zd(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&xv(u,n[h])>=0&&(u.record.path!==n[h].record.path||!Jd(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!fh(u)&&r.set(u.record.name,u)}function l(u,h){let f,d={},p,g;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw Is(1,{location:u});g=f.record.name,d=Ge(Vv(h.params,f.keys.filter(A=>!A.optional).map(A=>A.name)),u.params),p=f.stringify(d)}else if("path"in u)p=u.path,f=n.find(A=>A.re.test(p)),f&&(d=f.parse(p),g=f.record.name);else{if(f=h.name?r.get(h.name):n.find(A=>A.re.test(h.path)),!f)throw Is(1,{location:u,currentLocation:h});g=f.record.name,d=Ge({},h.params,u.params),p=f.stringify(d)}const _=[];let y=f;for(;y;)_.unshift(y.record),y=y.parent;return{name:g,path:p,params:d,matched:_,meta:$v(_)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Vv(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Uv(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:jv(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function jv(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function fh(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function $v(t){return t.reduce((e,n)=>Ge(e,n.meta),{})}function dh(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Jd(t,e){return e.children.some(n=>n===t||Jd(t,n))}const ep=/#/g,qv=/&/g,Wv=/\//g,zv=/=/g,Hv=/\?/g,tp=/\+/g,Gv=/%5B/g,Yv=/%5D/g,np=/%5E/g,Kv=/%60/g,rp=/%7B/g,Xv=/%7C/g,sp=/%7D/g,Zv=/%20/g;function Al(t){return encodeURI(""+t).replace(Xv,"|").replace(Gv,"[").replace(Yv,"]")}function Qv(t){return Al(t).replace(rp,"{").replace(sp,"}").replace(np,"^")}function Nc(t){return Al(t).replace(tp,"%2B").replace(Zv,"+").replace(ep,"%23").replace(qv,"%26").replace(Kv,"`").replace(rp,"{").replace(sp,"}").replace(np,"^")}function Jv(t){return Nc(t).replace(zv,"%3D")}function ey(t){return Al(t).replace(ep,"%23").replace(Hv,"%3F")}function ty(t){return t==null?"":ey(t).replace(Wv,"%2F")}function Ao(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function ny(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(tp," "),o=i.indexOf("="),a=Ao(o<0?i:i.slice(0,o)),c=o<0?null:Ao(i.slice(o+1));if(a in e){let l=e[a];pn(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function ph(t){let e="";for(let n in t){const r=t[n];if(n=Jv(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(pn(r)?r.map(i=>i&&Nc(i)):[r&&Nc(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function ry(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=pn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const sy=Symbol(""),mh=Symbol(""),Il=Symbol(""),ip=Symbol(""),Pc=Symbol("");function Ys(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function tr(t,e,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(Is(4,{from:n,to:e})):h instanceof Error?a(h):Iv(h)?a(Is(2,{from:e,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},l=t.call(r&&r.instances[s],e,n,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch(h=>a(h))})}function za(t,e,n,r){const s=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(iy(a)){const l=(a.__vccOpts||a)[e];l&&s.push(tr(l,n,r,i,o))}else{let c=a();s.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=lv(l)?l.default:l;i.components[o]=u;const f=(u.__vccOpts||u)[e];return f&&tr(f,n,r,i,o)()}))}}return s}function iy(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function gh(t){const e=cr(Il),n=cr(ip),r=Re(()=>e.resolve(qe(t.to))),s=Re(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(As.bind(null,u));if(f>-1)return f;const d=_h(c[l-2]);return l>1&&_h(u)===d&&h[h.length-1].path!==d?h.findIndex(As.bind(null,c[l-2])):f}),i=Re(()=>s.value>-1&&cy(n.params,r.value.params)),o=Re(()=>s.value>-1&&s.value===n.matched.length-1&&Kd(n.params,r.value.params));function a(c={}){return ay(c)?e[qe(t.replace)?"replace":"push"](qe(t.to)).catch(si):Promise.resolve()}return{route:r,href:Re(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const oy=Pd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:gh,setup(t,{slots:e}){const n=Et(gh(t)),{options:r}=cr(Il),s=Re(()=>({[vh(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[vh(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:Gd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),kc=oy;function ay(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function cy(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!pn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function _h(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const vh=(t,e,n)=>t!=null?t:e!=null?e:n,ly=Pd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=cr(Pc),s=Re(()=>t.route||r.value),i=cr(mh,0),o=Re(()=>{let l=qe(i);const{matched:u}=s.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=Re(()=>s.value.matched[o.value]);go(mh,Re(()=>o.value+1)),go(sy,a),go(Pc,s);const c=et();return fn(()=>[c.value,a.value,t.name],([l,u,h],[f,d,p])=>{u&&(u.instances[h]=l,d&&d!==u&&l&&l===f&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),l&&u&&(!d||!As(u,d)||!f)&&(u.enterCallbacks[h]||[]).forEach(g=>g(l))},{flush:"post"}),()=>{const l=s.value,u=t.name,h=a.value,f=h&&h.components[u];if(!f)return yh(n.default,{Component:f,route:l});const d=h.props[u],p=d?d===!0?l.params:typeof d=="function"?d(l):d:null,_=Gd(f,Ge({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return yh(n.default,{Component:_,route:l})||_}}});function yh(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const op=ly;function uy(t){const e=Lv(t.routes,t),n=t.parseQuery||ny,r=t.stringifyQuery||ph,s=t.history,i=Ys(),o=Ys(),a=Ys(),c=rr(Xn);let l=Xn;os&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=qa.bind(null,P=>""+P),h=qa.bind(null,ty),f=qa.bind(null,Ao);function d(P,ee){let U,z;return Zd(P)?(U=e.getRecordMatcher(P),z=ee):z=P,e.addRoute(z,U)}function p(P){const ee=e.getRecordMatcher(P);ee&&e.removeRoute(ee)}function g(){return e.getRoutes().map(P=>P.record)}function _(P){return!!e.getRecordMatcher(P)}function y(P,ee){if(ee=Ge({},ee||c.value),typeof P=="string"){const de=Wa(n,P,ee.path),w=e.resolve({path:de.path},ee),I=s.createHref(de.fullPath);return Ge(de,w,{params:f(w.params),hash:Ao(de.hash),redirectedFrom:void 0,href:I})}let U;if("path"in P)U=Ge({},P,{path:Wa(n,P.path,ee.path).path});else{const de=Ge({},P.params);for(const w in de)de[w]==null&&delete de[w];U=Ge({},P,{params:h(P.params)}),ee.params=h(ee.params)}const z=e.resolve(U,ee),Me=P.hash||"";z.params=u(f(z.params));const Ce=fv(r,Ge({},P,{hash:Qv(Me),path:z.path})),we=s.createHref(Ce);return Ge({fullPath:Ce,hash:Me,query:r===ph?ry(P.query):P.query||{}},z,{redirectedFrom:void 0,href:we})}function A(P){return typeof P=="string"?Wa(n,P,c.value.path):Ge({},P)}function F(P,ee){if(l!==P)return Is(8,{from:ee,to:P})}function N(P){return O(P)}function S(P){return N(Ge(A(P),{replace:!0}))}function R(P){const ee=P.matched[P.matched.length-1];if(ee&&ee.redirect){const{redirect:U}=ee;let z=typeof U=="function"?U(P):U;return typeof z=="string"&&(z=z.includes("?")||z.includes("#")?z=A(z):{path:z},z.params={}),Ge({query:P.query,hash:P.hash,params:"path"in z?{}:P.params},z)}}function O(P,ee){const U=l=y(P),z=c.value,Me=P.state,Ce=P.force,we=P.replace===!0,de=R(U);if(de)return O(Ge(A(de),{state:Me,force:Ce,replace:we}),ee||U);const w=U;w.redirectedFrom=ee;let I;return!Ce&&dv(r,z,U)&&(I=Is(16,{to:w,from:z}),j(z,z,!0,!1)),(I?Promise.resolve(I):q(w,z)).catch(C=>kn(C)?kn(C,2)?C:k(C):E(C,w,z)).then(C=>{if(C){if(kn(C,2))return O(Ge({replace:we},A(C.to),{state:Me,force:Ce}),ee||w)}else C=K(w,z,!0,we,Me);return W(w,z,C),C})}function D(P,ee){const U=F(P,ee);return U?Promise.reject(U):Promise.resolve()}function q(P,ee){let U;const[z,Me,Ce]=hy(P,ee);U=za(z.reverse(),"beforeRouteLeave",P,ee);for(const de of z)de.leaveGuards.forEach(w=>{U.push(tr(w,P,ee))});const we=D.bind(null,P,ee);return U.push(we),ts(U).then(()=>{U=[];for(const de of i.list())U.push(tr(de,P,ee));return U.push(we),ts(U)}).then(()=>{U=za(Me,"beforeRouteUpdate",P,ee);for(const de of Me)de.updateGuards.forEach(w=>{U.push(tr(w,P,ee))});return U.push(we),ts(U)}).then(()=>{U=[];for(const de of P.matched)if(de.beforeEnter&&!ee.matched.includes(de))if(pn(de.beforeEnter))for(const w of de.beforeEnter)U.push(tr(w,P,ee));else U.push(tr(de.beforeEnter,P,ee));return U.push(we),ts(U)}).then(()=>(P.matched.forEach(de=>de.enterCallbacks={}),U=za(Ce,"beforeRouteEnter",P,ee),U.push(we),ts(U))).then(()=>{U=[];for(const de of o.list())U.push(tr(de,P,ee));return U.push(we),ts(U)}).catch(de=>kn(de,8)?de:Promise.reject(de))}function W(P,ee,U){for(const z of a.list())z(P,ee,U)}function K(P,ee,U,z,Me){const Ce=F(P,ee);if(Ce)return Ce;const we=ee===Xn,de=os?history.state:{};U&&(z||we?s.replace(P.fullPath,Ge({scroll:we&&de&&de.scroll},Me)):s.push(P.fullPath,Me)),c.value=P,j(P,ee,U,we),k()}let H;function ne(){H||(H=s.listen((P,ee,U)=>{if(!le.listening)return;const z=y(P),Me=R(z);if(Me){O(Ge(Me,{replace:!0}),z).catch(si);return}l=z;const Ce=c.value;os&&wv(ah(Ce.fullPath,U.delta),la()),q(z,Ce).catch(we=>kn(we,12)?we:kn(we,2)?(O(we.to,z).then(de=>{kn(de,20)&&!U.delta&&U.type===vi.pop&&s.go(-1,!1)}).catch(si),Promise.reject()):(U.delta&&s.go(-U.delta,!1),E(we,z,Ce))).then(we=>{we=we||K(z,Ce,!1),we&&(U.delta&&!kn(we,8)?s.go(-U.delta,!1):U.type===vi.pop&&kn(we,20)&&s.go(-1,!1)),W(z,Ce,we)}).catch(si)}))}let re=Ys(),T=Ys(),v;function E(P,ee,U){k(P);const z=T.list();return z.length?z.forEach(Me=>Me(P,ee,U)):console.error(P),Promise.reject(P)}function M(){return v&&c.value!==Xn?Promise.resolve():new Promise((P,ee)=>{re.add([P,ee])})}function k(P){return v||(v=!P,ne(),re.list().forEach(([ee,U])=>P?U(P):ee()),re.reset()),P}function j(P,ee,U,z){const{scrollBehavior:Me}=t;if(!os||!Me)return Promise.resolve();const Ce=!U&&Tv(ah(P.fullPath,0))||(z||!U)&&history.state&&history.state.scroll||null;return Bi().then(()=>Me(P,ee,Ce)).then(we=>we&&bv(we)).catch(we=>E(we,P,ee))}const J=P=>s.go(P);let se;const oe=new Set,le={currentRoute:c,listening:!0,addRoute:d,removeRoute:p,hasRoute:_,getRoutes:g,resolve:y,options:t,push:N,replace:S,go:J,back:()=>J(-1),forward:()=>J(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:T.add,isReady:M,install(P){const ee=this;P.component("RouterLink",kc),P.component("RouterView",op),P.config.globalProperties.$router=ee,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>qe(c)}),os&&!se&&c.value===Xn&&(se=!0,N(s.location).catch(Me=>{}));const U={};for(const Me in Xn)U[Me]=Re(()=>c.value[Me]);P.provide(Il,ee),P.provide(ip,Et(U)),P.provide(Pc,c);const z=P.unmount;oe.add(P),P.unmount=function(){oe.delete(P),oe.size<1&&(l=Xn,H&&H(),H=null,c.value=Xn,se=!1,v=!1),z()}}};return le}function ts(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function hy(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>As(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>As(l,c))||s.push(c))}return[n,r,s]}const fy="modulepreload",dy=function(t){return"/"+t},bh={},ap=function(e,n,r){return!n||n.length===0?e():Promise.all(n.map(s=>{if(s=dy(s),s in bh)return;bh[s]=!0;const i=s.endsWith(".css"),o=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${o}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":fy,i||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),i)return new Promise((c,l)=>{a.addEventListener("load",c),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())},cp="14.8.40",wh=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),Th=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),Oc=(t,e)=>({startTime:e,type:"setValue",value:t}),lp=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),up=(t,e,{startTime:n,target:r,timeConstant:s})=>r+(e-r)*Math.exp((n-t)/s),ls=t=>t.type==="exponentialRampToValue",Io=t=>t.type==="linearRampToValue",nr=t=>ls(t)||Io(t),Nl=t=>t.type==="setValue",Rn=t=>t.type==="setValueCurve",No=(t,e,n,r)=>{const s=t[e];return s===void 0?r:nr(s)||Nl(s)?s.value:Rn(s)?s.values[s.values.length-1]:up(n,No(t,e-1,s.startTime,r),s)},Mh=(t,e,n,r,s)=>n===void 0?[r.insertTime,s]:nr(n)?[n.endTime,n.value]:Nl(n)?[n.startTime,n.value]:Rn(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,No(t,e-1,n.startTime,s)],xc=t=>t.type==="cancelAndHold",Rc=t=>t.type==="cancelScheduledValues",Zn=t=>xc(t)||Rc(t)?t.cancelTime:ls(t)||Io(t)?t.endTime:t.startTime,Sh=(t,e,n,{endTime:r,value:s})=>n===s?s:0<n&&0<s||n<0&&s<0?n*(s/n)**((t-e)/(r-e)):0,Eh=(t,e,n,{endTime:r,value:s})=>n+(t-e)/(r-e)*(s-n),py=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},my=(t,{duration:e,startTime:n,values:r})=>{const s=(t-n)/e*(r.length-1);return py(r,s)},ro=t=>t.type==="setTarget";class gy{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Zn(e);if(xc(e)||Rc(e)){const r=this._automationEvents.findIndex(i=>Rc(e)&&Rn(i)?i.startTime+i.duration>=n:Zn(i)>=n),s=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),xc(e)){const i=this._automationEvents[this._automationEvents.length-1];if(s!==void 0&&nr(s)){if(ro(i))throw new Error("The internal list is malformed.");const o=Rn(i)?i.startTime+i.duration:Zn(i),a=Rn(i)?i.values[i.values.length-1]:i.value,c=ls(s)?Sh(n,o,a,s):Eh(n,o,a,s),l=ls(s)?wh(c,n,this._currenTime):Th(c,n,this._currenTime);this._automationEvents.push(l)}i!==void 0&&ro(i)&&this._automationEvents.push(Oc(this.getValue(n),n)),i!==void 0&&Rn(i)&&i.startTime+i.duration>n&&(this._automationEvents[this._automationEvents.length-1]=lp(new Float32Array([6,7]),i.startTime,n-i.startTime))}}else{const r=this._automationEvents.findIndex(o=>Zn(o)>n),s=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(s!==void 0&&Rn(s)&&Zn(s)+s.duration>n)return!1;const i=ls(e)?wh(e.value,e.endTime,this._currenTime):Io(e)?Th(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(i);else{if(Rn(e)&&n+e.duration>Zn(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>Zn(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),s=r[0];ro(s)&&r.unshift(Oc(No(this._automationEvents,n-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>Zn(o)>e),r=this._automationEvents[n],s=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[s];if(i!==void 0&&ro(i)&&(r===void 0||!nr(r)||r.insertTime>e))return up(e,No(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Nl(i)&&(r===void 0||!nr(r)))return i.value;if(i!==void 0&&Rn(i)&&(r===void 0||!nr(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?my(e,i):i.values[i.values.length-1];if(i!==void 0&&nr(i)&&(r===void 0||!nr(r)))return i.value;if(r!==void 0&&ls(r)){const[o,a]=Mh(this._automationEvents,s,i,r,this._defaultValue);return Sh(e,o,a,r)}if(r!==void 0&&Io(r)){const[o,a]=Mh(this._automationEvents,s,i,r,this._defaultValue);return Eh(e,o,a,r)}return this._defaultValue}}const _y=t=>({cancelTime:t,type:"cancelAndHold"}),vy=t=>({cancelTime:t,type:"cancelScheduledValues"}),yy=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),by=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),wy=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),Ty=()=>new DOMException("","AbortError"),My=t=>(e,n,[r,s,i],o)=>{t(e[s],[n,r,i],a=>a[0]===n&&a[1]===r,o)},Sy=t=>(e,n,r)=>{const s=[];for(let i=0;i<r.numberOfInputs;i+=1)s.push(new Set);t.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},Ey=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},Ns=new WeakSet,hp=new WeakMap,Pl=new WeakMap,fp=new WeakMap,kl=new WeakMap,ua=new WeakMap,dp=new WeakMap,Dc=new WeakMap,Fc=new WeakMap,Bc=new WeakMap,pp={construct(){return pp}},Cy=t=>{try{const e=new Proxy(t,pp);new e}catch{return!1}return!0},Ch=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Ah=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),s=r.match(Ch);for(;s!==null;){const i=s[1].slice(1,-1),o=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(Ch)}return[n.join(";"),r]},Ih=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Nh=t=>{if(!Cy(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},Ay=(t,e,n,r,s,i,o,a,c,l,u,h,f)=>{let d=0;return(p,g,_={credentials:"omit"})=>{const y=u.get(p);if(y!==void 0&&y.has(g))return Promise.resolve();const A=l.get(p);if(A!==void 0){const S=A.get(g);if(S!==void 0)return S}const F=i(p),N=F.audioWorklet===void 0?s(g).then(([S,R])=>{const[O,D]=Ah(S,R),q=`${O};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${D}
})})(window,'_AWGS')`;return n(q)}).then(()=>{const S=f._AWGS.pop();if(S===void 0)throw new SyntaxError;r(F.currentTime,F.sampleRate,()=>S(class{},void 0,(R,O)=>{if(R.trim()==="")throw e();const D=Fc.get(F);if(D!==void 0){if(D.has(R))throw e();Nh(O),Ih(O.parameterDescriptors),D.set(R,O)}else Nh(O),Ih(O.parameterDescriptors),Fc.set(F,new Map([[R,O]]))},F.sampleRate,void 0,void 0))}):Promise.all([s(g),Promise.resolve(t(h,h))]).then(([[S,R],O])=>{const D=d+1;d=D;const[q,W]=Ah(S,R),re=`${q};((AudioWorkletProcessor,registerProcessor)=>{${W}
})(${O?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${O?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${O?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${D}',class extends AudioWorkletProcessor{process(){return !1}})`,T=new Blob([re],{type:"application/javascript; charset=utf-8"}),v=URL.createObjectURL(T);return F.audioWorklet.addModule(v,_).then(()=>{if(a(F))return F;const E=o(F);return E.audioWorklet.addModule(v,_).then(()=>E)}).then(E=>{if(c===null)throw new SyntaxError;try{new c(E,`__sac${D}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(v))});return A===void 0?l.set(p,new Map([[g,N]])):A.set(g,N),N.then(()=>{const S=u.get(p);S===void 0?u.set(p,new Set([g])):S.add(g)}).finally(()=>{const S=l.get(p);S!==void 0&&S.delete(g)}),N}},mn=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},ha=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},mp=(t,e,n,r)=>{const s=mn(t,e),i=ha(s,o=>o[0]===n&&o[1]===r);return s.size===0&&t.delete(e),i},Li=t=>mn(dp,t),Ps=t=>{if(Ns.has(t))throw new Error("The AudioNode is already stored.");Ns.add(t),Li(t).forEach(e=>e(!0))},gp=t=>"port"in t,Vi=t=>{if(!Ns.has(t))throw new Error("The AudioNode is not stored.");Ns.delete(t),Li(t).forEach(e=>e(!1))},Lc=(t,e)=>{!gp(t)&&e.every(n=>n.size===0)&&Vi(t)},Iy=(t,e,n,r,s,i,o,a,c,l,u,h,f)=>{const d=new WeakMap;return(p,g,_,y,A)=>{const{activeInputs:F,passiveInputs:N}=i(g),{outputs:S}=i(p),R=a(p),O=D=>{const q=c(g),W=c(p);if(D){const K=mp(N,p,_,y);t(F,p,K,!1),!A&&!h(p)&&n(W,q,_,y),f(g)&&Ps(g)}else{const K=r(F,p,_,y);e(N,y,K,!1),!A&&!h(p)&&s(W,q,_,y);const H=o(g);if(H===0)u(g)&&Lc(g,F);else{const ne=d.get(g);ne!==void 0&&clearTimeout(ne),d.set(g,setTimeout(()=>{u(g)&&Lc(g,F)},H*1e3))}}};return l(S,[g,_,y],D=>D[0]===g&&D[1]===_&&D[2]===y,!0)?(R.add(O),u(p)?t(F,p,[_,y,O],!0):e(N,y,[p,_,O],!0),!0):!1}},Ny=t=>(e,n,[r,s,i],o)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[s,n,i]])):t(a,[s,n,i],c=>c[0]===s&&c[1]===n,o)},Py=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(r),r.disconnect()};n.addEventListener("ended",s)},ky=t=>(e,n)=>{t(e).add(n)},Oy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},xy=(t,e,n,r,s,i)=>class extends t{constructor(a,c){const l=s(a),u={...Oy,...c},h=r(l,u),f=i(l)?e():null;super(a,!1,h,f),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Ct=(t,e)=>t.context===e,Ry=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Ct(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(o,l)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},Po=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Cn=()=>new DOMException("","IndexSizeError"),Ol=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?Cn():r}})(t.getChannelData)},Dy={numberOfChannels:1},Fy=(t,e,n,r,s,i,o,a)=>{let c=null;return class _p{constructor(u){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:f,sampleRate:d}={...Dy,...u};c===null&&(c=new s(1,1,44100));const p=r!==null&&e(i,i)?new r({length:h,numberOfChannels:f,sampleRate:d}):c.createBuffer(f,h,d);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(o(p),Ol(p)):e(Po,()=>Po(p))||a(p),t.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===_p.prototype||t.has(u)}}},Lt=-34028234663852886e22,Nt=-Lt,Bn=t=>Ns.has(t),By={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Ly=(t,e,n,r,s,i,o,a)=>class extends t{constructor(l,u){const h=i(l),f={...By,...u},d=s(h,f),p=o(h),g=p?e():null;super(l,!1,d,g),this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=d,this._onended=null,this._playbackRate=n(this,p,d.playbackRate,Nt,Lt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){Ps(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),Bn(this)&&Vi(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},Vy=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=n(l);const f=Ct(h,u);if(!f){const d={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,d),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),f?await t(u,l.playbackRate,h.playbackRate):await r(u,l.playbackRate,h.playbackRate),await s(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},Uy=t=>"playbackRate"in t,jy=t=>"frequency"in t&&"gain"in t,$y=t=>"offset"in t,qy=t=>!("frequency"in t)&&"gain"in t,Wy=t=>"detune"in t&&"frequency"in t,zy=t=>"pan"in t,Pt=t=>mn(hp,t),Ui=t=>mn(fp,t),Vc=(t,e)=>{const{activeInputs:n}=Pt(t);n.forEach(s=>s.forEach(([i])=>{e.includes(t)||Vc(i,[...e,t])}));const r=Uy(t)?[t.playbackRate]:gp(t)?Array.from(t.parameters.values()):jy(t)?[t.Q,t.detune,t.frequency,t.gain]:$y(t)?[t.offset]:qy(t)?[t.gain]:Wy(t)?[t.detune,t.frequency]:zy(t)?[t.pan]:[];for(const s of r){const i=Ui(s);i!==void 0&&i.activeInputs.forEach(([o])=>Vc(o,e))}Bn(t)&&Vi(t)},vp=t=>{Vc(t.destination,[])},Hy=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),Gy=(t,e,n,r,s,i,o,a,c)=>class extends t{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(h===null)throw r();if(!Hy(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw n();super(h,2);const{latencyHint:f}=u,{sampleRate:d}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:f==="balanced"?512/d:f==="interactive"||f===void 0?256/d:f==="playback"?1024/d:Math.max(2,Math.min(128,Math.round(f*d/128)))*128/d,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),vp(this)}))}createMediaElementSource(u){return new s(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},Yy=(t,e,n,r,s,i,o,a)=>class extends t{constructor(l,u){const h=i(l),f=o(h),d=s(h,u,f),p=f?e(a):null;super(l,!1,d,p),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=d}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Ky=t=>{const e=new WeakMap,n=async(r,s)=>{const i=s.destination;return e.set(s,i),await t(r,s,i),i};return{render(r,s){const i=e.get(s);return i!==void 0?Promise.resolve(i):n(r,s)}}},Xy=(t,e,n,r,s,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const S=new Float32Array(1),R=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),O=o(l);let D=!1,q=[0,0,-1,0,1,0],W=[0,0,0];const K=()=>{if(D)return;D=!0;const T=r(l,256,9,0);T.onaudioprocess=({inputBuffer:v})=>{const E=[i(v,S,0),i(v,S,1),i(v,S,2),i(v,S,3),i(v,S,4),i(v,S,5)];E.some((k,j)=>k!==q[j])&&(u.setOrientation(...E),q=E);const M=[i(v,S,6),i(v,S,7),i(v,S,8)];M.some((k,j)=>k!==W[j])&&(u.setPosition(...M),W=M)},R.connect(T)},H=T=>v=>{v!==q[T]&&(q[T]=v,u.setOrientation(...q))},ne=T=>v=>{v!==W[T]&&(W[T]=v,u.setPosition(...W))},re=(T,v,E)=>{const M=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:v});M.connect(R,0,T),M.start(),Object.defineProperty(M.offset,"defaultValue",{get(){return v}});const k=t({context:c},O,M.offset,Nt,Lt);return a(k,"value",j=>()=>j.call(k),j=>J=>{try{j.call(k,J)}catch(se){if(se.code!==9)throw se}K(),O&&E(J)}),k.cancelAndHoldAtTime=(j=>O?()=>{throw s()}:(...J)=>{const se=j.apply(k,J);return K(),se})(k.cancelAndHoldAtTime),k.cancelScheduledValues=(j=>O?()=>{throw s()}:(...J)=>{const se=j.apply(k,J);return K(),se})(k.cancelScheduledValues),k.exponentialRampToValueAtTime=(j=>O?()=>{throw s()}:(...J)=>{const se=j.apply(k,J);return K(),se})(k.exponentialRampToValueAtTime),k.linearRampToValueAtTime=(j=>O?()=>{throw s()}:(...J)=>{const se=j.apply(k,J);return K(),se})(k.linearRampToValueAtTime),k.setTargetAtTime=(j=>O?()=>{throw s()}:(...J)=>{const se=j.apply(k,J);return K(),se})(k.setTargetAtTime),k.setValueAtTime=(j=>O?()=>{throw s()}:(...J)=>{const se=j.apply(k,J);return K(),se})(k.setValueAtTime),k.setValueCurveAtTime=(j=>O?()=>{throw s()}:(...J)=>{const se=j.apply(k,J);return K(),se})(k.setValueCurveAtTime),k};return{forwardX:re(0,0,H(0)),forwardY:re(1,0,H(1)),forwardZ:re(2,-1,H(2)),positionX:re(6,0,ne(0)),positionY:re(7,0,ne(1)),positionZ:re(8,0,ne(2)),upX:re(3,0,H(3)),upY:re(4,1,H(4)),upZ:re(5,0,H(5))}},{forwardX:f,forwardY:d,forwardZ:p,positionX:g,positionY:_,positionZ:y,upX:A,upY:F,upZ:N}=u.forwardX===void 0?h():u;return{get forwardX(){return f},get forwardY(){return d},get forwardZ(){return p},get positionX(){return g},get positionY(){return _},get positionZ(){return y},get upX(){return A},get upY(){return F},get upZ(){return N}}},ko=t=>"context"in t,ji=t=>ko(t[0]),zr=(t,e,n,r)=>{for(const s of t)if(n(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Ph=(t,e,[n,r],s)=>{zr(t,[e,n,r],i=>i[0]===e&&i[1]===n,s)},kh=(t,[e,n,r],s)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,r]])):zr(i,[n,r],o=>o[0]===n,s)},Bs=t=>"inputs"in t,Oo=(t,e,n,r)=>{if(Bs(e)){const s=e.inputs[r];return t.connect(s,n,0),[s,n,0]}return t.connect(e,n,r),[e,n,r]},yp=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},Zy=(t,e,n)=>ha(t,r=>r[0]===e&&r[1]===n),bp=(t,e)=>{if(!Li(t).delete(e))throw new Error("Missing the expected event listener.")},wp=(t,e,n)=>{const r=mn(t,e),s=ha(r,i=>i[0]===n);return r.size===0&&t.delete(e),s},xo=(t,e,n,r)=>{Bs(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},Ze=t=>mn(Pl,t),yi=t=>mn(kl,t),Fr=t=>Dc.has(t),yo=t=>!Ns.has(t),Oh=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(r).connect(t.destination),a.connect(s),a.disconnect(s),r.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),Ha=(t,e)=>{const n=new Map;for(const r of t)for(const s of r){const i=n.get(s);n.set(s,i===void 0?1:i+1)}n.forEach((r,s)=>e(s,r))},Ro=t=>"context"in t,Qy=t=>{const e=new Map;t.connect=(n=>(r,s=0,i=0)=>{const o=Ro(r)?n(r,s,i):n(r,s),a=e.get(r);return a===void 0?e.set(r,[{input:i,output:s}]):a.every(c=>c.input!==i||c.output!==s)&&a.push({input:i,output:s}),o})(t.connect.bind(t)),t.disconnect=(n=>(r,s,i)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==r);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(r))if(s===void 0)e.delete(r);else{const o=e.get(r);if(o!==void 0){const a=o.filter(c=>c.output!==s&&(c.input!==i||i===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[o,a]of e)a.forEach(c=>{Ro(o)?t.connect(o,c.output,c.input):t.connect(o,c.output)})})(t.disconnect)},Jy=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=Ui(e),{outputs:o}=Pt(t),a=Li(t),c=l=>{const u=Ze(t),h=yi(e);if(l){const f=wp(i,t,n);Ph(s,t,f,!1),!r&&!Fr(t)&&u.connect(h,n)}else{const f=Zy(s,t,n);kh(i,f,!1),!r&&!Fr(t)&&u.disconnect(h,n)}};return zr(o,[e,n],l=>l[0]===e&&l[1]===n,!0)?(a.add(c),Bn(t)?Ph(s,t,[n,c],!0):kh(i,[t,n,c],!0),!0):!1},e1=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=Pt(e),o=yp(s[r],t,n);return o===null?[mp(i,t,n,r)[2],!1]:[o[2],!0]},t1=(t,e,n)=>{const{activeInputs:r,passiveInputs:s}=Ui(e),i=yp(r,t,n);return i===null?[wp(s,t,n)[1],!1]:[i[2],!0]},xl=(t,e,n,r,s)=>{const[i,o]=e1(t,n,r,s);if(i!==null&&(bp(t,i),o&&!e&&!Fr(t)&&xo(Ze(t),Ze(n),r,s)),Bn(n)){const{activeInputs:a}=Pt(n);Lc(n,a)}},Rl=(t,e,n,r)=>{const[s,i]=t1(t,n,r);s!==null&&(bp(t,s),i&&!e&&!Fr(t)&&Ze(t).disconnect(yi(n),r))},n1=(t,e)=>{const n=Pt(t),r=[];for(const s of n.outputs)ji(s)?xl(t,e,...s):Rl(t,e,...s),r.push(s[0]);return n.outputs.clear(),r},r1=(t,e,n)=>{const r=Pt(t),s=[];for(const i of r.outputs)i[1]===n&&(ji(i)?xl(t,e,...i):Rl(t,e,...i),s.push(i[0]),r.outputs.delete(i));return s},s1=(t,e,n,r,s)=>{const i=Pt(t);return Array.from(i.outputs).filter(o=>o[0]===n&&(r===void 0||o[1]===r)&&(s===void 0||o[2]===s)).map(o=>(ji(o)?xl(t,e,...o):Rl(t,e,...o),i.outputs.delete(o),o[0]))},i1=(t,e,n,r,s,i,o,a,c,l,u,h,f,d,p,g)=>class extends l{constructor(y,A,F,N){super(F),this._context=y,this._nativeAudioNode=F;const S=u(y);h(S)&&n(Oh,()=>Oh(S,g))!==!0&&Qy(F),Pl.set(this,F),dp.set(this,new Set),y.state!=="closed"&&A&&Ps(this),t(this,N,F)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(y){this._nativeAudioNode.channelCount=y}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(y){this._nativeAudioNode.channelCountMode=y}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(y){this._nativeAudioNode.channelInterpretation=y}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(y,A=0,F=0){if(A<0||A>=this._nativeAudioNode.numberOfOutputs)throw s();const N=u(this._context),S=p(N);if(f(y)||d(y))throw i();if(ko(y)){const D=Ze(y);try{const W=Oo(this._nativeAudioNode,D,A,F),K=yo(this);(S||K)&&this._nativeAudioNode.disconnect(...W),this.context.state!=="closed"&&!K&&yo(y)&&Ps(y)}catch(W){throw W.code===12?i():W}if(e(this,y,A,F,S)){const W=c([this],y);Ha(W,r(S))}return y}const R=yi(y);if(R.name==="playbackRate"&&R.maxValue===1024)throw o();try{this._nativeAudioNode.connect(R,A),(S||yo(this))&&this._nativeAudioNode.disconnect(R,A)}catch(D){throw D.code===12?i():D}if(Jy(this,y,A,S)){const D=c([this],y);Ha(D,r(S))}}disconnect(y,A,F){let N;const S=u(this._context),R=p(S);if(y===void 0)N=n1(this,R);else if(typeof y=="number"){if(y<0||y>=this.numberOfOutputs)throw s();N=r1(this,R,y)}else{if(A!==void 0&&(A<0||A>=this.numberOfOutputs)||ko(y)&&F!==void 0&&(F<0||F>=y.numberOfInputs))throw s();if(N=s1(this,R,y,A,F),N.length===0)throw i()}for(const O of N){const D=c([this],O);Ha(D,a)}}},o1=(t,e,n,r,s,i,o,a,c,l,u,h,f)=>(d,p,g,_=null,y=null)=>{const A=new gy(g.defaultValue),F=p?r(A):null,N={get defaultValue(){return g.defaultValue},get maxValue(){return _===null?g.maxValue:_},get minValue(){return y===null?g.minValue:y},get value(){return g.value},set value(S){g.value=S,N.setValueAtTime(S,d.context.currentTime)},cancelAndHoldAtTime(S){if(typeof g.cancelAndHoldAtTime=="function")F===null&&A.flush(d.context.currentTime),A.add(s(S)),g.cancelAndHoldAtTime(S);else{const R=Array.from(A).pop();F===null&&A.flush(d.context.currentTime),A.add(s(S));const O=Array.from(A).pop();g.cancelScheduledValues(S),R!==O&&O!==void 0&&(O.type==="exponentialRampToValue"?g.exponentialRampToValueAtTime(O.value,O.endTime):O.type==="linearRampToValue"?g.linearRampToValueAtTime(O.value,O.endTime):O.type==="setValue"?g.setValueAtTime(O.value,O.startTime):O.type==="setValueCurve"&&g.setValueCurveAtTime(O.values,O.startTime,O.duration))}return N},cancelScheduledValues(S){return F===null&&A.flush(d.context.currentTime),A.add(i(S)),g.cancelScheduledValues(S),N},exponentialRampToValueAtTime(S,R){if(S===0)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;return F===null&&A.flush(d.context.currentTime),A.add(o(S,R)),g.exponentialRampToValueAtTime(S,R),N},linearRampToValueAtTime(S,R){return F===null&&A.flush(d.context.currentTime),A.add(a(S,R)),g.linearRampToValueAtTime(S,R),N},setTargetAtTime(S,R,O){return F===null&&A.flush(d.context.currentTime),A.add(c(S,R,O)),g.setTargetAtTime(S,R,O),N},setValueAtTime(S,R){return F===null&&A.flush(d.context.currentTime),A.add(l(S,R)),g.setValueAtTime(S,R),N},setValueCurveAtTime(S,R,O){const D=S instanceof Float32Array?S:new Float32Array(S);if(h!==null&&h.name==="webkitAudioContext"){const q=R+O,W=d.context.sampleRate,K=Math.ceil(R*W),H=Math.floor(q*W),ne=H-K,re=new Float32Array(ne);for(let v=0;v<ne;v+=1){const E=(D.length-1)/O*((K+v)/W-R),M=Math.floor(E),k=Math.ceil(E);re[v]=M===k?D[M]:(1-(E-M))*D[M]+(1-(k-E))*D[k]}F===null&&A.flush(d.context.currentTime),A.add(u(re,R,O)),g.setValueCurveAtTime(re,R,O);const T=H/W;T<q&&f(N,re[re.length-1],T),f(N,D[D.length-1],q)}else F===null&&A.flush(d.context.currentTime),A.add(u(D,R,O)),g.setValueCurveAtTime(D,R,O);return N}};return n.set(N,g),e.set(N,d),t(N,F),N},a1=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:s}=n;e.exponentialRampToValueAtTime(s,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:s}=n;e.linearRampToValueAtTime(s,r)}else if(n.type==="setTarget"){const{startTime:r,target:s,timeConstant:i}=n;e.setTargetAtTime(s,r,i)}else if(n.type==="setValue"){const{startTime:r,value:s}=n;e.setValueAtTime(s,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,r)}else throw new Error("Can't apply an unknown automation.")}});class Tp{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,s)=>e.call(n,r,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const c1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},l1=(t,e,n,r,s,i,o,a,c,l,u,h,f,d)=>class extends e{constructor(g,_,y){var A;const F=a(g),N=c(F),S=u({...c1,...y});f(S);const R=Fc.get(F),O=R==null?void 0:R.get(_),D=N||F.state!=="closed"?F:(A=o(F))!==null&&A!==void 0?A:F,q=s(D,N?null:g.baseLatency,l,_,O,S),W=N?r(_,S,O):null;super(g,!0,q,W);const K=[];q.parameters.forEach((ne,re)=>{const T=n(this,N,ne);K.push([re,T])}),this._nativeAudioWorkletNode=q,this._onprocessorerror=null,this._parameters=new Tp(K),N&&t(F,this);const{activeInputs:H}=i(this);h(q,H)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(g){const _=typeof g=="function"?d(this,g):null;this._nativeAudioWorkletNode.onprocessorerror=_;const y=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=y!==null&&y===_?g:y}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Do(t,e,n,r,s){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,s);else{const i=t.getChannelData(r);if(e[n].byteLength===0)e[n]=i.slice(s,s+128);else{const o=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const Mp=(t,e,n,r,s)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,s):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],s)},Fo=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const s=[],i=typeof e=="number"?e:e[r];for(let o=0;o<i;o+=1)s.push(new Float32Array(128));n.push(s)}return n},u1=(t,e)=>{const n=mn(Bc,t),r=Ze(e);return mn(n,r)},h1=async(t,e,n,r,s,i,o)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,l=s.reduce((_,y)=>_+y,0),u=l===0?null:n.createBuffer(l,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=Pt(t),f=await u1(n,t),d=Fo(r.numberOfInputs,r.channelCount),p=Fo(r.numberOfOutputs,s),g=Array.from(t.parameters.keys()).reduce((_,y)=>({..._,[y]:new Float32Array(128)}),{});for(let _=0;_<a;_+=128){if(r.numberOfInputs>0&&e!==null)for(let y=0;y<r.numberOfInputs;y+=1)for(let A=0;A<r.channelCount;A+=1)Do(e,d[y],A,A,_);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:y},A)=>{Do(e,g,y,c+A,_)});for(let y=0;y<r.numberOfInputs;y+=1)for(let A=0;A<s[y];A+=1)p[y][A].byteLength===0&&(p[y][A]=new Float32Array(128));try{const y=d.map((F,N)=>h.activeInputs[N].size===0?[]:F),A=o(_/n.sampleRate,n.sampleRate,()=>f.process(y,p,g));if(u!==null)for(let F=0,N=0;F<r.numberOfOutputs;F+=1){for(let S=0;S<s[F];S+=1)Mp(u,p[F],S,N+S,_);N+=s[F]}if(!A)break}catch(y){t.dispatchEvent(new ErrorEvent("processorerror",{colno:y.colno,filename:y.filename,lineno:y.lineno,message:y.message}));break}}return u},f1=(t,e,n,r,s,i,o,a,c,l,u,h,f,d,p,g)=>(_,y,A)=>{const F=new WeakMap;let N=null;const S=async(R,O)=>{let D=u(R),q=null;const W=Ct(D,O),K=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(h===null){const H=K.reduce((v,E)=>v+E,0),ne=s(O,{channelCount:Math.max(1,H),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,H)}),re=[];for(let v=0;v<R.numberOfOutputs;v+=1)re.push(r(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:K[v]}));const T=o(O,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1});T.connect=e.bind(null,re),T.disconnect=c.bind(null,re),q=[ne,re,T]}else W||(D=new h(O,_));if(F.set(O,q===null?D:q[2]),q!==null){if(N===null){if(A===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const E=R.channelCount*R.numberOfInputs,M=A.parameterDescriptors===void 0?0:A.parameterDescriptors.length,k=E+M;N=h1(R,k===0?null:await(async()=>{const J=new f(k,Math.ceil(R.context.length/128)*128,O.sampleRate),se=[],oe=[];for(let ee=0;ee<y.numberOfInputs;ee+=1)se.push(o(J,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),oe.push(s(J,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const le=await Promise.all(Array.from(R.parameters.values()).map(async ee=>{const U=i(J,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ee.value});return await d(J,ee,U.offset),U})),P=r(J,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,E+M)});for(let ee=0;ee<y.numberOfInputs;ee+=1){se[ee].connect(oe[ee]);for(let U=0;U<y.channelCount;U+=1)oe[ee].connect(P,U,ee*y.channelCount+U)}for(const[ee,U]of le.entries())U.connect(P,0,E+ee),U.start(0);return P.connect(J.destination),await Promise.all(se.map(ee=>p(R,J,ee))),g(J)})(),O,y,K,A,l)}const H=await N,ne=n(O,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[re,T,v]=q;H!==null&&(ne.buffer=H,ne.start(0)),ne.connect(re);for(let E=0,M=0;E<R.numberOfOutputs;E+=1){const k=T[E];for(let j=0;j<K[E];j+=1)re.connect(k,M+j,j);M+=K[E]}return v}if(W)for(const[H,ne]of R.parameters.entries())await t(O,ne,D.parameters.get(H));else for(const[H,ne]of R.parameters.entries())await d(O,ne,D.parameters.get(H));return await p(R,O,D),D};return{render(R,O){a(O,R);const D=F.get(O);return D!==void 0?Promise.resolve(D):S(R,O)}}},d1=(t,e,n,r,s,i,o,a,c,l,u,h,f,d,p,g,_,y,A,F)=>class extends p{constructor(S,R){super(S,R),this._nativeContext=S,this._audioWorklet=t===void 0?void 0:{addModule:(O,D)=>t(this,O,D)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(S,R,O){return new n({length:R,numberOfChannels:S,sampleRate:O})}createBufferSource(){return new r(this)}createChannelMerger(S=6){return new i(this,{numberOfInputs:S})}createChannelSplitter(S=6){return new o(this,{numberOfOutputs:S})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(S=1){return new u(this,{maxDelayTime:S})}createDynamicsCompressor(){return new h(this)}createGain(){return new f(this)}createIIRFilter(S,R){return new d(this,{feedback:R,feedforward:S})}createOscillator(){return new g(this)}createPanner(){return new _(this)}createPeriodicWave(S,R,O={disableNormalization:!1}){return new y(this,{...O,imag:R,real:S})}createStereoPanner(){return new A(this)}createWaveShaper(){return new F(this)}decodeAudioData(S,R,O){return l(this._nativeContext,S).then(D=>(typeof R=="function"&&R(D),D),D=>{throw typeof O=="function"&&O(D),D})}},p1={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},m1=(t,e,n,r,s,i,o,a)=>class extends t{constructor(l,u){const h=i(l),f={...p1,...u},d=s(h,f),p=o(h),g=p?n():null;super(l,!1,d,g),this._Q=e(this,p,d.Q,Nt,Lt),this._detune=e(this,p,d.detune,1200*Math.log2(Nt),-1200*Math.log2(Nt)),this._frequency=e(this,p,d.frequency,l.sampleRate/2,0),this._gain=e(this,p,d.gain,40*Math.log10(Nt),Lt),this._nativeBiquadFilterNode=d,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(f){throw f.code===11?r():f}if(l.length!==u.length||u.length!==h.length)throw r()}},g1=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Ct(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,h)}return i.set(c,l),u?(await t(c,a.Q,l.Q),await t(c,a.detune,l.detune),await t(c,a.frequency,l.frequency),await t(c,a.gain,l.gain)):(await r(c,a.Q,l.Q),await r(c,a.detune,l.detune),await r(c,a.frequency,l.frequency),await r(c,a.gain,l.gain)),await s(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},_1=(t,e)=>(n,r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t.get(n);if(i!==void 0)return i;try{const o=r();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},v1={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},y1=(t,e,n,r,s)=>class extends t{constructor(o,a){const c=r(o),l={...v1,...a},u=n(c,l),h=s(c)?e():null;super(o,!1,u,h)}},b1=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Ct(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,l)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},w1={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},T1=(t,e,n,r,s,i)=>class extends t{constructor(a,c){const l=r(a),u=i({...w1,...c}),h=n(l,u),f=s(l)?e():null;super(a,!1,h,f)}},M1=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Ct(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,l)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},S1=t=>(e,n,r)=>t(n,e,r),E1=t=>(e,n,r=0,s=0)=>{const i=e[r];if(i===void 0)throw t();return Ro(n)?i.connect(n,0,s):i.connect(n,0)},C1=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},A1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},I1=(t,e,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),h={...A1,...l},f=r(u,h),d=i(u),p=d?n():null;super(c,!1,f,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=f,this._offset=e(this,d,f.offset,Nt,Lt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){Ps(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Bn(this)&&Vi(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},N1=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=n(l);const f=Ct(h,u);if(!f){const d={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,d),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),f?await t(u,l.offset,h.offset):await r(u,l.offset,h.offset),await s(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},P1=t=>e=>(t[0]=e,t[0]),k1={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},O1=(t,e,n,r,s,i)=>class extends t{constructor(a,c){const l=r(a),u={...k1,...c},h=n(l,u),d=s(l)?e():null;super(a,!1,h,d),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,44100),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},x1=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Ct(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,l)}return r.set(o,a),Bs(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},R1=(t,e)=>(n,r,s)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,s)}catch(i){throw i.name==="SyntaxError"?t():i}},D1=()=>new DOMException("","DataCloneError"),xh=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const s=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>s();try{e.postMessage(t,[t])}finally{s()}})},F1=(t,e,n,r,s,i,o,a,c,l,u)=>(h,f)=>{const d=o(h)?h:i(h);if(s.has(f)){const p=n();return Promise.reject(p)}try{s.add(f)}catch{}return e(c,()=>c(d))?d.decodeAudioData(f).then(p=>(xh(f).catch(()=>{}),e(a,()=>a(p))||u(p),t.add(p),p)):new Promise((p,g)=>{const _=async()=>{try{await xh(f)}catch{}},y=A=>{g(A),_()};try{d.decodeAudioData(f,A=>{typeof A.copyFromChannel!="function"&&(l(A),Ol(A)),t.add(A),_().then(()=>p(A))},A=>{y(A===null?r():A)})}catch(A){y(A)}})},B1=(t,e,n,r,s,i,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),f=a(h);if(u===l){if(e.delete(c),!f&&o(c)){const d=r(c),{outputs:p}=n(c);for(const g of p)if(ji(g)){const _=r(g[0]);t(d,_,g[1],g[2])}else{const _=s(g[0]);d.connect(_,g[1])}}}else e.set(c,u-l)},L1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},V1=(t,e,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),h={...L1,...l},f=r(u,h),d=i(u),p=d?n(h.maxDelayTime):null;super(c,!1,f,p),this._delayTime=e(this,d,f.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},U1=(t,e,n,r,s)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=n(c);const h=Ct(u,l);if(!h){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,f)}return o.set(l,u),h?await t(l,c.delayTime,u.delayTime):await r(l,c.delayTime,u.delayTime),await s(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},j1=t=>(e,n,r,s)=>t(e[s],i=>i[0]===n&&i[1]===r),$1=t=>(e,n)=>{t(e).delete(n)},q1=t=>"delayTime"in t,W1=(t,e,n)=>function r(s,i){const o=ko(i)?i:n(t,i);if(q1(o))return[];if(s[0]===o)return[s];if(s.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>r([...s,o],c[0])).reduce((c,l)=>c.concat(l),[])},so=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},z1=t=>(e,n=void 0,r=void 0,s=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?so(t,e,n).disconnect():Ro(n)?r===void 0?e.forEach(i=>i.disconnect(n)):s===void 0?so(t,e,r).disconnect(n,0):so(t,e,r).disconnect(n,0,s):r===void 0?e.forEach(i=>i.disconnect(n)):so(t,e,r).disconnect(n,0),H1={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},G1=(t,e,n,r,s,i,o,a)=>class extends t{constructor(l,u){const h=i(l),f={...H1,...u},d=r(h,f),p=o(h),g=p?n():null;super(l,!1,d,g),this._attack=e(this,p,d.attack),this._knee=e(this,p,d.knee),this._nativeDynamicsCompressorNode=d,this._ratio=e(this,p,d.ratio),this._release=e(this,p,d.release),this._threshold=e(this,p,d.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Y1=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Ct(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,h)}return i.set(c,l),u?(await t(c,a.attack,l.attack),await t(c,a.knee,l.knee),await t(c,a.ratio,l.ratio),await t(c,a.release,l.release),await t(c,a.threshold,l.threshold)):(await r(c,a.attack,l.attack),await r(c,a.knee,l.knee),await r(c,a.ratio,l.ratio),await r(c,a.release,l.release),await r(c,a.threshold,l.threshold)),await s(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},K1=()=>new DOMException("","EncodingError"),X1=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const s=t.document.head;if(s===null)r(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=t.onerror,l=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(u,h,f,d,p)=>{if(h===a||h===t.location.href&&f===1&&d===1)return l(),r(p),!1;if(c!==null)return c(u,h,f,d,p)},i.onerror=()=>{l(),r(new SyntaxError)},i.onload=()=>{l(),n()},i.src=a,i.type="module",s.appendChild(i)}}),Z1=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,s){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=t(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(n,i,s)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,s){const i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,s)}},Q1=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},J1=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},eb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},tb=(t,e,n,r,s,i)=>class extends t{constructor(a,c){const l=s(a),u={...eb,...c},h=r(l,u),f=i(l),d=f?n():null;super(a,!1,h,d),this._gain=e(this,f,h.gain,Nt,Lt)}get gain(){return this._gain}},nb=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Ct(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,h)}return i.set(c,l),u?await t(c,a.gain,l.gain):await r(c,a.gain,l.gain),await s(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},rb=(t,e)=>n=>e(t,n),sb=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},ib=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},ob=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},ab=t=>e=>t.get(e),gt=()=>new DOMException("","InvalidStateError"),cb=t=>e=>{const n=t.get(e);if(n===void 0)throw gt();return n},lb=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},ub=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},fa=()=>new DOMException("","InvalidAccessError"),hb=t=>{t.getFrequencyResponse=(e=>(n,r,s)=>{if(n.length!==r.length||r.length!==s.length)throw fa();return e.call(t,n,r,s)})(t.getFrequencyResponse)},fb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},db=(t,e,n,r,s,i)=>class extends t{constructor(a,c){const l=r(a),u=s(l),h={...fb,...c},f=e(l,u?null:a.baseLatency,h),d=u?n(h.feedback,h.feedforward):null;super(a,!1,f,d),hb(f),this._nativeIIRFilterNode=f,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},Sp=(t,e,n,r,s,i,o,a,c,l,u)=>{const h=l.length;let f=a;for(let d=0;d<h;d+=1){let p=n[0]*l[d];for(let g=1;g<s;g+=1){const _=f-g&c-1;p+=n[g]*i[_],p-=t[g]*o[_]}for(let g=s;g<r;g+=1)p+=n[g]*i[f-g&c-1];for(let g=s;g<e;g+=1)p-=t[g]*o[f-g&c-1];i[f]=l[d],o[f]=p,f=f+1&c-1,u[d]=p}return f},pb=(t,e,n,r)=>{const s=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),o=s.length,a=i.length,c=Math.min(o,a);if(s[0]!==1){for(let p=0;p<o;p+=1)i[p]/=s[0];for(let p=1;p<a;p+=1)s[p]/=s[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),f=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),d=t.numberOfChannels;for(let p=0;p<d;p+=1){const g=t.getChannelData(p),_=f.getChannelData(p);u.fill(0),h.fill(0),Sp(s,o,i,a,c,u,h,0,l,g,_)}return f},mb=(t,e,n,r,s)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let f=null,d=e(u);const p=Ct(d,h);if(h.createIIRFilter===void 0?f=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=h.createIIRFilter(o,i)),a.set(h,f===null?d:f),f!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const _=new n(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await r(u,_,_.destination);const y=await s(_);return pb(y,h,i,o)})()}const g=await c;return f.buffer=g,f.start(0),f}return await r(u,h,d),d};return{render(u,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},gb=(t,e,n,r,s,i)=>o=>(a,c)=>{const l=t.get(a);if(l===void 0){if(!o&&i(a)){const u=r(a),{outputs:h}=n(a);for(const f of h)if(ji(f)){const d=r(f[0]);e(u,d,f[1],f[2])}else{const d=s(f[0]);u.disconnect(d,f[1])}}t.set(a,c)}else t.set(a,l+c)},_b=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},vb=(t,e)=>n=>t.has(n)||e(n),yb=(t,e)=>n=>t.has(n)||e(n),bb=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},wb=t=>e=>t!==null&&e instanceof t,Tb=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,Mb=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,Sb=(t,e)=>n=>t(n)||e(n),Eb=t=>e=>t!==null&&e instanceof t,Cb=t=>t!==null&&t.isSecureContext,Ab=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),c=e(a,o);if(r(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Ib={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Nb=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i);if(r(a))throw new TypeError;const c={...Ib,...o},l=e(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Pb=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),c=e(a,o);if(r(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},kb=(t,e,n)=>class extends t{constructor(s,i){const o=n(s),a=e(o,i);super(s,!0,a,null)}},Ob=(t,e,n,r,s,i)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,ua.set(this,a),r(a)&&s.set(a,new Set),this._destination=new t(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},bi=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},xb=(t,e)=>(n,r,s)=>{const i=new Set;return n.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(e(a))return o.call(n,a,c,l),t(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&r(),a;o.call(n,a,c),t(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&r()})(n.connect),n.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const f of i)f[1]===a&&i.delete(f)}else{e(a)?o.call(n,a,c,l):o.call(n,a,c);for(const f of i)f[0]===a&&(c===void 0||f[1]===c)&&(l===void 0||f[2]===l)&&i.delete(f)}const h=i.size===0;u&&h&&s()})(n.disconnect),n},Je=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},ut=(t,e)=>{Je(t,e,"channelCount"),Je(t,e,"channelCountMode"),Je(t,e,"channelInterpretation")},Rh=t=>typeof t.getFloatTimeDomainData=="function",Rb=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let s=0;s<r;s+=1)e[s]=(n[s]-128)*.0078125;return e}},Db=(t,e)=>(n,r)=>{const s=n.createAnalyser();if(ut(s,r),!(r.maxDecibels>r.minDecibels))throw e();return Je(s,r,"fftSize"),Je(s,r,"maxDecibels"),Je(s,r,"minDecibels"),Je(s,r,"smoothingTimeConstant"),t(Rh,()=>Rh(s))||Rb(s),s},Fb=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,tt=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},Bb=t=>{t.start=(e=>{let n=!1;return(r=0,s=0,i)=>{if(n)throw gt();e.call(t,r,s,i),n=!0}})(t.start)},Dl=t=>{t.start=(e=>(n=0,r=0,s)=>{if(typeof s=="number"&&s<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,s)})(t.start)},Fl=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},Lb=(t,e,n,r,s,i,o,a,c,l,u)=>(h,f)=>{const d=h.createBufferSource();return ut(d,f),tt(d,f,"playbackRate"),Je(d,f,"buffer"),Je(d,f,"loop"),Je(d,f,"loopEnd"),Je(d,f,"loopStart"),e(n,()=>n(h))||Bb(d),e(r,()=>r(h))||c(d),e(s,()=>s(h))||l(d,h),e(i,()=>i(h))||Dl(d),e(o,()=>o(h))||u(d,h),e(a,()=>a(h))||Fl(d),t(h,d),d},Vb=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,Ub=(t,e)=>(n,r,s)=>{const i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}s&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});const o=t(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},jb=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,$b=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},qb=(t,e,n,r,s)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),f=new Map;let d=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>d,set:p=>{typeof d=="function"&&h.removeEventListener("processorerror",d),d=typeof p=="function"?p:null,typeof d=="function"&&h.addEventListener("processorerror",d)}}}),h.addEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const _=typeof g[1]=="function"?g[1]:typeof g[1]=="object"&&g[1]!==null&&typeof g[1].handleEvent=="function"?g[1].handleEvent:null;if(_!==null){const y=f.get(g[1]);y!==void 0?g[1]=y:(g[1]=A=>{A.type==="error"?(Object.defineProperties(A,{type:{value:"processorerror"}}),_(A)):_(new ErrorEvent(g[0],{...A}))},f.set(_,g[1]))}}return p.call(h,"error",g[1],g[2]),p.call(h,...g)})(h.addEventListener),h.removeEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const _=f.get(g[1]);_!==void 0&&(f.delete(g[1]),g[1]=_)}return p.call(h,"error",g[1],g[2]),p.call(h,g[0],g[1],g[2])})(h.removeEventListener),u.numberOfOutputs!==0){const p=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),s(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?r():h}if(l===void 0)throw r();return $b(u),e(i,o,l,u)},Ep=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Wb=t=>new Promise((e,n)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),s.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),s.close(),n(i)},s.postMessage(t)}),zb=async(t,e)=>{const n=await Wb(e);return new t(n)},Hb=(t,e,n,r)=>{let s=Bc.get(t);s===void 0&&(s=new WeakMap,Bc.set(t,s));const i=zb(n,r);return s.set(e,i),i},Gb=(t,e,n,r,s,i,o,a,c,l,u,h,f)=>(d,p,g,_)=>{if(_.numberOfInputs===0&&_.numberOfOutputs===0)throw c();const y=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(y.some(C=>C<1))throw c();if(y.length!==_.numberOfOutputs)throw e();if(_.channelCountMode!=="explicit")throw c();const A=_.channelCount*_.numberOfInputs,F=y.reduce((C,B)=>C+B,0),N=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length;if(A+N>6||F>6)throw c();const S=new MessageChannel,R=[],O=[];for(let C=0;C<_.numberOfInputs;C+=1)R.push(o(d,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),O.push(s(d,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const D=[];if(g.parameterDescriptors!==void 0)for(const{defaultValue:C,maxValue:B,minValue:$,name:Z}of g.parameterDescriptors){const Q=i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:_.parameterData[Z]!==void 0?_.parameterData[Z]:C===void 0?0:C});Object.defineProperties(Q.offset,{defaultValue:{get:()=>C===void 0?0:C},maxValue:{get:()=>B===void 0?Nt:B},minValue:{get:()=>$===void 0?Lt:$}}),D.push(Q)}const q=r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,A+N)}),W=Ep(p,d.sampleRate),K=a(d,W,A+N,Math.max(1,F)),H=s(d,{channelCount:Math.max(1,F),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,F)}),ne=[];for(let C=0;C<_.numberOfOutputs;C+=1)ne.push(r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[C]}));for(let C=0;C<_.numberOfInputs;C+=1){R[C].connect(O[C]);for(let B=0;B<_.channelCount;B+=1)O[C].connect(q,B,C*_.channelCount+B)}const re=new Tp(g.parameterDescriptors===void 0?[]:g.parameterDescriptors.map(({name:C},B)=>{const $=D[B];return $.connect(q,0,A+B),$.start(0),[C,$.offset]}));q.connect(K);let T=_.channelInterpretation,v=null;const E=_.numberOfOutputs===0?[K]:ne,M={get bufferSize(){return W},get channelCount(){return _.channelCount},set channelCount(C){throw n()},get channelCountMode(){return _.channelCountMode},set channelCountMode(C){throw n()},get channelInterpretation(){return T},set channelInterpretation(C){for(const B of R)B.channelInterpretation=C;T=C},get context(){return K.context},get inputs(){return R},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get onprocessorerror(){return v},set onprocessorerror(C){typeof v=="function"&&M.removeEventListener("processorerror",v),v=typeof C=="function"?C:null,typeof v=="function"&&M.addEventListener("processorerror",v)},get parameters(){return re},get port(){return S.port2},addEventListener(...C){return K.addEventListener(C[0],C[1],C[2])},connect:t.bind(null,E),disconnect:l.bind(null,E),dispatchEvent(...C){return K.dispatchEvent(C[0])},removeEventListener(...C){return K.removeEventListener(C[0],C[1],C[2])}},k=new Map;S.port1.addEventListener=(C=>(...B)=>{if(B[0]==="message"){const $=typeof B[1]=="function"?B[1]:typeof B[1]=="object"&&B[1]!==null&&typeof B[1].handleEvent=="function"?B[1].handleEvent:null;if($!==null){const Z=k.get(B[1]);Z!==void 0?B[1]=Z:(B[1]=Q=>{u(d.currentTime,d.sampleRate,()=>$(Q))},k.set($,B[1]))}}return C.call(S.port1,B[0],B[1],B[2])})(S.port1.addEventListener),S.port1.removeEventListener=(C=>(...B)=>{if(B[0]==="message"){const $=k.get(B[1]);$!==void 0&&(k.delete(B[1]),B[1]=$)}return C.call(S.port1,B[0],B[1],B[2])})(S.port1.removeEventListener);let j=null;Object.defineProperty(S.port1,"onmessage",{get:()=>j,set:C=>{typeof j=="function"&&S.port1.removeEventListener("message",j),j=typeof C=="function"?C:null,typeof j=="function"&&(S.port1.addEventListener("message",j),S.port1.start())}}),g.prototype.port=S.port1;let J=null;Hb(d,M,g,_).then(C=>J=C);const oe=Fo(_.numberOfInputs,_.channelCount),le=Fo(_.numberOfOutputs,y),P=g.parameterDescriptors===void 0?[]:g.parameterDescriptors.reduce((C,{name:B})=>({...C,[B]:new Float32Array(128)}),{});let ee=!0;const U=()=>{_.numberOfOutputs>0&&K.disconnect(H);for(let C=0,B=0;C<_.numberOfOutputs;C+=1){const $=ne[C];for(let Z=0;Z<y[C];Z+=1)H.disconnect($,B+Z,Z);B+=y[C]}},z=new Map;K.onaudioprocess=({inputBuffer:C,outputBuffer:B})=>{if(J!==null){const $=h(M);for(let Z=0;Z<W;Z+=128){for(let Q=0;Q<_.numberOfInputs;Q+=1)for(let X=0;X<_.channelCount;X+=1)Do(C,oe[Q],X,X,Z);g.parameterDescriptors!==void 0&&g.parameterDescriptors.forEach(({name:Q},X)=>{Do(C,P,Q,A+X,Z)});for(let Q=0;Q<_.numberOfInputs;Q+=1)for(let X=0;X<y[Q];X+=1)le[Q][X].byteLength===0&&(le[Q][X]=new Float32Array(128));try{const Q=oe.map((te,G)=>{if($[G].size>0)return z.set(G,W/128),te;const fe=z.get(G);return fe===void 0?[]:(te.every(ge=>ge.every(Se=>Se===0))&&(fe===1?z.delete(G):z.set(G,fe-1)),te)});ee=u(d.currentTime+Z/d.sampleRate,d.sampleRate,()=>J.process(Q,le,P));for(let te=0,G=0;te<_.numberOfOutputs;te+=1){for(let pe=0;pe<y[te];pe+=1)Mp(B,le[te],pe,G+pe,Z);G+=y[te]}}catch(Q){ee=!1,M.dispatchEvent(new ErrorEvent("processorerror",{colno:Q.colno,filename:Q.filename,lineno:Q.lineno,message:Q.message}))}if(!ee){for(let Q=0;Q<_.numberOfInputs;Q+=1){R[Q].disconnect(O[Q]);for(let X=0;X<_.channelCount;X+=1)O[Z].disconnect(q,X,Q*_.channelCount+X)}if(g.parameterDescriptors!==void 0){const Q=g.parameterDescriptors.length;for(let X=0;X<Q;X+=1){const te=D[X];te.disconnect(q,0,A+X),te.stop()}}q.disconnect(K),K.onaudioprocess=null,Me?U():de();break}}}};let Me=!1;const Ce=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),we=()=>K.connect(Ce).connect(d.destination),de=()=>{K.disconnect(Ce),Ce.disconnect()},w=()=>{if(ee){de(),_.numberOfOutputs>0&&K.connect(H);for(let C=0,B=0;C<_.numberOfOutputs;C+=1){const $=ne[C];for(let Z=0;Z<y[C];Z+=1)H.connect($,B+Z,Z);B+=y[C]}}Me=!0},I=()=>{ee&&(we(),U()),Me=!1};return we(),f(M,w,I)},Cp=(t,e)=>{const n=t.createBiquadFilter();return ut(n,e),tt(n,e,"Q"),tt(n,e,"detune"),tt(n,e,"frequency"),tt(n,e,"gain"),Je(n,e,"type"),n},Yb=(t,e)=>(n,r)=>{const s=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,s),ut(s,r),s},Kb=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw gt()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw gt()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw gt()}})},$i=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return ut(n,e),Kb(n),n},Xb=(t,e,n,r,s)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return ut(a,o),tt(a,o,"offset"),e(r,()=>r(i))||Dl(a),e(s,()=>s(i))||Fl(a),t(i,a),a},Ls=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),Zb=(t,e,n,r)=>(s,{offset:i,...o})=>{const a=s.createBuffer(1,2,44100),c=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(s,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},f=()=>c.connect(l),d=()=>c.disconnect(l);return t(s,c),r(Ls(h,l),f,d)},Qb=(t,e)=>(n,r)=>{const s=n.createConvolver();if(ut(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),Je(s,r,"buffer"),r.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>o=>{if(o>2)throw t();return i.call(s,o)}),r.channelCountMode==="max"))throw t();return e(s,"channelCountMode",i=>()=>i.call(s),i=>o=>{if(o==="max")throw t();return i.call(s,o)}),s},Ap=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return ut(n,e),tt(n,e,"delayTime"),n},Jb=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(ut(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return tt(r,n,"attack"),tt(r,n,"knee"),tt(r,n,"ratio"),tt(r,n,"release"),tt(r,n,"threshold"),r},Ut=(t,e)=>{const n=t.createGain();return ut(n,e),tt(n,e,"gain"),n},ew=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const s=e.createIIRFilter(r.feedforward,r.feedback);return ut(s,r),s};function tw(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function nw(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function Dh(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=nw(n,e),n[0]+=t[r];return n}const rw=(t,e,n,r)=>(s,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=Ep(i,s.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),d=u instanceof Float64Array?u:new Float64Array(u),p=f.length,g=d.length,_=Math.min(p,g);if(p===0||p>20)throw r();if(f[0]===0)throw e();if(g===0||g>20)throw r();if(d[0]===0)throw e();if(f[0]!==1){for(let D=0;D<g;D+=1)d[D]/=f[0];for(let D=1;D<p;D+=1)f[D]/=f[0]}const y=n(s,h,o,o);y.channelCount=o,y.channelCountMode=a,y.channelInterpretation=c;const A=32,F=[],N=[],S=[];for(let D=0;D<o;D+=1){F.push(0);const q=new Float32Array(A),W=new Float32Array(A);q.fill(0),W.fill(0),N.push(q),S.push(W)}y.onaudioprocess=D=>{const q=D.inputBuffer,W=D.outputBuffer,K=q.numberOfChannels;for(let H=0;H<K;H+=1){const ne=q.getChannelData(H),re=W.getChannelData(H);F[H]=Sp(f,p,d,g,_,N[H],S[H],F[H],A,ne,re)}};const R=s.sampleRate/2;return Ls({get bufferSize(){return h},get channelCount(){return y.channelCount},set channelCount(D){y.channelCount=D},get channelCountMode(){return y.channelCountMode},set channelCountMode(D){y.channelCountMode=D},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(D){y.channelInterpretation=D},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener(...D){return y.addEventListener(D[0],D[1],D[2])},dispatchEvent(...D){return y.dispatchEvent(D[0])},getFrequencyResponse(D,q,W){if(D.length!==q.length||q.length!==W.length)throw t();const K=D.length;for(let H=0;H<K;H+=1){const ne=-Math.PI*(D[H]/R),re=[Math.cos(ne),Math.sin(ne)],T=Dh(d,re),v=Dh(f,re),E=tw(T,v);q[H]=Math.sqrt(E[0]*E[0]+E[1]*E[1]),W[H]=Math.atan2(E[1],E[0])}},removeEventListener(...D){return y.removeEventListener(D[0],D[1],D[2])}},y)},sw=(t,e)=>t.createMediaElementSource(e.mediaElement),iw=(t,e)=>{const n=t.createMediaStreamDestination();return ut(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},ow=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const r=n.slice(0,1),s=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(s,"mediaStream",{value:e}),s},aw=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const s=new MediaStream([r]),i=n.createMediaStreamSource(s);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},cw=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,lw=(t,e,n,r,s,i)=>(o,a)=>{const c=o.createOscillator();return ut(c,a),tt(c,a,"detune"),tt(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Je(c,a,"type"),e(n,()=>n(o))||Dl(c),e(r,()=>r(o))||i(c,o),e(s,()=>s(o))||Fl(c),t(o,c),c},uw=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(ut(r,n),tt(r,n,"orientationX"),tt(r,n,"orientationY"),tt(r,n,"orientationZ"),tt(r,n,"positionX"),tt(r,n,"positionY"),tt(r,n,"positionZ"),Je(r,n,"coneInnerAngle"),Je(r,n,"coneOuterAngle"),Je(r,n,"coneOuterGain"),Je(r,n,"distanceModel"),Je(r,n,"maxDistance"),Je(r,n,"panningModel"),Je(r,n,"refDistance"),Je(r,n,"rolloffFactor"),r)},hw=(t,e,n,r,s,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:f,coneOuterGain:d,distanceModel:p,maxDistance:g,orientationX:_,orientationY:y,orientationZ:A,panningModel:F,positionX:N,positionY:S,positionZ:R,refDistance:O,rolloffFactor:D,...q})=>{const W=u.createPanner();if(q.channelCount>2||q.channelCountMode==="max")throw o();ut(W,q);const K={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},H=n(u,{...K,channelInterpretation:"speakers",numberOfInputs:6}),ne=r(u,{...q,gain:1}),re=r(u,{...K,gain:1}),T=r(u,{...K,gain:0}),v=r(u,{...K,gain:0}),E=r(u,{...K,gain:0}),M=r(u,{...K,gain:0}),k=r(u,{...K,gain:0}),j=s(u,256,6,1),J=i(u,{...K,curve:new Float32Array([1,1]),oversample:"none"});let se=[_,y,A],oe=[N,S,R];const le=new Float32Array(1);j.onaudioprocess=({inputBuffer:z})=>{const Me=[c(z,le,0),c(z,le,1),c(z,le,2)];Me.some((we,de)=>we!==se[de])&&(W.setOrientation(...Me),se=Me);const Ce=[c(z,le,3),c(z,le,4),c(z,le,5)];Ce.some((we,de)=>we!==oe[de])&&(W.setPosition(...Ce),oe=Ce)},Object.defineProperty(T.gain,"defaultValue",{get:()=>0}),Object.defineProperty(v.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"defaultValue",{get:()=>0});const P={get bufferSize(){},get channelCount(){return W.channelCount},set channelCount(z){if(z>2)throw o();ne.channelCount=z,W.channelCount=z},get channelCountMode(){return W.channelCountMode},set channelCountMode(z){if(z==="max")throw o();ne.channelCountMode=z,W.channelCountMode=z},get channelInterpretation(){return W.channelInterpretation},set channelInterpretation(z){ne.channelInterpretation=z,W.channelInterpretation=z},get coneInnerAngle(){return W.coneInnerAngle},set coneInnerAngle(z){W.coneInnerAngle=z},get coneOuterAngle(){return W.coneOuterAngle},set coneOuterAngle(z){W.coneOuterAngle=z},get coneOuterGain(){return W.coneOuterGain},set coneOuterGain(z){if(z<0||z>1)throw e();W.coneOuterGain=z},get context(){return W.context},get distanceModel(){return W.distanceModel},set distanceModel(z){W.distanceModel=z},get inputs(){return[ne]},get maxDistance(){return W.maxDistance},set maxDistance(z){if(z<0)throw new RangeError;W.maxDistance=z},get numberOfInputs(){return W.numberOfInputs},get numberOfOutputs(){return W.numberOfOutputs},get orientationX(){return re.gain},get orientationY(){return T.gain},get orientationZ(){return v.gain},get panningModel(){return W.panningModel},set panningModel(z){W.panningModel=z},get positionX(){return E.gain},get positionY(){return M.gain},get positionZ(){return k.gain},get refDistance(){return W.refDistance},set refDistance(z){if(z<0)throw new RangeError;W.refDistance=z},get rolloffFactor(){return W.rolloffFactor},set rolloffFactor(z){if(z<0)throw new RangeError;W.rolloffFactor=z},addEventListener(...z){return ne.addEventListener(z[0],z[1],z[2])},dispatchEvent(...z){return ne.dispatchEvent(z[0])},removeEventListener(...z){return ne.removeEventListener(z[0],z[1],z[2])}};h!==P.coneInnerAngle&&(P.coneInnerAngle=h),f!==P.coneOuterAngle&&(P.coneOuterAngle=f),d!==P.coneOuterGain&&(P.coneOuterGain=d),p!==P.distanceModel&&(P.distanceModel=p),g!==P.maxDistance&&(P.maxDistance=g),_!==P.orientationX.value&&(P.orientationX.value=_),y!==P.orientationY.value&&(P.orientationY.value=y),A!==P.orientationZ.value&&(P.orientationZ.value=A),F!==P.panningModel&&(P.panningModel=F),N!==P.positionX.value&&(P.positionX.value=N),S!==P.positionY.value&&(P.positionY.value=S),R!==P.positionZ.value&&(P.positionZ.value=R),O!==P.refDistance&&(P.refDistance=O),D!==P.rolloffFactor&&(P.rolloffFactor=D),(se[0]!==1||se[1]!==0||se[2]!==0)&&W.setOrientation(...se),(oe[0]!==0||oe[1]!==0||oe[2]!==0)&&W.setPosition(...oe);const ee=()=>{ne.connect(W),t(ne,J,0,0),J.connect(re).connect(H,0,0),J.connect(T).connect(H,0,1),J.connect(v).connect(H,0,2),J.connect(E).connect(H,0,3),J.connect(M).connect(H,0,4),J.connect(k).connect(H,0,5),H.connect(j).connect(u.destination)},U=()=>{ne.disconnect(W),a(ne,J,0,0),J.disconnect(re),re.disconnect(H),J.disconnect(T),T.disconnect(H),J.disconnect(v),v.disconnect(H),J.disconnect(E),E.disconnect(H),J.disconnect(M),M.disconnect(H),J.disconnect(k),k.disconnect(H),H.disconnect(j),j.disconnect(u.destination)};return l(Ls(P,W),ee,U)},fw=t=>(e,{disableNormalization:n,imag:r,real:s})=>{const i=r instanceof Float32Array?r:new Float32Array(r),o=s instanceof Float32Array?s:new Float32Array(s),a=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a},qi=(t,e,n,r)=>t.createScriptProcessor(e,n,r),dw=(t,e)=>(n,r)=>{const s=r.channelCountMode;if(s==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const i=n.createStereoPanner();return ut(i,r),tt(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:o=>{if(o!==s)throw e()}}),i},pw=(t,e,n,r,s,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(p,g,_,y)=>{const A=new Float32Array(16385),F=new Float32Array(16385);for(let q=0;q<16385;q+=1){const W=q/16384*c;A[q]=Math.cos(W),F[q]=Math.sin(W)}const N=n(p,{...l,gain:0}),S=r(p,{...u,curve:A}),R=r(p,{...u,curve:a}),O=n(p,{...l,gain:0}),D=r(p,{...u,curve:F});return{connectGraph(){g.connect(N),g.connect(R.inputs===void 0?R:R.inputs[0]),g.connect(O),R.connect(_),_.connect(S.inputs===void 0?S:S.inputs[0]),_.connect(D.inputs===void 0?D:D.inputs[0]),S.connect(N.gain),D.connect(O.gain),N.connect(y,0,0),O.connect(y,0,1)},disconnectGraph(){g.disconnect(N),g.disconnect(R.inputs===void 0?R:R.inputs[0]),g.disconnect(O),R.disconnect(_),_.disconnect(S.inputs===void 0?S:S.inputs[0]),_.disconnect(D.inputs===void 0?D:D.inputs[0]),S.disconnect(N.gain),D.disconnect(O.gain),N.disconnect(y,0,0),O.disconnect(y,0,1)}}},f=(p,g,_,y)=>{const A=new Float32Array(16385),F=new Float32Array(16385),N=new Float32Array(16385),S=new Float32Array(16385),R=Math.floor(16385/2);for(let E=0;E<16385;E+=1)if(E>R){const M=(E-R)/(16384-R)*c;A[E]=Math.cos(M),F[E]=Math.sin(M),N[E]=0,S[E]=1}else{const M=E/(16384-R)*c;A[E]=1,F[E]=0,N[E]=Math.cos(M),S[E]=Math.sin(M)}const O=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),D=n(p,{...l,gain:0}),q=r(p,{...u,curve:A}),W=n(p,{...l,gain:0}),K=r(p,{...u,curve:F}),H=r(p,{...u,curve:a}),ne=n(p,{...l,gain:0}),re=r(p,{...u,curve:N}),T=n(p,{...l,gain:0}),v=r(p,{...u,curve:S});return{connectGraph(){g.connect(O),g.connect(H.inputs===void 0?H:H.inputs[0]),O.connect(D,0),O.connect(W,0),O.connect(ne,1),O.connect(T,1),H.connect(_),_.connect(q.inputs===void 0?q:q.inputs[0]),_.connect(K.inputs===void 0?K:K.inputs[0]),_.connect(re.inputs===void 0?re:re.inputs[0]),_.connect(v.inputs===void 0?v:v.inputs[0]),q.connect(D.gain),K.connect(W.gain),re.connect(ne.gain),v.connect(T.gain),D.connect(y,0,0),ne.connect(y,0,0),W.connect(y,0,1),T.connect(y,0,1)},disconnectGraph(){g.disconnect(O),g.disconnect(H.inputs===void 0?H:H.inputs[0]),O.disconnect(D,0),O.disconnect(W,0),O.disconnect(ne,1),O.disconnect(T,1),H.disconnect(_),_.disconnect(q.inputs===void 0?q:q.inputs[0]),_.disconnect(K.inputs===void 0?K:K.inputs[0]),_.disconnect(re.inputs===void 0?re:re.inputs[0]),_.disconnect(v.inputs===void 0?v:v.inputs[0]),q.disconnect(D.gain),K.disconnect(W.gain),re.disconnect(ne.gain),v.disconnect(T.gain),D.disconnect(y,0,0),ne.disconnect(y,0,0),W.disconnect(y,0,1),T.disconnect(y,0,1)}}},d=(p,g,_,y,A)=>{if(g===1)return h(p,_,y,A);if(g===2)return f(p,_,y,A);throw s()};return(p,{channelCount:g,channelCountMode:_,pan:y,...A})=>{if(_==="max")throw s();const F=t(p,{...A,channelCount:1,channelCountMode:_,numberOfInputs:2}),N=n(p,{...A,channelCount:g,channelCountMode:_,gain:1}),S=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:y});let{connectGraph:R,disconnectGraph:O}=d(p,g,N,S,F);Object.defineProperty(S.gain,"defaultValue",{get:()=>0}),Object.defineProperty(S.gain,"maxValue",{get:()=>1}),Object.defineProperty(S.gain,"minValue",{get:()=>-1});const D={get bufferSize(){},get channelCount(){return N.channelCount},set channelCount(H){N.channelCount!==H&&(q&&O(),{connectGraph:R,disconnectGraph:O}=d(p,H,N,S,F),q&&R()),N.channelCount=H},get channelCountMode(){return N.channelCountMode},set channelCountMode(H){if(H==="clamped-max"||H==="max")throw s();N.channelCountMode=H},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(H){N.channelInterpretation=H},get context(){return N.context},get inputs(){return[N]},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get pan(){return S.gain},addEventListener(...H){return N.addEventListener(H[0],H[1],H[2])},dispatchEvent(...H){return N.dispatchEvent(H[0])},removeEventListener(...H){return N.removeEventListener(H[0],H[1],H[2])}};let q=!1;const W=()=>{R(),q=!0},K=()=>{O(),q=!1};return i(Ls(D,F),W,K)}},mw=(t,e,n,r,s,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);ut(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();Je(l,{curve:u},"curve"),Je(l,c,"oversample");let h=null,f=!1;return o(l,"curve",g=>()=>g.call(l),g=>_=>(g.call(l,_),f&&(r(_)&&h===null?h=t(a,l):!r(_)&&h!==null&&(h(),h=null)),_)),s(l,()=>{f=!0,r(l.curve)&&(h=t(a,l))},()=>{f=!1,h!==null&&(h(),h=null)})},gw=(t,e,n,r,s)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();ut(l,c),ut(u,c);const h=n(i,{...c,gain:1}),f=n(i,{...c,gain:-1}),d=n(i,{...c,gain:1}),p=n(i,{...c,gain:-1});let g=null,_=!1,y=null;const A={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(S){h.channelCount=S,f.channelCount=S,l.channelCount=S,d.channelCount=S,u.channelCount=S,p.channelCount=S},get channelCountMode(){return l.channelCountMode},set channelCountMode(S){h.channelCountMode=S,f.channelCountMode=S,l.channelCountMode=S,d.channelCountMode=S,u.channelCountMode=S,p.channelCountMode=S},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(S){h.channelInterpretation=S,f.channelInterpretation=S,l.channelInterpretation=S,d.channelInterpretation=S,u.channelInterpretation=S,p.channelInterpretation=S},get context(){return l.context},get curve(){return y},set curve(S){if(S!==null&&S.length<2)throw e();if(S===null)l.curve=S,u.curve=S;else{const R=S.length,O=new Float32Array(R+2-R%2),D=new Float32Array(R+2-R%2);O[0]=S[0],D[0]=-S[R-1];const q=Math.ceil((R+1)/2),W=(R+1)/2-1;for(let K=1;K<q;K+=1){const H=K/q*W,ne=Math.floor(H),re=Math.ceil(H);O[K]=ne===re?S[ne]:(1-(H-ne))*S[ne]+(1-(re-H))*S[re],D[K]=ne===re?-S[R-1-ne]:-((1-(H-ne))*S[R-1-ne])-(1-(re-H))*S[R-1-re]}O[q]=R%2===1?S[q-1]:(S[q-2]+S[q-1])/2,l.curve=O,u.curve=D}y=S,_&&(r(y)&&g===null?g=t(i,h):g!==null&&(g(),g=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(S){l.oversample=S,u.oversample=S},addEventListener(...S){return h.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return h.dispatchEvent(S[0])},removeEventListener(...S){return h.removeEventListener(S[0],S[1],S[2])}};o!==null&&(A.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==A.oversample&&(A.oversample=a);const F=()=>{h.connect(l).connect(d),h.connect(f).connect(u).connect(p).connect(d),_=!0,r(y)&&(g=t(i,h))},N=()=>{h.disconnect(l),l.disconnect(d),h.disconnect(f),f.disconnect(u),u.disconnect(p),p.disconnect(d),_=!1,g!==null&&(g(),g=null)};return s(Ls(A,d),F,N)},Rt=()=>new DOMException("","NotSupportedError"),_w={numberOfChannels:1},vw=(t,e,n,r,s)=>class extends t{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:f}={..._w,...l},d=r(h,u,f);e(bi,()=>bi(d))||d.addEventListener("statechange",(()=>{let p=0;const g=_=>{this._state==="running"&&(p>0?(d.removeEventListener("statechange",g),_.stopImmediatePropagation(),this._waitForThePromiseToSettle(_)):p+=1)};return g})()),super(d,h),this._length=u,this._nativeOfflineAudioContext=d,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,vp(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},yw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},bw=(t,e,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),h={...yw,...l},f=n(u,h),d=i(u),p=d?r():null,g=c.sampleRate/2;super(c,!1,f,p),this._detune=e(this,d,f.detune,153600,-153600),this._frequency=e(this,d,f.frequency,g,-g),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){Ps(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Bn(this)&&Vi(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},ww=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let f=n(u);const d=Ct(f,h);if(!d){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:o===null?void 0:o,type:f.type};f=e(h,p),a!==null&&f.start(a),c!==null&&f.stop(c)}return i.set(h,f),d?(await t(h,u.detune,f.detune),await t(h,u.frequency,f.frequency)):(await r(h,u.detune,f.detune),await r(h,u.frequency,f.frequency)),await s(u,h,f),f};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const f=i.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},Tw={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Mw=(t,e,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),h={...Tw,...l},f=n(u,h),d=i(u),p=d?r():null;super(c,!1,f,p),this._nativePannerNode=f,this._orientationX=e(this,d,f.orientationX,Nt,Lt),this._orientationY=e(this,d,f.orientationY,Nt,Lt),this._orientationZ=e(this,d,f.orientationZ,Nt,Lt),this._positionX=e(this,d,f.positionX,Nt,Lt),this._positionY=e(this,d,f.positionY,Nt,Lt),this._positionZ=e(this,d,f.positionZ,Nt,Lt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},Sw=(t,e,n,r,s,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const f=async(d,p)=>{let g=null,_=i(d);const y={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation},A={...y,coneInnerAngle:_.coneInnerAngle,coneOuterAngle:_.coneOuterAngle,coneOuterGain:_.coneOuterGain,distanceModel:_.distanceModel,maxDistance:_.maxDistance,panningModel:_.panningModel,refDistance:_.refDistance,rolloffFactor:_.rolloffFactor},F=Ct(_,p);if("bufferSize"in _)g=r(p,{...y,gain:1});else if(!F){const N={...A,orientationX:_.orientationX.value,orientationY:_.orientationY.value,orientationZ:_.orientationZ.value,positionX:_.positionX.value,positionY:_.positionY.value,positionZ:_.positionZ.value};_=s(p,N)}if(u.set(p,g===null?_:g),g!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const K=new o(6,d.context.length,p.sampleRate),H=e(K,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});H.connect(K.destination),h=(async()=>{const ne=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map(async(re,T)=>{const v=n(K,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:T===0?1:0});return await a(K,re,v.offset),v}));for(let re=0;re<6;re+=1)ne[re].connect(H,0,re),ne[re].start(0);return l(K)})()}const N=await h,S=r(p,{...y,gain:1});await c(d,p,S);const R=[];for(let K=0;K<N.numberOfChannels;K+=1)R.push(N.getChannelData(K));let O=[R[0][0],R[1][0],R[2][0]],D=[R[3][0],R[4][0],R[5][0]],q=r(p,{...y,gain:1}),W=s(p,{...A,orientationX:O[0],orientationY:O[1],orientationZ:O[2],positionX:D[0],positionY:D[1],positionZ:D[2]});S.connect(q).connect(W.inputs[0]),W.connect(g);for(let K=128;K<N.length;K+=128){const H=[R[0][K],R[1][K],R[2][K]],ne=[R[3][K],R[4][K],R[5][K]];if(H.some((re,T)=>re!==O[T])||ne.some((re,T)=>re!==D[T])){O=H,D=ne;const re=K/p.sampleRate;q.gain.setValueAtTime(0,re),q=r(p,{...y,gain:0}),W=s(p,{...A,orientationX:O[0],orientationY:O[1],orientationZ:O[2],positionX:D[0],positionY:D[1],positionZ:D[2]}),q.gain.setValueAtTime(1,re),S.connect(q).connect(W.inputs[0]),W.connect(g)}}return g}return F?(await t(p,d.orientationX,_.orientationX),await t(p,d.orientationY,_.orientationY),await t(p,d.orientationZ,_.orientationZ),await t(p,d.positionX,_.positionX),await t(p,d.positionY,_.positionY),await t(p,d.positionZ,_.positionZ)):(await a(p,d.orientationX,_.orientationX),await a(p,d.orientationY,_.orientationY),await a(p,d.orientationZ,_.orientationZ),await a(p,d.positionX,_.positionX),await a(p,d.positionY,_.positionY),await a(p,d.positionZ,_.positionZ)),Bs(_)?await c(d,p,_.inputs[0]):await c(d,p,_),_};return{render(d,p){const g=u.get(p);return g!==void 0?Promise.resolve(g):f(d,p)}}},Ew={disableNormalization:!1},Cw=(t,e,n,r)=>class Ip{constructor(i,o){const a=e(i),c=r({...Ew,...o}),l=t(a,c);return n.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Ip.prototype||n.has(i)}},Aw=(t,e)=>(n,r,s)=>(t(r).replay(s),e(r,n,s)),Iw=(t,e,n)=>async(r,s,i)=>{const o=t(r);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const f=await e(l).render(l,s),d=r.context.destination;!n(l)&&(r!==d||!n(r))&&f.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},Nw=(t,e,n)=>async(r,s,i)=>{const o=e(r);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await t(a).render(a,s);n(a)||u.connect(i,c)}))},Pw=(t,e,n,r)=>s=>t(bi,()=>bi(s))?Promise.resolve(t(r,r)).then(i=>{if(!i){const o=n(s,512,0,1);s.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>s.currentTime,o.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const o=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(s.destination),s.startRendering()}),kw=t=>(e,n)=>{t.set(e,n)},Ow=t=>(e,n)=>t.set(e,n),xw=(t,e,n,r,s,i,o,a)=>(c,l)=>n(c).render(c,l).then(()=>Promise.all(Array.from(r(l)).map(u=>n(u).render(u,l)))).then(()=>s(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),Ol(u)):e(i,()=>i(u))||a(u),t.add(u),u)),Rw={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Dw=(t,e,n,r,s,i)=>class extends t{constructor(a,c){const l=s(a),u={...Rw,...c},h=n(l,u),f=i(l),d=f?r():null;super(a,!1,h,d),this._pan=e(this,f,h.pan)}get pan(){return this._pan}},Fw=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Ct(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,h)}return i.set(c,l),u?await t(c,a.pan,l.pan):await r(c,a.pan,l.pan),Bs(l)?await s(a,c,l.inputs[0]):await s(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Bw=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},Lw=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),s=URL.createObjectURL(n);let i=!1,o=!1;try{await r.audioWorklet.addModule(s);const a=new t(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await r.startRendering()}catch{}finally{URL.revokeObjectURL(s)}return i&&!o},Vw=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{n.oncomplete=()=>{r.disconnect(),s(n.currentTime!==0)},n.startRendering()})},Uw=()=>new DOMException("","UnknownError"),jw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},$w=(t,e,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),h={...jw,...l},f=n(u,h),p=i(u)?r():null;super(c,!0,f,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},qw=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Ct(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,l)}return r.set(o,a),Bs(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},Ww=()=>typeof window>"u"?null:window,zw=(t,e)=>n=>{n.copyFromChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)r[h]=l[h+o]},n.copyToChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=r[h]}},Hw=t=>e=>{e.copyFromChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyToChannel)},Gw=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",s=>()=>{const i=s.call(e);return i===r?null:i},s=>i=>s.call(e,i===null?r:i))},Yw=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const s=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let c=0;c<a;c+=1)s.connect(r,0,c)},()=>s.disconnect(r))},Np=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),Pp=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Wi=(t,e,n,r)=>{let s=t;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:o}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,{get:n(i),set:r(o)})},Kw=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),Xw=t=>({...t,channelCount:t.numberOfOutputs}),Zw=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},kp=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;kp(t,e,n+1e-7)}},Qw=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Jw=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},eT=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Bl=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},Op=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Ll=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},tT=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},nT=t=>{t.start=(e=>(n=0,r=0,s)=>{const i=t.buffer,o=i===null?r:Math.min(i.duration,r);i!==null&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,s)})(t.start)},xp=(t,e)=>{const n=e.createGain();t.connect(n);const r=(s=>()=>{s.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),Ls(t,n),t.stop=(s=>{let i=!1;return(o=0)=>{if(i)try{s.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else s.call(t,o),i=!0}})(t.stop)},Vs=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},rT=My(zr),sT=Ny(zr),iT=j1(ha),Rp=new WeakMap,oT=ib(Rp),gn=_1(new Map,new WeakMap),En=Ww(),Dp=Db(gn,Cn),Vl=sb(Pt),wt=Iw(Pt,Vl,Fr),aT=Ry(Dp,Ze,wt),Ke=cb(ua),$n=cw(En),He=Eb($n),Fp=new WeakMap,Bp=Z1(Vs),zi=Vb(En),Ul=wb(zi),jl=Tb(En),Lp=Mb(En),wi=jb(En),it=i1(Sy(hp),Iy(rT,sT,Oo,iT,xo,Pt,oT,Li,Ze,zr,Bn,Fr,yo),gn,gb(Dc,xo,Pt,Ze,yi,Bn),Cn,fa,Rt,B1(Oo,Dc,Pt,Ze,yi,Ke,Bn,He),W1(Fp,Pt,mn),Bp,Ke,Ul,jl,Lp,He,wi),cT=xy(it,aT,Cn,Dp,Ke,He),$l=new WeakSet,Fh=Fb(En),Vp=P1(new Uint32Array(1)),ql=zw(Vp,Cn),Wl=Hw(Vp),Up=Fy($l,gn,Rt,Fh,$n,Bw(Fh),ql,Wl),da=Py(Ut),jp=Nw(Vl,Ui,Fr),An=S1(jp),Us=Lb(da,gn,Qw,Jw,eT,Bl,Op,Ll,nT,Gw(Wi),xp),In=Aw(ob(Ui),jp),lT=Vy(An,Us,Ze,In,wt),_n=o1(Ey(fp),Fp,kl,a1,_y,vy,yy,by,wy,Oc,lp,zi,kp),uT=Ly(it,lT,_n,gt,Us,Ke,He,Vs),hT=Yy(it,Ky,Cn,gt,Ub(Ut,Wi),Ke,He,wt),fT=g1(An,Cp,Ze,In,wt),Hr=Ow(Rp),dT=m1(it,_n,fT,fa,Cp,Ke,He,Hr),gr=xb(zr,jl),pT=Yw(gt,gr),_r=Yb(zi,pT),mT=b1(_r,Ze,wt),gT=y1(it,mT,_r,Ke,He),_T=M1($i,Ze,wt),vT=T1(it,_T,$i,Ke,He,Xw),yT=Zb(da,Us,Ut,gr),js=Xb(da,gn,yT,Bl,Ll),bT=N1(An,js,Ze,In,wt),wT=I1(it,_n,bT,js,Ke,He,Vs),$p=Qb(Rt,Wi),TT=x1($p,Ze,wt),MT=O1(it,TT,$p,Ke,He,Hr),ST=U1(An,Ap,Ze,In,wt),ET=V1(it,_n,ST,Ap,Ke,He,Hr),qp=Jb(Rt),CT=Y1(An,qp,Ze,In,wt),AT=G1(it,_n,CT,qp,Rt,Ke,He,Hr),IT=nb(An,Ut,Ze,In,wt),NT=tb(it,_n,IT,Ut,Ke,He),PT=rw(fa,gt,qi,Rt),pa=Pw(gn,Ut,qi,Vw(Ut,$n)),kT=mb(Us,Ze,$n,wt,pa),OT=ew(PT),xT=db(it,OT,kT,Ke,He,Hr),RT=Xy(_n,_r,js,qi,Rt,Np,He,Wi),Wp=new WeakMap,DT=Ob(hT,RT,Bp,He,Wp,Vs),zp=lw(da,gn,Bl,Op,Ll,xp),FT=ww(An,zp,Ze,In,wt),BT=bw(it,_n,zp,FT,Ke,He,Vs),Hp=C1(Us),LT=gw(Hp,gt,Ut,Pp,gr),ma=mw(Hp,gt,LT,Pp,gr,zi,Wi),VT=hw(Oo,gt,_r,Ut,qi,ma,Rt,xo,Np,gr),Gp=uw(VT),UT=Sw(An,_r,js,Ut,Gp,Ze,$n,In,wt,pa),jT=Mw(it,_n,Gp,UT,Ke,He,Hr),$T=fw(Cn),qT=Cw($T,Ke,new WeakSet,Zw),WT=pw(_r,$i,Ut,ma,Rt,gr),Yp=dw(WT,Rt),zT=Fw(An,Yp,Ze,In,wt),HT=Dw(it,_n,Yp,zT,Ke,He),GT=qw(ma,Ze,wt),YT=$w(it,gt,ma,GT,Ke,He,Hr),Kp=Cb(En),zl=Q1(En),Xp=new WeakMap,KT=lb(Xp,$n),XT=Kp?Ay(gn,Rt,X1(En),zl,J1(Ty),Ke,KT,He,wi,new WeakMap,new WeakMap,Lw(wi,$n),En):void 0,ZT=Sb(Ul,He),QT=F1($l,gn,D1,K1,new WeakSet,Ke,ZT,Po,bi,ql,Wl),Zp=d1(XT,cT,Up,uT,dT,gT,vT,wT,MT,QT,ET,AT,NT,xT,DT,BT,jT,qT,HT,YT),JT=Ab(it,sw,Ke,He),eM=Nb(it,iw,Ke,He),tM=Pb(it,ow,Ke,He),nM=aw(gt,He),rM=kb(it,nM,Ke),sM=Gy(Zp,gt,Rt,Uw,JT,eM,tM,rM,zi),Hl=ub(Wp),iM=ky(Hl),Qp=E1(Cn),oM=$1(Hl),Jp=z1(Cn),em=new WeakMap,aM=rb(em,mn),cM=Gb(Qp,Cn,gt,_r,$i,js,Ut,qi,Rt,Jp,zl,aM,gr),lM=qb(gt,cM,Ut,Rt,gr),uM=f1(An,Qp,Us,_r,$i,js,Ut,oM,Jp,zl,Ze,wi,$n,In,wt,pa),hM=ab(Xp),fM=kw(em),Bh=Kp?l1(iM,it,_n,uM,lM,Pt,hM,Ke,He,wi,Kw,fM,tT,Vs):void 0,dM=R1(Rt,$n),pM=xw($l,gn,Vl,Hl,pa,Po,ql,Wl),mM=vw(Zp,gn,gt,dM,pM),gM=_b(ua,Ul),_M=vb(Pl,jl),vM=yb(kl,Lp),yM=bb(ua,He);function zt(t){return typeof t>"u"}function Fe(t){return!zt(t)}function bM(t){return typeof t=="function"}function Br(t){return typeof t=="number"}function kr(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function wM(t){return typeof t=="boolean"}function dn(t){return Array.isArray(t)}function Vn(t){return typeof t=="string"}function io(t){return Vn(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function Pe(t,e){if(!t)throw new Error(e)}function fr(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function tm(t){!t.isOffline&&t.state!=="running"&&Gl('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let nm=!1,Lh=!1;function Vh(t){nm=t}function TM(t){zt(t)&&nm&&!Lh&&(Lh=!0,Gl("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let rm=console;function MM(...t){rm.log(...t)}function Gl(...t){rm.warn(...t)}function SM(t){return new sM(t)}function EM(t,e,n){return new mM(t,e,n)}const Or=typeof self=="object"?self:null,CM=Or&&(Or.hasOwnProperty("AudioContext")||Or.hasOwnProperty("webkitAudioContext"));function AM(t,e,n){return Pe(Fe(Bh),"This node only works in a secure context (https or localhost)"),new Bh(t,e,n)}function vn(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function ot(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}class IM{constructor(e,n,r,s){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Lr(t){return vM(t)}function lr(t){return _M(t)}function bo(t){return yM(t)}function as(t){return gM(t)}function NM(t){return t instanceof Up}function PM(t,e){return t==="value"||Lr(e)||lr(e)||NM(e)}function vs(t,...e){if(!e.length)return t;const n=e.shift();if(kr(t)&&kr(n))for(const r in n)PM(r,n[r])?t[r]=n[r]:kr(n[r])?(t[r]||Object.assign(t,{[r]:{}}),vs(t[r],n[r])):Object.assign(t,{[r]:n[r]});return vs(t,...e)}function kM(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}function he(t,e,n=[],r){const s={},i=Array.from(e);if(kr(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(vs(s,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())),i.length===1&&kr(i[0]))vs(s,i[0]);else for(let o=0;o<n.length;o++)Fe(i[o])&&(s[n[o]]=i[o]);return vs(t,s)}function OM(t){return t.constructor.getDefaults()}function ys(t,e){return zt(t)?e:t}function Uh(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class qn{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Or&&this.toString()===Or.TONE_DEBUG_CLASS)&&MM(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}qn.version=cp;const Yl=1e-6;function ks(t,e){return t>e+Yl}function Uc(t,e){return ks(t,e)||rn(t,e)}function Bo(t,e){return t+Yl<e}function rn(t,e){return Math.abs(t-e)<Yl}function xM(t,e,n){return Math.max(Math.min(t,n),e)}class Zt extends qn{constructor(){super(),this.name="Timeline",this._timeline=[];const e=he(Zt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Pe(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];Pe(Uc(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(rn(this._timeline[n].time,e)){for(let r=n;r>=0&&rn(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Uc(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][n]<=e)return s-1;for(;r<i;){let o=Math.floor(r+(i-r)/2);const a=this._timeline[o],c=this._timeline[o+1];if(rn(a[n],e)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(rn(u[n],e))o=l;else break}return o}else{if(Bo(a[n],e)&&ks(c[n],e))return o;ks(a[n],e)?i=o:r=o+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){const r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let s=this._search(e),i=this._search(n);return s!==-1&&i!==-1?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===n&&(i-=1),this._iterate(r,s,i)):s===-1&&this._iterate(r,0,i),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){const r=this._search(e);if(r!==-1&&rn(this._timeline[r].time,e)){let s=r;for(let i=r;i>=0&&rn(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{n(i)},s,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const sm=[];function ga(t){sm.push(t)}function RM(t){sm.forEach(e=>e(t))}const im=[];function _a(t){im.push(t)}function DM(t){im.forEach(e=>e(t))}class Hi extends qn{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(s=>{zt(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(n)}),this}once(e,n){const r=(...s)=>{n(...s),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(s=>{if(zt(this._events)&&(this._events={}),this._events.hasOwnProperty(s))if(zt(n))this._events[s]=[];else{const i=this._events[s];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let s=0,i=r.length;s<i;s++)r[s].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const r=Object.getOwnPropertyDescriptor(Hi.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class om extends Hi{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Gi extends om{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Zt,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletPromise=null;const r=he(Gi.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=SM({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new IM(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(RM(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Pe(as(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Pe(as(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Pe(as(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Pe(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Pe(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Pe(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Pe(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return AM(this.rawContext,e,n)}addAudioWorkletModule(e){return ot(this,void 0,void 0,function*(){Pe(Fe(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return ot(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return as(this._context)?this._context.resume():Promise.resolve()}close(){return ot(this,void 0,void 0,function*(){as(this._context)&&(yield this._context.close()),this._initialized&&DM(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=n,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const r=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:r,time:i+n})};return s(),r}}class FM extends om{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return ot(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function nt(t,e){dn(e)?e.forEach(n=>nt(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function am(t,e){dn(e)?e.forEach(n=>am(t,n)):Object.defineProperty(t,e,{writable:!0})}const ze=()=>{};class Xe extends qn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ze;const e=he(Xe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Vn(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:ze,onload:ze,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Kt().sampleRate}set(e){return e instanceof Xe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ot(this,void 0,void 0,function*(){const n=Xe.load(e).then(r=>{this.set(r),this.onload(this)});Xe.downloads.push(n);try{yield n}finally{const r=Xe.downloads.indexOf(n);Xe.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=dn(e)&&e[0].length>0,r=n?e.length:1,s=n?e[0].length:e.length,i=Kt(),o=i.createBuffer(r,s,i.sampleRate),a=!n&&r===1?[e]:e;for(let c=0;c<r;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(Br(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const r=this.numberOfChannels;for(let s=0;s<r;s++){const i=this.toArray(s);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(s=>s/r),this.fromArray(n)}return this}toArray(e){if(Br(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let r=0;r<this.numberOfChannels;r++)n[r]=this.getChannelData(r);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){Pe(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),s=Math.floor(n*this.sampleRate);Pe(r<s,"The start time must be less than the end time");const i=s-r,o=Kt().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(r,s),a);return new Xe(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Xe().fromArray(e)}static fromUrl(e){return ot(this,void 0,void 0,function*(){return yield new Xe().load(e)})}static load(e){return ot(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const c=n[1].split("|");let l=c[0];for(const u of c)if(Xe.supportsType(u)){l=u;break}e=e.replace(n[0],l)}const r=Xe.baseUrl===""||Xe.baseUrl.endsWith("/")?Xe.baseUrl:Xe.baseUrl+"/",s=document.createElement("a");s.href=r+e,s.pathname=(s.pathname+s.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(s.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield Kt().decodeAudioData(o)})}static supportsType(e){const n=e.split("."),r=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return ot(this,void 0,void 0,function*(){for(yield Promise.resolve();Xe.downloads.length;)yield Xe.downloads[0]})}}Xe.baseUrl="";Xe.downloads=[];class Kl extends Gi{constructor(){super({clockSource:"offline",context:bo(arguments[0])?arguments[0]:EM(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:bo(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=bo(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ot(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(e=!0){return ot(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new Xe(n)})}close(){return Promise.resolve()}}const cm=new FM;let us=cm;function Kt(){return us===cm&&CM&&BM(new Gi),us}function BM(t,e=!1){e&&us.dispose(),as(t)?us=new Gi(t):bo(t)?us=new Kl(t):us=t}if(Or&&!Or.TONE_SILENCE_LOGGING){const e=` * Tone.js v${cp} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function LM(t){return Math.pow(10,t/20)}function VM(t){return 20*(Math.log(t)/Math.LN10)}function lm(t){return Math.pow(2,t/12)}let va=440;function UM(){return va}function jM(t){va=t}function jc(t){return Math.round(um(t))}function um(t){return 69+12*Math.log2(t/va)}function $M(t){return va*Math.pow(2,(t-69)/12)}class Xl extends qn{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const r=parseInt(e,10),s=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/r)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let s=0;return e&&e!=="0"&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s+=this._beatsToUnits(parseFloat(r)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Xl&&this.fromType(this._val),zt(this._val))return this._noArg();if(Vn(this._val)&&zt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(kr(this._val)){let e=0;for(const n in this._val)if(Fe(this._val[n])){const r=this._val[n];e+=new this.constructor(this.context,n).valueOf()*r}return e}if(Fe(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return Vn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class an extends Xl{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new an(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const r=new this.constructor(this.context,e).valueOf(),s=this.valueOf(),a=Math.round(s/r)*r-s;return s+a*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let r=n[0],s=new an(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new an(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(s-e)&&(r=i,s=o)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const r=Math.floor(n/this._getTimeSignature());let s=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[r,n,s].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return jc(this.toFrequency())}_now(){return this.context.now()}}class Wt extends an{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return UM()}static set A4(e){jM(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Wt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const s=qM[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?s:Wt.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let s=1;return e&&e!=="0"&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s*=this._beatsToUnits(parseFloat(r)/4)),s}}})}transpose(e){return new Wt(this.context,this.valueOf()*lm(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return jc(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/Wt.A4);let r=Math.round(12*n)+57;const s=Math.floor(r/12);return s<0&&(r+=-12*s),WM[r%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return $M(e)}static ftom(e){return jc(e)}}const qM={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},WM=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function jh(t,e){return new Wt(Kt(),t,e)}class oi extends an{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Vt extends qn{constructor(){super();const e=he(Vt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Kt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return TM(e),new an(this.context,e).toSeconds()}toFrequency(e){return new Wt(this.context,e).toFrequency()}toTicks(e){return new oi(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(r=>{zt(e[r])&&delete n[r]}),n}get(){const e=OM(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const r=this[n];Fe(r)&&Fe(r.value)&&Fe(r.setValueAtTime)?e[n]=r.value:r instanceof Vt?e[n]=r._getPartialProperties(e[n]):dn(r)||Br(r)||Vn(r)||wM(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&Fe(this[n])&&(this[n]&&Fe(this[n].value)&&Fe(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof Vt?this[n].set(e[n]):this[n]=e[n])}),this}}class Zl extends Zt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return fr(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){const r=this._search(n);for(let s=r;s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,n){const r=this._search(n);if(r!==-1)for(let s=r;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class Qe extends Vt{constructor(){super(he(Qe.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=he(Qe.getDefaults(),arguments,["param","units","convert"]);for(Pe(Fe(e.param)&&(Lr(e.param)||e.param instanceof Qe),"param must be an AudioParam");!Lr(e.param);)e.param=e.param._param;this._swappable=Fe(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Zt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Fe(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Vt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Fe(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Fe(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return Fe(this.maxValue)&&Fe(this.minValue)&&fr(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?LM(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?VM(e):e}setValueAtTime(e,n){const r=this.toSeconds(n),s=this._fromType(e);return Pe(isFinite(s)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,r),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),s=this._events.get(n);let i=this._initialValue;if(s===null)i=this._initialValue;else if(s.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const o=this._events.getBefore(s.time);let a;o===null?a=this._initialValue:a=o.value,s.type==="setTargetAtTime"&&(i=this._exponentialApproach(s.time,a,s.value,s.constant,n))}else if(r===null)i=s.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let o=s.value;if(s.type==="setTargetAtTime"){const a=this._events.getBefore(s.time);a===null?o=this._initialValue:o=a.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(s.time,o,r.time,r.value,n):i=this._exponentialInterpolate(s.time,o,r.time,r.value,n)}else i=s.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const r=this._fromType(e),s=this.toSeconds(n);return Pe(isFinite(r)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:s,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(r,s),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=rn(r,0)?this._minOutput:r,this._assertRange(r);const s=this.toSeconds(n);return Pe(isFinite(r)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(r,s),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);const s=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,s),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){const s=this._fromType(e);Pe(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(s),Pe(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(s,i,r),this}setValueCurveAtTime(e,n,r,s=1){r=this.toSeconds(r),n=this.toSeconds(n);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),n);const o=r/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*s;this.linearRampToValueAtTime(this._toType(c),n+a*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return Pe(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));Pe(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);const s=this._events.get(n),i=this._events.getAfter(n);return s&&rn(s.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){const s=this._events.getAfter(r.time),i=s?s.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,s=>{s.type==="cancelScheduledValues"?e.cancelScheduledValues(s.time):s.type==="setTargetAtTime"?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){Pe(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,s,i){return r+(n-r)*Math.exp(-(i-e)/s)}_linearInterpolate(e,n,r,s,i){return n+(s-n)*((i-e)/(r-e))}_exponentialInterpolate(e,n,r,s,i){return n*Math.pow(s/n,(i-e)/(r-e))}}class De extends Vt{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Fe(this.input)?Lr(this.input)||this.input instanceof Qe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Fe(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Fe(e)&&(e instanceof De||lr(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Pe(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return $s(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Gl("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return zM(this,e,n,r),this}chain(...e){return $c(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),Fe(this.input)&&(this.input instanceof De?this.input.dispose():lr(this.input)&&this.input.disconnect()),Fe(this.output)&&(this.output instanceof De?this.output.dispose():lr(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function $c(...t){const e=t.shift();t.reduce((n,r)=>(n instanceof De?n.connect(r):lr(n)&&$s(n,r),r),e)}function $s(t,e,n=0,r=0){for(Pe(Fe(t),"Cannot connect from undefined node"),Pe(Fe(e),"Cannot connect to undefined node"),(e instanceof De||lr(e))&&Pe(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Pe(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof De||e instanceof Qe;)Fe(e.input)&&(e=e.input);for(;t instanceof De;)Fe(t.output)&&(t=t.output);Lr(e)?t.connect(e,n):t.connect(e,n,r)}function zM(t,e,n=0,r=0){if(Fe(e))for(;e instanceof De;)e=e.input;for(;!lr(t);)Fe(t.output)&&(t=t.output);Lr(e)?t.disconnect(e,n):lr(e)?t.disconnect(e,n,r):t.disconnect()}class Ot extends De{constructor(){super(he(Ot.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=he(Ot.getDefaults(),arguments,["gain","units"]);this.gain=new Qe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),nt(this,"gain")}static getDefaults(){return Object.assign(De.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Os extends De{constructor(e){super(e),this.onended=ze,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ot({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(De.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ze})}_startGain(e,n=1){Pe(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Pe(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ze&&(this.onended(this),this.onended=ze,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Pe(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=ze,this}}class Lo extends Os{constructor(){super(he(Lo.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=he(Lo.getDefaults(),arguments,["offset"]);$s(this._source,this._gainNode),this.offset=new Qe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Os.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ht extends De{constructor(){super(he(ht.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=he(ht.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Lo({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(De.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return Ql(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,s){return this._param.setValueCurveAtTime(e,n,r,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Ql(t,e,n,r){(e instanceof Qe||Lr(e)||e instanceof ht&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ht&&(e.overridden=!0)),$s(t,e,n,r)}class Vo extends Qe{constructor(){super(he(Vo.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Zt(1/0),this._multiplier=1;const e=he(Vo.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Qe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);const s=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/r,1));for(let a=0;a<=o;a++){const c=r*a+n,l=this._exponentialApproach(i.time,i.value,s,r,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,n){const r=this.toSeconds(n);super.setValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const r=this._fromType(e),s=this._events.get(n),i=Math.round(Math.max((n-s.time)*10,1)),o=(n-s.time)/i;for(let a=0;a<=i;a++){const c=o*a+s.time,l=this._exponentialInterpolate(s.time,s.value,n,r,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(zt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(s=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+s)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(n);return this.getTimeOfTick(s+e)-r}getTimeOfTick(e){const n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){const s=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(r.time))-s)/(r.time-n.time),a=Math.sqrt(Math.pow(s,2)-2*o*(n.ticks-e)),c=(-s+a)/o,l=(-s-a)/o;return(c>0?c:l)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const r=this.toSeconds(n),s=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+s)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class Uo extends ht{constructor(){super(he(Uo.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=he(Uo.getDefaults(),arguments,["value"]);this.input=this._param=new Vo({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(ht.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class jo extends Vt{constructor(){super(he(jo.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Zl,this._tickOffset=new Zt,this._ticksAtTime=new Zt,this._secondsAtTime=new Zt;const e=he(jo.getDefaults(),arguments,["frequency"]);this.frequency=new Uo({context:this.context,units:e.units,value:e.frequency}),nt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Vt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),Fe(n)&&this.setTicksAtTime(n,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),r=this._state.getLastState("stopped",n),s=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let o=s||r,a=s?s.ticks:0,c=null;return this._state.forEachBetween(o.time,n+this.sampleTime,l=>{let u=o.time;const h=this._tickOffset.get(l.time);h&&h.time>=o.time&&(a=h.ticks,u=h.time),o.state==="started"&&l.state!=="started"&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!=i.time&&(c={state:l.state,time:l.time,ticks:a})),o=l}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const s=this._secondsAtTime.get(e);let i=s||n,o=s?s.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.seconds,l=u.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-l,c.time!=r.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(r),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const r=this._tickOffset.get(n),s=this._state.get(n),i=Math.max(r.time,s.time),o=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,r){let s=this._state.get(e);this._state.forEachBetween(e,n,o=>{s&&s.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(s.time,e),o.time-this.sampleTime,r),s=o});let i=null;if(s&&s.state==="started"){const o=Math.max(s.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(s.time),l=a-c;let u=Math.ceil(l)-l;u=rn(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<n;){try{r(h,Math.round(this.getTicksAtTime(h)))}catch(f){i=f;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Ti extends Vt{constructor(){super(he(Ti.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=ze,this._lastUpdate=0,this._state=new Zl("stopped"),this._boundLoop=this._loop.bind(this);const e=he(Ti.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new jo({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,nt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Vt.getDefaults(),{callback:ze,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){tm(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(s+e,r)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":const s=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,s);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,s)=>{this.callback(r,s)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Hi.mixin(Ti);class Jl extends qn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=he(Jl.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ze,onload:ze,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Pe(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=ze,s=ze){return Vn(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Xe(this.baseUrl+n,r,s))):this._buffers.set(e.toString(),new Xe(n,r,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class hs extends oi{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class HM extends Vt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Zt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}ga(t=>{t.draw=new HM({context:t})});_a(t=>{t.draw.dispose()});class GM extends qn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Pe(Fe(e.time),"Events must have a time property"),Pe(Fe(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new YM(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let r,s=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,s=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,s=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,s=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,s=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const n=e.parent,r=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rotateRight(e){const n=e.parent,r=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let s=1;s<n.length;s++)n[s].low>r.low&&(r=n[s]);return r.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}forEachFrom(e,n){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class YM{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Vr extends De{constructor(){super(he(Vr.getDefaults(),arguments,["volume"])),this.name="Volume";const e=he(Vr.getDefaults(),arguments,["volume"]);this.input=this.output=new Ot({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,nt(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(De.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class $o extends De{constructor(){super(he($o.getDefaults(),arguments)),this.name="Destination",this.input=new Vr({context:this.context}),this.output=new Ot({context:this.context}),this.volume=this.input.volume;const e=he($o.getDefaults(),arguments);$c(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(De.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),$c(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}ga(t=>{t.destination=new $o({context:t})});_a(t=>{t.destination.dispose()});class KM extends qn{constructor(e){super(),this.name="TimelineValue",this._timeline=new Zt({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class dr{constructor(e,n){this.id=dr._eventId++,this._remainderTime=0;const r=Object.assign(dr.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:ze,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}dr._eventId=0;class eu extends dr{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(eu.getDefaults(),n);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},dr.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Bo(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new hs(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Bo(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new hs(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);ks(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Mi extends Vt{constructor(){super(he(Mi.getDefaults(),arguments)),this.name="Transport",this._loop=new KM(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Zt,this._repeatedEvents=new GM,this._syncedSignals=[],this._swingAmount=0;const e=he(Mi.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Ti({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),nt(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Vt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const r=n%(this._swingTicks*2)/(this._swingTicks*2),s=Math.sin(r*Math.PI)*this._swingAmount;e+=new hs(this.context,this._swingTicks*2/3).toSeconds()*s}Vh(!0),this._timeline.forEachAtTime(n,r=>r.invoke(e)),Vh(!1)}schedule(e,n){const r=new dr(this,{callback:e,time:new oi(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,s=1/0){const i=new eu(this,{callback:e,duration:new an(this.context,s).toTicks(),interval:new an(this.context,n).toTicks(),time:new oi(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const r=new dr(this,{callback:e,once:!0,time:new oi(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new hs(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let r;return Fe(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){dn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new an(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new an(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new hs(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new hs(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(n),s=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),i=n+s;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),r=this.getTicksAtTime(n),s=e-r%e;return this._clock.nextTickTime(s,n)}}syncSignal(e,n){if(!n){const s=this.now();if(e.getValueAtTime(s)!==0){const i=this.bpm.getValueAtTime(s),o=1/(60/i/this.PPQ);n=e.getValueAtTime(s)/o}else n=0}const r=new Ot(n);return this.bpm.connect(r),r.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:r,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const r=this._syncedSignals[n];r.signal===e&&(r.ratio.dispose(),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),am(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Hi.mixin(Mi);ga(t=>{t.transport=new Mi({context:t})});_a(t=>{t.transport.dispose()});class Gt extends De{constructor(e){super(e),this.input=void 0,this._state=new Zl("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ze,this._syncedStop=ze,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Vr({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,nt(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(De.getDefaults(),{mute:!1,onstop:ze,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let s=zt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),!this._synced&&this._state.getValueAtTime(s)==="started")Pe(ks(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,n,r);else if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(ys(n,0)),i.duration=r?this.toSeconds(r):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,r)},s);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else tm(this.context),this._start(s,n,r);return this}stop(e){let n=zt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||Fe(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(ks(n,0)){const r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){const s=n-this.toSeconds(r.time);let i;r.duration&&(i=this.toSeconds(r.duration)-s),this._start(e,this.toSeconds(r.offset)+s,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ze,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Si extends Os{constructor(){super(he(Si.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=he(Si.getDefaults(),arguments,["url","onload"]);$s(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Qe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Xe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Os.getDefaults(),{url:new Xe,loop:!1,loopEnd:0,loopStart:0,onload:ze,onerror:ze,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,s=1){Pe(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),this.loop?n=ys(n,this.loopStart):n=ys(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;Uc(o,a)&&(o=(o-c)%l+c),rn(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Bo(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),Fe(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Gr(t,e){return ot(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,r=new Kl(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class qo extends Os{constructor(){super(he(qo.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=he(qo.getDefaults(),arguments,["frequency","type"]);$s(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Qe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Qe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),nt(this,["frequency","detune"])}static getDefaults(){return Object.assign(Os.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class st extends Gt{constructor(){super(he(st.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=he(st.getDefaults(),arguments,["frequency","type"]);this.frequency=new ht({context:this.context,units:"frequency",value:e.frequency}),nt(this,"frequency"),this.detune=new ht({context:this.context,units:"cents",value:e.detune}),nt(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Gt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),r=new qo({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return st._periodicWaveCache.find(n=>n.phase===this._phase&&kM(n.partials,this._partials));{const e=st._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(Fe(r)){const{partials:s,wave:i}=r;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[s,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(s,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),st._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),st._periodicWaveCache.length>100&&st._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){fr(e,0);let n=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(n=r[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const s=new Float32Array(e);this._partials.forEach((i,o)=>s[o]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(e,n){let s=2048;const i=new Float32Array(s),o=new Float32Array(s);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,s=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),s=a):this._partialCount=0,this._partials=[]}for(let c=1;c<s;++c){const l=2/(c*Math.PI);let u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[c]=-u*Math.sin(n*c),o[c]=u*Math.cos(n*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,n,r){let s=0;const i=e.length;for(let o=0;o<i;o++)s+=e[o]*Math.cos(o*r)+n[o]*Math.sin(o*r);return s}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let r=0;const s=Math.PI*2,i=32;for(let o=0;o<i;o++)r=Math.max(this._inverseFFT(e,n,o/i*s),r);return xM(-this._inverseFFT(e,n,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return ot(this,void 0,void 0,function*(){return Gr(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}st._periodicWaveCache=[];class ya extends De{constructor(){super(Object.assign(he(ya.getDefaults(),arguments,["context"])))}connect(e,n=0,r=0){return Ql(this,e,n,r),this}}class Ei extends ya{constructor(){super(Object.assign(he(Ei.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=he(Ei.getDefaults(),arguments,["mapping","length"]);dn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):bM(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(ht.getDefaults(),{length:1024})}setMap(e,n=1024){const r=new Float32Array(n);for(let s=0,i=n;s<i;s++){const o=s/(i-1)*2-1;r[s]=e(o,s)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(r=>r.includes(e));Pe(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class XM extends ya{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ei({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ur extends ht{constructor(){super(Object.assign(he(Ur.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=he(Ur.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Ot({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ht.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ci extends Gt{constructor(){super(he(Ci.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new XM({context:this.context}),this._modulationNode=new Ot({context:this.context});const e=he(Ci.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new st({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new st({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ur({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),nt(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(st.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return ot(this,void 0,void 0,function*(){return Gr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Ai extends Gt{constructor(){super(he(Ai.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Ot({context:this.context,gain:0});const e=he(Ai.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new st({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new ht({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new st({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ur({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ur({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),nt(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(st.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return ot(this,void 0,void 0,function*(){return Gr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class xs extends Gt{constructor(){super(he(xs.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Ot({context:this.context,gain:0}),this._thresh=new Ei({context:this.context,mapping:n=>n<=0?-1:1});const e=he(xs.getDefaults(),arguments,["frequency","width"]);this.width=new ht({context:this.context,units:"audioRange",value:e.width}),this._triangle=new st({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),nt(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Gt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return ot(this,void 0,void 0,function*(){return Gr(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Ii extends Gt{constructor(){super(he(Ii.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=he(Ii.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new ht({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ht({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,nt(this,["frequency","detune"])}static getDefaults(){return Object.assign(st.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,r=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=n+r*i)}}get count(){return this._oscillators.length}set count(e){if(fr(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const r=new st({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):ze});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return ot(this,void 0,void 0,function*(){return Gr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Ni extends Gt{constructor(){super(he(Ni.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ur({context:this.context,value:2});const e=he(Ni.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new xs({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new st({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),nt(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Gt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return ot(this,void 0,void 0,function*(){return Gr(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const $h={am:Ci,fat:Ii,fm:Ai,oscillator:st,pulse:xs,pwm:Ni};class Pi extends Gt{constructor(){super(he(Pi.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=he(Pi.getDefaults(),arguments,["frequency","type"]);this.frequency=new ht({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ht({context:this.context,units:"cents",value:e.detune}),nt(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(st.getDefaults(),Ai.getDefaults(),Ci.getDefaults(),Ii.getDefaults(),xs.getDefaults(),Ni.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=$h[e],r=this.now();if(this._oscillator){const s=this._oscillator;s.stop(r),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof $h[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Br(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Br(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Vn(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return ot(this,void 0,void 0,function*(){return Gr(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function hm(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){fr(i,t,e),n.set(this,i)}})}}function Wn(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){fr(this.toSeconds(i),t,e),n.set(this,i)}})}}class ki extends Gt{constructor(){super(he(ki.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=he(ki.getDefaults(),arguments,["url","onload"]);this._buffer=new Xe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Gt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ze,onerror:ze,playbackRate:1,reverse:!1})}load(e){return ot(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=ze){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=ys(n,this._loopStart):n=ys(n,0);const s=this.toSeconds(n),i=r;r=ys(r,Math.max(this._buffer.duration-s,0));let o=this.toSeconds(r);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Si({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&zt(i)?a.start(e,s):a.start(e,s,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){var s;(s=[...this._activeSources].pop())===null||s===void 0||s.stop(e),this._start(e,n,r)}seek(e,n){const r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){const s=this.toSeconds(e);this._stop(r),this._start(r,s)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&fr(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&fr(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}vn([Wn(0)],ki.prototype,"fadeIn",void 0);vn([Wn(0)],ki.prototype,"fadeOut",void 0);class Un extends De{constructor(){super(he(Un.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new ht({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=he(Un.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(De.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(Vn(e))return e;{let r;for(r in oo)if(oo[r][n]===e)return r;return e}}_setCurve(e,n,r){if(Vn(r)&&Reflect.has(oo,r)){const s=oo[r];kr(s)?e!=="_decayCurve"&&(this[e]=s[n]):this[e]=s}else if(dn(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){Pe(["linear","exponential"].some(n=>n===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/s;s=(1-o)/a}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,s,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,s,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,s,n)}if(i&&this.sustain<1){const a=n*this.sustain,c=e+s;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(Pe(dn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return Ql(this,e,n,r),this}asArray(e=1024){return ot(this,void 0,void 0,function*(){const n=e/this.context.sampleRate,r=new Kl(1,n,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:r}));return c._sig.toDestination(),c.triggerAttackRelease(n*(s+o)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}vn([Wn(0)],Un.prototype,"attack",void 0);vn([Wn(0)],Un.prototype,"decay",void 0);vn([hm(0,1)],Un.prototype,"sustain",void 0);vn([Wn(0)],Un.prototype,"release",void 0);const oo=(()=>{let e,n;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/(128-1)*(Math.PI/2));const s=[],i=6.4;for(e=0;e<128-1;e++){n=e/(128-1);const f=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;s[e]=f/10+n*.83}s[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const c=[];for(e=0;e<128;e++)n=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*n));const l=[];for(e=0;e<128;e++){n=e/(128-1);const f=Math.pow(n,3)*4+.2,d=Math.cos(f*Math.PI*2*n);l[e]=Math.abs(d*(1-n))}function u(f){const d=new Array(f.length);for(let p=0;p<f.length;p++)d[p]=1-f[p];return d}function h(f){return f.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:r,Out:h(r)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:u(s)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class jr extends De{constructor(){super(he(jr.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n);const e=he(jr.getDefaults(),arguments);this._volume=this.output=new Vr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,nt(this,"volume")}static getDefaults(){return Object.assign(De.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const r=this["_original_"+e]=this[e];this[e]=(...s)=>{const i=s[n],o=this.context.transport.schedule(a=>{s[n]=a,r.apply(this,s)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,r,s){const i=this.toSeconds(r),o=this.toSeconds(n);return this.triggerAttack(e,i,s),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class $r extends jr{constructor(){super(he($r.getDefaults(),arguments));const e=he($r.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(jr.getDefaults(),{detune:0,onsilence:ze,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);const s=this.toSeconds(n);return this._triggerEnvelopeAttack(s,r),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const r=this.toSeconds(n),s=e instanceof Wt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,r)}else this.frequency.setValueAtTime(s,r);return this}}vn([Wn(0)],$r.prototype,"portamento",void 0);class tu extends Un{constructor(){super(he(tu.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ot({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Oi extends $r{constructor(){super(he(Oi.getDefaults(),arguments)),this.name="Synth";const e=he(Oi.getDefaults(),arguments);this.oscillator=new Pi(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new tu(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),nt(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign($r.getDefaults(),{envelope:Object.assign(Uh(Un.getDefaults(),Object.keys(De.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Uh(Pi.getDefaults(),[...Object.keys(Gt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class xi extends Oi{constructor(){super(he(xi.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=he(xi.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,nt(this,["oscillator","envelope"])}static getDefaults(){return vs($r.getDefaults(),Oi.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const r=this.toSeconds(n),s=this.toFrequency(e instanceof Wt?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}vn([hm(0)],xi.prototype,"octaves",void 0);vn([Wn(0)],xi.prototype,"pitchDecay",void 0);const fm=new Set;function nu(t){fm.add(t)}function dm(t,e){const n=`registerProcessor("${t}", ${e})`;fm.add(n)}const ZM=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;nu(ZM);const QM=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;nu(QM);const JM=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;nu(JM);const eS="feedback-comb-filter",tS=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;dm(eS,tS);class Ri extends jr{constructor(){super(he(Ri.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=he(Ri.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(e.urls).forEach(r=>{const s=parseInt(r,10);if(Pe(io(r)||Br(s)&&isFinite(s),`url key is neither a note or midi pitch: ${r}`),io(r)){const i=new Wt(this.context,r).toMidi();n[i]=e.urls[r]}else Br(s)&&isFinite(s)&&(n[s]=e.urls[s])}),this._buffers=new Jl({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(jr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ze,onerror:ze,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=um(new Wt(this.context,s).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=lm(c+a),f=new Si({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);f.start(n,0,u.duration/h,r),dn(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(f),f.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const d=this._activeSources.get(o),p=d.indexOf(f);p!==-1&&d.splice(p,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=new Wt(this.context,r).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),dn(n)?(Pe(dn(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,r){if(Pe(io(e)||isFinite(e),`note must be a pitch or midi: ${e}`),io(e)){const s=new Wt(this.context,e).toMidi();this._buffers.add(s,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}vn([Wn(0)],Ri.prototype,"attack",void 0);vn([Wn(0)],Ri.prototype,"release",void 0);class Wo extends De{constructor(){super(Object.assign(he(Wo.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=he(Wo.getDefaults(),arguments,["pan"]);this.pan=new Qe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",nt(this,"pan")}static getDefaults(){return Object.assign(De.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const nS="bit-crusher",rS=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;dm(nS,rS);class rt extends De{constructor(){super(he(rt.getDefaults(),arguments,["solo"])),this.name="Solo";const e=he(rt.getDefaults(),arguments,["solo"]);this.input=this.output=new Ot({context:this.context}),rt._allSolos.has(this.context)||rt._allSolos.set(this.context,new Set),rt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(De.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),rt._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){rt._soloed.has(this.context)||rt._soloed.set(this.context,new Set),rt._soloed.get(this.context).add(this)}_removeSolo(){rt._soloed.has(this.context)&&rt._soloed.get(this.context).delete(this)}_isSoloed(){return rt._soloed.has(this.context)&&rt._soloed.get(this.context).has(this)}_noSolos(){return!rt._soloed.has(this.context)||rt._soloed.has(this.context)&&rt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),rt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}rt._allSolos=new Map;rt._soloed=new Map;class zo extends De{constructor(){super(he(zo.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=he(zo.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Wo({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Vr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,nt(this,["pan","volume"])}static getDefaults(){return Object.assign(De.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Er extends De{constructor(){super(he(Er.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=he(Er.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new rt({solo:e.solo,context:this.context}),this._panVol=this.output=new zo({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),nt(this,["pan","volume"])}static getDefaults(){return Object.assign(De.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Er.buses.has(e)||Er.buses.set(e,new Ot({context:this.context})),Er.buses.get(e)}send(e,n=0){const r=this._getBus(e),s=new Ot({context:this.context,units:"decibels",gain:n});return this.connect(s),s.connect(r),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Er.buses=new Map;class sS extends De{constructor(){super(...arguments),this.name="Listener",this.positionX=new Qe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Qe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Qe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Qe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Qe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Qe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Qe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Qe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Qe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(De.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}ga(t=>{t.listener=new sS({context:t})});_a(t=>{t.listener.dispose()});Kt().transport;Kt().destination;Kt().destination;Kt().listener;Kt().draw;Kt();var iS=function(t){t=t||{};var e;e||(e=typeof t<"u"?t:{});var n={},r;for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);e.arguments=[],e.thisProgram="./this.program",e.quit=function(m,b){throw b},e.preRun=[],e.postRun=[];var s=!1,i=!1,o=!1,a=!1;s=typeof window=="object",i=typeof importScripts=="function",o=typeof process=="object"&&typeof require=="function"&&!s&&!i,a=!s&&!o&&!i;var c="";function l(m){return e.locateFile?e.locateFile(m,c):c+m}if(o){c=__dirname+"/";var u,h;e.read=function(m,b){return u||(u=require("fs")),h||(h=require("path")),m=h.normalize(m),m=u.readFileSync(m),b?m:m.toString()},e.readBinary=function(m){return m=e.read(m,!0),m.buffer||(m=new Uint8Array(m)),A(m.buffer),m},1<process.argv.length&&(e.thisProgram=process.argv[1].replace(/\\/g,"/")),e.arguments=process.argv.slice(2),process.on("uncaughtException",function(m){throw m}),process.on("unhandledRejection",function(){process.exit(1)}),e.quit=function(m){process.exit(m)},e.inspect=function(){return"[Emscripten Module object]"}}else if(a)typeof read<"u"&&(e.read=function(m){return read(m)}),e.readBinary=function(m){return typeof readbuffer=="function"?new Uint8Array(readbuffer(m)):(m=read(m,"binary"),A(typeof m=="object"),m)},typeof scriptArgs<"u"?e.arguments=scriptArgs:typeof arguments<"u"&&(e.arguments=arguments),typeof quit=="function"&&(e.quit=function(m){quit(m)});else if(s||i){if(s){var f=this._currentScript;f.src.indexOf("blob:")!==0&&(c="/")}else i&&(c="/");e.read=function(m){var b=new XMLHttpRequest;return b.open("GET",m,!1),b.send(null),b.responseText},i&&(e.readBinary=function(m){var b=new XMLHttpRequest;return b.open("GET",m,!1),b.responseType="arraybuffer",b.send(null),new Uint8Array(b.response)}),e.readAsync=function(m,b,L){var V=new XMLHttpRequest;V.open("GET",m,!0),V.responseType="arraybuffer",V.onload=function(){V.status==200||V.status==0&&V.response?b(V.response):L()},V.onerror=L,V.send(null)},e.setWindowTitle=function(m){}}var d=e.print||(typeof console<"u"?console.log.bind(console):typeof print<"u"?print:null),p=e.printErr||(typeof printErr<"u"?printErr:typeof console<"u"&&console.warn.bind(console)||d);for(r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);n=void 0;function g(m){var b;return b||(b=16),Math.ceil(m/b)*b}var _={"f64-rem":function(m,b){return m%b},debugger:function(){debugger}},y=0;function A(m,b){m||Pn("Assertion failed: "+b)}var F=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;typeof TextDecoder<"u"&&new TextDecoder("utf-16le");var N,S,R,O,D,q,W,K,H;function ne(){e.HEAP8=S=new Int8Array(N),e.HEAP16=O=new Int16Array(N),e.HEAP32=q=new Int32Array(N),e.HEAPU8=R=new Uint8Array(N),e.HEAPU16=D=new Uint16Array(N),e.HEAPU32=W=new Uint32Array(N),e.HEAPF32=K=new Float32Array(N),e.HEAPF64=H=new Float64Array(N)}var re,T,v,E,M,k,j;re=T=v=E=M=k=j=0;function J(){Pn("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+oe+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}var se=e.TOTAL_STACK||5242880,oe=e.TOTAL_MEMORY||16777216;oe<se&&p("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+oe+"! (TOTAL_STACK="+se+")"),e.buffer?N=e.buffer:(typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(e.wasmMemory=new WebAssembly.Memory({initial:oe/65536,maximum:oe/65536}),N=e.wasmMemory.buffer):N=new ArrayBuffer(oe),e.buffer=N),ne();function le(m){for(;0<m.length;){var b=m.shift();if(typeof b=="function")b();else{var L=b.B;typeof L=="number"?b.F===void 0?e.dynCall_v(L):e.dynCall_vi(L,b.F):L(b.F===void 0?null:b.F)}}}var P=[],ee=[],U=[],z=[],Me=!1;function Ce(){var m=e.preRun.shift();P.unshift(m)}var we=Math.cos,de=Math.sin,w=0,I=null;e.preloadedImages={},e.preloadedAudios={};function C(m){return String.prototype.startsWith?m.startsWith("data:application/octet-stream;base64,"):m.indexOf("data:application/octet-stream;base64,")===0}(function(){function m(){try{if(e.wasmBinary)return new Uint8Array(e.wasmBinary);if(e.readBinary)return e.readBinary(ue);throw"both async and sync fetching of the wasm failed"}catch(ce){Pn(ce)}}function b(){return e.wasmBinary||!s&&!i||typeof fetch!="function"?new Promise(function(ce){ce(m())}):fetch(ue,{credentials:"same-origin"}).then(function(ce){if(!ce.ok)throw"failed to load wasm binary file at '"+ue+"'";return ce.arrayBuffer()}).catch(function(){return m()})}function L(ce){function Te(Ae){if(me=Ae.exports,me.memory){Ae=me.memory;var $e=e.buffer;Ae.byteLength<$e.byteLength&&p("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),$e=new Int8Array($e),new Int8Array(Ae).set($e),e.buffer=N=Ae,ne()}e.asm=me,e.usingWasm=!0,w--,e.monitorRunDependencies&&e.monitorRunDependencies(w),w==0&&I&&(Ae=I,I=null,Ae())}function ye(Ae){Te(Ae.instance)}function dt(Ae){b().then(function($e){return WebAssembly.instantiate($e,Ee)}).then(Ae).catch(function($e){p("failed to asynchronously prepare wasm: "+$e),Pn($e)})}if(typeof WebAssembly!="object")return p("no native wasm support detected"),!1;if(!(e.wasmMemory instanceof WebAssembly.Memory))return p("no native wasm Memory in use"),!1;if(ce.memory=e.wasmMemory,Ee.global={NaN:NaN,Infinity:1/0},Ee["global.Math"]=Math,Ee.env=ce,w++,e.monitorRunDependencies&&e.monitorRunDependencies(w),e.instantiateWasm)try{return e.instantiateWasm(Ee,Te)}catch(Ae){return p("Module.instantiateWasm callback failed with error: "+Ae),!1}return e.wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||C(ue)||typeof fetch!="function"?dt(ye):WebAssembly.instantiateStreaming(fetch(ue,{credentials:"same-origin"}),Ee).then(ye).catch(function(Ae){p("wasm streaming compile failed: "+Ae),p("falling back to ArrayBuffer instantiation"),dt(ye)}),{}}var V="aubio.wast",ue="aubio.wasm",ve="aubio.temp.asm.js";C(V)||(V=l(V)),C(ue)||(ue=l(ue)),C(ve)||(ve=l(ve));var Ee={global:null,env:null,asm2wasm:_,parent:e},me=null;e.asmPreload=e.asm;var Ie=e.reallocBuffer;e.reallocBuffer=function(ce){if(be==="asmjs")var Te=Ie(ce);else e:{var ye=e.usingWasm?65536:16777216;if(0<ce%ye&&(ce+=ye-ce%ye),ye=e.buffer.byteLength,e.usingWasm)try{Te=e.wasmMemory.grow((ce-ye)/65536)!==-1?e.buffer=e.wasmMemory.buffer:null;break e}catch{Te=null;break e}Te=void 0}return Te};var be="";e.asm=function(ce,Te){if(!Te.table){ce=e.wasmTableSize,ce===void 0&&(ce=1024);var ye=e.wasmMaxTableSize;Te.table=typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?ye!==void 0?new WebAssembly.Table({initial:ce,maximum:ye,element:"anyfunc"}):new WebAssembly.Table({initial:ce,element:"anyfunc"}):Array(ce),e.wasmTable=Te.table}return Te.memoryBase||(Te.memoryBase=e.STATIC_BASE),Te.tableBase||(Te.tableBase=0),Te=L(Te),A(Te,"no binaryen method succeeded."),Te}})(),re=1024,T=re+9312,ee.push({B:function(){Vg()}},{B:function(){jg()}},{B:function(){Ug()}},{B:function(){Lg()}}),e.STATIC_BASE=re,e.STATIC_BUMP=9312,T+=16;var B=0;function $(){return B+=4,q[B-4>>2]}var Z={};function Q(m,b){B=b;try{var L=$(),V=$(),ue=$();for(m=0,Q.J||(Q.J=[null,[],[]],Q.P=function(Ie,be){var ce=Q.J[Ie];if(A(ce),be===0||be===10){Ie=Ie===1?d:p;e:{for(var Te=be=0;ce[Te];)++Te;if(16<Te-be&&ce.subarray&&F)be=F.decode(ce.subarray(be,Te));else for(Te="";;){var ye=ce[be++];if(!ye){be=Te;break e}if(ye&128){var dt=ce[be++]&63;if((ye&224)==192)Te+=String.fromCharCode((ye&31)<<6|dt);else{var Ae=ce[be++]&63;if((ye&240)==224)ye=(ye&15)<<12|dt<<6|Ae;else{var $e=ce[be++]&63;if((ye&248)==240)ye=(ye&7)<<18|dt<<12|Ae<<6|$e;else{var ke=ce[be++]&63;if((ye&252)==248)ye=(ye&3)<<24|dt<<18|Ae<<12|$e<<6|ke;else{var tn=ce[be++]&63;ye=(ye&1)<<30|dt<<24|Ae<<18|$e<<12|ke<<6|tn}}}65536>ye?Te+=String.fromCharCode(ye):(ye-=65536,Te+=String.fromCharCode(55296|ye>>10,56320|ye&1023))}}else Te+=String.fromCharCode(ye)}}Ie(be),ce.length=0}else ce.push(be)}),b=0;b<ue;b++){for(var ve=q[V+8*b>>2],Ee=q[V+(8*b+4)>>2],me=0;me<Ee;me++)Q.P(L,R[ve+me]);m+=Ee}return m}catch(Ie){return typeof FS<"u"&&Ie instanceof FS.I||Pn(Ie),-Ie.L}}function X(m){switch(m){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+m)}}var te=void 0;function G(m){for(var b="";R[m];)b+=te[R[m++]];return b}var pe={},fe={},ge={};function Se(m){if(m===void 0)return"_unknown";m=m.replace(/[^a-zA-Z0-9_]/g,"$");var b=m.charCodeAt(0);return 48<=b&&57>=b?"_"+m:m}function xe(m,b){return m=Se(m),new Function("body","return function "+m+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(b)}function Ue(m){var b=Error,L=xe(m,function(V){this.name=m,this.message=V,V=Error(V).stack,V!==void 0&&(this.stack=this.toString()+`
`+V.replace(/^Error(:[^\n]*)?\n/,""))});return L.prototype=Object.create(b.prototype),L.prototype.constructor=L,L.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},L}var Be=void 0;function _e(m){throw new Be(m)}var Ft=void 0;function en(m){throw new Ft(m)}function zn(m,b,L){function V(me){me=L(me),me.length!==m.length&&en("Mismatched type converter count");for(var Ie=0;Ie<m.length;++Ie)At(m[Ie],me[Ie])}m.forEach(function(me){ge[me]=b});var ue=Array(b.length),ve=[],Ee=0;b.forEach(function(me,Ie){fe.hasOwnProperty(me)?ue[Ie]=fe[me]:(ve.push(me),pe.hasOwnProperty(me)||(pe[me]=[]),pe[me].push(function(){ue[Ie]=fe[me],++Ee,Ee===ve.length&&V(ue)}))}),ve.length===0&&V(ue)}function At(m,b,L){if(L=L||{},!("argPackAdvance"in b))throw new TypeError("registerType registeredInstance requires argPackAdvance");var V=b.name;if(m||_e('type "'+V+'" must have a positive integer typeid pointer'),fe.hasOwnProperty(m)){if(L.X)return;_e("Cannot register type '"+V+"' twice")}fe[m]=b,delete ge[m],pe.hasOwnProperty(m)&&(b=pe[m],delete pe[m],b.forEach(function(ue){ue()}))}function Yr(m){_e(m.a.f.b.name+" instance already deleted")}var ct=void 0,Tt=[];function Kr(){for(;Tt.length;){var m=Tt.pop();m.a.s=!1,m.delete()}}function Hn(){}var wu={};function Tu(m,b,L){if(m[b].j===void 0){var V=m[b];m[b]=function(){return m[b].j.hasOwnProperty(arguments.length)||_e("Function '"+L+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+m[b].j+")!"),m[b].j[arguments.length].apply(this,arguments)},m[b].j=[],m[b].j[V.A]=V}}function Cg(m,b){e.hasOwnProperty(m)?(_e("Cannot register public name '"+m+"' twice"),Tu(e,m,m),e.hasOwnProperty(void 0)&&_e("Cannot register multiple overloads of a function with the same number of arguments (undefined)!"),e[m].j[void 0]=b):e[m]=b}function Ag(m,b,L,V,ue,ve,Ee,me){this.name=m,this.constructor=b,this.u=L,this.o=V,this.i=ue,this.T=ve,this.w=Ee,this.S=me,this.Z=[]}function Oa(m,b,L){for(;b!==L;)b.w||_e("Expected null or instance of "+L.name+", got an instance of "+b.name),m=b.w(m),b=b.i;return m}function Ig(m,b){return b===null?(this.G&&_e("null is not a valid "+this.name),0):(b.a||_e('Cannot pass "'+Zr(b)+'" as a '+this.name),b.a.c||_e("Cannot pass deleted object as a pointer of type "+this.name),Oa(b.a.c,b.a.f.b,this.b))}function Ng(m,b){if(b===null){if(this.G&&_e("null is not a valid "+this.name),this.D){var L=this.$();return m!==null&&m.push(this.o,L),L}return 0}if(b.a||_e('Cannot pass "'+Zr(b)+'" as a '+this.name),b.a.c||_e("Cannot pass deleted object as a pointer of type "+this.name),!this.C&&b.a.f.C&&_e("Cannot convert argument of type "+(b.a.h?b.a.h.name:b.a.f.name)+" to parameter type "+this.name),L=Oa(b.a.c,b.a.f.b,this.b),this.D)switch(b.a.g===void 0&&_e("Passing raw pointer to smart pointer is illegal"),this.ba){case 0:b.a.h===this?L=b.a.g:_e("Cannot convert argument of type "+(b.a.h?b.a.h.name:b.a.f.name)+" to parameter type "+this.name);break;case 1:L=b.a.g;break;case 2:if(b.a.h===this)L=b.a.g;else{var V=b.clone();L=this.aa(L,Gn(function(){V.delete()})),m!==null&&m.push(this.o,L)}break;default:_e("Unsupporting sharing policy")}return L}function Pg(m,b){return b===null?(this.G&&_e("null is not a valid "+this.name),0):(b.a||_e('Cannot pass "'+Zr(b)+'" as a '+this.name),b.a.c||_e("Cannot pass deleted object as a pointer of type "+this.name),b.a.f.C&&_e("Cannot convert argument of type "+b.a.f.name+" to parameter type "+this.name),Oa(b.a.c,b.a.f.b,this.b))}function Ki(m){return this.fromWireType(W[m>>2])}function Mu(m,b,L){return b===L?m:L.i===void 0?null:(m=Mu(m,b,L.i),m===null?null:L.S(m))}var Hs={};function kg(m,b){for(b===void 0&&_e("ptr should not be undefined");m.i;)b=m.w(b),m=m.i;return Hs[b]}function Xi(m,b){return b.f&&b.c||en("makeClassHandle requires ptr and ptrType"),!!b.h!=!!b.g&&en("Both smartPtrType and smartPtr must be specified"),b.count={value:1},Object.create(m,{a:{value:b}})}function Nn(m,b,L,V,ue,ve,Ee,me,Ie,be,ce){this.name=m,this.b=b,this.G=L,this.C=V,this.D=ue,this.Y=ve,this.ba=Ee,this.M=me,this.$=Ie,this.aa=be,this.o=ce,ue||b.i!==void 0?this.toWireType=Ng:(this.toWireType=V?Ig:Pg,this.l=null)}function Og(m,b){e.hasOwnProperty(m)||en("Replacing nonexistant public symbol"),e[m]=b,e[m].A=void 0}function Xr(m,b){if(m=G(m),e["FUNCTION_TABLE_"+m]!==void 0)var L=e["FUNCTION_TABLE_"+m][b];else if(typeof FUNCTION_TABLE<"u")L=FUNCTION_TABLE[b];else{L=e.asm["dynCall_"+m],L===void 0&&(L=e.asm["dynCall_"+m.replace(/f/g,"d")],L===void 0&&_e("No dynCall invoker for signature: "+m));for(var V=[],ue=1;ue<m.length;++ue)V.push("a"+ue);ue="return function "+("dynCall_"+m+"_"+b)+"("+V.join(", ")+`) {
`,ue+="    return dynCall(rawFunction"+(V.length?", ":"")+V.join(", ")+`);
`,L=new Function("dynCall","rawFunction",ue+`};
`)(L,b)}return typeof L!="function"&&_e("unknown function pointer with signature "+m+": "+b),L}var Su=void 0;function Eu(m){m=$g(m);var b=G(m);return Yn(m),b}function xa(m,b){function L(ve){ue[ve]||fe[ve]||(ge[ve]?ge[ve].forEach(L):(V.push(ve),ue[ve]=!0))}var V=[],ue={};throw b.forEach(L),new Su(m+": "+V.map(Eu).join([", "]))}function Cu(m,b){for(var L=[],V=0;V<m;V++)L.push(q[(b>>2)+V]);return L}function Ra(m){for(;m.length;){var b=m.pop();m.pop()(b)}}function xg(m){var b=Function;if(!(b instanceof Function))throw new TypeError("new_ called with constructor type "+typeof b+" which is not a function");var L=xe(b.name||"unknownFunctionName",function(){});return L.prototype=b.prototype,L=new L,m=b.apply(L,m),m instanceof Object?m:L}var Da=[],jt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Fa(m){4<m&&--jt[m].H===0&&(jt[m]=void 0,Da.push(m))}function Gn(m){switch(m){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var b=Da.length?Da.pop():jt.length;return jt[b]={H:1,value:m},b}}function Zr(m){if(m===null)return"null";var b=typeof m;return b==="object"||b==="array"||b==="function"?m.toString():""+m}function Rg(m,b){switch(b){case 2:return function(L){return this.fromWireType(K[L>>2])};case 3:return function(L){return this.fromWireType(H[L>>3])};default:throw new TypeError("Unknown float type: "+m)}}function Dg(m,b,L){switch(b){case 0:return L?function(V){return S[V]}:function(V){return R[V]};case 1:return L?function(V){return O[V>>1]}:function(V){return D[V>>1]};case 2:return L?function(V){return q[V>>2]}:function(V){return W[V>>2]};default:throw new TypeError("Unknown integer type: "+m)}}function Qr(m){return m||_e("Cannot use deleted val. handle = "+m),jt[m].value}function Au(m,b){var L=fe[m];return L===void 0&&_e(b+" has unknown type "+Eu(m)),L}for(var Fg={},Iu=Array(256),Zi=0;256>Zi;++Zi)Iu[Zi]=String.fromCharCode(Zi);te=Iu,Be=e.BindingError=Ue("BindingError"),Ft=e.InternalError=Ue("InternalError"),Hn.prototype.isAliasOf=function(m){if(!(this instanceof Hn&&m instanceof Hn))return!1;var b=this.a.f.b,L=this.a.c,V=m.a.f.b;for(m=m.a.c;b.i;)L=b.w(L),b=b.i;for(;V.i;)m=V.w(m),V=V.i;return b===V&&L===m},Hn.prototype.clone=function(){if(this.a.c||Yr(this),this.a.v)return this.a.count.value+=1,this;var m=this.a;return m=Object.create(Object.getPrototypeOf(this),{a:{value:{count:m.count,s:m.s,v:m.v,c:m.c,f:m.f,g:m.g,h:m.h}}}),m.a.count.value+=1,m.a.s=!1,m},Hn.prototype.delete=function(){if(this.a.c||Yr(this),this.a.s&&!this.a.v&&_e("Object already scheduled for deletion"),--this.a.count.value,this.a.count.value===0){var m=this.a;m.g?m.h.o(m.g):m.f.b.o(m.c)}this.a.v||(this.a.g=void 0,this.a.c=void 0)},Hn.prototype.isDeleted=function(){return!this.a.c},Hn.prototype.deleteLater=function(){return this.a.c||Yr(this),this.a.s&&!this.a.v&&_e("Object already scheduled for deletion"),Tt.push(this),Tt.length===1&&ct&&ct(Kr),this.a.s=!0,this},Nn.prototype.U=function(m){return this.M&&(m=this.M(m)),m},Nn.prototype.K=function(m){this.o&&this.o(m)},Nn.prototype.argPackAdvance=8,Nn.prototype.readValueFromPointer=Ki,Nn.prototype.deleteObject=function(m){m!==null&&m.delete()},Nn.prototype.fromWireType=function(m){function b(){return this.D?Xi(this.b.u,{f:this.Y,c:L,h:this,g:m}):Xi(this.b.u,{f:this,c:m})}var L=this.U(m);if(!L)return this.K(m),null;var V=kg(this.b,L);if(V!==void 0)return V.a.count.value===0?(V.a.c=L,V.a.g=m,V.clone()):(V=V.clone(),this.K(m),V);if(V=this.b.T(L),V=wu[V],!V)return b.call(this);V=this.C?V.R:V.pointerType;var ue=Mu(L,this.b,V.b);return ue===null?b.call(this):this.D?Xi(V.b.u,{f:V,c:ue,h:this,g:m}):Xi(V.b.u,{f:V,c:ue})},e.getInheritedInstanceCount=function(){return Object.keys(Hs).length},e.getLiveInheritedInstances=function(){var m=[],b;for(b in Hs)Hs.hasOwnProperty(b)&&m.push(Hs[b]);return m},e.flushPendingDeletes=Kr,e.setDelayFunction=function(m){ct=m,Tt.length&&ct&&ct(Kr)},Su=e.UnboundTypeError=Ue("UnboundTypeError"),e.count_emval_handles=function(){for(var m=0,b=5;b<jt.length;++b)jt[b]!==void 0&&++m;return m},e.get_first_emval=function(){for(var m=5;m<jt.length;++m)if(jt[m]!==void 0)return jt[m];return null};var Bg=T;T=T+4+15&-16,j=Bg,v=E=g(T),M=v+se,k=g(M),q[j>>2]=k,e.wasmTableSize=83,e.wasmMaxTableSize=83,e.N={},e.O={abort:Pn,enlargeMemory:function(){J()},getTotalMemory:function(){return oe},abortOnCannotGrowMemory:J,___setErrNo:function(m){return e.___errno_location&&(q[e.___errno_location()>>2]=m),m},___syscall140:function(m,b){B=b;try{var L=Z.V();$();var V=$(),ue=$(),ve=$();return FS.ea(L,V,ve),q[ue>>2]=L.position,L.W&&V===0&&ve===0&&(L.W=null),0}catch(Ee){return typeof FS<"u"&&Ee instanceof FS.I||Pn(Ee),-Ee.L}},___syscall146:Q,___syscall54:function(m,b){return B=b,0},___syscall6:function(m,b){B=b;try{var L=Z.V();return FS.close(L),0}catch(V){return typeof FS<"u"&&V instanceof FS.I||Pn(V),-V.L}},__embind_register_bool:function(m,b,L,V,ue){var ve=X(L);b=G(b),At(m,{name:b,fromWireType:function(Ee){return!!Ee},toWireType:function(Ee,me){return me?V:ue},argPackAdvance:8,readValueFromPointer:function(Ee){if(L===1)var me=S;else if(L===2)me=O;else if(L===4)me=q;else throw new TypeError("Unknown boolean type size: "+b);return this.fromWireType(me[Ee>>ve])},l:null})},__embind_register_class:function(m,b,L,V,ue,ve,Ee,me,Ie,be,ce,Te,ye){ce=G(ce),ve=Xr(ue,ve),me&&(me=Xr(Ee,me)),be&&(be=Xr(Ie,be)),ye=Xr(Te,ye);var dt=Se(ce);Cg(dt,function(){xa("Cannot construct "+ce+" due to unbound types",[V])}),zn([m,b,L],V?[V]:[],function(Ae){if(Ae=Ae[0],V)var $e=Ae.b,ke=$e.u;else ke=Hn.prototype;Ae=xe(dt,function(){if(Object.getPrototypeOf(this)!==tn)throw new Be("Use 'new' to construct "+ce);if(Mt.m===void 0)throw new Be(ce+" has no accessible constructor");var vr=Mt.m[arguments.length];if(vr===void 0)throw new Be("Tried to invoke ctor of "+ce+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Mt.m).toString()+") parameters instead!");return vr.apply(this,arguments)});var tn=Object.create(ke,{constructor:{value:Ae}});Ae.prototype=tn;var Mt=new Ag(ce,Ae,tn,ye,$e,ve,me,be);$e=new Nn(ce,Mt,!0,!1,!1),ke=new Nn(ce+"*",Mt,!1,!1,!1);var Jr=new Nn(ce+" const*",Mt,!1,!0,!1);return wu[m]={pointerType:ke,R:Jr},Og(dt,Ae),[$e,ke,Jr]})},__embind_register_class_constructor:function(m,b,L,V,ue,ve){var Ee=Cu(b,L);ue=Xr(V,ue),zn([],[m],function(me){me=me[0];var Ie="constructor "+me.name;if(me.b.m===void 0&&(me.b.m=[]),me.b.m[b-1]!==void 0)throw new Be("Cannot register multiple constructors with identical number of parameters ("+(b-1)+") for class '"+me.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return me.b.m[b-1]=function(){xa("Cannot construct "+me.name+" due to unbound types",Ee)},zn([],Ee,function(be){return me.b.m[b-1]=function(){arguments.length!==b-1&&_e(Ie+" called with "+arguments.length+" arguments, expected "+(b-1));var ce=[],Te=Array(b);Te[0]=ve;for(var ye=1;ye<b;++ye)Te[ye]=be[ye].toWireType(ce,arguments[ye-1]);return Te=ue.apply(null,Te),Ra(ce),be[0].fromWireType(Te)},[]}),[]})},__embind_register_class_function:function(m,b,L,V,ue,ve,Ee,me){var Ie=Cu(L,V);b=G(b),ve=Xr(ue,ve),zn([],[m],function(be){function ce(){xa("Cannot call "+Te+" due to unbound types",Ie)}be=be[0];var Te=be.name+"."+b;me&&be.b.Z.push(b);var ye=be.b.u,dt=ye[b];return dt===void 0||dt.j===void 0&&dt.className!==be.name&&dt.A===L-2?(ce.A=L-2,ce.className=be.name,ye[b]=ce):(Tu(ye,b,Te),ye[b].j[L-2]=ce),zn([],Ie,function(Ae){var $e=Te,ke=be,tn=ve,Mt=Ae.length;2>Mt&&_e("argTypes array size mismatch! Must at least get return value and 'this' types!");var Jr=Ae[1]!==null&&ke!==null,vr=!1;for(ke=1;ke<Ae.length;++ke)if(Ae[ke]!==null&&Ae[ke].l===void 0){vr=!0;break}var ku=Ae[0].name!=="void",yr="",es="";for(ke=0;ke<Mt-2;++ke)yr+=(ke!==0?", ":"")+"arg"+ke,es+=(ke!==0?", ":"")+"arg"+ke+"Wired";$e="return function "+Se($e)+"("+yr+`) {
if (arguments.length !== `+(Mt-2)+`) {
throwBindingError('function `+$e+" called with ' + arguments.length + ' arguments, expected "+(Mt-2)+` args!');
}
`,vr&&($e+=`var destructors = [];
`);var Ou=vr?"destructors":"null";for(yr="throwBindingError invoker fn runDestructors retType classParam".split(" "),tn=[_e,tn,Ee,Ra,Ae[0],Ae[1]],Jr&&($e+="var thisWired = classParam.toWireType("+Ou+`, this);
`),ke=0;ke<Mt-2;++ke)$e+="var arg"+ke+"Wired = argType"+ke+".toWireType("+Ou+", arg"+ke+"); // "+Ae[ke+2].name+`
`,yr.push("argType"+ke),tn.push(Ae[ke+2]);if(Jr&&(es="thisWired"+(0<es.length?", ":"")+es),$e+=(ku?"var rv = ":"")+"invoker(fn"+(0<es.length?", ":"")+es+`);
`,vr)$e+=`runDestructors(destructors);
`;else for(ke=Jr?1:2;ke<Ae.length;++ke)Mt=ke===1?"thisWired":"arg"+(ke-2)+"Wired",Ae[ke].l!==null&&($e+=Mt+"_dtor("+Mt+"); // "+Ae[ke].name+`
`,yr.push(Mt+"_dtor"),tn.push(Ae[ke].l));return ku&&($e+=`var ret = retType.fromWireType(rv);
return ret;
`),yr.push($e+`}
`),Ae=xg(yr).apply(null,tn),ye[b].j===void 0?(Ae.A=L-2,ye[b]=Ae):ye[b].j[L-2]=Ae,[]}),[]})},__embind_register_emval:function(m,b){b=G(b),At(m,{name:b,fromWireType:function(L){var V=jt[L].value;return Fa(L),V},toWireType:function(L,V){return Gn(V)},argPackAdvance:8,readValueFromPointer:Ki,l:null})},__embind_register_float:function(m,b,L){L=X(L),b=G(b),At(m,{name:b,fromWireType:function(V){return V},toWireType:function(V,ue){if(typeof ue!="number"&&typeof ue!="boolean")throw new TypeError('Cannot convert "'+Zr(ue)+'" to '+this.name);return ue},argPackAdvance:8,readValueFromPointer:Rg(b,L),l:null})},__embind_register_integer:function(m,b,L,V,ue){function ve(be){return be}b=G(b),ue===-1&&(ue=4294967295);var Ee=X(L);if(V===0){var me=32-8*L;ve=function(be){return be<<me>>>me}}var Ie=b.indexOf("unsigned")!=-1;At(m,{name:b,fromWireType:ve,toWireType:function(be,ce){if(typeof ce!="number"&&typeof ce!="boolean")throw new TypeError('Cannot convert "'+Zr(ce)+'" to '+this.name);if(ce<V||ce>ue)throw new TypeError('Passing a number "'+Zr(ce)+'" from JS side to C/C++ side to an argument of type "'+b+'", which is outside the valid range ['+V+", "+ue+"]!");return Ie?ce>>>0:ce|0},argPackAdvance:8,readValueFromPointer:Dg(b,Ee,V!==0),l:null})},__embind_register_memory_view:function(m,b,L){function V(ve){ve>>=2;var Ee=W;return new ue(Ee.buffer,Ee[ve+1],Ee[ve])}var ue=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];L=G(L),At(m,{name:L,fromWireType:V,argPackAdvance:8,readValueFromPointer:V},{X:!0})},__embind_register_std_string:function(m,b){b=G(b),At(m,{name:b,fromWireType:function(L){for(var V=W[L>>2],ue=Array(V),ve=0;ve<V;++ve)ue[ve]=String.fromCharCode(R[L+4+ve]);return Yn(L),ue.join("")},toWireType:function(L,V){function ue(Te,ye){return Te[ye]}function ve(Te,ye){return Te.charCodeAt(ye)}V instanceof ArrayBuffer&&(V=new Uint8Array(V));var Ee;V instanceof Uint8Array||V instanceof Uint8ClampedArray||V instanceof Int8Array?Ee=ue:typeof V=="string"?Ee=ve:_e("Cannot pass non-string to std::string");var me=V.length,Ie=Pu(4+me);W[Ie>>2]=me;for(var be=0;be<me;++be){var ce=Ee(V,be);255<ce&&(Yn(Ie),_e("String has UTF-16 code units that do not fit in 8 bits")),R[Ie+4+be]=ce}return L!==null&&L.push(Yn,Ie),Ie},argPackAdvance:8,readValueFromPointer:Ki,l:function(L){Yn(L)}})},__embind_register_std_wstring:function(m,b,L){if(L=G(L),b===2)var V=function(){return D},ue=1;else b===4&&(V=function(){return W},ue=2);At(m,{name:L,fromWireType:function(ve){for(var Ee=V(),me=W[ve>>2],Ie=Array(me),be=ve+4>>ue,ce=0;ce<me;++ce)Ie[ce]=String.fromCharCode(Ee[be+ce]);return Yn(ve),Ie.join("")},toWireType:function(ve,Ee){var me=V(),Ie=Ee.length,be=Pu(4+Ie*b);W[be>>2]=Ie;for(var ce=be+4>>ue,Te=0;Te<Ie;++Te)me[ce+Te]=Ee.charCodeAt(Te);return ve!==null&&ve.push(Yn,be),be},argPackAdvance:8,readValueFromPointer:Ki,l:function(ve){Yn(ve)}})},__embind_register_void:function(m,b){b=G(b),At(m,{da:!0,name:b,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},__emval_as:function(m,b,L){m=Qr(m),b=Au(b,"emval::as");var V=[],ue=Gn(V);return q[L>>2]=ue,b.toWireType(V,m)},__emval_decref:Fa,__emval_get_property:function(m,b){return m=Qr(m),b=Qr(b),Gn(m[b])},__emval_incref:function(m){4<m&&(jt[m].H+=1)},__emval_new_array:function(){return Gn([])},__emval_new_cstring:function(m){var b=Fg[m];return Gn(b===void 0?G(m):b)},__emval_new_object:function(){return Gn({})},__emval_run_destructors:function(m){Ra(jt[m].value),Fa(m)},__emval_set_property:function(m,b,L){m=Qr(m),b=Qr(b),L=Qr(L),m[b]=L},__emval_take_value:function(m,b){return m=Au(m,"_emval_take_value"),m=m.readValueFromPointer(b),Gn(m)},_abort:function(){e.abort()},_emscripten_memcpy_big:function(m,b,L){return R.set(R.subarray(b,b+L),m),m},_llvm_cos_f32:we,_llvm_log10_f32:function(m){return Math.log(m)/Math.LN10},_llvm_sin_f32:de,DYNAMICTOP_PTR:j,STACKTOP:E};var Nu=e.asm(e.N,e.O,N);e.asm=Nu;var Lg=e.__GLOBAL__sub_I_bind_cpp=function(){return e.asm.__GLOBAL__sub_I_bind_cpp.apply(null,arguments)},Vg=e.__GLOBAL__sub_I_fft_cc=function(){return e.asm.__GLOBAL__sub_I_fft_cc.apply(null,arguments)},Ug=e.__GLOBAL__sub_I_pitch_cc=function(){return e.asm.__GLOBAL__sub_I_pitch_cc.apply(null,arguments)},jg=e.__GLOBAL__sub_I_tempo_cc=function(){return e.asm.__GLOBAL__sub_I_tempo_cc.apply(null,arguments)},$g=e.___getTypeName=function(){return e.asm.___getTypeName.apply(null,arguments)},Yn=e._free=function(){return e.asm._free.apply(null,arguments)},Pu=e._malloc=function(){return e.asm._malloc.apply(null,arguments)};e.dynCall_ffii=function(){return e.asm.dynCall_ffii.apply(null,arguments)},e.dynCall_fi=function(){return e.asm.dynCall_fi.apply(null,arguments)},e.dynCall_fii=function(){return e.asm.dynCall_fii.apply(null,arguments)},e.dynCall_fiii=function(){return e.asm.dynCall_fiii.apply(null,arguments)},e.dynCall_ii=function(){return e.asm.dynCall_ii.apply(null,arguments)},e.dynCall_iii=function(){return e.asm.dynCall_iii.apply(null,arguments)},e.dynCall_iiii=function(){return e.asm.dynCall_iiii.apply(null,arguments)},e.dynCall_iiiii=function(){return e.asm.dynCall_iiiii.apply(null,arguments)},e.dynCall_iiiiii=function(){return e.asm.dynCall_iiiiii.apply(null,arguments)},e.dynCall_v=function(){return e.asm.dynCall_v.apply(null,arguments)},e.dynCall_vi=function(){return e.asm.dynCall_vi.apply(null,arguments)},e.dynCall_viii=function(){return e.asm.dynCall_viii.apply(null,arguments)},e.asm=Nu,e.then=function(m){if(e.calledRun)m(e);else{var b=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){b&&b(),m(e)}}return e},I=function m(){e.calledRun||Ba(),e.calledRun||(I=m)};function Ba(){function m(){if(!e.calledRun&&(e.calledRun=!0,!y)){if(Me||(Me=!0,le(ee)),le(U),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;){var b=e.postRun.shift();z.unshift(b)}le(z)}}if(!(0<w)){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Ce();le(P),0<w||e.calledRun||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),m()},1)):m())}}e.run=Ba;function Pn(m){throw e.onAbort&&e.onAbort(m),m!==void 0?(d(m),p(m),m=JSON.stringify(m)):m="",y=!0,"abort("+m+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=Pn,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return e.noExitRuntime=!0,Ba(),t},oS=iS.bind({_currentScript:{src:"/aubio.js"}}),qh;const Di=typeof window<"u",aS=t=>typeof t=="function",cS=t=>typeof t=="string",qc=()=>+Date.now(),Wh=(t,e,n)=>Math.min(n,Math.max(e,t)),Ga=()=>{};Di&&((qh=window==null?void 0:window.navigator)==null?void 0:qh.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Cr(t){return typeof t=="function"?t():qe(t)}function lS(t,e){function n(...r){t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})}return n}const pm=t=>t();function uS(t=pm){const e=et(!0);function n(){e.value=!1}function r(){e.value=!0}return{isActive:e,pause:n,resume:r,eventFilter:(...i)=>{e.value&&t(...i)}}}function hS(t){return t}function fS(t){let e;function n(){return e||(e=t()),e}return n.reset=async()=>{const r=e;e=void 0,r&&await r},n}function Ho(t){return nd()?(rd(t),!0):!1}function dS(t,e=!0){Wd()?bl(t):e?t():Bi(t)}function pS(t,e=1e3,n={}){const{immediate:r=!0,immediateCallback:s=!1}=n;let i=null;const o=et(!1);function a(){i&&(clearInterval(i),i=null)}function c(){o.value=!1,a()}function l(){qe(e)<=0||(o.value=!0,s&&t(),a(),i=setInterval(t,Cr(e)))}if(r&&Di&&l(),yt(e)){const u=fn(e,()=>{o.value&&Di&&l()});Ho(u)}return Ho(c),{isActive:o,pause:c,resume:l}}function mS(t,e={}){var n;const r=et((n=e.initialValue)!=null?n:null);return fn(t,()=>r.value=qc(),e),r}var zh=Object.getOwnPropertySymbols,gS=Object.prototype.hasOwnProperty,_S=Object.prototype.propertyIsEnumerable,vS=(t,e)=>{var n={};for(var r in t)gS.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&zh)for(var r of zh(t))e.indexOf(r)<0&&_S.call(t,r)&&(n[r]=t[r]);return n};function yS(t,e,n={}){const r=n,{eventFilter:s=pm}=r,i=vS(r,["eventFilter"]);return fn(t,lS(s,e),i)}var bS=Object.defineProperty,wS=Object.defineProperties,TS=Object.getOwnPropertyDescriptors,Go=Object.getOwnPropertySymbols,mm=Object.prototype.hasOwnProperty,gm=Object.prototype.propertyIsEnumerable,Hh=(t,e,n)=>e in t?bS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,MS=(t,e)=>{for(var n in e||(e={}))mm.call(e,n)&&Hh(t,n,e[n]);if(Go)for(var n of Go(e))gm.call(e,n)&&Hh(t,n,e[n]);return t},SS=(t,e)=>wS(t,TS(e)),ES=(t,e)=>{var n={};for(var r in t)mm.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Go)for(var r of Go(t))e.indexOf(r)<0&&gm.call(t,r)&&(n[r]=t[r]);return n};function CS(t,e,n={}){const r=n,{eventFilter:s}=r,i=ES(r,["eventFilter"]),{eventFilter:o,pause:a,resume:c,isActive:l}=uS(s);return{stop:yS(t,e,SS(MS({},i),{eventFilter:o})),pause:a,resume:c,isActive:l}}function AS(t){var e;const n=Cr(t);return(e=n==null?void 0:n.$el)!=null?e:n}const Yo=Di?window:void 0,_m=Di?window.navigator:void 0;function ba(...t){let e,n,r,s;if(cS(t[0])?([n,r,s]=t,e=Yo):[e,n,r,s]=t,!e)return Ga;let i=Ga;const o=fn(()=>AS(e),c=>{i(),c&&(c.addEventListener(n,r,s),i=()=>{c.removeEventListener(n,r,s),i=Ga})},{immediate:!0,flush:"post"}),a=()=>{o(),i()};return Ho(a),a}function vm(t,e=!1){const n=et(),r=()=>n.value=Boolean(t());return r(),dS(r,e),n}const Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zc="__vueuse_ssr_handlers__";Wc[zc]=Wc[zc]||{};const IS=Wc[zc];function NS(t,e){return IS[t]||e}function PS(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"||Array.isArray(t)?"object":Number.isNaN(t)?"any":"number"}var kS=Object.defineProperty,Gh=Object.getOwnPropertySymbols,OS=Object.prototype.hasOwnProperty,xS=Object.prototype.propertyIsEnumerable,Yh=(t,e,n)=>e in t?kS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kh=(t,e)=>{for(var n in e||(e={}))OS.call(e,n)&&Yh(t,n,e[n]);if(Gh)for(var n of Gh(e))xS.call(e,n)&&Yh(t,n,e[n]);return t};const RS={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}};function at(t,e,n,r={}){var s;const{flush:i="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:c=!0,mergeDefaults:l=!1,shallow:u,window:h=Yo,eventFilter:f,onError:d=O=>{console.error(O)}}=r,p=(u?rr:et)(e);if(!n)try{n=NS("getDefaultStorage",()=>{var O;return(O=Yo)==null?void 0:O.localStorage})()}catch(O){d(O)}if(!n)return p;const g=Cr(e),_=PS(g),y=(s=r.serializer)!=null?s:RS[_],{pause:A,resume:F}=CS(p,()=>N(p.value),{flush:i,deep:o,eventFilter:f});return h&&a&&ba(h,"storage",R),R(),p;function N(O){try{O==null?n.removeItem(t):n.setItem(t,y.write(O))}catch(D){d(D)}}function S(O){if(!(O&&O.key!==t)){A();try{const D=O?O.newValue:n.getItem(t);if(D==null)return c&&g!==null&&n.setItem(t,y.write(g)),g;if(!O&&l){const q=y.read(D);return aS(l)?l(q,g):_==="object"&&!Array.isArray(q)?Kh(Kh({},g),q):q}else return typeof D!="string"?D:y.read(D)}catch(D){d(D)}finally{F()}}}function R(O){O&&O.key!==t||(p.value=S(O))}}function DS(t,e){var n;const r=rr((n=e==null?void 0:e.initialValue)!=null?n:t[0]),s=Re({get(){var l;let u=e!=null&&e.getIndexOf?e.getIndexOf(r.value,t):t.indexOf(r.value);return u<0&&(u=(l=e==null?void 0:e.fallbackIndex)!=null?l:0),u},set(l){i(l)}});function i(l){const u=t.length,h=(l%u+u)%u,f=t[h];return r.value=f,f}function o(l=1){return i(s.value+l)}function a(l=1){return o(l)}function c(l=1){return o(-l)}return{state:r,index:s,next:a,prev:c}}function BS(t,e={}){const{controls:n=!1,navigator:r=_m}=e,s=vm(()=>r&&"permissions"in r);let i;const o=typeof t=="string"?{name:t}:t,a=et(),c=()=>{i&&(a.value=i.state)},l=fS(async()=>{if(!!s.value){if(!i)try{i=await r.permissions.query(o),ba(i,"change",c),c()}catch{a.value="prompt"}return i}});return l(),n?{state:a,isSupported:s,query:l}:a}function LS(t={}){const{navigator:e=_m,requestPermissions:n=!1,constraints:r={audio:!0,video:!0},onUpdated:s}=t,i=et([]),o=Re(()=>i.value.filter(d=>d.kind==="videoinput")),a=Re(()=>i.value.filter(d=>d.kind==="audioinput")),c=Re(()=>i.value.filter(d=>d.kind==="audiooutput")),l=vm(()=>e&&e.mediaDevices&&e.mediaDevices.enumerateDevices),u=et(!1);async function h(){!l.value||(i.value=await e.mediaDevices.enumerateDevices(),s==null||s(i.value))}async function f(){if(!l.value)return!1;if(u.value)return!0;const{state:d,query:p}=BS("camera",{controls:!0});return await p(),d.value!=="granted"&&((await e.mediaDevices.getUserMedia(r)).getTracks().forEach(_=>_.stop()),h()),u.value=!0,u.value}return l.value&&(n&&f(),ba(e.mediaDevices,"devicechange",h),h()),{devices:i,ensurePermissions:f,permissionGranted:u,videoInputs:o,audioInputs:a,audioOutputs:c,isSupported:l}}function VS(t,e={}){const{immediate:n=!0,window:r=Yo}=e,s=et(!1);let i=null;function o(){!s.value||!r||(t(),i=r.requestAnimationFrame(o))}function a(){!s.value&&r&&(s.value=!0,o())}function c(){s.value=!1,i!=null&&r&&(r.cancelAnimationFrame(i),i=null)}return n&&a(),Ho(c),{isActive:s,pause:c,resume:a}}var Xh;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(Xh||(Xh={}));var US=Object.defineProperty,Zh=Object.getOwnPropertySymbols,jS=Object.prototype.hasOwnProperty,$S=Object.prototype.propertyIsEnumerable,Qh=(t,e,n)=>e in t?US(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qS=(t,e)=>{for(var n in e||(e={}))jS.call(e,n)&&Qh(t,n,e[n]);if(Zh)for(var n of Zh(e))$S.call(e,n)&&Qh(t,n,e[n]);return t};function ym(t={}){const{controls:e=!1,offset:n=0,immediate:r=!0,interval:s="requestAnimationFrame"}=t,i=et(qc()+n),o=()=>i.value=qc()+n,a=s==="requestAnimationFrame"?VS(o,{immediate:r}):pS(o,s,{immediate:r});return e?qS({timestamp:i},a):i}var WS=Object.defineProperty,Jh=Object.getOwnPropertySymbols,zS=Object.prototype.hasOwnProperty,HS=Object.prototype.propertyIsEnumerable,ef=(t,e,n)=>e in t?WS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,GS=(t,e)=>{for(var n in e||(e={}))zS.call(e,n)&&ef(t,n,e[n]);if(Jh)for(var n of Jh(e))HS.call(e,n)&&ef(t,n,e[n]);return t};const YS={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};GS({linear:hS},YS);function pr(t,e,n){const r=et(t);return Re({get(){return r.value=Wh(r.value,Cr(e),Cr(n))},set(s){r.value=Wh(s,Cr(e),Cr(n))}})}const sr=at("cast-camera","default"),bs=at("cast-mic","default");et();const KS=et(""),tf=et(!0),nf=at("slidev-record-mimetype","video/webm"),XS={"video/webm":"webm","video/webm;codecs=h264":"mp4","video/x-matroska;codecs=avc1":"mkv"};function Ko(t,e){const n=new Date,r=o=>`${o}`.padStart(2,"0"),s=`${r(n.getMonth()+1)}${r(n.getDate())}-${r(n.getHours())}${r(n.getMinutes())}`,i=e?XS[e]:"webm";return`${[s,t,KS.value].filter(o=>!!o).join("-")}.${i}`}Et({screen:Re(()=>Ko("screen",nf.value)),camera:Re(()=>Ko("camera",nf.value))});const{devices:fP,videoInputs:rf,audioInputs:sf,ensurePermissions:of}=LS({onUpdated:function(){var t,e;sr.value!=="none"&&(rf.value.find(n=>n.deviceId===sr.value)||(sr.value=((t=rf.value[0])==null?void 0:t.deviceId)||"default")),bs.value!=="none"&&(sf.value.find(n=>n.deviceId===bs.value)||(bs.value=((e=sf.value[0])==null?void 0:e.deviceId)||"default"))}});function af(t,e){const n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}function ZS(){const t=et(!1),e=et(),n=ym();fn(t,y=>y?e.value=Date.now():e.value=null);const r=Re(()=>e.value?n.value-e.value:0),s=et(!1),i=rr(),o=rr(),a=rr(),c=rr(),l=rr(),u={type:"video",bitsPerSecond:4*256*8*1024,timeSlice:24*60*60*1e3};async function h(){sr.value!=="none"&&(s.value?(s.value=!1,t.value||g(a)):(await f(),a.value&&(s.value=!!a.value)))}async function f(){if(await of(),await Bi(),!a.value){if(sr.value==="none"&&bs.value==="none")return;a.value=await navigator.mediaDevices.getUserMedia({video:sr.value==="none"||tf.value!==!0?!1:{deviceId:sr.value},audio:bs.value==="none"?!1:{deviceId:bs.value}})}}fn(sr,async y=>{if(y==="none")g(a);else{if(t.value)return;a.value&&(g(a),await f())}});async function d(y){var A;await of();const{default:F}=await ap(()=>import("./RecordRTC.547eed90.js"),[]).then(function(N){return N.R});await f(),c.value=await navigator.mediaDevices.getDisplayMedia({video:{frameRate:30,width:3840,height:2160,cursor:"motion",resizeMode:"crop-and-scale"}}),c.value.addEventListener("inactive",p),l.value=new MediaStream,c.value.getVideoTracks().forEach(N=>l.value.addTrack(N)),Object.assign(u,y),a.value&&(l.value.addTrack((A=tE.stream.stream.getAudioTracks())==null?void 0:A[0]),i.value=new F(a.value,u),i.value.startRecording()),o.value=new F(l.value,u),o.value.startRecording(),t.value=!0}async function p(){var y,A;t.value=!1,(y=i.value)==null||y.stopRecording(()=>{if(tf.value){const F=i.value.getBlob(),N=URL.createObjectURL(F);af(Ko("camera",u.mimeType),N),window.URL.revokeObjectURL(N)}i.value=void 0,s.value||g(a)}),(A=o.value)==null||A.stopRecording(()=>{const F=o.value.getBlob(),N=URL.createObjectURL(F);af(Ko("screen",u.mimeType),N),window.URL.revokeObjectURL(N),g(c),g(l),o.value=void 0})}function g(y){const A=y.value;!A||(A.getTracks().forEach(F=>{F.stop(),A.removeTrack(F)}),y.value=void 0)}function _(){t.value?p():d()}return ba("beforeunload",y=>{!t.value||confirm("Recording is not saved yet, do you want to leave?")||(y.preventDefault(),y.returnValue="")}),{recording:t,recordingTime:r,showAvatar:s,toggleRecording:_,startRecording:d,stopRecording:p,toggleAvatar:h,recorderCamera:i,recorderSlides:o,streamCamera:a,streamCapture:c,streamSlides:l}}ZS();const QS=et(!1),JS=mS(QS),eE=ym();Re(()=>eE.value-JS.value);Et({initiated:!1,mute:at("mute",!1),volume:pr(at("main-vol",1),0,2),meter:0});const tE=gl({});gl({});function nE(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,!window.AudioContext)return alert("AudioContext not supported");navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(t){const e=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return e||alert("getUserMedia is not implemented in this browser"),new Promise(function(n,r){e.call(navigator,t,n,r)})})}function ru(t=0,e,n=1,r=1){return e=e||Math.floor(t/12)+4,`hsla(${t%12*30},${n*100}%,${Math.abs(e+2)*8}%,${r})`}function rE(t,e=440){return 12*(Math.log(t/e)/Math.log(2))}function cf(t=0,e=12,n=35,r=100){let s=(t-e/4)/(e/2)*Math.PI,i=n*Math.cos(s)+r/2,o=n*Math.sin(s)+r/2;return{x:i,y:o}}function sE(t,e=1){return[...t.slice(e,t.length),...t.slice(0,e)]}class cn{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==1}addListener(e,n,r={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==cn.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof n!="function")throw new TypeError("The callback must be a function.");const s=new lf(e,this,n,r);return this.eventMap[e]||(this.eventMap[e]=[]),r.prepend?this.eventMap[e].unshift(s):this.eventMap[e].push(s),s}addOneTimeListener(e,n,r={}){r.remaining=1,this.addListener(e,n,r)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,n){return e===void 0?!!(this.eventMap[cn.ANY_EVENT]&&this.eventMap[cn.ANY_EVENT].length>0)||Object.entries(this.eventMap).some(([,r])=>r.length>0):this.eventMap[e]&&this.eventMap[e].length>0?n instanceof lf?this.eventMap[e].filter(r=>r===n).length>0:typeof n=="function"?this.eventMap[e].filter(r=>r.callback===n).length>0:n==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...n){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let r=[],s=this.eventMap[cn.ANY_EVENT]||[];return this.eventMap[e]&&(s=s.concat(this.eventMap[e])),s.forEach(i=>{if(i.suspended)return;let o=[...n];Array.isArray(i.arguments)&&(o=o.concat(i.arguments)),i.remaining>0&&(r.push(i.callback.apply(i.context,o)),i.count++),--i.remaining<1&&i.remove()}),r}removeListener(e,n,r={}){if(e===void 0)return void(this.eventMap={});if(!this.eventMap[e])return;let s=this.eventMap[e].filter(i=>n&&i.callback!==n||r.remaining&&r.remaining!==i.remaining||r.context&&r.context!==i.context);s.length?this.eventMap[e]=s:delete this.eventMap[e]}async waitFor(e,n={}){return n.duration=parseInt(n.duration),(isNaN(n.duration)||n.duration<=0)&&(n.duration=1/0),new Promise((r,s)=>{let i,o=this.addListener(e,()=>{clearTimeout(i),r()},{remaining:1});n.duration!==1/0&&(i=setTimeout(()=>{o.remove(),s("The duration expired before the event was emitted.")},n.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class lf{constructor(e,n,r,s={}){if(typeof e!="string"&&!(e instanceof String)&&e!==cn.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!n)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof r!="function")throw new TypeError("The 'callback' must be a function.");s.arguments===void 0||Array.isArray(s.arguments)||(s.arguments=[s.arguments]),(s=Object.assign({context:n,remaining:1/0,arguments:void 0,duration:1/0},s)).duration!==1/0&&setTimeout(()=>this.remove(),s.duration),this.arguments=s.arguments,this.callback=r,this.context=s.context,this.count=0,this.event=e,this.remaining=parseInt(s.remaining)>=1?parseInt(s.remaining):1/0,this.suspended=!1,this.target=n}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All properties are static and should be referenced using the class name. For example:
 * `Enumerations.MIDI_CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Y{static get MIDI_CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get MIDI_CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CONTROL_CHANGE_MESSAGES(){return{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class fs{constructor(e,n={}){this.duration=ae.defaults.note.duration,this.attack=ae.defaults.note.attack,this.release=ae.defaults.note.release,n.duration!=null&&(this.duration=n.duration),n.attack!=null&&(this.attack=n.attack),n.rawAttack!=null&&(this.attack=ie.from7bitToFloat(n.rawAttack)),n.release!=null&&(this.release=n.release),n.rawRelease!=null&&(this.release=ie.from7bitToFloat(n.rawRelease)),Number.isInteger(e)?this.identifier=ie.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const n=ie.getNoteDetails(e);if(ae.validation&&!e)throw new Error("Invalid note identifier");this._name=n.name,this._accidental=n.accidental,this._octave=n.octave}get name(){return this._name}set name(e){if(ae.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(ae.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(ae.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(ae.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(ae.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(ae.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return ie.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=ie.from7bitToFloat(e)}get rawRelease(){return ie.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=ie.from7bitToFloat(e)}get number(){return ie.toNoteNumber(this.identifier)}getOffsetNumber(e=0,n=0){return ae.validation&&(e=parseInt(e)||0,n=parseInt(n)||0),Math.min(Math.max(this.number+12*e+n,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class ie{static toNoteNumber(e,n=0){if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const r=this.getNoteDetails(e);if(!r)throw new TypeError("Invalid note identifier");let s=12*(r.octave+1+n);if(s+={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[r.name],r.accidental&&(r.accidental.startsWith("b")?s-=r.accidental.length:s+=r.accidental.length),s<0||s>127)throw new RangeError("Invalid octaveOffset value");return s}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const n=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!n)throw new TypeError("Invalid note identifier");const r=n[1].toUpperCase(),s=parseInt(n[3]);let i=n[2].toLowerCase();return i=i===""?void 0:i,{accidental:i,identifier:r+(i||"")+s,name:r,octave:s}}static sanitizeChannels(e){let n;if(this.validation){if(e==="all")n=["all"];else if(e==="none")return[]}return n=Array.isArray(e)?e:[e],n.indexOf("all")>-1&&(n=Y.MIDI_CHANNEL_NUMBERS),n.map(function(r){return parseInt(r)}).filter(function(r){return r>=1&&r<=16})}static toTimestamp(e){let n=!1;const r=parseFloat(e);return!isNaN(r)&&(typeof e=="string"&&e.substring(0,1)==="+"?r>=0&&(n=ae.time+r):r>=0&&(n=r),n)}static guessNoteNumber(e,n){n=parseInt(n)||0;let r=!1;if(Number.isInteger(e)&&e>=0&&e<=127)r=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)r=parseInt(e);else if(typeof e=="string"||e instanceof String)try{r=this.toNoteNumber(e.trim(),n)}catch{return!1}return r}static toNoteIdentifier(e,n){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid octaveOffset value");const r=Math.floor(e/12-1)+n;return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][e%12]+r.toString()}static buildNote(e,n={}){if(n.octaveOffset=parseInt(n.octaveOffset)||0,e instanceof fs)return e;let r=this.guessNoteNumber(e,n.octaveOffset);if(r===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return n.octaveOffset=void 0,new fs(r,n)}static buildNoteArray(e,n={}){let r=[];return Array.isArray(e)||(e=[e]),e.forEach(s=>{r.push(this.buildNote(s,n))}),r}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(127*e),0),127)}static fromMsbLsbToFloat(e,n=0){ae.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),n=Math.min(Math.max(parseInt(n)||0,0),127));const r=((e<<7)+n)/16383;return Math.min(Math.max(r,0),1)}static fromFloatToMsbLsb(e){ae.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const n=Math.round(16383*e);return{msb:n>>7,lsb:127&n}}static offsetNumber(e,n=0,r=0){if(ae.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");n=parseInt(n)||0,r=parseInt(r)||0}return Math.min(Math.max(e+12*n+r,0),127)}static getPropertyByValue(e,n){return Object.keys(e).find(r=>e[r]===n)}static getCcNameByNumber(e){return ie.getPropertyByValue(Y.MIDI_CONTROL_CHANGE_MESSAGES,e)}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let n in Y.MIDI_CHANNEL_MODE_MESSAGES)if(Y.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(n)&&e===Y.MIDI_CHANNEL_MODE_MESSAGES[n])return n;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&window.document!==void 0}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class iE extends cn{constructor(e,n){super(),this._output=e,this._number=n,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,n={time:0}){return this.output.send(e,n),this}sendKeyAftertouch(e,n,r={}){if(ae.validation){if(r.useRawValue&&(r.rawValue=r.useRawValue),isNaN(parseFloat(n)))throw new RangeError("Invalid key aftertouch value.");if(r.rawValue){if(!(n>=0&&n<=127&&Number.isInteger(n)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(n>=0&&n<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}r.rawValue||(n=ie.fromFloatTo7Bit(n));const s=ae.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),ie.buildNoteArray(e).forEach(i=>{this.send([(Y.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),i.getOffsetNumber(s),n],{time:ie.toTimestamp(r.time)})}),this}sendControlChange(e,n,r={}){if(typeof e=="string"&&(e=Y.MIDI_CONTROL_CHANGE_MESSAGES[e]),Array.isArray(n)||(n=[n]),ae.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if((n=n.map(s=>{const i=Math.min(Math.max(parseInt(s),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i})).length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return n.forEach((s,i)=>{this.send([(Y.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+32*i,n[i]],{time:ie.toTimestamp(r.time)})}),this}_selectNonRegisteredParameter(e,n={}){return this.sendControlChange(99,e[0],n),this.sendControlChange(98,e[1],n),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,n={}){return this.sendControlChange(101,e[0],n),this.sendControlChange(100,e[1],n),this}_setCurrentParameter(e,n={}){return e=[].concat(e),this.sendControlChange(6,e[0],n),e.length<2||this.sendControlChange(38,e[1],n),this}sendRpnDecrement(e,n={}){if(Array.isArray(e)||(e=Y.MIDI_REGISTERED_PARAMETERS[e]),ae.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(Y.MIDI_REGISTERED_PARAMETERS).forEach(s=>{Y.MIDI_REGISTERED_PARAMETERS[s][0]===e[0]&&Y.MIDI_REGISTERED_PARAMETERS[s][1]===e[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(97,0,n),this._deselectRegisteredParameter(n),this}sendRpnIncrement(e,n={}){if(Array.isArray(e)||(e=Y.MIDI_REGISTERED_PARAMETERS[e]),ae.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(Y.MIDI_REGISTERED_PARAMETERS).forEach(s=>{Y.MIDI_REGISTERED_PARAMETERS[s][0]===e[0]&&Y.MIDI_REGISTERED_PARAMETERS[s][1]===e[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(96,0,n),this._deselectRegisteredParameter(n),this}playNote(e,n={}){if(this.sendNoteOn(e,n),n.duration>0&&isFinite(String(n.duration).trim()||NaN)){let r={time:(ie.toTimestamp(n.time)||ae.time)+n.duration,release:n.release,rawRelease:n.rawRelease};this.sendNoteOff(e,r)}return this}sendNoteOff(e,n={}){if(ae.validation){if(n.rawRelease!=null&&!(n.rawRelease>=0&&n.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(n.release!=null&&!(n.release>=0&&n.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");n.rawVelocity&&(n.rawRelease=n.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),n.velocity&&(n.release=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;n.rawRelease!=null?r=n.rawRelease:isNaN(n.release)||(r=Math.round(127*n.release));const s=ae.octaveOffset+this.output.octaveOffset+this.octaveOffset;return ie.buildNoteArray(e,{rawRelease:parseInt(r)}).forEach(i=>{this.send([(Y.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),i.getOffsetNumber(s),i.rawRelease],{time:ie.toTimestamp(n.time)})}),this}stopNote(e,n={}){return this.sendNoteOff(e,n)}sendNoteOn(e,n={}){if(ae.validation){if(n.rawAttack!=null&&!(n.rawAttack>=0&&n.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(n.attack!=null&&!(n.attack>=0&&n.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");n.rawVelocity&&(n.rawAttack=n.velocity,n.rawRelease=n.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),n.velocity&&(n.attack=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;n.rawAttack!=null?r=n.rawAttack:isNaN(n.attack)||(r=Math.round(127*n.attack));const s=ae.octaveOffset+this.output.octaveOffset+this.octaveOffset;return ie.buildNoteArray(e,{rawAttack:r}).forEach(i=>{this.send([(Y.MIDI_CHANNEL_MESSAGES.noteon<<4)+(this.number-1),i.getOffsetNumber(s),i.rawAttack],{time:ie.toTimestamp(n.time)})}),this}sendChannelMode(e,n=0,r={}){if(typeof e=="string"&&(e=Y.MIDI_CHANNEL_MODE_MESSAGES[e]),ae.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(n))||n<0||n>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(Y.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,n],{time:ie.toTimestamp(r.time)}),this}sendOmniMode(e,n={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,n):this.sendChannelMode("omnimodeoff",0,n),this}sendChannelAftertouch(e,n={}){if(ae.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(n.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return this.send([(Y.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(127*e)],{time:ie.toTimestamp(n.time)}),this}sendMasterTuning(e,n={}){if(e=parseFloat(e)||0,ae.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let r=Math.floor(e)+64,s=e-Math.floor(e);s=Math.round((s+1)/2*16383);let i=s>>7&127,o=127&s;return this.sendRpnValue("channelcoarsetuning",r,n),this.sendRpnValue("channelfinetuning",[i,o],n),this}sendModulationRange(e,n,r={}){if(ae.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!(n==null||Number.isInteger(n)&&n>=0&&n<=127))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return n>=0&&n<=127||(n=0),this.sendRpnValue("modulationrange",[e,n],r),this}sendNrpnValue(e,n,r={}){if(n=[].concat(n),ae.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");n.forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,r),this._setCurrentParameter(n,r),this._deselectNonRegisteredParameter(r),this}sendPitchBend(e,n={}){if(ae.validation)if(n.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(n.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}let r=0,s=0;if(n.rawValue&&Array.isArray(e))r=e[0],s=e[1];else if(n.rawValue&&!Array.isArray(e))r=e;else{const i=ie.fromFloatToMsbLsb((e+1)/2);r=i.msb,s=i.lsb}return this.send([(Y.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),s,r],{time:ie.toTimestamp(n.time)}),this}sendPitchBendRange(e,n,r={}){if(ae.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,n],r),this}sendProgramChange(e,n={}){if(e=parseInt(e)||0,ae.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(Y.MIDI_CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:ie.toTimestamp(n.time)}),this}sendRpnValue(e,n,r={}){if(Array.isArray(e)||(e=Y.MIDI_REGISTERED_PARAMETERS[e]),ae.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(n).forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,r),this._setCurrentParameter(n,r),this._deselectRegisteredParameter(r),this}sendTuningBank(e,n={}){if(ae.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,n),this}sendTuningProgram(e,n={}){if(ae.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,n),this}sendLocalControl(e,n={}){return e?this.sendChannelMode("localcontrol",127,n):this.sendChannelMode("localcontrol",0,n)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,n={}){return e==="mono"?this.sendChannelMode("monomodeon",0,n):this.sendChannelMode("polymodeon",0,n)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Hc extends cn{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new iE(this,n);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput.onstatechange=null,await this.close(),this._midiOutput=null}_onStateChange(e){let n={timestamp:ae.time};e.port.connection==="open"?(n.type="opened",n.target=this,n.port=n.target,this.emit("opened",n)):e.port.connection==="closed"&&e.port.state==="connected"?(n.type="closed",n.target=this,n.port=n.target,this.emit("closed",n)):e.port.connection==="closed"&&e.port.state==="disconnected"?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,n={time:0},r=0){if(e instanceof bm&&(e=ie.isNode?e.data:e.rawData),e instanceof Uint8Array&&ie.isNode&&(e=Array.from(e)),ae.validation){if(Array.isArray(e)||e instanceof Uint8Array||(e=[e],Array.isArray(n)&&(e=e.concat(n)),n=isNaN(r)?{time:0}:{time:r}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(s=>{if(!((s=parseInt(s))>=0&&s<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),n||(n={time:0})}return this._midiOutput.send(e,ie.toTimestamp(n.time)),this}sendSysex(e,n=[],r={}){if(e=[].concat(e),n instanceof Uint8Array){const s=new Uint8Array(1+e.length+n.length+1);s[0]=Y.MIDI_SYSTEM_MESSAGES.sysex,s.set(Uint8Array.from(e),1),s.set(n,1+e.length),s[s.length-1]=Y.MIDI_SYSTEM_MESSAGES.sysexend,this.send(s,{time:r.time})}else{const s=e.concat(n,Y.MIDI_SYSTEM_MESSAGES.sysexend);this.send([Y.MIDI_SYSTEM_MESSAGES.sysex].concat(s),{time:r.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():ae.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,n={}){if(ae.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([Y.MIDI_SYSTEM_MESSAGES.timecode,e],{time:n.time}),this}sendSongPosition(e=0,n={}){var r=(e=Math.floor(e)||0)>>7&127,s=127&e;return this.send([Y.MIDI_SYSTEM_MESSAGES.songposition,r,s],{time:n.time}),this}sendSongSelect(e=0,n={}){if(ae.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([Y.MIDI_SYSTEM_MESSAGES.songselect,e],{time:n.time}),this}sendTuneRequest(e={}){return this.send([Y.MIDI_SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([Y.MIDI_SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([Y.MIDI_SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([Y.MIDI_SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([Y.MIDI_SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([Y.MIDI_SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([Y.MIDI_SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return ae.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,n,r={}){return r.channels==null&&(r.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendKeyAftertouch(e,n,r)}),this}sendControlChange(e,n,r={},s={}){if(ae.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const i=r;(r=s).channels=i,r.channels==="all"&&(r.channels=Y.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendControlChange(e,n,r)}),this}sendPitchBendRange(e=0,n=0,r={}){return r.channels==null&&(r.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendPitchBendRange(e,n,r)}),this}setPitchBendRange(e=0,n=0,r="all",s={}){return ae.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),s.channels=r,s.channels==="all"&&(s.channels=Y.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,n,s)}sendRpnValue(e,n,r={}){return r.channels==null&&(r.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendRpnValue(e,n,r)}),this}setRegisteredParameter(e,n=[],r="all",s={}){return ae.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),s.channels=r,s.channels==="all"&&(s.channels=Y.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,n,s)}sendChannelAftertouch(e,n={},r={}){if(ae.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;(n=r).channels=s,n.channels==="all"&&(n.channels=Y.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendChannelAftertouch(e,n)}),this}sendPitchBend(e,n={},r={}){if(ae.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;(n=r).channels=s,n.channels==="all"&&(n.channels=Y.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendPitchBend(e,n)}),this}sendProgramChange(e=0,n={},r={}){if(ae.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;(n=r).channels=s,n.channels==="all"&&(n.channels=Y.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendProgramChange(e,n)}),this}sendModulationRange(e,n,r={}){return r.channels==null&&(r.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendModulationRange(e,n,r)}),this}setModulationRange(e=0,n=0,r="all",s={}){return ae.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),s.channels=r,s.channels==="all"&&(s.channels=Y.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,n,s)}sendMasterTuning(e,n={}){return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendMasterTuning(e,n)}),this}setMasterTuning(e,n={},r={}){return ae.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),r.channels=n,r.channels==="all"&&(r.channels=Y.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,r)}sendTuningProgram(e,n={}){return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendTuningProgram(e,n)}),this}setTuningProgram(e,n="all",r={}){return ae.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),r.channels=n,r.channels==="all"&&(r.channels=Y.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,r)}sendTuningBank(e=0,n={}){return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendTuningBank(e,n)}),this}setTuningBank(e,n="all",r={}){return ae.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),r.channels=n,r.channels==="all"&&(r.channels=Y.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,r)}sendChannelMode(e,n=0,r={},s={}){if(ae.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const i=r;(r=s).channels=i,r.channels==="all"&&(r.channels=Y.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendChannelMode(e,n,r)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},n={}){if(ae.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;(e=n).channels=r,e.channels==="all"&&(e.channels=Y.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,n={},r={}){if(ae.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;(n=r).channels=s,n.channels==="all"&&(n.channels=Y.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendPolyphonicMode(e,n)}),this}sendLocalControl(e,n={},r={}){if(ae.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;(n=r).channels=s,n.channels==="all"&&(n.channels=Y.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendLocalControl(e,n)}),this}sendOmniMode(e,n={},r={}){if(ae.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;(n=r).channels=s,n.channels==="all"&&(n.channels=Y.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendOmniMode(e,n)}),this}sendNrpnValue(e,n,r={}){return r.channels==null&&(r.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendNrpnValue(e,n,r)}),this}setNonRegisteredParameter(e,n=[],r="all",s={}){return ae.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),s.channels=r,s.channels==="all"&&(s.channels=Y.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,n,s)}sendRpnIncrement(e,n={}){return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnIncrement(e,n)}),this}incrementRegisteredParameter(e,n="all",r={}){return ae.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),r.channels=n,r.channels==="all"&&(r.channels=Y.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,r)}sendRpnDecrement(e,n={}){return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnDecrement(e,n)}),this}decrementRegisteredParameter(e,n="all",r={}){return ae.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),r.channels=n,r.channels==="all"&&(r.channels=Y.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,r)}sendNoteOff(e,n={},r={}){if(ae.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;(n=r).channels=s,n.channels==="all"&&(n.channels=Y.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendNoteOff(e,n)}),this}stopNote(e,n){return this.sendNoteOff(e,n)}playNote(e,n={},r={}){if(ae.validation&&(n.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),n.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;(n=r).channels=s,n.channels==="all"&&(n.channels=Y.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].playNote(e,n)}),this}sendNoteOn(e,n={},r={}){if(ae.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;(n=r).channels=s,n.channels==="all"&&(n.channels=Y.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendNoteOn(e,n)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class uf{constructor(e=[],n={}){this.destinations=[],this.types=[...Object.keys(Y.MIDI_SYSTEM_MESSAGES),...Object.keys(Y.MIDI_CHANNEL_MESSAGES)],this.channels=Y.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),n.types&&!Array.isArray(n.types)&&(n.types=[n.types]),n.channels&&!Array.isArray(n.channels)&&(n.channels=[n.channels]),ae.validation&&(e.forEach(r=>{if(!(r instanceof Hc))throw new TypeError("Destinations must be of type 'Output'.")}),n.types!==void 0&&n.types.forEach(r=>{if(!Y.MIDI_SYSTEM_MESSAGES.hasOwnProperty(r)&&!Y.MIDI_CHANNEL_MESSAGES.hasOwnProperty(r))throw new TypeError("Type must be a valid message type.")}),n.channels!==void 0&&n.channels.forEach(r=>{if(!Y.MIDI_CHANNEL_NUMBERS.includes(r))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,n.types&&(this.types=n.types),n.channels&&(this.channels=n.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(n=>{(!ae.validation||n instanceof Hc)&&n.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 * @fires InputChannel#controlchange
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-databuttonincrement
 * @fires InputChannel#event:nrpn-databuttondecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-databuttonincrement
 * @fires InputChannel#event:rpn-databuttondecrement
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class oE extends cn{constructor(e,n){super(),this._input=e,this._number=n,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const n=Object.assign({},e);n.port=this.input,n.target=this,n.type="midimessage",this.emit(n.type,n),this._parseEventForStandardMessages(n)}_parseEventForStandardMessages(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmessage";const r=e.message.dataBytes[0],s=e.message.dataBytes[1];if(n.type==="noteoff"||n.type==="noteon"&&s===0)this.notesState[r]=!1,n.type="noteoff",n.note=new fs(ie.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+ae.octaveOffset),{rawAttack:0,rawRelease:s}),n.value=ie.from7bitToFloat(s),n.rawValue=s,n.velocity=n.note.release,n.rawVelocity=n.note.rawRelease;else if(n.type==="noteon")this.notesState[r]=!0,n.note=new fs(ie.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+ae.octaveOffset),{rawAttack:s}),n.value=ie.from7bitToFloat(s),n.rawValue=s,n.velocity=n.note.attack,n.rawVelocity=n.note.rawAttack;else if(n.type==="keyaftertouch")n.note=new fs(ie.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+ae.octaveOffset)),n.value=ie.from7bitToFloat(s),n.rawValue=s,n.identifier=n.note.identifier,n.key=n.note.number,n.rawKey=r;else if(n.type==="controlchange"){n.controller={number:r,name:ie.getCcNameByNumber(r)},n.subtype=n.controller.name||"controller"+r,n.value=ie.from7bitToFloat(s),n.rawValue=s;const i=Object.assign({},n);i.type=`${n.type}-controller${r}`,delete i.subtype,this.emit(i.type,i),n.message.dataBytes[0]>=120&&this._parseChannelModeMessage(n),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(n.message.dataBytes[0])&&this._parseEventForParameterNumber(n)}else n.type==="programchange"?(n.value=r,n.rawValue=n.value):n.type==="channelaftertouch"?(n.value=ie.from7bitToFloat(r),n.rawValue=r):n.type==="pitchbend"?(n.value=((s<<7)+r-8192)/8192,n.rawValue=(s<<7)+r):n.type="unknownmessage";this.emit(n.type,n)}_parseChannelModeMessage(e){const n=Object.assign({},e);n.type=n.controller.name,n.type==="localcontrol"&&(n.value=n.message.data[2]===127,n.rawValue=n.message.data[2]),n.type==="omnimodeon"?(n.type="omnimode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="omnimodeoff"&&(n.type="omnimode",n.value=!1,n.rawValue=n.message.data[2]),n.type==="monomodeon"?(n.type="monomode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="polymodeon"&&(n.type="monomode",n.value=!1,n.rawValue=n.message.data[2]),this.emit(n.type,n)}_parseEventForParameterNumber(e){const n=e.message.dataBytes[0],r=e.message.dataBytes[1],s=Y.MIDI_CONTROL_CHANGE_MESSAGES;n===s.nonregisteredparameterfine||n===s.registeredparameterfine?(this._nrpnBuffer=[],this._rpnBuffer=[],n===s.nonregisteredparameterfine?this._nrpnBuffer=[e.message]:r!==127&&(this._rpnBuffer=[e.message])):n===s.nonregisteredparametercoarse||n===s.registeredparametercoarse?n===s.nonregisteredparametercoarse?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&r!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):n!==s.dataentrycoarse&&n!==s.dataentryfine&&n!==s.databuttonincrement&&n!==s.databuttondecrement||(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===Y.MIDI_CONTROL_CHANGE_MESSAGES.dataentrycoarse||e===Y.MIDI_CONTROL_CHANGE_MESSAGES.dataentryfine||e===Y.MIDI_CONTROL_CHANGE_MESSAGES.databuttonincrement||e===Y.MIDI_CONTROL_CHANGE_MESSAGES.databuttondecrement||e===Y.MIDI_CONTROL_CHANGE_MESSAGES.nonregisteredparametercoarse||e===Y.MIDI_CONTROL_CHANGE_MESSAGES.nonregisteredparameterfine||e===Y.MIDI_CONTROL_CHANGE_MESSAGES.registeredparametercoarse||e===Y.MIDI_CONTROL_CHANGE_MESSAGES.registeredparameterfine}_dispatchParameterNumberEvent(e,n,r,s){e=e==="nrpn"?"nrpn":"rpn";const i={target:s.target,timestamp:s.timestamp,message:s.message,parameterMsb:n,parameterLsb:r,value:ie.from7bitToFloat(s.message.dataBytes[1]),rawValue:s.message.dataBytes[1]};i.parameter=e==="rpn"?Object.keys(Y.MIDI_REGISTERED_PARAMETERS).find(a=>Y.MIDI_REGISTERED_PARAMETERS[a][0]===n&&Y.MIDI_REGISTERED_PARAMETERS[a][1]===r):(n<<7)+r;const o=ie.getPropertyByValue(Y.MIDI_CONTROL_CHANGE_MESSAGES,s.message.dataBytes[0]);i.type=`${e}-${o}`,this.emit(i.type,i),i.type=e,i.subtype=o,this.emit(i.type,i)}getChannelModeByNumber(e){return ae.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),ie.getChannelModeByNumber(e)}getCcNameByNumber(e){if(ae.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),!((e=parseInt(e))>=0&&e<=127)))throw new RangeError("Invalid control change number.");return ie.getCcNameByNumber(e)}getNoteState(e){e instanceof fs&&(e=e.identifier);const n=ie.guessNoteNumber(e,ae.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[n]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class bm{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=1+(15&this.statusByte)):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=ie.getPropertyByValue(Y.MIDI_CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=ie.getPropertyByValue(Y.MIDI_SYSTEM_MESSAGES,this.command)),this.statusByte===Y.MIDI_SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class aE extends cn{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new oE(this,n);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let n={timestamp:ae.time,target:this,port:this};e.port.connection==="open"?(n.type="opened",this.emit("opened",n)):e.port.connection==="closed"&&e.port.state==="connected"?(n.type="closed",this.emit("closed",n)):e.port.connection==="closed"&&e.port.state==="disconnected"?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const n=new bm(e.data),r={port:this,target:this,message:n,timestamp:e.timeStamp,type:"midimessage",data:n.data,rawData:n.data,statusByte:n.data[0],dataBytes:n.dataBytes};this.emit("midimessage",r),n.isSystemMessage?this._parseEvent(r):n.isChannelMessage&&this.channels[n.channel]._processMidiMessageEvent(r),this._forwarders.forEach(s=>s.forward(n))}_parseEvent(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmidimessage",n.type==="songselect"&&(n.song=e.data[1]+1,n.value=e.data[1],n.rawValue=n.value),this.emit(n.type,n)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){ae.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,n,r={}){if(ae.validation&&typeof r=="function"){let s=n!=null?[].concat(n):void 0;n=r,r={channels:s}}if(Y.CHANNEL_EVENTS.includes(e)){r.channels===void 0&&(r.channels=Y.MIDI_CHANNEL_NUMBERS);let s=[];return ie.sanitizeChannels(r.channels).forEach(i=>{s.push(this.channels[i].addListener(e,n,r))}),s}return super.addListener(e,n,r)}addOneTimeListener(e,n,r={}){return r.remaining=1,this.addListener(e,n,r)}on(e,n,r,s){return this.addListener(e,n,r,s)}hasListener(e,n,r={}){if(ae.validation&&typeof r=="function"){let s=[].concat(n);n=r,r={channels:s}}return Y.CHANNEL_EVENTS.includes(e)?(r.channels===void 0&&(r.channels=Y.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(r.channels).every(s=>this.channels[s].hasListener(e,n))):super.hasListener(e,n)}removeListener(e,n,r={}){if(ae.validation&&typeof r=="function"){let s=[].concat(n);n=r,r={channels:s}}if(r.channels===void 0&&(r.channels=Y.MIDI_CHANNEL_NUMBERS),e==null)return ie.sanitizeChannels(r.channels).forEach(s=>{this.channels[s]&&this.channels[s].removeListener()}),super.removeListener();Y.CHANNEL_EVENTS.includes(e)?ie.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].removeListener(e,n,r)}):super.removeListener(e,n,r)}addForwarder(e,n={}){let r;return r=e instanceof uf?e:new uf(e,n),this._forwarders.push(r),r}removeForwarder(e){this._forwarders=this._forwarders.filter(n=>n!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return ae.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */const ae=new class extends cn{constructor(){super(),this.defaults={note:{attack:ie.from7bitToFloat(64),release:ie.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(t={},e=!1){if(ie.isNode){try{window.navigator}catch{global.navigator=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)()}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=t.validation!==!1,this.validation&&(typeof t=="function"&&(t={callback:t,sysex:e}),e&&(t.sysex=!0)),this.enabled)return typeof t.callback=="function"&&t.callback(),Promise.resolve();const n={timestamp:this.time,target:this,type:"error",error:void 0},r={timestamp:this.time,target:this,type:"midiaccessgranted"},s={timestamp:this.time,target:this,type:"enabled"};try{typeof t.requestMIDIAccessFunction=="function"?this.interface=await t.requestMIDIAccessFunction({sysex:t.sysex,software:t.software}):this.interface=await navigator.requestMIDIAccess({sysex:t.sysex,software:t.software})}catch(i){return n.error=i,this.emit("error",n),typeof t.callback=="function"&&t.callback(i),Promise.reject(i)}this.emit("midiaccessgranted",r),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(i){return n.error=i,this.emit("error",n),typeof t.callback=="function"&&t.callback(i),Promise.reject(i)}return this.emit("enabled",s),typeof t.callback=="function"&&t.callback(),Promise.resolve(this)}async disable(){return this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface&&(this.interface.onstatechange=void 0),this.interface=null;let t={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",t),this.removeListener()})}getInputById(t,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(e.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(this._disconnectedInputs[n].id===t.toString())return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(this.inputs[n].id===t.toString())return this.inputs[n]}getInputByName(t,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(e.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(~this._disconnectedInputs[n].name.indexOf(t))return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(~this.inputs[n].name.indexOf(t))return this.inputs[n]}getOutputByName(t,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(e.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(~this._disconnectedOutputs[n].name.indexOf(t))return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(~this.outputs[n].name.indexOf(t))return this.outputs[n]}getOutputById(t,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(e.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(this._disconnectedOutputs[n].id===t.toString())return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(this.outputs[n].id===t.toString())return this.outputs[n]}noteNameToNumber(t){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),ie.toNoteNumber(t,this.octaveOffset)}getOctave(t){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),t=parseInt(t)),!isNaN(t)&&t>=0&&t<=127&&ie.getNoteDetails(ie.offsetNumber(t,this.octaveOffset)).octave}sanitizeChannels(t){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),ie.sanitizeChannels(t)}toMIDIChannels(t){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),ie.sanitizeChannels(t)}guessNoteNumber(t){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),ie.guessNoteNumber(t,this.octaveOffset)}getValidNoteArray(t,e={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),ie.buildNoteArray(t,e)}convertToTimestamp(t){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),ie.toTimestamp(t)}async _destroyInputsAndOutputs(){let t=[];return this.inputs.forEach(e=>t.push(e.destroy())),this.outputs.forEach(e=>t.push(e.destroy())),Promise.all(t).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(t){this._updateInputsAndOutputs();let e={timestamp:t.timeStamp,type:t.port.state,target:this};if(t.port.state==="connected"&&t.port.connection==="open"){t.port.type==="output"?e.port=this.getOutputById(t.port.id):t.port.type==="input"&&(e.port=this.getInputById(t.port.id)),this.emit(t.port.state,e);const n=Object.assign({},e);n.type="portschanged",this.emit(n.type,n)}else if(t.port.state==="disconnected"&&t.port.connection==="pending"){t.port.type==="input"?e.port=this.getInputById(t.port.id,{disconnected:!0}):t.port.type==="output"&&(e.port=this.getOutputById(t.port.id,{disconnected:!0})),this.emit(t.port.state,e);const n=Object.assign({},e);n.type="portschanged",this.emit(n.type,n)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let e=this._inputs.length-1;e>=0;e--){const n=this._inputs[e];Array.from(this.interface.inputs.values()).find(r=>r===n._midiInput)||(this._disconnectedInputs.push(n),this._inputs.splice(e,1))}let t=[];return this.interface.inputs.forEach(e=>{if(!this._inputs.find(n=>n._midiInput===e)){let n=this._disconnectedInputs.find(r=>r._midiInput===e);n||(n=new aE(e)),this._inputs.push(n),t.push(n.open())}}),Promise.all(t)}async _updateOutputs(){if(!this.interface)return;for(let e=this._outputs.length-1;e>=0;e--){const n=this._outputs[e];Array.from(this.interface.outputs.values()).find(r=>r===n._midiOutput)||(this._disconnectedOutputs.push(n),this._outputs.splice(e,1))}let t=[];return this.interface.outputs.forEach(e=>{if(!this._outputs.find(n=>n._midiOutput===e)){let n=this._disconnectedOutputs.find(r=>r._midiOutput===e);n||(n=new Hc(e)),this._outputs.push(n),t.push(n.open())}}),Promise.all(t)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),ie.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),ie.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&navigator.requestMIDIAccess}get sysexEnabled(){return!(!this.interface||!this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.0.21"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),Y.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.MIDI_SYSTEM_MESSAGES."),Y.MIDI_SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.MIDI_CHANNEL_MODE_MESSAGES."),Y.MIDI_CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been moved to Enumerations.MIDI_CONTROL_CHANGE_MESSAGES."),Y.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.MIDI_REGISTERED_PARAMETERS."),this.MIDI_REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}};ae.constructor=null;const Ks=Et({enabled:!1,initiated:!1,out:!0,inputs:{},outputs:{},forwards:{},playing:!1,channels:{},channel:at("global-midi-channel",1),note:{pitch:0,channel:1},offset:pr(0,-2,2),keyboard:!0,cc:{},ccLearn:{},message:null,log:[],clock:0,filter:at("global-midi-filter",{}),available:Re(()=>Object.entries(Ks.outputs).length>0),activeNotes:Re(()=>{let t={};for(let e in Ks.channels)for(let n in Ks.channels[e].activeNotes)t[n]=Ks.channels[e].activeNotes[n];return t}),activeChroma:Re(()=>{let t=new Array(12);for(let e in Ks.activeNotes)t[(e-9)%12]=e;return t})}),cE=["+0","@8n","@16n","@32n"];Et({midi:at("synth-midi",!0),initiated:!1,mute:!1,quantize:DS(cE,{initialValue:"+0"}),volume:pr(1,0,2)}),Et({maxPolyphony:50,oscillator:{type:at("synth-osc","sawtooth8")},volume:-30,envelope:{attack:.01,decay:.1,sustain:.6,release:1},filterEnvelope:{attack:.001,decay:.7,sustain:.5,release:1,baseFrequency:60,octaves:5}});const Xo=(t,e)=>Array(Math.abs(e)+1).join(t);function qs(t,e,n){return function(...r){return console.warn(`${t} is deprecated. Use ${e}.`),n.apply(this,r)}}function wm(t){return t!==null&&typeof t=="object"&&typeof t.name=="string"}function Tm(t){return t!==null&&typeof t=="object"&&typeof t.step=="number"&&typeof t.alt=="number"}const Mm=[0,2,4,-1,1,3,5],Sm=Mm.map(t=>Math.floor(t*7/12));function Em(t){const{step:e,alt:n,oct:r,dir:s=1}=t,i=Mm[e]+7*n;if(r===void 0)return[s*i];const o=r-Sm[e]-4*n;return[s*i,s*o]}const lE=[3,0,4,1,5,2,6];function uE(t){const[e,n,r]=t,s=lE[hE(e)],i=Math.floor((e+1)/7);if(n===void 0)return{step:s,alt:i,dir:r};const o=n+4*i+Sm[s];return{step:s,alt:i,oct:o,dir:r}}function hE(t){const e=(t+1)%7;return e<0?7+e:e}const Cm={empty:!0,name:"",pc:"",acc:""},hf=new Map,fE=t=>"CDEFGAB".charAt(t),dE=t=>t<0?Xo("b",-t):Xo("#",t),pE=t=>t[0]==="b"?-t.length:t.length;function bt(t){const e=hf.get(t);if(e)return e;const n=typeof t=="string"?vE(t):Tm(t)?bt(yE(t)):wm(t)?bt(t.name):Cm;return hf.set(t,n),n}const mE=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function gE(t){const e=mE.exec(t);return[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]}function Gc(t){return bt(uE(t))}const _E=(t,e)=>(t%e+e)%e,Ya=[0,2,4,5,7,9,11];function vE(t){const e=gE(t);if(e[0]===""||e[3]!=="")return Cm;const n=e[0],r=e[1],s=e[2],i=(n.charCodeAt(0)+3)%7,o=pE(r),a=s.length?+s:void 0,c=Em({step:i,alt:o,oct:a}),l=n+r+s,u=n+r,h=(Ya[i]+o+120)%12,f=a===void 0?_E(Ya[i]+o,12)-12*99:Ya[i]+o+12*(a+1),d=f>=0&&f<=127?f:null,p=a===void 0?null:Math.pow(2,(f-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:h,coord:c,freq:p,height:f,letter:n,midi:d,name:l,oct:a,pc:u,step:i}}function yE(t){const{step:e,alt:n,oct:r}=t,s=fE(e);if(!s)return"";const i=s+dE(n);return r||r===0?i+r:i}const Yc={empty:!0,name:"",acc:""},bE="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",wE="(AA|A|P|M|m|d|dd)([-+]?\\d+)",TE=new RegExp("^"+bE+"|"+wE+"$");function ME(t){const e=TE.exec(`${t}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}const ff={};function Zo(t){return typeof t=="string"?ff[t]||(ff[t]=SE(t)):Tm(t)?Zo(CE(t)):wm(t)?Zo(t.name):Yc}const df=[0,2,4,5,7,9,11],Am="PMMPPMM";function SE(t){const e=ME(t);if(e[0]==="")return Yc;const n=+e[0],r=e[1],s=(Math.abs(n)-1)%7,i=Am[s];if(i==="M"&&r==="P")return Yc;const o=i==="M"?"majorable":"perfectable",a=""+n+r,c=n<0?-1:1,l=n===8||n===-8?n:c*(s+1),u=EE(o,r),h=Math.floor((Math.abs(n)-1)/7),f=c*(df[s]+u+12*h),d=(c*(df[s]+u)%12+12)%12,p=Em({step:s,alt:u,oct:h,dir:c});return{empty:!1,name:a,num:n,q:r,step:s,alt:u,dir:c,type:o,simple:l,semitones:f,chroma:d,coord:p,oct:h}}function EE(t,e){return e==="M"&&t==="majorable"||e==="P"&&t==="perfectable"?0:e==="m"&&t==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(t==="perfectable"?e.length:e.length+1):0}function CE(t){const{step:e,alt:n,oct:r=0,dir:s}=t;if(!s)return"";const i=e+1+7*r,o=i===0?e+1:i,a=s<0?"-":"",c=Am[e]==="M"?"majorable":"perfectable";return a+o+AE(c,n)}function AE(t,e){return e===0?t==="majorable"?"M":"P":e===-1&&t==="majorable"?"m":e>0?Xo("A",e):Xo("d",t==="perfectable"?e:e+1)}function wa(t,e){const n=bt(t),r=Zo(e);if(n.empty||r.empty)return"";const s=n.coord,i=r.coord,o=s.length===1?[s[0]+i[0]]:[s[0]+i[0],s[1]+i[1]];return Gc(o).name}function IE(t,e){const n=[];for(;e--;n[e]=e+t);return n}function NE(t,e){const n=[];for(;e--;n[e]=t-e);return n}function Im(t,e){return t<e?IE(t,e-t+1):NE(t,t-e+1)}function Ta(t,e){const n=e.length,r=(t%n+n)%n;return e.slice(r,n).concat(e.slice(0,r))}function PE(t){return t.filter(e=>e===0||e)}const qr={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},su=t=>Number(t).toString(2),pf=t=>parseInt(t,2),kE=/^[01]{12}$/;function Nm(t){return kE.test(t)}const OE=t=>typeof t=="number"&&t>=0&&t<=4095,xE=t=>t&&Nm(t.chroma),mf={[qr.chroma]:qr};function xt(t){const e=Nm(t)?t:OE(t)?su(t):Array.isArray(t)?HE(t):xE(t)?t.chroma:qr.chroma;return mf[e]=mf[e]||zE(e)}const RE=qs("Pcset.pcset","Pcset.get",xt),DE=t=>xt(t).chroma,FE=t=>xt(t).intervals,BE=t=>xt(t).setNum,LE=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function VE(t){const e=[];for(let n=0;n<12;n++)t.charAt(n)==="1"&&e.push(LE[n]);return e}function UE(){return Im(2048,4095).map(su)}function Pm(t,e=!0){const r=xt(t).chroma.split("");return PE(r.map((s,i)=>{const o=Ta(i,r);return e&&o[0]==="0"?null:o.join("")}))}function jE(t,e){return xt(t).setNum===xt(e).setNum}function iu(t){const e=xt(t).setNum;return n=>{const r=xt(n).setNum;return e&&e!==r&&(r&e)===r}}function km(t){const e=xt(t).setNum;return n=>{const r=xt(n).setNum;return e&&e!==r&&(r|e)===r}}function Om(t){const e=xt(t);return n=>{const r=bt(n);return e&&!r.empty&&e.chroma.charAt(r.chroma)==="1"}}function $E(t){const e=Om(t);return n=>n.filter(e)}var qE={get:xt,chroma:DE,num:BE,intervals:FE,chromas:UE,isSupersetOf:km,isSubsetOf:iu,isNoteIncludedIn:Om,isEqual:jE,filter:$E,modes:Pm,pcset:RE};function WE(t){const e=t.split("");return e.map((n,r)=>Ta(r,e).join(""))}function zE(t){const e=pf(t),n=WE(t).map(pf).filter(i=>i>=2048).sort()[0],r=su(n),s=VE(t);return{empty:!1,name:"",setNum:e,chroma:t,normalized:r,intervals:s}}function HE(t){if(t.length===0)return qr.chroma;let e;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<t.length;r++)e=bt(t[r]),e.empty&&(e=Zo(t[r])),e.empty||(n[e.chroma]=1);return n.join("")}const GE=[["1P 3M 5P","major","M ^ "],["1P 3M 5P 7M","major seventh","maj7 \u0394 ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 \u03949 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 \u0394#4 \u0394#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -\u03947 m\u0394 -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim \xB0 o"],["1P 3m 5d 7d","diminished seventh","dim7 \xB07 o7"],["1P 3m 5d 7m","half-diminished","m7b5 \xF8 -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 \u03949#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],YE={...qr,name:"",quality:"Unknown",intervals:[],aliases:[]};let Ws=[],xr={};function xm(t){return xr[t]||YE}const KE=qs("ChordType.chordType","ChordType.get",xm);function XE(){return Ws.map(t=>t.name).filter(t=>t)}function ZE(){return Ws.map(t=>t.aliases[0]).filter(t=>t)}function QE(){return Object.keys(xr)}function ou(){return Ws.slice()}const JE=qs("ChordType.entries","ChordType.all",ou);function eC(){Ws=[],xr={}}function Rm(t,e,n){const r=nC(t),s={...xt(t),name:n||"",quality:r,intervals:t,aliases:e};Ws.push(s),s.name&&(xr[s.name]=s),xr[s.setNum]=s,xr[s.chroma]=s,s.aliases.forEach(i=>tC(s,i))}function tC(t,e){xr[e]=t}function nC(t){const e=n=>t.indexOf(n)!==-1;return e("5A")?"Augmented":e("3M")?"Major":e("5d")?"Diminished":e("3m")?"Minor":"Unknown"}GE.forEach(([t,e,n])=>Rm(t.split(" "),n.split(" "),e));Ws.sort((t,e)=>t.setNum-e.setNum);var Jt={names:XE,symbols:ZE,get:xm,all:ou,add:Rm,removeAll:eC,keys:QE,entries:JE,chordType:KE};const rC=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 7m","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3m 4P 5P 6m 7m","aeolian","minor"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],sC={...qr,intervals:[],aliases:[]};let Ma=[],Rr={};function Dm(){return Ma.map(t=>t.name)}function Sa(t){return Rr[t]||sC}const iC=qs("ScaleDictionary.scaleType","ScaleType.get",Sa);function Ea(){return Ma.slice()}const oC=qs("ScaleDictionary.entries","ScaleType.all",Ea);function aC(){return Object.keys(Rr)}function cC(){Ma=[],Rr={}}function Fm(t,e,n=[]){const r={...xt(t),name:e,intervals:t,aliases:n};return Ma.push(r),Rr[r.name]=r,Rr[r.setNum]=r,Rr[r.chroma]=r,r.aliases.forEach(s=>lC(r,s)),r}function lC(t,e){Rr[e]=t}rC.forEach(([t,e,...n])=>Fm(t.split(" "),e,n));var Bm={names:Dm,get:Sa,all:Ea,add:Fm,removeAll:cC,keys:aC,entries:oC,scaleType:iC};const uC=Math.log(2),hC=Math.log(440);function Lm(t){const e=12*(Math.log(t)-hC)/uC+69;return Math.round(e*100)/100}const fC="C C# D D# E F F# G G# A A# B".split(" "),dC="C Db D Eb E F Gb G Ab A Bb B".split(" ");function zs(t,e={}){if(isNaN(t)||t===-1/0||t===1/0)return"";t=Math.round(t);const r=(e.sharps===!0?fC:dC)[t%12];if(e.pitchClass)return r;const s=Math.floor(t/12)-1;return r+s}const pC=["C","D","E","F","G","A","B"],Vm=t=>t.name,Um=t=>t.map(bt).filter(e=>!e.empty);function mC(t){return t===void 0?pC.slice():Array.isArray(t)?Um(t).map(Vm):[]}const Qt=bt,gC=t=>Qt(t).name,_C=t=>Qt(t).pc,vC=t=>Qt(t).acc,yC=t=>Qt(t).oct,bC=t=>Qt(t).midi,wC=t=>Qt(t).freq,TC=t=>Qt(t).chroma;function jm(t){return zs(t)}function MC(t){return zs(Lm(t))}function SC(t){return zs(Lm(t),{sharps:!0})}function EC(t){return zs(t,{sharps:!0})}const au=wa,CC=wa,$m=t=>e=>au(e,t),AC=$m,qm=t=>e=>au(t,e),IC=qm;function Wm(t,e){const n=Qt(t);if(n.empty)return"";const[r,s]=n.coord;return Gc(s===void 0?[r+e]:[r+e,s]).name}const NC=Wm,cu=(t,e)=>t.height-e.height,PC=(t,e)=>e.height-t.height;function zm(t,e){return e=e||cu,Um(t).sort(e).map(Vm)}function Hm(t){return zm(t,cu).filter((e,n,r)=>n===0||e!==r[n-1])}const kC=t=>{const e=Qt(t);return e.empty?"":zs(e.midi||e.chroma,{sharps:e.alt>0,pitchClass:e.midi===null})};function Gm(t,e){const n=Qt(t);if(n.empty)return"";const r=Qt(e||zs(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(n.oct===void 0)return r.pc;const s=n.chroma-n.alt,i=r.chroma-r.alt,o=s>11||i<0?-1:s<0||i>11?1:0,a=n.oct+o;return r.pc+a}var gf={names:mC,get:Qt,name:gC,pitchClass:_C,accidentals:vC,octave:yC,midi:bC,ascending:cu,descending:PC,sortedNames:zm,sortedUniqNames:Hm,fromMidi:jm,fromMidiSharps:EC,freq:wC,fromFreq:MC,fromFreqSharps:SC,chroma:TC,transpose:au,tr:CC,transposeBy:$m,trBy:AC,transposeFrom:qm,trFrom:IC,transposeFifths:Wm,trFifths:NC,simplify:kC,enharmonic:Gm};Object.freeze([]);const lu=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],_f={...qr,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},OC=lu.map(xC),Kc={};OC.forEach(t=>{Kc[t.name]=t,t.aliases.forEach(e=>{Kc[e]=t})});function Ym(t){return typeof t=="string"?Kc[t.toLowerCase()]||_f:t&&t.name?Ym(t.name):_f}function xC(t){const[e,n,r,s,i,o,a]=t,c=a?[a]:[],l=Number(n).toString(2),u=Sa(s).intervals;return{empty:!1,intervals:u,modeNum:e,chroma:l,normalized:l,name:s,setNum:n,alt:r,triad:i,seventh:o,aliases:c}}function Km(t){return(e,n)=>{const r=Ym(e);if(r.empty)return[];const s=Ta(r.modeNum,t),i=r.intervals.map(o=>wa(n,o));return s.map((o,a)=>i[a]+o)}}Km(lu.map(t=>t[4]));Km(lu.map(t=>t[5]));const RC={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Xm(t){if(typeof t!="string")return["",""];const e=t.indexOf(" "),n=bt(t.substring(0,e));if(n.empty){const s=bt(t);return s.empty?["",t]:[s.name,""]}const r=t.substring(n.name.length+1);return[n.name,r.length?r:""]}const DC=Dm;function mr(t){const e=Array.isArray(t)?t:Xm(t),n=bt(e[0]).name,r=Sa(e[1]);if(r.empty)return RC;const s=r.name,i=n?r.intervals.map(a=>wa(n,a)):[],o=n?n+" "+s:s;return{...r,name:o,type:s,tonic:n,notes:i}}const FC=qs("Scale.scale","Scale.get",mr);function BC(t){const e=mr(t),n=iu(e.chroma);return ou().filter(r=>n(r.chroma)).map(r=>r.aliases[0])}function LC(t){const e=mr(t),n=km(e.chroma);return Ea().filter(r=>n(r.chroma)).map(r=>r.name)}function VC(t){const e=iu(mr(t).chroma);return Ea().filter(n=>e(n.chroma)).map(n=>n.name)}function Zm(t){const e=t.map(s=>bt(s).pc).filter(s=>s),n=e[0],r=Hm(e);return Ta(r.indexOf(n),r)}function UC(t){const e=mr(t);if(e.empty)return[];const n=e.tonic?e.notes:e.intervals;return Pm(e.chroma).map((r,s)=>{const i=mr(r).name;return i?[n[s],i]:["",""]}).filter(r=>r[0])}function jC(t){const e=Array.isArray(t)?Zm(t):mr(t).notes,n=e.map(r=>bt(r).chroma);return r=>{const s=bt(typeof r=="number"?jm(r):r),i=s.height;if(i===void 0)return;const o=i%12,a=n.indexOf(o);if(a!==-1)return Gm(s.name,e[a])}}function $C(t){const e=jC(t);return(n,r)=>{const s=bt(n).height,i=bt(r).height;return s===void 0||i===void 0?[]:Im(s,i).map(e).filter(o=>o)}}var vf={get:mr,names:DC,extended:LC,modeNames:UC,reduced:VC,scaleChords:BC,scaleNotes:Zm,tokenize:Xm,rangeOf:$C,scale:FC};Jt.add(["1P","2m"],["2m"],"minor second");Jt.add(["1P","2M"],["2M"],"major second");Jt.add(["1P","3m"],["3m"],"minor third");Jt.add(["1P","3M"],["3M"],"major third");Jt.add(["1P","4P"],["4P"],"perfect fourth");Jt.add(["1P","5d"],["TT"],"tritone");Jt.add(["1P","5P"],["5P"],"perfect fifth");Jt.add(["1P","6m"],["6m"],"minor sixth");Jt.add(["1P","6M"],["6M"],"major sixth");Jt.add(["1P","7m"],["7m"],"minor seventh");Jt.add(["1P","7M"],["7M"],"major seventh");Jt.all();Bm.all();const Qm=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];Qm.forEach((t,e)=>{});const Xc=Qm,qC=[...Xc].map((t,e)=>({name:t,pitch:e})),ns=Et({tonic:pr(at("global-tonic",0),0,11),note:Re(()=>qC[ns.tonic]),chroma:at("global-chroma","101011010101"),set:Re(()=>Bm.get(ns.chroma)),full:Re(()=>{let t=ns.note.name+"4 "+ns.set.name;return vf.get(t)}),pcs:Re(()=>vf.scaleNotes(ns.full.notes)),isIn:Re(()=>qE.isNoteIncludedIn(ns.pcs))});var WC={grad:.9,turn:360,rad:360/(2*Math.PI)},On=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},mt=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Xt=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},Jm=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},yf=function(t){return{r:Xt(t.r,0,255),g:Xt(t.g,0,255),b:Xt(t.b,0,255),a:Xt(t.a)}},Ka=function(t){return{r:mt(t.r),g:mt(t.g),b:mt(t.b),a:mt(t.a,3)}},zC=/^#([0-9a-f]{3,8})$/i,ao=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},eg=function(t){var e=t.r,n=t.g,r=t.b,s=t.a,i=Math.max(e,n,r),o=i-Math.min(e,n,r),a=o?i===e?(n-r)/o:i===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:i?o/i*100:0,v:i/255*100,a:s}},tg=function(t){var e=t.h,n=t.s,r=t.v,s=t.a;e=e/360*6,n/=100,r/=100;var i=Math.floor(e),o=r*(1-n),a=r*(1-(e-i)*n),c=r*(1-(1-e+i)*n),l=i%6;return{r:255*[r,a,o,o,c,r][l],g:255*[c,r,r,a,o,o][l],b:255*[o,o,c,r,r,a][l],a:s}},bf=function(t){return{h:Jm(t.h),s:Xt(t.s,0,100),l:Xt(t.l,0,100),a:Xt(t.a)}},wf=function(t){return{h:mt(t.h),s:mt(t.s),l:mt(t.l),a:mt(t.a,3)}},Tf=function(t){return tg((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},ai=function(t){return{h:(e=eg(t)).h,s:(s=(200-(n=e.s))*(r=e.v)/100)>0&&s<200?n*r/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,n,r,s},HC=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,GC=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,YC=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,KC=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Zc={string:[[function(t){var e=zC.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?mt(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?mt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=YC.exec(t)||KC.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:yf({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=HC.exec(t)||GC.exec(t);if(!e)return null;var n,r,s=bf({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(WC[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Tf(s)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,s=t.a,i=s===void 0?1:s;return On(e)&&On(n)&&On(r)?yf({r:Number(e),g:Number(n),b:Number(r),a:Number(i)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,s=t.a,i=s===void 0?1:s;if(!On(e)||!On(n)||!On(r))return null;var o=bf({h:Number(e),s:Number(n),l:Number(r),a:Number(i)});return Tf(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,s=t.a,i=s===void 0?1:s;if(!On(e)||!On(n)||!On(r))return null;var o=function(a){return{h:Jm(a.h),s:Xt(a.s,0,100),v:Xt(a.v,0,100),a:Xt(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(i)});return tg(o)},"hsv"]]},Mf=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},XC=function(t){return typeof t=="string"?Mf(t.trim(),Zc.string):typeof t=="object"&&t!==null?Mf(t,Zc.object):[null,void 0]},Xa=function(t,e){var n=ai(t);return{h:n.h,s:Xt(n.s+100*e,0,100),l:n.l,a:n.a}},Za=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Sf=function(t,e){var n=ai(t);return{h:n.h,s:n.s,l:Xt(n.l+100*e,0,100),a:n.a}},Qc=function(){function t(e){this.parsed=XC(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return mt(Za(this.rgba),2)},t.prototype.isDark=function(){return Za(this.rgba)<.5},t.prototype.isLight=function(){return Za(this.rgba)>=.5},t.prototype.toHex=function(){return e=Ka(this.rgba),n=e.r,r=e.g,s=e.b,o=(i=e.a)<1?ao(mt(255*i)):"","#"+ao(n)+ao(r)+ao(s)+o;var e,n,r,s,i,o},t.prototype.toRgb=function(){return Ka(this.rgba)},t.prototype.toRgbString=function(){return e=Ka(this.rgba),n=e.r,r=e.g,s=e.b,(i=e.a)<1?"rgba("+n+", "+r+", "+s+", "+i+")":"rgb("+n+", "+r+", "+s+")";var e,n,r,s,i},t.prototype.toHsl=function(){return wf(ai(this.rgba))},t.prototype.toHslString=function(){return e=wf(ai(this.rgba)),n=e.h,r=e.s,s=e.l,(i=e.a)<1?"hsla("+n+", "+r+"%, "+s+"%, "+i+")":"hsl("+n+", "+r+"%, "+s+"%)";var e,n,r,s,i},t.prototype.toHsv=function(){return e=eg(this.rgba),{h:mt(e.h),s:mt(e.s),v:mt(e.v),a:mt(e.a,3)};var e},t.prototype.invert=function(){return xn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),xn(Xa(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),xn(Xa(this.rgba,-e))},t.prototype.grayscale=function(){return xn(Xa(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),xn(Sf(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),xn(Sf(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?xn({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):mt(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=ai(this.rgba);return typeof e=="number"?xn({h:e,s:n.s,l:n.l,a:n.a}):mt(n.h)},t.prototype.isEqual=function(e){return this.toHex()===xn(e).toHex()},t}(),xn=function(t){return t instanceof Qc?t:new Qc(t)},Ef=[],ZC=function(t){t.forEach(function(e){Ef.indexOf(e)<0&&(e(Qc,Zc),Ef.push(e))})},QC={grad:.9,turn:360,rad:360/(2*Math.PI)},Qa=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},ds=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Fn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},Ja=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},ec=function(t){return 255*(t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t)},uu=96.422,hu=100,fu=82.521,JC=function(t){var e,n,r={x:.9555766*(e=t).x+-.0230393*e.y+.0631636*e.z,y:-.0282895*e.x+1.0099416*e.y+.0210077*e.z,z:.0122982*e.x+-.020483*e.y+1.3299098*e.z};return n={r:ec(.032404542*r.x-.015371385*r.y-.004985314*r.z),g:ec(-.00969266*r.x+.018760108*r.y+41556e-8*r.z),b:ec(556434e-9*r.x-.002040259*r.y+.010572252*r.z),a:t.a},{r:Fn(n.r,0,255),g:Fn(n.g,0,255),b:Fn(n.b,0,255),a:Fn(n.a)}},eA=function(t){var e=Ja(t.r),n=Ja(t.g),r=Ja(t.b);return function(s){return{x:Fn(s.x,0,uu),y:Fn(s.y,0,hu),z:Fn(s.z,0,fu),a:Fn(s.a)}}(function(s){return{x:1.0478112*s.x+.0228866*s.y+-.050127*s.z,y:.0295424*s.x+.9904844*s.y+-.0170491*s.z,z:-.0092345*s.x+.0150436*s.y+.7521316*s.z,a:s.a}}({x:100*(.4124564*e+.3575761*n+.1804375*r),y:100*(.2126729*e+.7151522*n+.072175*r),z:100*(.0193339*e+.119192*n+.9503041*r),a:t.a}))},ci=216/24389,ws=24389/27,ng=function(t){return{l:Fn(t.l,0,100),c:t.c,h:(e=t.h,(e=isFinite(e)?e%360:0)>0?e:e+360),a:t.a};var e},Cf=function(t){return{l:ds(t.l,2),c:ds(t.c,2),h:ds(t.h,2),a:ds(t.a,3)}},tA=function(t){var e=t.l,n=t.c,r=t.h,s=t.a,i=s===void 0?1:s;if(!Qa(e)||!Qa(n)||!Qa(r))return null;var o=ng({l:Number(e),c:Number(n),h:Number(r),a:Number(i)});return rg(o)},Af=function(t){var e=function(i){var o=eA(i),a=o.x/uu,c=o.y/hu,l=o.z/fu;return a=a>ci?Math.cbrt(a):(ws*a+16)/116,{l:116*(c=c>ci?Math.cbrt(c):(ws*c+16)/116)-16,a:500*(a-c),b:200*(c-(l=l>ci?Math.cbrt(l):(ws*l+16)/116)),alpha:o.a}}(t),n=ds(e.a,3),r=ds(e.b,3),s=Math.atan2(r,n)/Math.PI*180;return{l:e.l,c:Math.sqrt(n*n+r*r),h:s<0?s+360:s,a:e.alpha}},rg=function(t){return e={l:t.l,a:t.c*Math.cos(t.h*Math.PI/180),b:t.c*Math.sin(t.h*Math.PI/180),alpha:t.a},r=e.a/500+(n=(e.l+16)/116),s=n-e.b/200,JC({x:(Math.pow(r,3)>ci?Math.pow(r,3):(116*r-16)/ws)*uu,y:(e.l>8?Math.pow((e.l+16)/116,3):e.l/ws)*hu,z:(Math.pow(s,3)>ci?Math.pow(s,3):(116*s-16)/ws)*fu,a:e.alpha});var e,n,r,s},nA=/^lch\(\s*([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)\s+([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rA=function(t){var e=nA.exec(t);if(!e)return null;var n,r,s=ng({l:Number(e[1]),c:Number(e[2]),h:(n=e[3],r=e[4],r===void 0&&(r="deg"),Number(n)*(QC[r]||1)),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return rg(s)};function sA(t,e){t.prototype.toLch=function(){return Cf(Af(this.rgba))},t.prototype.toLchString=function(){return n=Cf(Af(this.rgba)),r=n.l,s=n.c,i=n.h,(o=n.a)<1?"lch("+r+"% "+s+" "+i+" / "+o+")":"lch("+r+"% "+s+" "+i+")";var n,r,s,i,o},e.string.push([rA,"lch"]),e.object.push([tA,"lch"])}var Sn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},tc=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},nc=function(t){return 255*(t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t)},du=96.422,pu=100,mu=82.521,iA=function(t){var e,n,r={x:.9555766*(e=t).x+-.0230393*e.y+.0631636*e.z,y:-.0282895*e.x+1.0099416*e.y+.0210077*e.z,z:.0122982*e.x+-.020483*e.y+1.3299098*e.z};return n={r:nc(.032404542*r.x-.015371385*r.y-.004985314*r.z),g:nc(-.00969266*r.x+.018760108*r.y+41556e-8*r.z),b:nc(556434e-9*r.x-.002040259*r.y+.010572252*r.z),a:t.a},{r:Sn(n.r,0,255),g:Sn(n.g,0,255),b:Sn(n.b,0,255),a:Sn(n.a)}},oA=function(t){var e=tc(t.r),n=tc(t.g),r=tc(t.b);return function(s){return{x:Sn(s.x,0,du),y:Sn(s.y,0,pu),z:Sn(s.z,0,mu),a:Sn(s.a)}}(function(s){return{x:1.0478112*s.x+.0228866*s.y+-.050127*s.z,y:.0295424*s.x+.9904844*s.y+-.0170491*s.z,z:-.0092345*s.x+.0150436*s.y+.7521316*s.z,a:s.a}}({x:100*(.4124564*e+.3575761*n+.1804375*r),y:100*(.2126729*e+.7151522*n+.072175*r),z:100*(.0193339*e+.119192*n+.9503041*r),a:t.a}))},li=216/24389,Ts=24389/27,If=function(t){var e=oA(t),n=e.x/du,r=e.y/pu,s=e.z/mu;return n=n>li?Math.cbrt(n):(Ts*n+16)/116,{l:116*(r=r>li?Math.cbrt(r):(Ts*r+16)/116)-16,a:500*(n-r),b:200*(r-(s=s>li?Math.cbrt(s):(Ts*s+16)/116)),alpha:e.a}},aA=function(t,e,n){var r,s=If(t),i=If(e);return function(o){var a=(o.l+16)/116,c=o.a/500+a,l=a-o.b/200;return iA({x:(Math.pow(c,3)>li?Math.pow(c,3):(116*c-16)/Ts)*du,y:(o.l>8?Math.pow((o.l+16)/116,3):o.l/Ts)*pu,z:(Math.pow(l,3)>li?Math.pow(l,3):(116*l-16)/Ts)*mu,a:o.alpha})}({l:Sn((r={l:s.l*(1-n)+i.l*n,a:s.a*(1-n)+i.a*n,b:s.b*(1-n)+i.b*n,alpha:s.alpha*(1-n)+i.alpha*n}).l,0,400),a:r.a,b:r.b,alpha:Sn(r.alpha)})};function cA(t){function e(n,r,s){s===void 0&&(s=5);for(var i=[],o=1/(s-1),a=0;a<=s-1;a++)i.push(n.mix(r,o*a));return i}t.prototype.mix=function(n,r){r===void 0&&(r=.5);var s=n instanceof t?n:new t(n),i=aA(this.toRgb(),s.toRgb(),r);return new t(i)},t.prototype.tints=function(n){return e(this,"#fff",n)},t.prototype.shades=function(n){return e(this,"#000",n)},t.prototype.tones=function(n){return e(this,"#808080",n)}}function lA(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var s in n)r[n[s]]=s;var i={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,c,l=r[this.toHex()];if(l)return l;if(o!=null&&o.closest){var u=this.toRgb(),h=1/0,f="black";if(!i.length)for(var d in n)i[d]=new t(n[d]).toRgb();for(var p in n){var g=(a=u,c=i[p],Math.pow(a.r-c.r,2)+Math.pow(a.g-c.g,2)+Math.pow(a.b-c.b,2));g<h&&(h=g,f=p)}return f}},e.string.push([function(o){var a=o.toLowerCase(),c=a==="transparent"?"#0000":n[a];return c?new t(c).toRgb():null},"name"])}var rc=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Xs=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},ln=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},sc=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},ic=function(t){return 255*(t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t)},gu=96.422,_u=100,vu=82.521,uA=function(t){var e,n,r={x:.9555766*(e=t).x+-.0230393*e.y+.0631636*e.z,y:-.0282895*e.x+1.0099416*e.y+.0210077*e.z,z:.0122982*e.x+-.020483*e.y+1.3299098*e.z};return n={r:ic(.032404542*r.x-.015371385*r.y-.004985314*r.z),g:ic(-.00969266*r.x+.018760108*r.y+41556e-8*r.z),b:ic(556434e-9*r.x-.002040259*r.y+.010572252*r.z),a:t.a},{r:ln(n.r,0,255),g:ln(n.g,0,255),b:ln(n.b,0,255),a:ln(n.a)}},hA=function(t){var e=sc(t.r),n=sc(t.g),r=sc(t.b);return function(s){return{x:ln(s.x,0,gu),y:ln(s.y,0,_u),z:ln(s.z,0,vu),a:ln(s.a)}}(function(s){return{x:1.0478112*s.x+.0228866*s.y+-.050127*s.z,y:.0295424*s.x+.9904844*s.y+-.0170491*s.z,z:-.0092345*s.x+.0150436*s.y+.7521316*s.z,a:s.a}}({x:100*(.4124564*e+.3575761*n+.1804375*r),y:100*(.2126729*e+.7151522*n+.072175*r),z:100*(.0193339*e+.119192*n+.9503041*r),a:t.a}))},ui=216/24389,Ms=24389/27,fA=function(t){var e=t.l,n=t.a,r=t.b,s=t.alpha,i=s===void 0?1:s;if(!rc(e)||!rc(n)||!rc(r))return null;var o=function(a){return{l:ln(a.l,0,400),a:a.a,b:a.b,alpha:ln(a.alpha)}}({l:Number(e),a:Number(n),b:Number(r),alpha:Number(i)});return dA(o)},dA=function(t){var e=(t.l+16)/116,n=t.a/500+e,r=e-t.b/200;return uA({x:(Math.pow(n,3)>ui?Math.pow(n,3):(116*n-16)/Ms)*gu,y:(t.l>8?Math.pow((t.l+16)/116,3):t.l/Ms)*_u,z:(Math.pow(r,3)>ui?Math.pow(r,3):(116*r-16)/Ms)*vu,a:t.alpha})};function pA(t,e){t.prototype.toLab=function(){return r=hA(this.rgba),i=r.y/_u,o=r.z/vu,s=(s=r.x/gu)>ui?Math.cbrt(s):(Ms*s+16)/116,n={l:116*(i=i>ui?Math.cbrt(i):(Ms*i+16)/116)-16,a:500*(s-i),b:200*(i-(o=o>ui?Math.cbrt(o):(Ms*o+16)/116)),alpha:r.a},{l:Xs(n.l,2),a:Xs(n.a,2),b:Xs(n.b,2),alpha:Xs(n.alpha,3)};var n,r,s,i,o},t.prototype.delta=function(n){n===void 0&&(n="#FFF");var r=n instanceof t?n:new t(n),s=function(i,o){var a=i.l,c=i.a,l=i.b,u=o.l,h=o.a,f=o.b,d=180/Math.PI,p=Math.PI/180,g=Math.pow(Math.pow(c,2)+Math.pow(l,2),.5),_=Math.pow(Math.pow(h,2)+Math.pow(f,2),.5),y=(a+u)/2,A=Math.pow((g+_)/2,7),F=.5*(1-Math.pow(A/(A+Math.pow(25,7)),.5)),N=c*(1+F),S=h*(1+F),R=Math.pow(Math.pow(N,2)+Math.pow(l,2),.5),O=Math.pow(Math.pow(S,2)+Math.pow(f,2),.5),D=(R+O)/2,q=N===0&&l===0?0:Math.atan2(l,N)*d,W=S===0&&f===0?0:Math.atan2(f,S)*d;q<0&&(q+=360),W<0&&(W+=360);var K=W-q,H=Math.abs(W-q);H>180&&W<=q?K+=360:H>180&&W>q&&(K-=360);var ne=q+W;H<=180?ne/=2:ne=(q+W<360?ne+360:ne-360)/2;var re=1-.17*Math.cos(p*(ne-30))+.24*Math.cos(2*p*ne)+.32*Math.cos(p*(3*ne+6))-.2*Math.cos(p*(4*ne-63)),T=u-a,v=O-R,E=2*Math.sin(p*K/2)*Math.pow(R*O,.5),M=1+.015*Math.pow(y-50,2)/Math.pow(20+Math.pow(y-50,2),.5),k=1+.045*D,j=1+.015*D*re,J=30*Math.exp(-1*Math.pow((ne-275)/25,2)),se=-2*Math.pow(A/(A+Math.pow(25,7)),.5)*Math.sin(2*p*J);return Math.pow(Math.pow(T/1/M,2)+Math.pow(v/1/k,2)+Math.pow(E/1/j,2)+se*v*E/(1*k*1*j),.5)}(this.toLab(),r.toLab())/100;return ln(Xs(s,3))},e.object.push([fA,"lab"])}var co=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Yt=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Zs=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},sg=function(t){return{c:Zs(t.c,0,100),m:Zs(t.m,0,100),y:Zs(t.y,0,100),k:Zs(t.k,0,100),a:Zs(t.a)}},Nf=function(t){return{c:Yt(t.c,2),m:Yt(t.m,2),y:Yt(t.y,2),k:Yt(t.k,2),a:Yt(t.a,3)}};function ig(t){return{r:Yt(255*(1-t.c/100)*(1-t.k/100)),g:Yt(255*(1-t.m/100)*(1-t.k/100)),b:Yt(255*(1-t.y/100)*(1-t.k/100)),a:t.a}}function Pf(t){var e=1-Math.max(t.r/255,t.g/255,t.b/255),n=(1-t.r/255-e)/(1-e),r=(1-t.g/255-e)/(1-e),s=(1-t.b/255-e)/(1-e);return{c:isNaN(n)?0:Yt(100*n),m:isNaN(r)?0:Yt(100*r),y:isNaN(s)?0:Yt(100*s),k:Yt(100*e),a:t.a}}function mA(t){var e=t.c,n=t.m,r=t.y,s=t.k,i=t.a,o=i===void 0?1:i;return co(e)&&co(n)&&co(r)&&co(s)?ig(sg({c:Number(e),m:Number(n),y:Number(r),k:Number(s),a:Number(o)})):null}var gA=/^device-cmyk\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_A=function(t){var e=gA.exec(t);return e?ig(sg({c:Number(e[1])*(e[2]?1:100),m:Number(e[3])*(e[4]?1:100),y:Number(e[5])*(e[6]?1:100),k:Number(e[7])*(e[8]?1:100),a:e[9]===void 0?1:Number(e[9])/(e[10]?100:1)})):null};function vA(t,e){t.prototype.toCmyk=function(){return Nf(Pf(this.rgba))},t.prototype.toCmykString=function(){return n=Nf(Pf(this.rgba)),r=n.c,s=n.m,i=n.y,o=n.k,(a=n.a)<1?"device-cmyk("+r+"% "+s+"% "+i+"% "+o+"% / "+a+")":"device-cmyk("+r+"% "+s+"% "+i+"% "+o+"%)";var n,r,s,i,o,a},e.object.push([mA,"cmyk"]),e.string.push([_A,"cmyk"])}var yA={grad:.9,turn:360,rad:360/(2*Math.PI)},oc=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},lo=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},ac=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},og=function(t){return{h:(e=t.h,(e=isFinite(e)?e%360:0)>0?e:e+360),w:ac(t.w,0,100),b:ac(t.b,0,100),a:ac(t.a)};var e},kf=function(t){return{h:lo(t.h),w:lo(t.w),b:lo(t.b),a:lo(t.a,3)}},Of=function(t){return{h:function(e){var n=e.r,r=e.g,s=e.b,i=e.a,o=Math.max(n,r,s),a=o-Math.min(n,r,s),c=a?o===n?(r-s)/a:o===r?2+(s-n)/a:4+(n-r)/a:0;return{h:60*(c<0?c+6:c),s:o?a/o*100:0,v:o/255*100,a:i}}(t).h,w:Math.min(t.r,t.g,t.b)/255*100,b:100-Math.max(t.r,t.g,t.b)/255*100,a:t.a}},ag=function(t){return function(e){var n=e.h,r=e.s,s=e.v,i=e.a;n=n/360*6,r/=100,s/=100;var o=Math.floor(n),a=s*(1-r),c=s*(1-(n-o)*r),l=s*(1-(1-n+o)*r),u=o%6;return{r:255*[s,c,a,a,l,s][u],g:255*[l,s,s,c,a,a][u],b:255*[a,a,l,s,s,c][u],a:i}}({h:t.h,s:t.b===100?0:100-t.w/(100-t.b)*100,v:100-t.b,a:t.a})},bA=function(t){var e=t.h,n=t.w,r=t.b,s=t.a,i=s===void 0?1:s;if(!oc(e)||!oc(n)||!oc(r))return null;var o=og({h:Number(e),w:Number(n),b:Number(r),a:Number(i)});return ag(o)},wA=/^hwb\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,TA=function(t){var e=wA.exec(t);if(!e)return null;var n,r,s=og({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(yA[r]||1)),w:Number(e[3]),b:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return ag(s)};function MA(t,e){t.prototype.toHwb=function(){return kf(Of(this.rgba))},t.prototype.toHwbString=function(){return n=kf(Of(this.rgba)),r=n.h,s=n.w,i=n.b,(o=n.a)<1?"hwb("+r+" "+s+"% "+i+"% / "+o+")":"hwb("+r+" "+s+"% "+i+"%)";var n,r,s,i,o},e.string.push([TA,"hwb"]),e.object.push([bA,"hwb"])}ZC([cA,sA,lA,pA,vA,MA]);const bn=Et({initialized:!1,bpm:pr(at("tempo-bpm",100),10,500),blink:!1,started:!1,playing:!1,stopped:!1,mute:at("tempo-mute",!0),volume:pr(at("tempo-volume",.5),0,1),progress:0,position:0,ticks:0,metre:{over:4,under:4,num:Re(()=>(bn.metre.over/(bn.metre.under/4)).toFixed(2))},hz:Re(()=>(bn.bpm/60).toFixed(2)),note:Re(()=>gf.pitchClass(jh(bn.hz).toNote())),tune:Re(()=>gf.pitchClass(bn.note)+4),pitch:Re(()=>rE(bn.hz)),digit:Re(()=>(jh(bn.hz).toMidi()+12*10+3)%12),color:Re(()=>ru(bn.digit)),tap:{last:0,diff:0,timeout:2e3,times:[],bpm:null},set(t){bn.bpm=Math.round(t+bn.bpm)}});var Ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function SA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function EA(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),e}var CA={},Ca={};function AA(t){var e=new Dt(t),n=e.readChunk();if(n.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+n.id+"'";for(var r=IA(n.data),s=[],i=0;!e.eof()&&i<r.numTracks;i++){var o=e.readChunk();if(o.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+o.id+"'";var a=NA(o.data);s.push(a)}return{header:r,tracks:s}}function IA(t){var e=new Dt(t),n=e.readUInt16(),r=e.readUInt16(),s={format:n,numTracks:r},i=e.readUInt16();return i&32768?(s.framesPerSecond=256-(i>>8),s.ticksPerFrame=i&255):s.ticksPerBeat=i,s}function NA(t){for(var e=new Dt(t),n=[];!e.eof();){var r=i();n.push(r)}return n;var s;function i(){var o={};o.deltaTime=e.readVarInt();var a=e.readUInt8();if((a&240)===240)if(a===255){o.meta=!0;var c=e.readUInt8(),l=e.readVarInt();switch(c){case 0:if(o.type="sequenceNumber",l!==2)throw"Expected length for sequenceNumber event is 2, got "+l;return o.number=e.readUInt16(),o;case 1:return o.type="text",o.text=e.readString(l),o;case 2:return o.type="copyrightNotice",o.text=e.readString(l),o;case 3:return o.type="trackName",o.text=e.readString(l),o;case 4:return o.type="instrumentName",o.text=e.readString(l),o;case 5:return o.type="lyrics",o.text=e.readString(l),o;case 6:return o.type="marker",o.text=e.readString(l),o;case 7:return o.type="cuePoint",o.text=e.readString(l),o;case 32:if(o.type="channelPrefix",l!=1)throw"Expected length for channelPrefix event is 1, got "+l;return o.channel=e.readUInt8(),o;case 33:if(o.type="portPrefix",l!=1)throw"Expected length for portPrefix event is 1, got "+l;return o.port=e.readUInt8(),o;case 47:if(o.type="endOfTrack",l!=0)throw"Expected length for endOfTrack event is 0, got "+l;return o;case 81:if(o.type="setTempo",l!=3)throw"Expected length for setTempo event is 3, got "+l;return o.microsecondsPerBeat=e.readUInt24(),o;case 84:if(o.type="smpteOffset",l!=5)throw"Expected length for smpteOffset event is 5, got "+l;var u=e.readUInt8(),h={0:24,32:25,64:29,96:30};return o.frameRate=h[u&96],o.hour=u&31,o.min=e.readUInt8(),o.sec=e.readUInt8(),o.frame=e.readUInt8(),o.subFrame=e.readUInt8(),o;case 88:if(o.type="timeSignature",l!=2&&l!=4)throw"Expected length for timeSignature event is 4 or 2, got "+l;return o.numerator=e.readUInt8(),o.denominator=1<<e.readUInt8(),l===4?(o.metronome=e.readUInt8(),o.thirtyseconds=e.readUInt8()):(o.metronome=36,o.thirtyseconds=8),o;case 89:if(o.type="keySignature",l!=2)throw"Expected length for keySignature event is 2, got "+l;return o.key=e.readInt8(),o.scale=e.readUInt8(),o;case 127:return o.type="sequencerSpecific",o.data=e.readBytes(l),o;default:return o.type="unknownMeta",o.data=e.readBytes(l),o.metatypeByte=c,o}}else if(a==240){o.type="sysEx";var l=e.readVarInt();return o.data=e.readBytes(l),o}else if(a==247){o.type="endSysEx";var l=e.readVarInt();return o.data=e.readBytes(l),o}else throw"Unrecognised MIDI event type byte: "+a;else{var f;if((a&128)===0){if(s===null)throw"Running status byte encountered before status byte";f=a,a=s,o.running=!0}else f=e.readUInt8(),s=a;var d=a>>4;switch(o.channel=a&15,d){case 8:return o.type="noteOff",o.noteNumber=f,o.velocity=e.readUInt8(),o;case 9:var p=e.readUInt8();return o.type=p===0?"noteOff":"noteOn",o.noteNumber=f,o.velocity=p,p===0&&(o.byte9=!0),o;case 10:return o.type="noteAftertouch",o.noteNumber=f,o.amount=e.readUInt8(),o;case 11:return o.type="controller",o.controllerType=f,o.value=e.readUInt8(),o;case 12:return o.type="programChange",o.programNumber=f,o;case 13:return o.type="channelAftertouch",o.amount=f,o;case 14:return o.type="pitchBend",o.value=f+(e.readUInt8()<<7)-8192,o;default:throw"Unrecognised MIDI event type: "+d}}}}function Dt(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}Dt.prototype.eof=function(){return this.pos>=this.bufferLen};Dt.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t};Dt.prototype.readInt8=function(){var t=this.readUInt8();return t&128?t-256:t};Dt.prototype.readUInt16=function(){var t=this.readUInt8(),e=this.readUInt8();return(t<<8)+e};Dt.prototype.readInt16=function(){var t=this.readUInt16();return t&32768?t-65536:t};Dt.prototype.readUInt24=function(){var t=this.readUInt8(),e=this.readUInt8(),n=this.readUInt8();return(t<<16)+(e<<8)+n};Dt.prototype.readInt24=function(){var t=this.readUInt24();return t&8388608?t-16777216:t};Dt.prototype.readUInt32=function(){var t=this.readUInt8(),e=this.readUInt8(),n=this.readUInt8(),r=this.readUInt8();return(t<<24)+(e<<16)+(n<<8)+r};Dt.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e};Dt.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)};Dt.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(e&128)t+=e&127,t<<=7;else return t+e}return t};Dt.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32(),n=this.readBytes(e);return{id:t,length:e,data:n}};var PA=AA;function kA(t,e){if(typeof t!="object")throw"Invalid MIDI data";e=e||{};var n=t.header||{},r=t.tracks||[],s,i=r.length,o=new ft;for(OA(o,n,i),s=0;s<i;s++)xA(o,r[s],e);return o.buffer}function OA(t,e,n){var r=e.format==null?1:e.format,s=128;e.timeDivision?s=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?s=-(e.framesPerSecond&255)<<8|e.ticksPerFrame&255:e.ticksPerBeat&&(s=e.ticksPerBeat&32767);var i=new ft;i.writeUInt16(r),i.writeUInt16(n),i.writeUInt16(s),t.writeChunk("MThd",i.buffer)}function xA(t,e,n){var r=new ft,s,i=e.length,o=null;for(s=0;s<i;s++)(n.running===!1||!n.running&&!e[s].running)&&(o=null),o=RA(r,e[s],o,n.useByte9ForNoteOff);t.writeChunk("MTrk",r.buffer)}function RA(t,e,n,r){var s=e.type,i=e.deltaTime,o=e.text||"",a=e.data||[],c=null;switch(t.writeVarInt(i),s){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(o.length),t.writeString(o);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(o.length),t.writeString(o);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(o.length),t.writeString(o);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(o.length),t.writeString(o);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(o.length),t.writeString(o);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(o.length),t.writeString(o);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(o.length),t.writeString(o);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var l={24:0,25:32,29:64,30:96},u=e.hour&31|l[e.frameRate];t.writeUInt8(u),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var h=Math.floor(Math.log(e.denominator)/Math.LN2)&255;t.writeUInt8(h),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(a.length),t.writeBytes(a);break;case"unknownMeta":e.metatypeByte!=null&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(a.length),t.writeBytes(a));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(a.length),t.writeBytes(a);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(a.length),t.writeBytes(a);break;case"noteOff":var f=r!==!1&&e.byte9||r&&e.velocity==0?144:128;c=f|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":c=144|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":c=160|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":c=176|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":c=192|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.programNumber);break;case"channelAftertouch":c=208|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.amount);break;case"pitchBend":c=224|e.channel,c!==n&&t.writeUInt8(c);var d=8192+e.value,p=d&127,g=d>>7&127;t.writeUInt8(p),t.writeUInt8(g);break;default:throw"Unrecognized event type: "+s}return c}function ft(){this.buffer=[]}ft.prototype.writeUInt8=function(t){this.buffer.push(t&255)};ft.prototype.writeInt8=ft.prototype.writeUInt8;ft.prototype.writeUInt16=function(t){var e=t>>8&255,n=t&255;this.writeUInt8(e),this.writeUInt8(n)};ft.prototype.writeInt16=ft.prototype.writeUInt16;ft.prototype.writeUInt24=function(t){var e=t>>16&255,n=t>>8&255,r=t&255;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(r)};ft.prototype.writeInt24=ft.prototype.writeUInt24;ft.prototype.writeUInt32=function(t){var e=t>>24&255,n=t>>16&255,r=t>>8&255,s=t&255;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(r),this.writeUInt8(s)};ft.prototype.writeInt32=ft.prototype.writeUInt32;ft.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))};ft.prototype.writeString=function(t){var e,n=t.length,r=[];for(e=0;e<n;e++)r.push(t.codePointAt(e));this.writeBytes(r)};ft.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,n=[];for(n.push(e&127),e>>=7;e;){var r=e&127|128;n.push(r),e>>=7}this.writeBytes(n.reverse())}};ft.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)};var DA=kA;Ca.parseMidi=PA;Ca.writeMidi=DA;var Qo={},Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.insert=Wr.search=void 0;function cg(t,e,n){n===void 0&&(n="ticks");var r=0,s=t.length,i=s;if(s>0&&t[s-1][n]<=e)return s-1;for(;r<i;){var o=Math.floor(r+(i-r)/2),a=t[o],c=t[o+1];if(a[n]===e){for(var l=o;l<t.length;l++){var u=t[l];u[n]===e&&(o=l)}return o}else{if(a[n]<e&&c[n]>e)return o;a[n]>e?i=o:a[n]<e&&(r=o+1)}}return-1}Wr.search=cg;function FA(t,e,n){if(n===void 0&&(n="ticks"),t.length){var r=cg(t,e[n],n);t.splice(r+1,0,e)}else t.push(e)}Wr.insert=FA;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.keySignatureKeys=void 0;var e=Wr,n=new WeakMap;t.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var r=function(){function s(i){var o=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",n.set(this,480),i){n.set(this,i.header.ticksPerBeat),i.tracks.forEach(function(c){c.forEach(function(l){l.meta&&(l.type==="timeSignature"?o.timeSignatures.push({ticks:l.absoluteTime,timeSignature:[l.numerator,l.denominator]}):l.type==="setTempo"?o.tempos.push({bpm:6e7/l.microsecondsPerBeat,ticks:l.absoluteTime}):l.type==="keySignature"&&o.keySignatures.push({key:t.keySignatureKeys[l.key+7],scale:l.scale===0?"major":"minor",ticks:l.absoluteTime}))})});var a=0;i.tracks[0].forEach(function(c){a+=c.deltaTime,c.meta&&(c.type==="trackName"?o.name=c.text:(c.type==="text"||c.type==="cuePoint"||c.type==="marker"||c.type==="lyrics")&&o.meta.push({text:c.text,ticks:a,type:c.type}))}),this.update()}}return s.prototype.update=function(){var i=this,o=0,a=0;this.tempos.sort(function(c,l){return c.ticks-l.ticks}),this.tempos.forEach(function(c,l){var u=l>0?i.tempos[l-1].bpm:i.tempos[0].bpm,h=c.ticks/i.ppq-a,f=60/u*h;c.time=f+o,o=c.time,a+=h}),this.timeSignatures.sort(function(c,l){return c.ticks-l.ticks}),this.timeSignatures.forEach(function(c,l){var u=l>0?i.timeSignatures[l-1]:i.timeSignatures[0],h=(c.ticks-u.ticks)/i.ppq,f=h/u.timeSignature[0]/(u.timeSignature[1]/4);u.measures=u.measures||0,c.measures=f+u.measures})},s.prototype.ticksToSeconds=function(i){var o=(0,e.search)(this.tempos,i);if(o!==-1){var a=this.tempos[o],c=a.time,l=(i-a.ticks)/this.ppq;return c+60/a.bpm*l}else{var u=i/this.ppq;return 60/120*u}},s.prototype.ticksToMeasures=function(i){var o=(0,e.search)(this.timeSignatures,i);if(o!==-1){var a=this.timeSignatures[o],c=(i-a.ticks)/this.ppq;return a.measures+c/(a.timeSignature[0]/a.timeSignature[1])/4}else return i/this.ppq/4},Object.defineProperty(s.prototype,"ppq",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),s.prototype.secondsToTicks=function(i){var o=(0,e.search)(this.tempos,i,"time");if(o!==-1){var a=this.tempos[o],c=a.time,l=i-c,u=l/(60/a.bpm);return Math.round(a.ticks+u*this.ppq)}else{var h=i/.5;return Math.round(h*this.ppq)}},s.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(i){return{bpm:i.bpm,ticks:i.ticks}}),timeSignatures:this.timeSignatures}},s.prototype.fromJSON=function(i){this.name=i.name,this.tempos=i.tempos.map(function(o){return Object.assign({},o)}),this.timeSignatures=i.timeSignatures.map(function(o){return Object.assign({},o)}),this.keySignatures=i.keySignatures.map(function(o){return Object.assign({},o)}),this.meta=i.meta.map(function(o){return Object.assign({},o)}),n.set(this,i.ppq),this.update()},s.prototype.setTempo=function(i){this.tempos=[{bpm:i,ticks:0}],this.update()},s}();t.Header=r})(Qo);var Fi={},yu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ControlChange=t.controlChangeIds=t.controlChangeNames=void 0,t.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},t.controlChangeIds=Object.keys(t.controlChangeNames).reduce(function(s,i){return s[t.controlChangeNames[i]]=i,s},{});var e=new WeakMap,n=new WeakMap,r=function(){function s(i,o){e.set(this,o),n.set(this,i.controllerType),this.ticks=i.absoluteTime,this.value=i.value}return Object.defineProperty(s.prototype,"number",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"name",{get:function(){return t.controlChangeNames[this.number]?t.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"time",{get:function(){var i=e.get(this);return i.ticksToSeconds(this.ticks)},set:function(i){var o=e.get(this);this.ticks=o.secondsToTicks(i)},enumerable:!1,configurable:!0}),s.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},s}();t.ControlChange=r})(yu);var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.createControlChanges=void 0;var uo=yu;function BA(){return new Proxy({},{get:function(t,e){if(t[e])return t[e];if(uo.controlChangeIds.hasOwnProperty(e))return t[uo.controlChangeIds[e]]},set:function(t,e,n){return uo.controlChangeIds.hasOwnProperty(e)?t[uo.controlChangeIds[e]]=n:t[e]=n,!0}})}Aa.createControlChanges=BA;var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.PitchBend=void 0;var cc=new WeakMap,LA=function(){function t(e,n){cc.set(this,n),this.ticks=e.absoluteTime,this.value=e.value}return Object.defineProperty(t.prototype,"time",{get:function(){var e=cc.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var n=cc.get(this);this.ticks=n.secondsToTicks(e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}();Ia.PitchBend=LA;var Na={},ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.DrumKitByPatchID=ur.InstrumentFamilyByID=ur.instrumentByPatchID=void 0;ur.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];ur.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];ur.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(Na,"__esModule",{value:!0});Na.Instrument=void 0;var ho=ur,xf=new WeakMap,VA=function(){function t(e,n){if(this.number=0,xf.set(this,n),this.number=0,e){var r=e.find(function(s){return s.type==="programChange"});r&&(this.number=r.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?ho.DrumKitByPatchID[this.number]:ho.instrumentByPatchID[this.number]},set:function(e){var n=ho.instrumentByPatchID.indexOf(e);n!==-1&&(this.number=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":ho.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){var e=xf.get(this);return e.channel===9},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(e){this.number=e.number},t}();Na.Instrument=VA;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.Note=void 0;function UA(t){var e=Math.floor(t/12)-1;return lg(t)+e.toString()}function lg(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=t%12;return e[n]}function jA(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return e.indexOf(t)}var $A=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(n){var r=t.exec(n),s=r[1],i=r[2],o=e[s.toLowerCase()];return o+(parseInt(i,10)+1)*12}}(),rs=new WeakMap,qA=function(){function t(e,n,r){rs.set(this,r),this.midi=e.midi,this.velocity=e.velocity,this.noteOffVelocity=n.velocity,this.ticks=e.ticks,this.durationTicks=n.ticks-e.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){return UA(this.midi)},set:function(e){this.midi=$A(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(e){var n=e-this.octave;this.midi+=n*12},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return lg(this.midi)},set:function(e){this.midi=12*(this.octave+1)+jA(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var e=rs.get(this);return e.ticksToSeconds(this.ticks+this.durationTicks)-e.ticksToSeconds(this.ticks)},set:function(e){var n=rs.get(this),r=n.secondsToTicks(this.time+e);this.durationTicks=r-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){var e=rs.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var n=rs.get(this);this.ticks=n.secondsToTicks(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bars",{get:function(){var e=rs.get(this);return e.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}();Pa.Note=qA;Object.defineProperty(Fi,"__esModule",{value:!0});Fi.Track=void 0;var lc=Wr,WA=yu,zA=Aa,HA=Ia,Rf=Na,GA=Pa,fo=new WeakMap,YA=function(){function t(e,n){var r=this;if(this.name="",this.notes=[],this.controlChanges=(0,zA.createControlChanges)(),this.pitchBends=[],fo.set(this,n),e){var s=e.find(function(f){return f.type==="trackName"});this.name=s?s.text:""}if(this.instrument=new Rf.Instrument(e,this),this.channel=0,e){for(var i=e.filter(function(f){return f.type==="noteOn"}),o=e.filter(function(f){return f.type==="noteOff"}),a=function(){var f=i.shift();c.channel=f.channel;var d=o.findIndex(function(g){return g.noteNumber===f.noteNumber&&g.absoluteTime>=f.absoluteTime});if(d!==-1){var p=o.splice(d,1)[0];c.addNote({durationTicks:p.absoluteTime-f.absoluteTime,midi:f.noteNumber,noteOffVelocity:p.velocity/127,ticks:f.absoluteTime,velocity:f.velocity/127})}},c=this;i.length;)a();var l=e.filter(function(f){return f.type==="controller"});l.forEach(function(f){r.addCC({number:f.controllerType,ticks:f.absoluteTime,value:f.value/127})});var u=e.filter(function(f){return f.type==="pitchBend"});u.forEach(function(f){r.addPitchBend({ticks:f.absoluteTime,value:f.value/Math.pow(2,13)})});var h=e.find(function(f){return f.type==="endOfTrack"});this.endOfTrackTicks=h!==void 0?h.absoluteTime:void 0}}return t.prototype.addNote=function(e){var n=fo.get(this),r=new GA.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},n);return Object.assign(r,e),(0,lc.insert)(this.notes,r,"ticks"),this},t.prototype.addCC=function(e){var n=fo.get(this),r=new WA.ControlChange({controllerType:e.number},n);return delete e.number,Object.assign(r,e),Array.isArray(this.controlChanges[r.number])||(this.controlChanges[r.number]=[]),(0,lc.insert)(this.controlChanges[r.number],r,"ticks"),this},t.prototype.addPitchBend=function(e){var n=fo.get(this),r=new HA.PitchBend({},n);return Object.assign(r,e),(0,lc.insert)(this.pitchBends,r,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,n=0;n<this.notes.length-1;n++){var r=this.notes[n].time+this.notes[n].duration;e<r&&(e=r)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,n=0;n<this.notes.length-1;n++){var r=this.notes[n].ticks+this.notes[n].durationTicks;e<r&&(e=r)}return e},enumerable:!1,configurable:!0}),t.prototype.fromJSON=function(e){var n=this;this.name=e.name,this.channel=e.channel,this.instrument=new Rf.Instrument(void 0,this),this.instrument.fromJSON(e.instrument),e.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=e.endOfTrackTicks);for(var r in e.controlChanges)e.controlChanges[r]&&e.controlChanges[r].forEach(function(s){n.addCC({number:s.number,ticks:s.ticks,value:s.value})});e.notes.forEach(function(s){n.addNote({durationTicks:s.durationTicks,midi:s.midi,ticks:s.ticks,velocity:s.velocity})})},t.prototype.toJSON=function(){for(var e={},n=0;n<127;n++)this.controlChanges.hasOwnProperty(n)&&(e[n]=this.controlChanges[n].map(function(s){return s.toJSON()}));var r={channel:this.channel,controlChanges:e,pitchBends:this.pitchBends.map(function(s){return s.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(s){return s.toJSON()})};return this.endOfTrackTicks!==void 0&&(r.endOfTrackTicks=this.endOfTrackTicks),r},t}();Fi.Track=YA;var ka={};function KA(t){var e=[];return ug(t,e),e}function ug(t,e){for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?ug(r,e):e.push(r)}}var XA=Object.freeze(Object.defineProperty({__proto__:null,flatten:KA},Symbol.toStringTag,{value:"Module"})),ZA=EA(XA),Qn=Ar&&Ar.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(ka,"__esModule",{value:!0});ka.encode=void 0;var QA=Ca,JA=Qo,eI=ZA;function tI(t,e){return[{absoluteTime:t.ticks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOn",velocity:Math.floor(t.velocity*127)},{absoluteTime:t.ticks+t.durationTicks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOff",velocity:Math.floor(t.noteOffVelocity*127)}]}function nI(t){return(0,eI.flatten)(t.notes.map(function(e){return tI(e,t.channel)}))}function rI(t,e){return{absoluteTime:t.ticks,channel:e,controllerType:t.number,deltaTime:0,type:"controller",value:Math.floor(t.value*127)}}function sI(t){for(var e=[],n=0;n<127;n++)t.controlChanges.hasOwnProperty(n)&&t.controlChanges[n].forEach(function(r){e.push(rI(r,t.channel))});return e}function iI(t,e){return{absoluteTime:t.ticks,channel:e,deltaTime:0,type:"pitchBend",value:t.value}}function oI(t){var e=[];return t.pitchBends.forEach(function(n){e.push(iI(n,t.channel))}),e}function aI(t){return{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}}function cI(t){return{absoluteTime:0,deltaTime:0,meta:!0,text:t,type:"trackName"}}function lI(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:"setTempo"}}function uI(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function hI(t){var e=JA.keySignatureKeys.indexOf(t.key);return{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:t.scale==="major"?0:1,type:"keySignature"}}function fI(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,text:t.text,type:t.type}}function dI(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:Qn([Qn(Qn(Qn(Qn([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map(function(n){return hI(n)}),!0),t.header.meta.map(function(n){return fI(n)}),!0),t.header.tempos.map(function(n){return lI(n)}),!0),t.header.timeSignatures.map(function(n){return uI(n)}),!0)],t.tracks.map(function(n){return Qn(Qn(Qn([cI(n.name),aI(n)],nI(n),!0),sI(n),!0),oI(n),!0)}),!0)};return e.tracks=e.tracks.map(function(n){n=n.sort(function(s,i){return s.absoluteTime-i.absoluteTime});var r=0;return n.forEach(function(s){s.deltaTime=s.absoluteTime-r,r=s.absoluteTime,delete s.absoluteTime}),n.push({deltaTime:0,meta:!0,type:"endOfTrack"}),n}),new Uint8Array((0,QA.writeMidi)(e))}ka.encode=dI;(function(t){var e=Ar&&Ar.__awaiter||function(h,f,d,p){function g(_){return _ instanceof d?_:new d(function(y){y(_)})}return new(d||(d=Promise))(function(_,y){function A(S){try{N(p.next(S))}catch(R){y(R)}}function F(S){try{N(p.throw(S))}catch(R){y(R)}}function N(S){S.done?_(S.value):g(S.value).then(A,F)}N((p=p.apply(h,f||[])).next())})},n=Ar&&Ar.__generator||function(h,f){var d={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},p,g,_,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(N){return function(S){return F([N,S])}}function F(N){if(p)throw new TypeError("Generator is already executing.");for(;d;)try{if(p=1,g&&(_=N[0]&2?g.return:N[0]?g.throw||((_=g.return)&&_.call(g),0):g.next)&&!(_=_.call(g,N[1])).done)return _;switch(g=0,_&&(N=[N[0]&2,_.value]),N[0]){case 0:case 1:_=N;break;case 4:return d.label++,{value:N[1],done:!1};case 5:d.label++,g=N[1],N=[0];continue;case 7:N=d.ops.pop(),d.trys.pop();continue;default:if(_=d.trys,!(_=_.length>0&&_[_.length-1])&&(N[0]===6||N[0]===2)){d=0;continue}if(N[0]===3&&(!_||N[1]>_[0]&&N[1]<_[3])){d.label=N[1];break}if(N[0]===6&&d.label<_[1]){d.label=_[1],_=N;break}if(_&&d.label<_[2]){d.label=_[2],d.ops.push(N);break}_[2]&&d.ops.pop(),d.trys.pop();continue}N=f.call(h,d)}catch(S){N=[6,S],g=0}finally{p=_=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.Track=t.Midi=void 0;var r=Ca,s=Qo,i=Fi,o=ka,a=function(){function h(f){var d=this,p=null;if(f){var g=f instanceof ArrayBuffer?new Uint8Array(f):f;p=(0,r.parseMidi)(g),p.tracks.forEach(function(_){var y=0;_.forEach(function(A){y+=A.deltaTime,A.absoluteTime=y})}),p.tracks=u(p.tracks)}this.header=new s.Header(p),this.tracks=[],f&&(this.tracks=p.tracks.map(function(_){return new i.Track(_,d.header)}),p.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return h.fromUrl=function(f){return e(this,void 0,void 0,function(){var d,p;return n(this,function(g){switch(g.label){case 0:return[4,fetch(f)];case 1:return d=g.sent(),d.ok?[4,d.arrayBuffer()]:[3,3];case 2:return p=g.sent(),[2,new h(p)];case 3:throw new Error("Could not load '".concat(f,"'"))}})})},Object.defineProperty(h.prototype,"name",{get:function(){return this.header.name},set:function(f){this.header.name=f},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"duration",{get:function(){var f=this.tracks.map(function(d){return d.duration});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"durationTicks",{get:function(){var f=this.tracks.map(function(d){return d.durationTicks});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),h.prototype.addTrack=function(){var f=new i.Track(void 0,this.header);return this.tracks.push(f),f},h.prototype.toArray=function(){return(0,o.encode)(this)},h.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(f){return f.toJSON()})}},h.prototype.fromJSON=function(f){var d=this;this.header=new s.Header,this.header.fromJSON(f.header),this.tracks=f.tracks.map(function(p){var g=new i.Track(void 0,d.header);return g.fromJSON(p),g})},h.prototype.clone=function(){var f=new h;return f.fromJSON(this.toJSON()),f},h}();t.Midi=a;var c=Fi;Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return c.Track}});var l=Qo;Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return l.Header}});function u(h){for(var f=[],d=0;d<h.length;d++)for(var p=f.length,g=new Map,_=Array(16).fill(0),y=0,A=h[d];y<A.length;y++){var F=A[y],N=p,S=F.channel;if(S!==void 0){F.type==="programChange"&&(_[S]=F.programNumber);var R=_[S],O="".concat(R," ").concat(S);g.has(O)?N=g.get(O):(N=p+g.size,g.set(O,N))}f[N]||f.push([]),f[N].push(F)}return f}})(CA);Et([]);Et({initiated:!1,open:!1,opened:!1,monitor:!1,meter:0,volume:pr(at("mic-vol",1),0,2),gate:pr(at("mic-gate",-60),-100,-40)});at("noise-options",{noise:{type:"pink"},envelope:{attack:.1,decay:.1,sustain:.9,release:1},volume:1});at("filter-options",{on:!1,play:!1,volume:.5,baseFrequency:50,depth:.1,frequency:1,octaves:2,wet:1,type:"sine",filter:{Q:1,type:"lowpass"}});at("panner-options",{on:!1,play:!1,wet:1,frequency:1,depth:1,volume:1});at("bit-options",{on:!1,bits:16,wet:1,volume:1});Et([]);var hg={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Ar,function(){function n(T,v,E){if(E||arguments.length===2)for(var M,k=0,j=v.length;k<j;k++)!M&&k in v||(M||(M=Array.prototype.slice.call(v,0,k)),M[k]=v[k]);return T.concat(M||Array.prototype.slice.call(v))}var r=Object.freeze({__proto__:null,blackman:function(T){for(var v=new Float32Array(T),E=2*Math.PI/(T-1),M=2*E,k=0;k<T/2;k++)v[k]=.42-.5*Math.cos(k*E)+.08*Math.cos(k*M);for(k=Math.ceil(T/2);k>0;k--)v[T-k]=v[k-1];return v},sine:function(T){for(var v=Math.PI/(T-1),E=new Float32Array(T),M=0;M<T;M++)E[M]=Math.sin(v*M);return E},hanning:function(T){for(var v=new Float32Array(T),E=0;E<T;E++)v[E]=.5-.5*Math.cos(2*Math.PI*E/(T-1));return v},hamming:function(T){for(var v=new Float32Array(T),E=0;E<T;E++)v[E]=.54-.46*Math.cos(2*Math.PI*(E/T-1));return v}}),s={};function i(T){for(;T%2==0&&T>1;)T/=2;return T===1}function o(T,v){if(v!=="rect"){if(v!==""&&v||(v="hanning"),s[v]||(s[v]={}),!s[v][T.length])try{s[v][T.length]=r[v](T.length)}catch{throw new Error("Invalid windowing function")}T=function(E,M){for(var k=[],j=0;j<Math.min(E.length,M.length);j++)k[j]=E[j]*M[j];return k}(T,s[v][T.length])}return T}function a(T,v,E){for(var M=new Float32Array(T),k=0;k<M.length;k++)M[k]=k*v/E,M[k]=13*Math.atan(M[k]/1315.8)+3.5*Math.atan(Math.pow(M[k]/7518,2));return M}function c(T){return Float32Array.from(T)}function l(T){return 1125*Math.log(1+T/700)}function u(T,v,E){for(var M,k=new Float32Array(T+2),j=new Float32Array(T+2),J=v/2,se=l(0),oe=(l(J)-se)/(T+1),le=new Array(T+2),P=0;P<k.length;P++)k[P]=P*oe,j[P]=(M=k[P],700*(Math.exp(M/1125)-1)),le[P]=Math.floor((E+1)*j[P]/v);for(var ee=new Array(T),U=0;U<ee.length;U++){for(ee[U]=new Array(E/2+1).fill(0),P=le[U];P<le[U+1];P++)ee[U][P]=(P-le[U])/(le[U+1]-le[U]);for(P=le[U+1];P<le[U+2];P++)ee[U][P]=(le[U+2]-P)/(le[U+2]-le[U+1])}return ee}function h(T,v,E,M,k,j,J){M===void 0&&(M=5),k===void 0&&(k=2),j===void 0&&(j=!0),J===void 0&&(J=440);var se=Math.floor(E/2)+1,oe=new Array(E).fill(0).map(function(de,w){return T*function(I,C){return Math.log2(16*I/C)}(v*w/E,J)});oe[0]=oe[1]-1.5*T;var le,P,ee,U=oe.slice(1).map(function(de,w){return Math.max(de-oe[w])},1).concat([1]),z=Math.round(T/2),Me=new Array(T).fill(0).map(function(de,w){return oe.map(function(I){return(10*T+z+I-w)%T-z})}),Ce=Me.map(function(de,w){return de.map(function(I,C){return Math.exp(-.5*Math.pow(2*Me[w][C]/U[C],2))})});if(P=(le=Ce)[0].map(function(){return 0}),ee=le.reduce(function(de,w){return w.forEach(function(I,C){de[C]+=Math.pow(I,2)}),de},P).map(Math.sqrt),Ce=le.map(function(de,w){return de.map(function(I,C){return I/(ee[C]||1)})}),k){var we=oe.map(function(de){return Math.exp(-.5*Math.pow((de/T-M)/k,2))});Ce=Ce.map(function(de){return de.map(function(w,I){return w*we[I]})})}return j&&(Ce=n(n([],Ce.slice(3),!0),Ce.slice(0,3),!0)),Ce.map(function(de){return de.slice(0,se)})}function f(T,v){for(var E=0,M=0,k=0;k<v.length;k++)E+=Math.pow(k,T)*Math.abs(v[k]),M+=v[k];return E/M}function d(T){var v=T.ampSpectrum,E=T.barkScale,M=T.numberOfBarkBands,k=M===void 0?24:M;if(typeof v!="object"||typeof E!="object")throw new TypeError;var j=k,J=new Float32Array(j),se=0,oe=v,le=new Int32Array(j+1);le[0]=0;for(var P=E[oe.length-1]/j,ee=1,U=0;U<oe.length;U++)for(;E[U]>P;)le[ee++]=U,P=ee*E[oe.length-1]/j;for(le[j]=oe.length-1,U=0;U<j;U++){for(var z=0,Me=le[U];Me<le[U+1];Me++)z+=oe[Me];J[U]=Math.pow(z,.23)}for(U=0;U<J.length;U++)se+=J[U];return{specific:J,total:se}}function p(T){var v=T.ampSpectrum;if(typeof v!="object")throw new TypeError;for(var E=new Float32Array(v.length),M=0;M<E.length;M++)E[M]=Math.pow(v[M],2);return E}function g(T){var v=T.ampSpectrum,E=T.melFilterBank,M=T.bufferSize;if(typeof v!="object")throw new TypeError("Valid ampSpectrum is required to generate melBands");if(typeof E!="object")throw new TypeError("Valid melFilterBank is required to generate melBands");for(var k=p({ampSpectrum:v}),j=E.length,J=Array(j),se=new Float32Array(j),oe=0;oe<se.length;oe++){J[oe]=new Float32Array(M/2),se[oe]=0;for(var le=0;le<M/2;le++)J[oe][le]=E[oe][le]*k[le],se[oe]+=J[oe][le];se[oe]=Math.log(se[oe]+1)}return Array.prototype.slice.call(se)}function _(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}var y={exports:{}},A=null,F=function(T,v){var E=T.length;return v=v||2,A&&A[E]||function(M){(A=A||{})[M]=new Array(M*M);for(var k=Math.PI/M,j=0;j<M;j++)for(var J=0;J<M;J++)A[M][J+j*M]=Math.cos(k*(J+.5)*j)}(E),T.map(function(){return 0}).map(function(M,k){return v*T.reduce(function(j,J,se,oe){return j+J*A[E][se+k*E]},0)})};(function(T){T.exports=F})(y);var N=_(y.exports),S=Object.freeze({__proto__:null,buffer:function(T){return T.signal},rms:function(T){var v=T.signal;if(typeof v!="object")throw new TypeError;for(var E=0,M=0;M<v.length;M++)E+=Math.pow(v[M],2);return E/=v.length,E=Math.sqrt(E)},energy:function(T){var v=T.signal;if(typeof v!="object")throw new TypeError;for(var E=0,M=0;M<v.length;M++)E+=Math.pow(Math.abs(v[M]),2);return E},complexSpectrum:function(T){return T.complexSpectrum},spectralSlope:function(T){var v=T.ampSpectrum,E=T.sampleRate,M=T.bufferSize;if(typeof v!="object")throw new TypeError;for(var k=0,j=0,J=new Float32Array(v.length),se=0,oe=0,le=0;le<v.length;le++){k+=v[le];var P=le*E/M;J[le]=P,se+=P*P,j+=P,oe+=P*v[le]}return(v.length*oe-j*k)/(k*(se-Math.pow(j,2)))},spectralCentroid:function(T){var v=T.ampSpectrum;if(typeof v!="object")throw new TypeError;return f(1,v)},spectralRolloff:function(T){var v=T.ampSpectrum,E=T.sampleRate;if(typeof v!="object")throw new TypeError;for(var M=v,k=E/(2*(M.length-1)),j=0,J=0;J<M.length;J++)j+=M[J];for(var se=.99*j,oe=M.length-1;j>se&&oe>=0;)j-=M[oe],--oe;return(oe+1)*k},spectralFlatness:function(T){var v=T.ampSpectrum;if(typeof v!="object")throw new TypeError;for(var E=0,M=0,k=0;k<v.length;k++)E+=Math.log(v[k]),M+=v[k];return Math.exp(E/v.length)*v.length/M},spectralSpread:function(T){var v=T.ampSpectrum;if(typeof v!="object")throw new TypeError;return Math.sqrt(f(2,v)-Math.pow(f(1,v),2))},spectralSkewness:function(T){var v=T.ampSpectrum;if(typeof v!="object")throw new TypeError;var E=f(1,v),M=f(2,v),k=f(3,v);return(2*Math.pow(E,3)-3*E*M+k)/Math.pow(Math.sqrt(M-Math.pow(E,2)),3)},spectralKurtosis:function(T){var v=T.ampSpectrum;if(typeof v!="object")throw new TypeError;var E=v,M=f(1,E),k=f(2,E),j=f(3,E),J=f(4,E);return(-3*Math.pow(M,4)+6*M*k-4*M*j+J)/Math.pow(Math.sqrt(k-Math.pow(M,2)),4)},amplitudeSpectrum:function(T){return T.ampSpectrum},zcr:function(T){var v=T.signal;if(typeof v!="object")throw new TypeError;for(var E=0,M=1;M<v.length;M++)(v[M-1]>=0&&v[M]<0||v[M-1]<0&&v[M]>=0)&&E++;return E},loudness:d,perceptualSpread:function(T){for(var v=d({ampSpectrum:T.ampSpectrum,barkScale:T.barkScale}),E=0,M=0;M<v.specific.length;M++)v.specific[M]>E&&(E=v.specific[M]);return Math.pow((v.total-E)/v.total,2)},perceptualSharpness:function(T){for(var v=d({ampSpectrum:T.ampSpectrum,barkScale:T.barkScale}),E=v.specific,M=0,k=0;k<E.length;k++)M+=k<15?(k+1)*E[k+1]:.066*Math.exp(.171*(k+1));return M*=.11/v.total},powerSpectrum:p,mfcc:function(T){var v=T.ampSpectrum,E=T.melFilterBank,M=T.numberOfMFCCCoefficients,k=T.bufferSize,j=Math.min(40,Math.max(1,M||13));if(E.length<j)throw new Error("Insufficient filter bank for requested number of coefficients");var J=g({ampSpectrum:v,melFilterBank:E,bufferSize:k});return N(J).slice(0,j)},chroma:function(T){var v=T.ampSpectrum,E=T.chromaFilterBank;if(typeof v!="object")throw new TypeError("Valid ampSpectrum is required to generate chroma");if(typeof E!="object")throw new TypeError("Valid chromaFilterBank is required to generate chroma");var M=E.map(function(j,J){return v.reduce(function(se,oe,le){return se+oe*j[le]},0)}),k=Math.max.apply(Math,M);return k?M.map(function(j){return j/k}):M},spectralFlux:function(T){var v=T.signal,E=T.previousSignal,M=T.bufferSize;if(typeof v!="object"||typeof E!="object")throw new TypeError;for(var k=0,j=-M/2;j<v.length/2-1;j++)x=Math.abs(v[j])-Math.abs(E[j]),k+=(x+Math.abs(x))/2;return k},spectralCrest:function(T){var v=T.ampSpectrum;if(typeof v!="object")throw new TypeError;var E=0,M=-1/0;return v.forEach(function(k){E+=Math.pow(k,2),M=k>M?k:M}),E/=v.length,E=Math.sqrt(E),M/E},melBands:g});function R(T){if(Array.isArray(T)){for(var v=0,E=Array(T.length);v<T.length;v++)E[v]=T[v];return E}return Array.from(T)}var O={},D={},q={bitReverseArray:function(T){if(O[T]===void 0){for(var v=(T-1).toString(2).length,E="0".repeat(v),M={},k=0;k<T;k++){var j=k.toString(2);j=E.substr(j.length)+j,j=[].concat(R(j)).reverse().join(""),M[k]=parseInt(j,2)}O[T]=M}return O[T]},multiply:function(T,v){return{real:T.real*v.real-T.imag*v.imag,imag:T.real*v.imag+T.imag*v.real}},add:function(T,v){return{real:T.real+v.real,imag:T.imag+v.imag}},subtract:function(T,v){return{real:T.real-v.real,imag:T.imag-v.imag}},euler:function(T,v){var E=-2*Math.PI*T/v;return{real:Math.cos(E),imag:Math.sin(E)}},conj:function(T){return T.imag*=-1,T},constructComplexArray:function(T){var v={};v.real=T.real===void 0?T.slice():T.real.slice();var E=v.real.length;return D[E]===void 0&&(D[E]=Array.apply(null,Array(E)).map(Number.prototype.valueOf,0)),v.imag=D[E].slice(),v}},W=function(T){var v={};T.real===void 0||T.imag===void 0?v=q.constructComplexArray(T):(v.real=T.real.slice(),v.imag=T.imag.slice());var E=v.real.length,M=Math.log2(E);if(Math.round(M)!=M)throw new Error("Input size must be a power of 2.");if(v.real.length!=v.imag.length)throw new Error("Real and imaginary components must have the same length.");for(var k=q.bitReverseArray(E),j={real:[],imag:[]},J=0;J<E;J++)j.real[k[J]]=v.real[J],j.imag[k[J]]=v.imag[J];for(var se=0;se<E;se++)v.real[se]=j.real[se],v.imag[se]=j.imag[se];for(var oe=1;oe<=M;oe++)for(var le=Math.pow(2,oe),P=0;P<le/2;P++)for(var ee=q.euler(P,le),U=0;U<E/le;U++){var z=le*U+P,Me=le*U+P+le/2,Ce={real:v.real[z],imag:v.imag[z]},we={real:v.real[Me],imag:v.imag[Me]},de=q.multiply(ee,we),w=q.subtract(Ce,de);v.real[Me]=w.real,v.imag[Me]=w.imag;var I=q.add(de,Ce);v.real[z]=I.real,v.imag[z]=I.imag}return v},K=W,H=function(){function T(v,E){var M=this;if(this._m=E,!v.audioContext)throw this._m.errors.noAC;if(v.bufferSize&&!i(v.bufferSize))throw this._m._errors.notPow2;if(!v.source)throw this._m._errors.noSource;this._m.audioContext=v.audioContext,this._m.bufferSize=v.bufferSize||this._m.bufferSize||256,this._m.hopSize=v.hopSize||this._m.hopSize||this._m.bufferSize,this._m.sampleRate=v.sampleRate||this._m.audioContext.sampleRate||44100,this._m.callback=v.callback,this._m.windowingFunction=v.windowingFunction||"hanning",this._m.featureExtractors=S,this._m.EXTRACTION_STARTED=v.startImmediately||!1,this._m.channel=typeof v.channel=="number"?v.channel:0,this._m.inputs=v.inputs||1,this._m.outputs=v.outputs||1,this._m.numberOfMFCCCoefficients=v.numberOfMFCCCoefficients||this._m.numberOfMFCCCoefficients||13,this._m.numberOfBarkBands=v.numberOfBarkBands||this._m.numberOfBarkBands||24,this._m.spn=this._m.audioContext.createScriptProcessor(this._m.bufferSize,this._m.inputs,this._m.outputs),this._m.spn.connect(this._m.audioContext.destination),this._m._featuresToExtract=v.featureExtractors||[],this._m.barkScale=a(this._m.bufferSize,this._m.sampleRate,this._m.bufferSize),this._m.melFilterBank=u(Math.max(this._m.melBands,this._m.numberOfMFCCCoefficients),this._m.sampleRate,this._m.bufferSize),this._m.inputData=null,this._m.previousInputData=null,this._m.frame=null,this._m.previousFrame=null,this.setSource(v.source),this._m.spn.onaudioprocess=function(k){var j;M._m.inputData!==null&&(M._m.previousInputData=M._m.inputData),M._m.inputData=k.inputBuffer.getChannelData(M._m.channel),M._m.previousInputData?((j=new Float32Array(M._m.previousInputData.length+M._m.inputData.length-M._m.hopSize)).set(M._m.previousInputData.slice(M._m.hopSize)),j.set(M._m.inputData,M._m.previousInputData.length-M._m.hopSize)):j=M._m.inputData,function(J,se,oe){if(J.length<se)throw new Error("Buffer is too short for frame length");if(oe<1)throw new Error("Hop length cannot be less that 1");if(se<1)throw new Error("Frame length cannot be less that 1");var le=1+Math.floor((J.length-se)/oe);return new Array(le).fill(0).map(function(P,ee){return J.slice(ee*oe,ee*oe+se)})}(j,M._m.bufferSize,M._m.hopSize).forEach(function(J){M._m.frame=J;var se=M._m.extract(M._m._featuresToExtract,M._m.frame,M._m.previousFrame);typeof M._m.callback=="function"&&M._m.EXTRACTION_STARTED&&M._m.callback(se),M._m.previousFrame=M._m.frame})}}return T.prototype.start=function(v){this._m._featuresToExtract=v||this._m._featuresToExtract,this._m.EXTRACTION_STARTED=!0},T.prototype.stop=function(){this._m.EXTRACTION_STARTED=!1},T.prototype.setSource=function(v){this._m.source&&this._m.source.disconnect(this._m.spn),this._m.source=v,this._m.source.connect(this._m.spn)},T.prototype.setChannel=function(v){v<=this._m.inputs?this._m.channel=v:console.error("Channel ".concat(v," does not exist. Make sure you've provided a value for 'inputs' that is greater than ").concat(v," when instantiating the MeydaAnalyzer"))},T.prototype.get=function(v){return this._m.inputData?this._m.extract(v||this._m._featuresToExtract,this._m.inputData,this._m.previousInputData):null},T}(),ne={audioContext:null,spn:null,bufferSize:512,sampleRate:44100,melBands:26,chromaBands:12,callback:null,windowingFunction:"hanning",featureExtractors:S,EXTRACTION_STARTED:!1,numberOfMFCCCoefficients:13,numberOfBarkBands:24,_featuresToExtract:[],windowing:o,_errors:{notPow2:new Error("Meyda: Buffer size must be a power of 2, e.g. 64 or 512"),featureUndef:new Error("Meyda: No features defined."),invalidFeatureFmt:new Error("Meyda: Invalid feature format"),invalidInput:new Error("Meyda: Invalid input."),noAC:new Error("Meyda: No AudioContext specified."),noSource:new Error("Meyda: No source node specified.")},createMeydaAnalyzer:function(T){return new H(T,Object.assign({},ne))},listAvailableFeatureExtractors:function(){return Object.keys(this.featureExtractors)},extract:function(T,v,E){var M=this;if(!v)throw this._errors.invalidInput;if(typeof v!="object")throw this._errors.invalidInput;if(!T)throw this._errors.featureUndef;if(!i(v.length))throw this._errors.notPow2;this.barkScale!==void 0&&this.barkScale.length==this.bufferSize||(this.barkScale=a(this.bufferSize,this.sampleRate,this.bufferSize)),this.melFilterBank!==void 0&&this.barkScale.length==this.bufferSize&&this.melFilterBank.length==this.melBands||(this.melFilterBank=u(Math.max(this.melBands,this.numberOfMFCCCoefficients),this.sampleRate,this.bufferSize)),this.chromaFilterBank!==void 0&&this.chromaFilterBank.length==this.chromaBands||(this.chromaFilterBank=h(this.chromaBands,this.sampleRate,this.bufferSize)),"buffer"in v&&v.buffer===void 0?this.signal=c(v):this.signal=v;var k=re(v,this.windowingFunction,this.bufferSize);if(this.signal=k.windowedSignal,this.complexSpectrum=k.complexSpectrum,this.ampSpectrum=k.ampSpectrum,E){var j=re(E,this.windowingFunction,this.bufferSize);this.previousSignal=j.windowedSignal,this.previousComplexSpectrum=j.complexSpectrum,this.previousAmpSpectrum=j.ampSpectrum}var J=function(se){return M.featureExtractors[se]({ampSpectrum:M.ampSpectrum,chromaFilterBank:M.chromaFilterBank,complexSpectrum:M.complexSpectrum,signal:M.signal,bufferSize:M.bufferSize,sampleRate:M.sampleRate,barkScale:M.barkScale,melFilterBank:M.melFilterBank,previousSignal:M.previousSignal,previousAmpSpectrum:M.previousAmpSpectrum,previousComplexSpectrum:M.previousComplexSpectrum,numberOfMFCCCoefficients:M.numberOfMFCCCoefficients,numberOfBarkBands:M.numberOfBarkBands})};if(typeof T=="object")return T.reduce(function(se,oe){var le;return Object.assign({},se,((le={})[oe]=J(oe),le))},{});if(typeof T=="string")return J(T);throw this._errors.invalidFeatureFmt}},re=function(T,v,E){var M={};T.buffer===void 0?M.signal=c(T):M.signal=T,M.windowedSignal=o(M.signal,v),M.complexSpectrum=K(M.windowedSignal),M.ampSpectrum=new Float32Array(E/2);for(var k=0;k<E/2;k++)M.ampSpectrum[k]=Math.sqrt(Math.pow(M.complexSpectrum.real[k],2)+Math.pow(M.complexSpectrum.imag[k],2));return M};return typeof window<"u"&&(window.Meyda=ne),ne})})(hg);var pI=SA(hg.exports);const mI=["C","C\u266F","D","D\u266F","E","F","F\u266F","G","G\u266F","A","A\u266F","B"],Jc={middleA:440,semitone:69},je=Et({initiated:!1,stream:null,middleA:Jc.middleA,semitone:Jc.semitone,note:{name:"A",value:69,cents:0,octave:4,frequency:440,color:fg(440),silent:!1},span:64,bufferSize:4096,tempoBufferSize:512,frequencyData:null,running:!1,frame:0,beat:0,bpm:0,confidence:0,listenBeat:!1,prevBeat:0,blink:!1,chroma:[0,0,0,0,0,0,0,0,0,0,0,0],spec:[],rms:0}),Ve={};function gI(){return nE(),{init:_I,tuner:je,chain:Ve}}function _I(){je.initiated=!0,Ve.audioContext=new window.AudioContext,Ve.analyser=Ve.audioContext.createAnalyser(),Ve.scriptProcessor=Ve.audioContext.createScriptProcessor(je.bufferSize,1,1),Ve.beatProcessor=Ve.audioContext.createScriptProcessor(je.tempoBufferSize,1,1),fn(()=>je.frame,()=>{!je.listen||je.beat>je.prevBeat&&(je.prevBeat=je.beat,je.blink=!0,setTimeout(()=>{je.blink=!1},60))}),Ve.meyda=pI.createMeydaAnalyzer({audioContext:Ve.audioContext,source:Ve.analyser,bufferSize:4096,featureExtractors:["chroma","amplitudeSpectrum","rms"],callback:t=>{je.rms=t.rms,je.chroma=t.chroma,je.spec=t.amplitudeSpectrum}}),Ve.meyda.start(),je.frequencyData=new Uint8Array(Ve.analyser.frequencyBinCount),oS().then(function(t){Ve.pitchDetector=new t.Pitch("default",je.bufferSize,1,Ve.audioContext.sampleRate),Ve.tempoAnalyzer=new t.Tempo(je.tempoBufferSize*4,je.tempoBufferSize,Ve.audioContext.sampleRate),je.running=!0,vI()})}function vI(){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){je.stream=t,Ve.audioContext.createMediaStreamSource(t).connect(Ve.analyser),Ve.analyser.connect(Ve.scriptProcessor),Ve.analyser.connect(Ve.beatProcessor),Ve.scriptProcessor.connect(Ve.audioContext.destination),Ve.beatProcessor.connect(Ve.audioContext.destination),Ve.beatProcessor.addEventListener("audioprocess",e=>{Ve.tempoAnalyzer.do(e.inputBuffer.getChannelData(0))&&(je.beat++,je.confidence=Ve.tempoAnalyzer.getConfidence(),je.bpm=Ve.tempoAnalyzer.getBpm())}),Ve.scriptProcessor.addEventListener("audioprocess",function(e){const n=Ve.pitchDetector.do(e.inputBuffer.getChannelData(0));if(je.frame++,n){const r=yI(n);je.note={name:mI[r%12],value:r,cents:wI(n,r),octave:parseInt(r/12)-1,frequency:n,color:fg(n),silent:!1}}else je.note.silent=!0})}).catch(function(t){console.log(t.name+": "+t.message)})}function yI(t){const e=12*(Math.log(t/je.middleA)/Math.log(2));return Math.round(e)+je.semitone}function bI(t){return je.middleA*Math.pow(2,(t-je.semitone)/12)}function wI(t,e){return Math.floor(1200*Math.log(t/bI(e))/Math.log(2))}function fg(t){const e=TI(t);if(!e)return"#333";const n=parseInt(e/12)+2;return ru(e,n)}function TI(t){return 12*(Math.log(t/Jc.middleA)/Math.log(2))%12}var Df;const dg=typeof window<"u",Ff=(t,e,n)=>Math.min(n,Math.max(e,t));dg&&((Df=window==null?void 0:window.navigator)==null?void 0:Df.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function po(t){return typeof t=="function"?t():qe(t)}function MI(t){return t}function SI(t){return nd()?(rd(t),!0):!1}const EI=dg?window:void 0,el=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tl="__vueuse_ssr_handlers__";el[tl]=el[tl]||{};el[tl];function CI(t,e={}){const{immediate:n=!0,window:r=EI}=e,s=et(!1);let i=null;function o(){!s.value||!r||(t(),i=r.requestAnimationFrame(o))}function a(){!s.value&&r&&(s.value=!0,o())}function c(){s.value=!1,i!=null&&r&&(r.cancelAnimationFrame(i),i=null)}return n&&a(),SI(c),{isActive:s,pause:c,resume:a}}function AI(t){var e;const n=et(0);if(typeof performance>"u")return n;const r=(e=t==null?void 0:t.every)!=null?e:10;let s=performance.now(),i=0;return CI(()=>{if(i+=1,i>=r){const o=performance.now(),a=o-s;n.value=Math.round(1e3/(a/i)),s=o,i=0}}),n}var Bf;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(Bf||(Bf={}));var II=Object.defineProperty,Lf=Object.getOwnPropertySymbols,NI=Object.prototype.hasOwnProperty,PI=Object.prototype.propertyIsEnumerable,Vf=(t,e,n)=>e in t?II(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kI=(t,e)=>{for(var n in e||(e={}))NI.call(e,n)&&Vf(t,n,e[n]);if(Lf)for(var n of Lf(e))PI.call(e,n)&&Vf(t,n,e[n]);return t};const OI={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};kI({linear:MI},OI);const xI=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},pg=t=>(V_("data-v-f31aca72"),t=t(),U_(),t),RI={class:"flex items-center w-full gap-4 absolute"},DI=pg(()=>pt("a",{class:"p-2",href:"https://chromatone.center"},[pt("img",{class:"w-8",alt:"Vue logo",src:cv,width:"125",height:"125"})],-1)),FI=pg(()=>pt("div",{class:"flex-auto"},null,-1)),BI={class:"flex gap-2 p-2 text-xs"},LI=Sl("CIRCLE"),VI=Sl("SQUARE"),UI={class:"fullscreen-container rounded-4xl flex items-center justify-center"},jI={class:"absolute bottom-2 right-2 tabular-nums"},$I={class:"max-h-100vh w-full h-full min-h-100vh",id:"stage",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",ref:"stage"},qI={__name:"App",setup(t){const e=AI(),{init:n,tuner:r,chain:s}=gI();return(i,o)=>(Nr(),_s(nn,null,[pt("header",RI,[DI,FI,pt("nav",BI,[St(qe(kc),{to:"/"},{default:yc(()=>[LI]),_:1}),St(qe(kc),{to:"/square"},{default:yc(()=>[VI]),_:1})])]),pt("div",UI,[qe(r).initiated?I0("",!0):(Nr(),_s("button",{key:0,class:"p-4 bg-dark-200 absolute",onClick:o[0]||(o[0]=a=>qe(n)())},"Start")),pt("div",jI,hc(qe(e)),1),(Nr(),_s("svg",$I,[St(qe(op),{tuner:qe(r)},null,8,["tuner"])],512))])],64))}},WI=xI(qI,[["__scopeId","data-v-f31aca72"]]);function Uf(t,e,n){const r=et(t);return Re({get(){return r.value=Ff(r.value,po(e),po(n))},set(s){r.value=Ff(s,po(e),po(n))}})}function zI(){try{return"constructor"in GestureEvent}catch{return!1}}function mg(){return typeof window<"u"&&"ontouchstart"in window}function gg(t){return"pointerId"in t?null:t.type==="touchend"?t.changedTouches:t.targetTouches}function _g(t){return Array.from(gg(t)).map(e=>e.identifier)}function jf(t){const e="buttons"in t?t.buttons:0,{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i}=t;return{buttons:e,shiftKey:n,altKey:r,metaKey:s,ctrlKey:i}}const HI=t=>t;function $f(t,e=HI){const n=gg(t),{clientX:r,clientY:s}=n?n[0]:t;return e([r,s])}function vg(){}function yg(...t){return t.length===0?vg:t.length===1?t[0]:function(){var e;for(let n of t)e=n.apply(this,arguments)||e;return e}}function ir(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function qf(t,...e){return typeof t=="function"?t(...e):t}function Qs(t){return{_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:vg,canceled:!1,memo:void 0,args:void 0,...t}}function bg(){const t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},e=Qs({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),n=Qs({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),r=Qs({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),s=Qs({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),i=Qs({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:r,move:s,scroll:i}}class GI{constructor(e){this.classes=e,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=mg(),this.supportsGestureEvents=zI(),this.bind=(...n)=>{const r={};for(let s of this.classes)new s(this,n).addBindings(r);for(let s in this.nativeRefs)wn(r,s,i=>this.nativeRefs[s]({...this.state.shared,event:i,args:n}));return this.config.domTarget?JI(this,r):eN(this,r)},this.clean=()=>{const{eventOptions:n,domTarget:r}=this.config,s=qe(r);s&&Yi(s,wg(this.domListeners),n),Object.values(this.timeouts).forEach(clearTimeout),XI(this)},this.classes=e,this.state=bg(),this.timeouts={},this.domListeners=[],this.windowListeners={}}}function YI(t,e){"pointerId"in e?t.pointerIds.add(e.pointerId):t.touchIds=new Set(_g(e))}function KI(t,e){"pointerId"in e?t.pointerIds.delete(e.pointerId):_g(e).forEach(n=>t.touchIds.delete(n))}function XI(t){const{config:{window:e,eventOptions:n},windowListeners:r}=t,s=qe(e);if(!!s){for(let i in r){const o=r[i];Yi(s,o,n)}t.windowListeners={}}}function ZI({config:t,windowListeners:e},n,r=t.eventOptions){const s=qe(t.window);!s||(Yi(s,e[n],r),delete e[n])}function QI({config:t,windowListeners:e},n,r=[],s=t.eventOptions){const i=qe(t.window);!i||(Yi(i,e[n],s),Tg(i,e[n]=r,s))}function JI({config:t,domListeners:e},n){const{eventOptions:r,domTarget:s}=t,i=qe(s);if(!i)throw new Error("domTarget must be defined");Yi(i,wg(e),r);for(let[o,a]of Object.entries(n)){const c=o.slice(2).toLowerCase();e.push([c,yg(...a)])}Tg(i,e,r)}function eN({config:t},e){const n={},r=t.eventOptions.capture?"Capture":"";for(let[s,i]of Object.entries(e)){const o=Array.isArray(i)?i:[i],a=s+r;n[a]=yg(...o)}return n}function wg(t=[]){return t.splice(0,t.length)}function wn(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function Tg(t,e=[],n={}){if(!!t)for(let[r,s]of e)t.addEventListener(r,s,n)}function Yi(t,e=[],n={}){if(!!t)for(let[r,s]of e)t.removeEventListener(r,s,n)}function nl(t,e){return t.map((n,r)=>n+e[r])}function Mg(t,e){return t.map((n,r)=>n-e[r])}function rl(t){return Math.hypot(...t)}function tN(t,e,n){const r=rl(e),s=r===0?0:1/r,i=n===0?0:1/n,o=i*r,a=e.map(u=>i*u),c=e.map(u=>s*u),l=rl(t);return{velocities:a,velocity:o,distance:l,direction:c}}function sl(t){return Math.sign?Math.sign(t):Number(t>0)-Number(t<0)||+t}function nN(t,e,n){return Math.max(e,Math.min(t,n))}function rN(t,e){return Math.pow(t,e*5)}function Wf(t,e,n){return e===0||Math.abs(e)===1/0?rN(t,n):t*e*n/(e+n*t)}function zf(t,e,n,r=.15){return r===0?nN(t,e,n):t<e?-Wf(e-t,n-e,r)+e:t>n?+Wf(t-n,n-e,r)+n:t}const Mr=new Map,sN=t=>t;class iN{constructor(e,n=[]){this.controller=e,this.args=n,this.debounced=!0,this.setTimeout=(r,s=140,...i)=>{clearTimeout(this.controller.timeouts[this.stateKey]),this.controller.timeouts[this.stateKey]=window.setTimeout(r,s,...i)},this.clearTimeout=()=>{clearTimeout(this.controller.timeouts[this.stateKey])},this.fireGestureHandler=(r=!1)=>{if(this.state._blocked)return this.debounced||(this.state._active=!1,this.clean()),null;if(!r&&!this.state.intentional&&!this.config.triggerAllEvents)return null;if(this.state.intentional){const c=this.state.active,l=this.state._active;this.state.active=l,this.state.first=l&&!c,this.state.last=c&&!l,this.controller.state.shared[this.ingKey]=l}const s=this.controller.pointerIds.size||this.controller.touchIds.size,i=this.controller.state.shared.buttons>0||s>0,o={...this.controller.state.shared,...this.state,...this.mapStateValues(this.state),locked:!!document.pointerLockElement,touches:s,down:i},a=this.handler(o);return this.state.memo=a!==void 0?a:this.state.memo,o},this.controller=e,this.args=n}get config(){return this.controller.config[this.stateKey]}get enabled(){return this.controller.config.enabled&&this.config.enabled}get state(){return this.controller.state[this.stateKey]}get handler(){return this.controller.handlers[this.stateKey]}get transform(){return this.config.transform||this.controller.config.transform||sN}updateSharedState(e){Object.assign(this.controller.state.shared,e)}updateGestureState(e){Object.assign(this.state,e)}checkIntentionality(e,n){return{_intentional:e,_blocked:!1}}getMovement(e){const{rubberband:n,threshold:r}=this.config,{_bounds:s,_initial:i,_active:o,_intentional:a,lastOffset:c,movement:l}=this.state,u=this.getInternalMovement(e,this.state),h=this.transform(r).map(Math.abs),f=a[0]===!1?Hf(u[0],h[0]):a[0],d=a[1]===!1?Hf(u[1],h[1]):a[1],p=this.checkIntentionality([f,d],u);if(p._blocked)return{...p,_movement:u,delta:[0,0]};const g=p._intentional,_=u;let y=[g[0]!==!1?u[0]-g[0]:0,g[1]!==!1?u[1]-g[1]:0];const A=nl(y,c),F=o?n:[0,0];return y=Gf(s,nl(y,i),F),{...p,intentional:g[0]!==!1||g[1]!==!1,_initial:i,_movement:_,movement:y,values:e,offset:Gf(s,A,F),delta:Mg(y,l)}}clean(){this.clearTimeout()}}function Hf(t,e){return Math.abs(t)>=e?sl(t)*e:!1}function Gf(t,[e,n],[r,s]){const[[i,o],[a,c]]=t;return[zf(e,i,o,r),zf(n,a,c,s)]}function uc({state:t},e,n){const{timeStamp:r,type:s}=e,i=t.values,o=n?0:r-t.startTime;return{_lastEventType:s,event:e,timeStamp:r,elapsedTime:o,previous:i}}function oN({state:t,config:e,stateKey:n,args:r},s,i){const o=t.offset,a=i.timeStamp,{initial:c,bounds:l}=e,u={...bg()[n],_active:!0,args:r,values:s,initial:s,offset:o,lastOffset:o,startTime:a};return{...u,_initial:qf(c,u),_bounds:qf(l,u)}}class aN extends iN{getInternalMovement(e,n){return Mg(e,n.initial)}checkIntentionality(e,n){if(e[0]===!1&&e[1]===!1)return{_intentional:e,axis:this.state.axis};const[r,s]=n.map(Math.abs),i=this.state.axis||(r>s?"x":r<s?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:e,_blocked:!1,axis:i}:i?!!this.config.axis&&i!==this.config.axis?{_intentional:e,_blocked:!0,axis:i}:(e[i==="x"?1:0]=!1,{_intentional:e,_blocked:!1,axis:i}):{_intentional:[!1,!1],_blocked:!1,axis:i}}getKinematics(e,n){const r=this.getMovement(e);if(!r._blocked){const s=n.timeStamp-this.state.timeStamp;Object.assign(r,tN(r.movement,r.delta,s))}return r}mapStateValues(e){return{xy:e.values,vxvy:e.velocities}}}const cN=3;function Yf(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}class lN extends aN{constructor(){super(...arguments),this.ingKey="dragging",this.stateKey="drag",this.setPointerCapture=e=>{if(this.config.useTouch||document.pointerLockElement)return;const{target:n,pointerId:r}=e;n&&"setPointerCapture"in n&&n.setPointerCapture(r),this.updateGestureState({_dragTarget:n,_dragPointerId:r})},this.releasePointerCapture=()=>{if(this.config.useTouch||document.pointerLockElement)return;const{_dragTarget:e,_dragPointerId:n}=this.state;if(n&&e&&"releasePointerCapture"in e&&(!("hasPointerCapture"in e)||e.hasPointerCapture(n)))try{e.releasePointerCapture(n)}catch{}},this.preventScroll=e=>{this.state._dragPreventScroll&&e.cancelable&&e.preventDefault()},this.getEventId=e=>this.config.useTouch?e.changedTouches[0].identifier:e.pointerId,this.isValidEvent=e=>this.state._pointerId===this.getEventId(e),this.shouldPreventWindowScrollY=this.config.preventWindowScrollY&&this.controller.supportsTouchEvents,this.setUpWindowScrollDetection=e=>{Yf(e),QI(this.controller,this.stateKey,[["touchmove",this.preventScroll],["touchend",this.clean.bind(this)],["touchcancel",this.clean.bind(this)]],{passive:!1}),this.setTimeout(this.startDrag.bind(this),250,e)},this.setUpDelayedDragTrigger=e=>{this.state._dragDelayed=!0,Yf(e),this.setTimeout(this.startDrag.bind(this),this.config.delay,e)},this.setStartState=e=>{const n=$f(e,this.transform);this.updateSharedState(jf(e)),this.updateGestureState({...oN(this,n,e),...uc(this,e,!0),_pointerId:this.getEventId(e)}),this.updateGestureState(this.getMovement(n))},this.onDragStart=e=>{YI(this.controller,e),!(!this.enabled||this.state._active)&&(this.setStartState(e),this.setPointerCapture(e),this.shouldPreventWindowScrollY?this.setUpWindowScrollDetection(e):this.config.delay>0?this.setUpDelayedDragTrigger(e):this.startDrag(e,!0))},this.onDragChange=e=>{if(this.state.canceled||!this.state._active||!this.isValidEvent(e)||this.state._lastEventType===e.type&&e.timeStamp===this.state.timeStamp)return;let n;if(document.pointerLockElement){const{movementX:c,movementY:l}=e;n=nl(this.transform([c,l]),this.state.values)}else n=$f(e,this.transform);const r=this.getKinematics(n,e);if(!this.state._dragStarted){if(this.state._dragDelayed){this.startDrag(e);return}if(this.shouldPreventWindowScrollY)if(!this.state._dragPreventScroll&&r.axis)if(r.axis==="x")this.startDrag(e);else{this.state._active=!1;return}else return;else return}const s=jf(e);this.updateSharedState(s);const i=uc(this,e),o=rl(r._movement);let{_dragIsTap:a}=this.state;a&&o>=cN&&(a=!1),this.updateGestureState({...i,...r,_dragIsTap:a}),this.fireGestureHandler()},this.onDragEnd=e=>{if(KI(this.controller,e),!this.isValidEvent(e)||(this.clean(),!this.state._active))return;this.state._active=!1;const n=this.state._dragIsTap,[r,s]=this.state.velocities,[i,o]=this.state.movement,[a,c]=this.state._intentional,[l,u]=this.config.swipeVelocity,[h,f]=this.config.swipeDistance,d=this.config.swipeDuration,p={...uc(this,e),...this.getMovement(this.state.values)},g=[0,0];p.elapsedTime<d&&(a!==!1&&Math.abs(r)>l&&Math.abs(i)>h&&(g[0]=sl(r)),c!==!1&&Math.abs(s)>u&&Math.abs(o)>f&&(g[1]=sl(s))),this.updateSharedState({buttons:0}),this.updateGestureState({...p,tap:n,swipe:g}),this.fireGestureHandler(this.config.filterTaps&&n===!0)},this.clean=()=>{super.clean(),this.state._dragStarted=!1,this.releasePointerCapture(),ZI(this.controller,this.stateKey)},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({canceled:!0,_active:!1}),this.updateSharedState({buttons:0}),Bi(this.fireGestureHandler))},this.onClick=e=>{this.state._dragIsTap||e.stopPropagation()}}startDrag(e,n=!1){!this.state._active||this.state._dragStarted||(n||this.setStartState(e),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())}addBindings(e){if(this.config.useTouch?(wn(e,"onTouchStart",this.onDragStart),wn(e,"onTouchMove",this.onDragChange),wn(e,"onTouchEnd",this.onDragEnd),wn(e,"onTouchCancel",this.onDragEnd)):(wn(e,"onPointerDown",this.onDragStart),wn(e,"onPointerMove",this.onDragChange),wn(e,"onPointerUp",this.onDragEnd),wn(e,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){const n=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";wn(e,n,this.onClick)}}}function uN(t,e){let n,r=[],s,i=!1;function o(...a){return i&&n===this&&e(a,r)||(s=t.apply(this,a),i=!0,n=this,r=a),s}return o}function wo(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r,s;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!wo(t[r],e[r]))return!1;return!0}let i;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!wo(r.value[1],e.get(r.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!(s[r]==="_owner"&&t.$$typeof)&&!wo(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}function hN(t,e){try{return wo(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function bu(t={},e){const n={};for(const[r,s]of Object.entries(e))switch(typeof s){case"function":n[r]=s.call(n,t[r],r,t);break;case"object":n[r]=bu(t[r],s);break;case"boolean":s&&(n[r]=t[r]);break}return n}const fN=180,dN=.15,pN=.5,mN=50,gN=250,_N={threshold(t=0){return ir(t)},rubberband(t=0){switch(t){case!0:return ir(dN);case!1:return ir(0);default:return ir(t)}},enabled(t=!0){return t},triggerAllEvents(t=!1){return t},initial(t=0){return typeof t=="function"?t:ir(t)},transform:!0},Sg={..._N,axis:!0,lockDirection(t=!1){return t},bounds(t={}){if(typeof t=="function")return i=>Sg.bounds(t(i));const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:s=1/0}=t;return[[e,n],[r,s]]}},vN=typeof window<"u"&&window.document&&window.document.createElement,yN={enabled(t=!0){return t},domTarget:!0,window(t=vN?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform:!0},bN={...Sg,useTouch(t=!0){return t&&mg()},preventWindowScrollY(t=!1){return t},threshold(t,e,{filterTaps:n=!1,lockDirection:r=!1,axis:s=void 0}){const i=ir(t,n?3:r||s?1:0);return this.filterTaps=n,i},swipeVelocity(t=pN){return ir(t)},swipeDistance(t=mN){return ir(t)},swipeDuration(t=gN){return t},delay(t=0){switch(t){case!0:return fN;case!1:return 0;default:return t}}};function wN(t){return bu(t,yN)}function TN(t={}){return bu(t,bN)}function MN({domTarget:t,eventOptions:e,window:n,enabled:r,...s}){const i=wN({domTarget:t,eventOptions:e,window:n,enabled:r});return i.drag=TN(s),i}function SN(t,e,n={}){const r=EN(t),s=new GI(r);return s.config=e,s.handlers=t,s.nativeRefs=n,Wd()&&!e.manual&&(bl(s.bind),wl(s.clean)),s}function EN(t){const e=new Set;return t.drag&&e.add(Mr.get("drag")),t.wheel&&e.add(Mr.get("wheel")),t.scroll&&e.add(Mr.get("scroll")),t.move&&e.add(Mr.get("move")),t.pinch&&e.add(Mr.get("pinch")),t.hover&&e.add(Mr.get("hover")),e}function CN(t,e={}){Mr.set("drag",lN);const n=et();return n.value||(n.value=uN(MN,hN)),SN({drag:t},n.value(e))}const AN={id:"blur",x:"-1",y:"-1",width:"3000",height:"3000"},IN=["stdDeviation"],NN={id:"blur-more",x:"-1",y:"-1",width:"30",height:"30"},PN=["stdDeviation"],kN=["fill"],ON={style:{"user-select":"none",transition:"all 300ms ease"},fill:"white","font-family":"Commissioner, sans-serif","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle",x:50,y:50},xN=["transform"],RN=["r","fill"],DN=["fill","opacity"],FN={__name:"circle",props:{tuner:Object},setup(t){const e=et(),n=Uf(0,0,1),r=Uf(2,1,3);return CN(s=>{const{delta:[i,o]}=s;n.value+=i/100,r.value-=o/100},{domTarget:e}),(s,i)=>{var o;return Nr(),_s("g",{ref_key:"stage",ref:e},[pt("defs",null,[pt("filter",AN,[pt("feGaussianBlur",{in:"SourceGraphic",stdDeviation:qe(n)},null,8,IN)]),pt("filter",NN,[pt("feGaussianBlur",{in:"SourceGraphic",stdDeviation:qe(n)*2},null,8,PN)])]),pt("circle",{class:"note",style:hi([{transition:"all 300ms ease-in-out","transform-box":"fill-box","transform-origin":"center center"},{transform:`scale(${.5+20*t.tuner.rms})`}]),cx:50,cy:50,r:10,fill:t.tuner.note.silent?"#888":(o=t.tuner)==null?void 0:o.note.color,filter:"url(#blur-more)"},null,12,kN),pt("text",ON,hc(t.tuner.note.name),1),(Nr(!0),_s(nn,null,o0(qe(sE)(t.tuner.chroma,-3),(a,c)=>(Nr(),_s("g",{class:"around",style:{cursor:"pointer"},key:c,transform:`translate(${qe(cf)(c).x},${qe(cf)(c).y})`},[pt("circle",{class:"note",style:hi([{transition:"all 300ms ease-in-out","transform-box":"fill-box","transform-origin":"center center"},{transform:`scale(${.5+10*a})`}]),r:qe(r),fill:qe(ru)(c,3,a),filter:"url(#blur)"},null,12,RN),pt("text",{style:{"user-select":"none",transition:"all 300ms ease"},fill:qe(Xc)[c].length==2?"hsla(0,0%,0%,0.8)":"hsla(0,0%,100%,0.9)","font-family":"Commissioner, sans-serif","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle",opacity:a},hc(qe(Xc)[c]),9,DN)],8,xN))),128))],512)}}},BN=uy({history:Av("/"),routes:[{path:"/",name:"circle",component:FN},{path:"/square",name:"square",component:()=>ap(()=>import("./square.fe71a0d2.js"),[])}]});const Eg=ov(WI);Eg.use(BN);Eg.mount("#app");export{nn as F,CN as a,pt as b,_s as c,qe as d,o0 as e,sE as f,Ar as g,Xc as n,Nr as o,ru as p,et as r,hc as t,Uf as u};
