"use strict";var qe=Object.defineProperty,Qe=Object.defineProperties;var Xe=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;var fe=(e,t,n)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C=(e,t)=>{for(var n in t||(t={}))_e.call(t,n)&&fe(e,n,t[n]);if(de)for(var n of de(t))et.call(t,n)&&fe(e,n,t[n]);return e},V=(e,t)=>Qe(e,Xe(t));Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var o=require("./vendor.cjs.js");const oe="https://etogun.glitch.me/gun",B=o.useStorage("peer",oe),O=o.reactive({list:[],peer:B.value,host:new URL(B.value).hostname,status:"offline",started:0,pulse:0,lag:0,diff:o.computed(()=>O.pulse-O.started),age:o.computed(()=>o.ms(O.diff)),delay:o.computed(()=>Date.now()-O.pulse),blink:!1});o.watch(()=>O.pulse,(e,t)=>{O.blink=!O.blink,O.lag=e-t-500});function tt(e){B.value=e,window.location.reload()}function nt(){B.value=oe,window.location.reload()}function at(){const e=w();return O.pulse==0&&e.get(O.host).map().on((t,n)=>{O[n]=t}),{relay:O,setPeer:tt,resetPeer:nt}}window.Buffer=o.buffer.Buffer;window.setImmediate=setTimeout;exports.gun=void 0;exports.gun2=void 0;function w(e={localStorage:!1}){return exports.gun||(exports.gun=o.Gun(C({peers:[B.value]},e))),exports.gun}function ot(e={localStorage:!1}){return exports.gun2||(exports.gun2=o.Gun(C({peers:[B.value]},e))),exports.gun2}var ve,we;const st=(we=(ve=o.Gun)==null?void 0:ve.node)==null?void 0:we.soul;var ye,be;const Se=(be=(ye=o.Gun)==null?void 0:ye.text)==null?void 0:be.random,X=o.reactive({}),_=o.reactive({});async function ke({source:e="https://raw.githubusercontent.com/wiki/amark/gun/volunteer.dht.md"}={}){let a=(await(await fetch(e)).text()).match(o.urlRegex());return a.push(O.peer),a=Array.from(a),a.forEach(s=>{let r=new URL(s);if(r.pathname==="/gun"&&r.pathname.indexOf("~~")===-1){let i=performance.now();fetch(r.href,{method:"HEAD",mode:"cors",redirect:"follow",referrerPolicy:"no-referrer"}).then(u=>{let c=performance.now();u.ok?X[r.hostname]={host:r.hostname,ping:(c-i).toFixed(),url:r.href}:_[r.hostname]=u}).catch(u=>{_[r.hostname]=u})}}),X}function rt(){return{relays:X,errors:_,loadRelays:ke}}function Ae(e,t,n,a=!0){const s=document.createElement("a");s.download=n,a?(s.href=URL.createObjectURL(new Blob([e],{type:t})),setTimeout(function(){URL.revokeObjectURL(s.href)},1500)):s.href=`data:${t};,${e}`,s.dataset.downloadurl=[t,s.download,s.href].join(":"),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}function it(e,t=n=>console.log(n)){let n=e.target.files[0];const a=2e7;if(n.size>a){console.error("File is bigger than "+Ee(a))+"";return}let s=new FileReader;s.readAsText(n),s.onload=()=>{t(s.result)}}function ct({preserveRatio:e=!1,picSize:t=100,maxSize:n=1024e4}={}){const a=o.reactive({errors:[],status:null,output:{}});function s(p){const y=p.target.files;u(),y.length&&(a.status="loading",[...y].map(E=>r(E)))}function r(p){return i(p).then(y=>{a.output={name:m(p.name),content:y,size:Ee(Math.round(y.length*3/4))},a.status="success"}),null}function i(p){return new Promise((y,E)=>{const M=new FileReader,L=new FileReader,Z=p.slice(0,4);M.readAsArrayBuffer(Z),M.onloadend=P=>{let b=l(f(P.target.result));if(c(p.size)>c(n)&&a.errors.push({message:"File size is too large!"}),b===!1&&a.errors.push({message:"File type is not supported!"}),a.errors.length>0){g(a.errors),u();return}else L.readAsDataURL(p)},L.onloadend=()=>{const P=new Image;P.src=L.result,P.onload=()=>{const b=e?P.naturalWidth/P.naturalHeight:1,v=document.createElement("canvas");v.width=t,v.height=t/b,v.getContext("2d").drawImage(P,0,0,v.width,v.height),y(v.toDataURL())}},M.onerror=P=>E(P),L.onerror=P=>E(P)})}function u(){a.status="",a.errors=[],a.output={}}function c(p){return p*Math.pow(10,-6)}function l(p){return["89504E47","47494638","FFD8FFDB","FFD8FFE0","FFD8FFE1","FFD8FFE2","FFD8FFE3","FFD8FFE8","FFD8FFED","3C3F786D","3C737667"].includes(p)}function f(p){const y=new Uint8Array(p);let E=[];return y.forEach(M=>{E.push(M.toString(16))}),E.join("").toUpperCase()}function m(p){return p.replace(/\.[^/.]+$/,"").toLowerCase()}function g(p){p.length===2?console.error("File upload failed due to size and type!"):console.error(p[0].message+p[0].type)}return{state:a,handleChange:s}}const ut=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];function Ee(e){let t=0,n=parseInt(e,10)||0;for(;n>=1024&&++t;)n=n/1024;return n.toFixed(n<10&&t>0?1:0)+" "+ut[t]}function lt(e){var t=null;if(typeof e!="string")return t;var n=e.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/);return n&&n.length&&(t=n[1]),t}function Pe(e){var t;return(t=e.match(/[^:]\w+\/[\w-+\d.]+(?=;|,)/))==null?void 0:t[0]}function Fe(e){return e.substring(e.indexOf("/")+1,e.indexOf(";base64"))}var me={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};function ee(e){for(var t in me)if(e.indexOf(t)===0)return me[t]}function Me({frontmatter:e=null,text:t=""}=md){let n="";if(typeof e=="object")return n=`---
${o.YAML.stringify(e)}---
 `,n+t}function De(e){const n=/^(?:\-\-\-)(.*?)(?:\-\-\-|\.\.\.)(?:\n*\s*)(.*)/s.exec(e.trim());let a,s;if(n){a=n[1],s=n==null?void 0:n[2];try{a=o.YAML.parse(a)}catch{a={}}return{frontmatter:a,content:s}}else return{frontmatter:{},content:e.trim()}}function dt(){const e=new o.markdownIt({linkify:!0,typographer:!0});return e.use(o.lib,{externalTarget:"_blank"}),e}function se(){const e=new o.JSZip;async function t({title:r,file:i,folder:u="."}={}){const c=Pe(i),l=Fe(i),f=await fetch(i).then(g=>g.blob()),m=`${r}.${l}`;return e.file(`${u}/${m}`,f,c),m}function n({md:r,title:i}={}){e.file(`${i}/index.md`,Me(r),"text/markdown")}async function a(r={}){let{icon:i,cover:u,text:c,title:l,statement:f}=r;r==null||delete r.text,l||(l=f?f.split(0,12):Se());const m=["cover","icon"];for(let g of m){let p=await ne(g,r[g]);if(p){const y=await t({title:g,file:p,folder:l});r[g]=y}}c=await ne("text",c),n({title:l,md:{frontmatter:r,text:c}})}async function s({title:r="",addDate:i=!0}={}){let u=new Date;const c=u.getTimezoneOffset();u=new Date(u.getTime()-c*60*1e3);const l=u.toISOString().split("T")[0],f=await e.generateAsync({type:"blob",comment:`Exported from ${r} at ${location} on ${l}`,compression:"DEFLATE",compressionOptions:{level:9}}),m=`${r}-${l}.zip`;return Ae(f,"application/zip",m),!0}return{zip:e,zipPost:a,addMd:n,addFile:t,downloadZip:s}}function ft(e){return e.length==44&&e.charAt(43)=="="}async function mt(e,t,n){const a=await o.SEA.secret(t.epub,n);return await o.SEA.encrypt(e,a)}async function gt(e,t,n){const a=await o.SEA.secret(t.epub,n);return await o.SEA.decrypt(e,a)}async function U(e){return await o.SEA.work(e,null,null,{name:"SHA-256"})}async function H(e){let t=typeof e=="string"?e:JSON.stringify(e),n=await U(t);return{hashed:t,hash:n}}async function pt(e,t){return await o.SEA.work(e,t,null,{name:"SHA-1",encode:"hex"})}function Oe(e){if(!e)return;const t=/[\+=\/]/g;return e.replace(t,ht)}function ht(e){switch(e){case"+":return"-";case"=":return".";case"/":return"_"}}function vt(e){if(!e)return;const t=/[\._\-]/g;return e.replace(t,wt)}function wt(e){switch(e){case"-":return"+";case".":return"=";case"_":return"/"}}function Ce(e,t){if(e){if(Object.prototype.toString.call(e)==="[object Object]")return e}else return t||{};try{return JSON.parse(e)}catch{return t||{}}}async function re({pair:e,tag:t="word",users:n="*",personal:a=!1}={}){let s={"*":`${t}`};a&&(s["+"]="*");try{return await o.SEA.certify(n,s,e)}catch(r){console.log("cert error: ",r)}}window.issueCert=re;async function te({pair:e,list:t=[]}={}){const n={};for(let a of t)n[a.tag]=await re(V(C({},a),{pair:e}));return n}function Re({hash:e="",loadMedia:t=!0}={}){const n=w(),a=o.reactive({});n.get("posts").get("#index").get(e).on(async(i,u)=>{try{Object.assign(a,JSON.parse(i))}catch{a.raw=i}t&&["icon","cover","text"].forEach(c=>{a[c]&&n.get("posts").get(`#${c}`).get(a[c]).on(l=>{a[c]=l})})});const s=o.ref(!1);async function r(){s.value=!0,await xe(a),s.value=!1}return{post:a,download:r,downloading:s}}async function je(e,t){var r;const{user:n}=F();t.icon=await q("icon",t.icon),t.cover=await q("cover",t.cover),t.text=await q("text",t.text);const{hashed:a,hash:s}=await H(t);console.log(s,t,e),exports.gun.get("posts").get("#index").get(`${s}`).put(a),exports.gun.user(d.pub).get("posts").get(`${e}:${s}@${n.pub}`).put(!0,null,{opt:{cert:(r=d.features)==null?void 0:r.posts}})}async function xe(e){let{title:t}=e;const{zipPost:n,addFile:a,downloadZip:s}=se();if(t&&!e.raw)await n(C({},e));else{t="file";const r=await U(e.raw);await a({title:Oe(r),file:e.raw})}return await s({title:t}),!0}async function ne(e,t){return e&&t&&typeof t=="string"&&t.length==44&&t.slice(0,5)!="data:"?await exports.gun.get("posts").get(`#${e}`).get(t).then():t}async function q(e,t){if(e&&t){const n=await U(t);return exports.gun.get("posts").get(`#${e}`).get(`${n}`).put(t),n}else return t}async function yt(e){let t;try{t=JSON.parse(e)}catch{t={base64:e}}return t}function bt({tag:e,hash:t}={}){const n=o.ref(0),a=o.computed(()=>o.ms(Date.now()-n.value||1e3));exports.gun.get("posts").get("#index").get(t).on(function(r,i,u){n.value=u.put[">"]});async function s(){let r=await exports.gun.get("posts").get("#index").get(t).then();exports.gun.get("posts").get("#index").get(t).put(r)}return{timestamp:n,msTime:a,refresh:s}}function St(e){if(!e)return;const t=w(),n=o.reactive({}),a=o.reactive({});t.user(d.pub).get("posts").map().on(function(l,f){let m=f.indexOf(e);if(m==-1)return;let g=f.slice(-87),p=f.slice(0,44),y=f.slice(45,89);m==0?(n[y]=n[y]||{},n[y][g]=l):(a[p]=a[p]||{},a[p][g]=l)});const s=o.computed(()=>{let l=0;for(let f in n){e:for(let m in n[f])if(n[f][m]){l++;break e}}return l}),r=o.computed(()=>{let l=0;for(let f in a){e:for(let m in a[f])if(a[f][m]){l++;break e}}return l}),i=o.ref(!1);async function u(){i.value=!0,i.value=!await Te(e,n)}function c(l){$e(e,l)}return{posts:n,backlinks:a,countPosts:s,countBacklinks:r,downloadPosts:u,downloading:i,uploadPosts:c}}async function Te(e,t){if(!t)return;const{zip:n,zipPost:a,downloadZip:s}=se(),r={};for(let i in t)r[i]=Re({tag:e,hash:i}).post,await a(C({},r[i]));return await s({title:`#${e}`}),!0}function $e(e,t){[...t].forEach(async n=>{const a=await o.JSZip.loadAsync(n);a.comment&&console.info("Zip file comment: "+a.comment),a.forEach(async(s,r)=>{var i;if(s.endsWith("index.md")){let u=s.slice(0,-9),c=await r.async("string"),{frontmatter:l,content:f}=De(c);if(l=l||{},l.title=(l==null?void 0:l.title)||u,l.icon){const g=await a.file(`${u}/${l.icon}`).async("base64"),p=ee(g);l.icon=`data:${p};base64,${g}`}if(l.cover){const g=await((i=a==null?void 0:a.file(`${u}/${l.cover}`))==null?void 0:i.async("base64")),p=ee(g);l.cover=`data:${p};base64,${g}`}let m=V(C({},l),{content:f});je(e,m)}})})}function kt(){const e=w(),t=o.ref(),n=o.computed(()=>o.slugify(t.value)),a=o.reactive({list:{},all:o.computed(()=>{const r=[];for(let i in a.list)r.push({hash:i,tag:a.list[i]});return r.sort((i,u)=>i&&u&&i.tag.toLowerCase()<u.tag.toLowerCase()?-1:1)}),count:o.computed(()=>a.all.length),fuse:o.computed(()=>new o.Fuse(a.all,{includeScore:!0,keys:["tag"]})),results:o.computed(()=>t.value?a.fuse.search(n.value):[]),minScore:o.computed(()=>{let r=100;return a.results.forEach(i=>{i.score<r&&(r=i.score)}),r})});e.get("#tags").map().on((r,i)=>{if(!!r)try{data=JSON.parse(r)}catch{a.list[i]=r}});async function s(r=n.value){if(!r)return;let i=o.slugify(r);const u=await U(i);e.get("#tags").get(`${u}`).put(i)}return{search:t,slug:n,tags:a,addTag:s}}const At=["rooms"];function Et({tag:e,hash:t,back:n}={}){const{user:a}=F(),s=o.ref("\u{1F44D}"),i=w().user(d.pub);o.watchEffect(()=>{At.includes(e)?i.get(e).get(`${t}@${a.pub}`).on(c=>{c&&c!==!0&&(s.value=c)}):i.get("posts").get(`${e}:${t}@${a.pub}`).on(c=>{c&&c!==!0&&(s.value=c)})});function u(c){Le({tag:e,hash:t,back:n,reaction:N(c||s.value)})}return{reaction:s,react:u}}async function Le({tag:e,hash:t,back:n,reaction:a=!0}={}){var i,u;const{user:s}=F(),r=w();if(console.log(e,t,a),e=="rooms"){let c=r.user(d.pub).get(e).get(`${t}@${s.pub}`),l=await c.then();c.put(l?null:a,null,{opt:{cert:(i=d.features)==null?void 0:i[e]}})}else{let c=r.user(d.pub).get("posts");n?c=c.get(`${t}:${e}@${s.pub}`):c=c.get(`${e}:${t}@${s.pub}`);let l=await c.then();c.put(l?null:a,null,{opt:{cert:(u=d.features)==null?void 0:u.posts}})}}function Pt(e){const t={};for(let n in e){let a=e[n];a&&(t[a]=t[a]||[],t[a].push(n))}return t}function Ft(e){let t=0;for(let n in e)e[n]&&e[n]!="\u{1F5D1}"?t++:e[n]=="\u{1F5D1}"&&t--;return t}function Mt(e){const t=w(),n=o.reactive({});return t.user(d.pub).get("posts").map().on((a,s)=>{var c;let r=s.slice(90),i=s.substring(0,44),u=s.substring(45,89);r==e&&(a?(n[a]=n[a]||{},n[a][u]=i):(c=n==null?void 0:n[a])==null||delete c[u])}),n}function Dt(e){e||(e=h.pub);const t=o.reactive({}),n=w();return n.user(e).get("mates").map().once((a,s)=>{a?(t[s]={emoji:N(a),text:a},n.user(s).get("mates").get(e).on(r=>{r?t[s].back=N(r):delete t[s].back})):delete t[s]}),t}function N(e,t="\u{1F44B}"){if(!e||typeof e!="string")return;let n=o.exports.break(e)[0];return Ge(n)?n:t}function Ge(e){return/\p{Extended_Pictographic}/u.test(e)}function Ot(e){const t=o.ref("\u{1F44B}"),n=o.ref(!1),a=h.db.get("mates").get(e);a.on(r=>{n.value=N(r)});function s(){a.put(n.value?!1:N(t.value))}return{emoji:t,isMate:n,toggleMate:s}}function Be(e=o.ref(null)){const{pressed:t}=o.useMousePressed(),n=o.reactive({x:0,y:0,normX:0,normY:0,pressed:t,inside:!1});o.onMounted(()=>{document.addEventListener("mousemove",a);const{isOutside:s}=o.useMouseInElement(e);o.watch(s,r=>{n.inside=!r})}),o.onBeforeUnmount(()=>{document.removeEventListener("mousemove",a)});function a(s,r=e.value){const i=r.closest("svg");if(!i)return;var u=i.createSVGPoint();u.x=s.clientX,u.y=s.clientY;let c=u.matrixTransform(i.getScreenCTM().inverse());n.x=c.x,n.y=c.y}return{area:e,mouse:n}}const Ct={light:new o.ColorHash({saturation:[.05,.08,.22],lightness:[.85,.87,.9]}),pale:new o.ColorHash({saturation:[.05,.42,.52],lightness:[.75,.77,.9]}),regular:new o.ColorHash({saturation:[.1,.5,.7],lightness:[.3,.5,.7]}),deep:new o.ColorHash({saturation:[.5,.6,.7],lightness:[.5,.55,.6]}),dark:new o.ColorHash({saturation:[.02,.5,.6],lightness:[.18,.2,.5]})};function ie(e="deep"){return typeof e=="object"?new o.ColorHash(e):Ct[e]}function Rt({pub:e,size:t=200,light:n=.5,overlay:a=.5,draw:s="squares",attachment:r="fixed"}={}){if(!!e)return{background:`linear-gradient(hsla(255,0%,${n*100}%,${a}), hsla(255,0%,${n*100}%,${a})), url(${o.gunAvatar({pub:e,draw:s,reflect:!1,size:t})})`,backgroundSize:"cover, cover",backgroundAttachment:`${r},${r}`}}const jt=ie("deep"),xt=o.reactive({pub:null}),h=o.reactive({initiated:!1,auth:!1,is:null,name:"",pub:o.computed(()=>{var e;return(e=h==null?void 0:h.is)==null?void 0:e.pub}),color:o.computed(()=>h.pub?jt.hex(h.pub):"gray"),pulse:0,pulser:null,blink:!1,safe:{saved:null,password:null},pair(){var e,t,n,a;return(a=(n=(t=(e=exports.gun)==null?void 0:e.user)==null?void 0:t.call(e))==null?void 0:n._)==null?void 0:a.sea}});function F(){if(!h.initiated){const e=w();h.db=e.user(),e.user().recall({sessionStorage:!0},()=>{console.log("user was recalled")}),e.on("auth",()=>{Tt(),console.log("user authenticated")}),h.initiated=!0}return{user:h,auth:z,leave:Ne}}function Tt(){h.is=exports.gun.user().is,h.pulser&&clearInterval(h.pulser),h.pulser=setInterval(()=>{exports.gun.user().get("pulse").put(Date.now())},1e3),exports.gun.user().get("epub").put(h.is.epub),exports.gun.user().get("pulse").on(e=>{h.blink=!h.blink,h.pulse=e}),exports.gun.user().get("safe").map().on((e,t)=>{h.safe[t]=e}),exports.gun.user().get("profile").get("name").on(e=>h.name=e),h.initiated=!0}async function z(e,t=()=>{}){if(!ce(e)){console.log("incorrect pair",e);return}exports.gun.user().auth(e,async()=>{t(e),console.log("user is authenticated")})}function Ne(){var t;let e=!!((t=h.is)!=null&&t.pub);h.initiated=!1,clearInterval(h.pulser),exports.gun.user().leave(),setTimeout(()=>{e&&!h.pair()&&(h.is=null,console.info("User logged out"))},500)}function $t(e){if(!!e)return e.slice(1,88)==h.pub}function Lt(e){exports.gun.user().get("profile").get(e).put("")}function Gt(e,t){e&&t!==void 0&&exports.gun.user().get("profile").get(e).put(t)}function ce(e){return e&&typeof e=="object"&&e.pub&&e.epub&&e.priv&&e.epriv}const S=o.reactive({input:"",show:!1,safePair:!1,minLength:5,safe:{},dec:{},links:{pass:o.computed(()=>{var e;return ge((e=S.safe)==null?void 0:e.enc)}),pair:o.computed(()=>ge(JSON.stringify(h.pair())))},set(){Ue(S.input),S.input="",S.show=!1}});function ge(e=""){let t=o.base32.encode(e);return window.location.origin+window.location.pathname+"#/auth/"+t}function Bt(e){let t=e.indexOf("#/auth/"),n=e.substr(t+7);return o.base32.decode(n)}let pe=!1;function Nt(){return pe||(w().user().get("safe").map().on((t,n)=>{S.safe[n]=t}),o.watchEffect(async()=>{var t,n;if(!S.show){S.dec={};return}(S==null?void 0:S.show)&&((t=S==null?void 0:S.safe)==null?void 0:t.pass)&&(S.dec.pass=await o.SEA.decrypt(S.safe.pass,h.pair()),S.input=S.dec.pass),S.show&&((n=S==null?void 0:S.safe)==null?void 0:n.enc)&&(S.dec.pair=await o.SEA.decrypt(S.safe.enc,S.dec.pass))})),pe=!0,{pass:S,setPass:Ue,logWithPass:Ht}}async function Ut(e){return await exports.gun.get(`~${e}`).get("safe").get("enc").then()}async function Ht(e,t){let n=await exports.gun.get(`~${e}`).get("safe").get("enc").then(),a=await o.SEA.decrypt(n,t);z(a)}async function Ue(e){let t=await o.SEA.encrypt(h.pair(),e),n=await o.SEA.encrypt(e,h.pair());h.db.get("safe").get("enc").put(t),h.db.get("safe").get("pass").put(n)}function zt(e,t){if(!e)return;const n=o.base32.decode(e);if(n.substring(0,3)=="SEA")return t&&It(n,t),"encrypted";try{let a=JSON.parse(n);return ce(a)&&z(a),"success"}catch{return"incorrect link"}}async function It(e,t){let n=await o.SEA.decrypt(e,t);z(n)}const Kt=ie("deep");function He(e=o.ref(),{TIMEOUT:t=1e4}={}){const n=w();return e=o.ref(e),{account:o.computed(()=>{const s=o.reactive({pub:e,color:o.computed(()=>e.value?Kt.hex(e.value):"gray"),profile:{name:""},pulse:0,lastSeen:o.computed(()=>{let r=Date.now()-s.pulse;return r>t?o.ms(r):"online"}),blink:!1,db:n.user(e.value)});return n.user(e.value).get("pulse").on(r=>{s.blink=!s.blink,s.pulse=r}).back().get("profile").map().on((r,i)=>{s.profile[i]=r}),s})}}function Jt({spaceName:e="space",TIMEOUT:t=1e4,randomness:n=.1}={}){const a=o.ref(),{area:s,mouse:r}=Be(a),{width:i,height:u}=o.useElementBounding(a),c=o.reactive([0,0]),l=o.useClamp(1,.5,2),f=w(),m=o.reactive({title:e,joined:!1,db:o.computed(()=>f.user(d.pub).get(e)),cert:o.computed(()=>{var b;return(b=d.features)==null?void 0:b.space}),my:{mouse:o.computed(()=>({x:r.x,y:r.y})),pos:null}});async function g(){m.joined=!0}function p({x:b=r.x,y:v=r.y}={}){var A;!h.pub||(m.joined||g(),c[0]=b,c[1]=v,m.db.get(h.pub).put(JSON.stringify({x:b,y:v}),null,{opt:{cert:(A=d.features)==null?void 0:A.space}}))}const y=o.reactive({}),E=o.reactive({}),M=o.reactive({}),L=o.computed(()=>{var v;const b={};for(let A in y)Date.now()-((v=y[A])==null?void 0:v.pulse)<t&&(b[A]=y[A]);return b}),Z=o.computed(()=>Object.keys(L.value).length);m.db.get(h.pub).on(b=>{m.my.pos=typeof b=="string"?JSON.parse(b):b}),m.db.map().once(async(b,v)=>{v==h.pub&&(m.joined=!0),y[v]={pub:v,blink:!1,pulse:0,hasPos:!1,pos:{x:0,y:0}},m.db.get(v).on((A,I)=>{y[v].hasPos=!0,y[v].pos=typeof A=="string"?JSON.parse(A):A}),f.user(v).get("pulse").on(A=>{y[v].pulse=A,y[v].blink=!y[v].blink}).back().get("mates").map().on((A,I)=>{E[v]=E[v]||{},E[v][I]=A}),f.user(v).get("draw").get("space").on(A=>{!A||(y[v].draw=A)})});const P={};return o.watchEffect(()=>{for(let b in E){P[b]=P[b]||{};for(let v in E[b]){let A=P[b][v]=P[b][v]||Math.random()*n;if(E[b][v]){const I=E[b][v];let j=y[b],x=y[v],Ve=Date.now()*2-(j==null?void 0:j.pulse)-(x==null?void 0:x.pulse);j&&x&&(j==null?void 0:j.hasPos)&&(x==null?void 0:x.hasPos)&&Ve<t&&(M[b+v]={user:b,mate:v,emoji:N(I),from:j.pos,to:x.pos,arrow:Wt(j.pos,x.pos,A)})}else delete M[b+v]}}}),{space:m,allGuests:y,guests:L,guestCount:Z,links:M,plane:a,width:i,height:u,position:c,zoom:l,area:s,join:g,place:p}}function Wt(e,t,n=0){let a=o.getArrow(e.x,e.y,t.x,t.y,{padEnd:20,padStart:10});const[s,r,i,u,c,l,f,m,g,p]=a;return{sx:s,sy:r,c1x:i*(1-n+2*n),c1y:u*(1-n+2*n),c2x:c*(1-n+2*n),c2y:l*(1-n+2*n),ex:f,ey:m,ae:g,as:p}}const k=o.reactive({colors:["#000000",...new Array(12).fill(!0).map((e,t)=>`hsl(${t*30}, 100%,50%)`),"#ffffff"],sizes:o.useCycleList([4,8,16,24]),modes:["line","arrow","stylus","rectangle","ellipse"],mode:o.computed({get(){return he.value},set(e){he.value=e,e==="arrow"?($.mode="line",$.arrowEnd=!0):($.mode=e,$.arrowEnd=!1)}}),enabled:!1,pinned:o.useStorage("drawing-pinned",!1),canUndo:!1,canRedo:!1,canClear:!1,ing:!1,initiated:!1,content:""}),$=o.toReactive(o.useStorage("drawing-brush",{color:k.colors[0],size:10,mode:"stylus"})),he=o.ref("stylus");let ae=!1;const ze=o.reactive({brush:$,acceptsInputTypes:o.computed(()=>k.enabled?void 0:["pen"]),coordinateTransform:!0}),D=o.markRaw(o.createDrauu(ze));function K(e){ae=!0,k.content!=null?D.load(k.content):D.clear(),ae=!1}function Ie(){var e;k.canRedo=D.canRedo(),k.canUndo=D.canUndo(),k.canClear=!!((e=D.el)!=null&&e.children.length)}function Yt(){if(!k.initiated){const t=w().user().get("draw").get("space");t.on(n=>{k.ing||(k.content=n,K())}),D.on("changed",()=>{if(Ie(),!ae){let n=D.dump();k.content=n,t.put(n)}}),o.onMounted(()=>{o.nextTick(()=>{K()})}),D.on("start",()=>k.ing=!0),D.on("end",()=>k.ing=!1),k.clear=()=>{D.clear(),k.content="",t.put("")},window.addEventListener("keydown",n=>{if(!k.enabled)return;const a=!n.ctrlKey&&!n.altKey&&!n.shiftKey&&!n.metaKey;let s=!0;n.code==="KeyZ"&&(n.ctrlKey||n.metaKey)?n.shiftKey?D.redo():D.undo():n.code==="Escape"?k.enabled=!1:n.code==="KeyC"&&(n.ctrlKey||n.metaKey)?k.clear():n.code.startsWith("Digit")&&a&&+n.code[5]<=brushColors.length?$.color=brushColors[+n.code[5]-1]:s=!1,s&&(n.preventDefault(),n.stopPropagation())},!1)}return k.initiated=!0,{brush:$,draw:k,drauu:D,loadCanvas:K}}function Zt(){const e=w(),{user:t}=F(),n=o.ref("general"),a=o.reactive({general:{}}),s=e.user(d.pub).get("chat");s.map().on((l,f)=>{var p;const[m,g]=f.split("@");a[m]=a[m]||{},l?a[m][g]=l:(p=a==null?void 0:a[m])==null||delete p[g]});function r(l){s.get(`${o.slugify(l)||l}@${t.pub}`).put(!0,null,{opt:{cert:d.features.chat}})}const i=o.computed(()=>e.user(d.pub).get("chat/"+n.value)),u=o.computed(()=>{const l=o.reactive({});return i.value.map().on((f,m)=>{const g=m.substring(0,13),p=m.substring(14);l[m]={timestamp:g,author:p,text:f}}),l});function c(l){if(!l)return;let f=Date.now();i.value.get(`${f}@${t.pub}`).put(l,null,{opt:{cert:d.features.chat}})}return{send:c,addChat:r,currentChat:n,chats:a,messages:u}}function Vt(e,{parse:t=!0}={}){const n=w(),{user:a}=F(),s=o.reactive({}),r=o.ref();n.user(e).get("epub").once(c=>r.value=c),n.user(e).get("chat").get(a.pub).map().once(function(c,l){i(c,l,e,this)}),n.user().get("chat").get(e).map().once(function(c,l){i(c,l,a.pub,this)});function i(c,l,f,m){m.map().on(async(g,p)=>{if(g&&g.startsWith("SEA")){const y=await o.SEA.secret(r.value,a.pair()),E=await o.SEA.work(y,l),M=await o.SEA.decrypt(g,E);if(!M||typeof M!="object")return;s[p]={timestamp:M.timestamp,author:f,text:M.text}}})}async function u(c){if(!c)return;const l=new Date,f={timestamp:l.getTime(),text:c},m=l.toLocaleDateString("en-CA"),g=await o.SEA.secret(r.value,a.pair()),p=await o.SEA.work(g,m),y=await o.SEA.encrypt(f,p);n.user().get("chat").get(e).get(m).set(y)}return{send:u,messages:s}}function qt(e){const t=w(),{user:n}=F(),a=o.reactive({}),s=o.ref(!1);return t.user(e).get("epub").on(i=>s.value=i),t.user(e).get("chat").get(n.pub).map().map().on((i,u)=>{i&&!i.startsWith("SEA")||(a[u]=i)}),t.user().get("chat").get(e).map().map().on((i,u)=>{i&&!i.startsWith("SEA")||(a[u]=i)}),{count:o.computed(()=>Object.keys(a).length),available:s}}function Qt(){const e=w(),{user:t}=F(),n=o.reactive({});return t.is&&(e.user().get("chat").map().on((a,s)=>{n[s]=a}),e.user().get("mates").map().on(async(a,s)=>{const r=await e.user(s).get("mates").get(t.pub),i=await e.user(s).get("epub");r&&i&&(n[s]=a)})),{list:n}}const R={pub:"OUlhoY2Eq8QkZE_iWN3l6J2vvbkX33vowcFdqFoCoEQ.a-B1ImQK4aoiEpdW-38MAPc8oi16DHY57bDJ4dEZpX0",hosts:{"jFjrmOEaRy-GAJlOCdG4SGoaLm_4AGMPP1sfmzYPwwo.mp2H7IQuTWlFSahN6ZnXN9Za0pD3thiIYUyGCaMel-M":{enc:'SEA{"ct":"iS5GdAK2S5ViG1OFG6DAWYoFGZWyUu8d5AfcpenXX5VT8vqwBUFCJSp3OBUWon57uu6L73+Xyes2gNgLqrpHYqD03URRZlwCOcBG2jmtRi/Fe/YePvS2qcOzWhEJEHaxo22QyBveFmkhynAJXshXU/fjX9jYzFtAtw9wXo6jjKM1GVufmCeDMR79oxfODw+2M3sIy3vJIZ/8KR+INbOFVz/XMz5314f1sCQ6SgP1j0Fv1HGhLWkeeLLw+fyfRUMpeW1cstdArqIGH5H2Z5c3fBpLlOTzK6wbU1O9wEwVEddvgMZkEyNjBOFWV1NNauy2whyD3ftIoTr3br6gSsTcl7ibfFaP8jgTIENptZiK+cWmnN9ZpPUz4lwQodYSoUmhpizZfG/w2WA502QYGoWA9BGSzy/2bSoNpgXkEvw=","iv":"9z6HGfMkRKZJ84duHAVf","s":"yMjUdtjPYgP7"}',profile:'SEA{"m":{"c":"jFjrmOEaRy-GAJlOCdG4SGoaLm_4AGMPP1sfmzYPwwo.mp2H7IQuTWlFSahN6ZnXN9Za0pD3thiIYUyGCaMel-M","w":{"*":"profile"}},"s":"jygNHqfMhoEywFA1ChhkKmq177lGnADFnO+lc2eBih1p0IFxQPpdXvLhs7VQdAGxQtwVEx8/ZVimXwhNirUweA=="}',features:'SEA{"m":{"c":"jFjrmOEaRy-GAJlOCdG4SGoaLm_4AGMPP1sfmzYPwwo.mp2H7IQuTWlFSahN6ZnXN9Za0pD3thiIYUyGCaMel-M","w":{"*":"features"}},"s":"pNZ6D5HzCLXGF7vqYMwZ0bFEbd8nca6m9wC93YlO/Uhrh4TTVLyPQHTVZJKltzg8yvJLIZVeO8xGU6Hl3bYJ2A=="}',hosts:'SEA{"m":{"c":"jFjrmOEaRy-GAJlOCdG4SGoaLm_4AGMPP1sfmzYPwwo.mp2H7IQuTWlFSahN6ZnXN9Za0pD3thiIYUyGCaMel-M","w":{"*":"hosts"}},"s":"DvDu9qV5Em9vLUoqSg/IHlIhtx4P/x/Mf1mSwg1YsBvUnmVdEuge4tMGoRMrFKXCjAa7qpcKhmrqYYuPBSkKHA=="}'}},features:{rooms:'SEA{"m":{"c":"*","w":{"*":"rooms","+":"*"}},"s":"hh9oHy+VE+5oQ7qiF/Qd8ic4MoqKENivVJj/jOxFnxSz7c1NIJ9m1bUgpcv0d45h/kbUbE4DMoCpmZ+eVHtKOw=="}',space:'SEA{"m":{"c":"*","w":{"*":"space","+":"*"}},"s":"+v1Ytw+DF8d9yQNmbiGVj+C1aBRAj/x6h6bJSqQm+yR/YlpXIfIM3v7AROKI1gSzz5GvuIO7BCyq2BzjW03row=="}',posts:'SEA{"m":{"c":"*","w":{"*":"posts","+":"*"}},"s":"Y5d/l9oqsOzUTKgLZtPCFqj8+JBtvJvMXb488QXWsFxeFS5Bz4Yt6Cafa6HWtr25YPMfnAzoljB6i/MPmtykFA=="}',chat:'SEA{"m":{"c":"*","w":{"*":"chat","+":"*"}},"s":"bjQq/OOWUR+Fii3QOrYyAQkpAfrWdb5Qpiex1LLP/g4uGGHk7NFh/whaRQyCGPec/by1MB3r/+YKIL1pOIc1Hg=="}',dict:'SEA{"m":{"c":"*","w":{"*":"dict","+":"*"}},"s":"GlbQNefEQasFo2MRjVqcVidDDMRsYwSLT+nbkh0QX6Ndy6hn+Mma8GveKey8XwHnVJOPvxlEEd7285707ET4UQ=="}'}},d=o.reactive({pub:R.pub,isRoot:o.computed(()=>d.pub==R.pub),hosts:{},features:{},profile:{}});o.watchEffect(()=>{const e=w();d.pub==R.pub?(d.hosts=R.hosts,d.features=R.features):(d.features={},d.hosts={},e.user(d.pub).get("hosts").map().once((t,n)=>{delete t._,d.hosts[n]=t}),e.user(d.pub).get("features").map().once((t,n)=>{d.features[n]=t}))});function Xt(e=d.pub){const t=o.reactive({pub:e,isRoot:e!=R.pub,hosts:{},features:{},profile:{}}),n=w();return n.user(e).get("profile").map().on((a,s)=>{t.profile[s]=a}),n.user(e).get("hosts").map().once((a,s)=>{a&&delete a._,t.hosts[s]=a}),n.user(e).get("features").map().once((a,s)=>{t.features[s]=a}),{room:t,submitRoom:Je,enterRoom:We,createRoom:W,leaveRoom:Ye,updateRoomProfile:Ke}}function _t(){return{rooms:o.computed(()=>Ze("rooms",d.pub)),createRoom:W}}function Ke(e,t){var r,i;const n=w(),{user:a}=F();let s=(i=(r=d.hosts)==null?void 0:r[a.pub])==null?void 0:i.profile;n.user(d.pub).get("profile").get(e).put(t,null,{opt:{cert:s}})}async function W({pair:e,name:t}={}){var l;const{user:n}=F();if(!e)return;const a=await te({pair:e,list:[{tag:"profile",users:[n.pub]},{tag:"features",users:[n.pub]},{tag:"hosts",users:[n.pub]}]}),s=await te({pair:e,list:[{tag:"rooms",personal:!0},{tag:"space",personal:!0},{tag:"posts",personal:!0},{tag:"chat",personal:!0},{tag:"dict",personal:!0}]}),r=await o.SEA.encrypt(e,n.pair()),i=await o.SEA.decrypt(r,n.pair());console.log("COPY THIS ROOM INFO TO USE IT AS A ROOT",{pub:i.pub,hosts:{[n.pub]:C({enc:r},a)},features:s},"STORE THIS KEY PAIR IN A SAFE PLACE",i);const u=w();u.user().get("safe").get("rooms").get(i.pub).put(r),u.user(d.pub).get("rooms").get(`${i.pub}@${n.pub}`).put(!0,null,{opt:{cert:(l=d==null?void 0:d.features)==null?void 0:l.rooms}});const c=u.user(i.pub);c.get("hosts").get(n.pub).put(C({enc:r},a),null,{opt:{cert:a.hosts}}),c.get("features").put(s,null,{opt:{cert:a.features}}),t&&c.get("profile").put({name:t},null,{opt:{cert:a.profile}})}async function en(e){const t=await o.SEA.decrypt(e,h.pair());W({pair:t})}async function Je(e){var a;const t=w(),n=await t.user(d.pub).get("rooms").get(`${e}@${h.pub}`).then();t.user(d.pub).get("rooms").get(`${e}@${h.pub}`).put(!n,null,{opt:{cert:(a=d.features)==null?void 0:a.rooms}})}function tn(){var t;w().user(d.pub).get("space").get(h.pub).put(JSON.stringify({x:Math.random(),y:Math.random()}),null,{opt:{cert:(t=d.features)==null?void 0:t.space}})}function We(e){d.pub=e}function Ye(){d.pub=R.pub}async function nn({tag:e,key:t,text:n,pub:a=d.pub,cert:s}={}){var r;if(s||(s=await exports.gun.user(a).get("features").get(e).then()),s||(s=(r=d.features)==null?void 0:r[`${e}`]),!s&&a!=h.pub){console.log("No certificate found");return}exports.gun.user(a).get(`${e}`).get(`${t}@${h.pub}`).put(n,null,{opt:{cert:s}})}function Ze(e,t=d.pub){const n=w(),a=o.reactive({});return n.user(t).get(`${e}`).map().on(function(s,r){let i=r.substring(0,87);a[i]=a[i]||{},a[i][r.substring(88)]=s}),a}async function an(e,t,n=d.pub,a){var i;if(a||(a=await exports.gun.get(`~${n}`).get("features").get(e).then()),!a&&n==R.pub&&(a=(i=R.features)==null?void 0:i[`#${e}`]),!a&&n!=h.pub){console.log("No certificate found");return}const{hashed:s,hash:r}=await H(t);exports.gun.get(`~${n}`).get(`#${e}`).get(`${r}@${h.pub}`).put(s,null,{opt:{cert:a}})}function on(e,t,n=d.pub){const a=o.reactive({});return exports.gun.get(`~${n}`).get(`#${e}`).map().once(function(s,r){r.includes(t)&&(a.hash=t,a.tag=e,a.data=Ce(s),a.authors=a.authors||{},a.authors[r.slice(-87)]=!0)}),{record:a}}let Q=Date.now();function sn({TIMEOUT:e=1e4}={}){const t=w(),n=o.reactive({}),a=o.reactive({}),s=o.reactive({}),r=o.reactive({total:o.computed(()=>Object.keys(n).length),online:o.computed(()=>Object.keys(a).length),offline:o.computed(()=>Object.keys(s).length)});return t.user(d.pub).get("space").map().once((i,u)=>{const{account:c}=He(u);n[u]=c,n[u].order=o.computed(()=>Q-c.value.pulse<e?1:Q-c.value.pulse),n[u].online=o.computed(()=>Q-c.value.pulse<e)}),o.watchEffect(()=>{for(let i in n)n[i].online?(a[i]=n[i],delete s[i]):(s[i]=n[i],delete a[i])}),{guests:n,online:a,offline:s,count:r}}function rn(e){const t=Object.entries(e.data);let n=t.sort((a,s)=>{if(!a||!s)return 0;let r=Date.parse(a[0]);return Date.parse(s[0])-r});postMessage({sorted:n,count:t.length})}const ue=function(e){var t=URL.createObjectURL(new Blob(["onmessage=",e.toString()],{type:"application/javascript"})),n=new Worker(t);return URL.revokeObjectURL(t),n},cn=ue(rn);function un(e){const t=Object.entries(e.data);let n=t.sort((a,s)=>{if(!a||!s)return 0;let r=Date.parse(a[0]);return Date.parse(s[0])-r});postMessage({sorted:n,count:t.length})}function ln({name:e="logs",after:t="2021-01-01",before:n="2023-01-01"}={}){const s=w().get(e),r=new o.DateTree(s,"minute"),i=o.reactive({}),u=o.ref([]),c=o.ref(0);let l;o.onMounted(()=>{var m=ue(un);l=r.on(function(g,p){!(g!=null&&g.event)||(i[p]=g)},{gte:t,lt:n}),o.watchEffect(()=>{m.postMessage(JSON.parse(JSON.stringify(i)))}),m.onmessage=g=>{u.value=g.data.sorted,c.value=g.data.count}}),o.onBeforeUnmount(()=>{l.off()});function f(m){!m||r.get(new Date).put({event:"now",data:m})}return{dateTree:i,sorted:u,count:c,putNow:f}}function dn(e="text",t){if(!t){console.log("No data to log");return}const n=new o.DateTree(exports.gun.get("logs"),"minute");let a=C({event:e},t);n.get(new Date).put(a)}function fn(e){if(!e)return;let t=new Date(e);return{date:t.toLocaleDateString("en-CA"),time:t.toLocaleTimeString("ru-RU"),ms:o.ms(Date.now()-t.getTime())}}const T=o.reactive({word:null,def:null}),J=o.useStorage("dict-lang","en");o.watch(T,()=>{T.word&&T.def&&hn(T)});function mn(){const e=w();F();const t=o.ref(""),n=o.computed(()=>le(t.value));async function a(){const c=await U(n.value);e.get("dict").get("#word").get(c).put(n.value),T.word=c,t.value=""}const s=o.reactive({});e.user(d.pub).get("dict").map().on(async(c,l)=>{if(!c)return;let f=l.slice(0,44),m=l.slice(45,89),g=await e.get("dict").get("#def").get(m).then();if(!!g){try{g=JSON.parse(g)}catch(p){console.log(p,g);return}(g==null?void 0:g.lang)==J.value&&(s[f]=s[f]||await e.get("dict").get("#word").get(f).then())}});const r=o.reactive({});e.get("dict").get("#word").map().once((c,l)=>{c.includes(" ")||(r[l]=c)});const i=o.computed(()=>{let c=Object.entries(r).map(l=>({text:l[1],hash:l[0]}));return new o.Fuse(c,{keys:["text"],includeScore:!0})}),u=o.computed(()=>i.value.search(t.value));return{input:t,found:u,words:r,linked:s,word:n,addWord:a}}function gn(e){const t=w(),n=o.ref();return t.get("dict").get("#word").get(e).once((a,s)=>{n.value=le(a)}),{word:n}}function pn(){const e=w(),t=o.reactive({text:"",lang:J,part:"noun"});async function n(){const{hash:u,hashed:c}=await H(t);e.get("dict").get("#def").get(u).put(c),T.def=u,t.text="",t.part=null}const a=o.reactive({});e.user(d.pub).get("dict").map().on(async(u,c)=>{if(!u)return;let l=c.slice(45,89),f=await e.get("dict").get("#def").get(l).then();if(!!f)try{if(f=JSON.parse(f),(f==null?void 0:f.lang)!=J.value)return;a[l]=a[l]||f}catch(m){console.log(m,f)}});const s=o.reactive({});e.get("dict").get("#def").map().once((u,c)=>{s[c]=JSON.parse(u)});const r=o.computed(()=>{let u=[];for(let c in s)u.push(C({hash:c},s[c]));return new o.Fuse(u,{keys:["text"],includeScore:!0})}),i=o.computed(()=>r.value.search(t.text));return{def:t,addDef:n,defs:s,found:i,linked:a}}async function hn({word:e,def:t}={}){var r;const n=w(),{user:a}=F();let s=await n.user(d.pub).get("dict").get(`${e}:${t}@${a.pub}`).then();n.user(d.pub).get("dict").get(`${e}:${t}@${a.pub}`).put(!s,null,{opt:{cert:(r=d.features)==null?void 0:r.dict}}),T.word=null,T.def=null}function vn(e){const t=w(),n=o.reactive({});return t.user(d.pub).get("dict").map().on((a,s)=>{var f;if(s.indexOf(e)==-1)return;const{from:i,to:u,author:c}=Y(s);let l=i==e?u:i;n[l]=n[l]||{},a?n[l][c]=a:((f=n==null?void 0:n[l])==null||delete f[c],Object.keys(n==null?void 0:n[l]).length==0&&(n==null||delete n[l]))}),n}function wn(e){const t=w(),n=o.reactive({});return t.user(d.pub).get("dict").map().on((a,s)=>{var c;const{from:r,to:i,author:u}=Y(s);u==e&&(n[r]=n[r]||{},a?n[r][i]=a:((c=n==null?void 0:n[r])==null||delete c[i],Object.keys(n[r]).length==0&&(n==null||delete n[r])))}),n}function yn(){const e=w(),t=o.reactive({});return e.user(d.pub).get("dict").map().once(async(n,a)=>{const{from:s,to:r,author:i}=Y(a);t[i]=t[i]||{},t[i][s]=t[i][s]||{},t[i][s][r]=n}),t}function bn(){const e=w(),t=o.reactive({});return e.user(d.pub).get("dict").map().once(async(n,a)=>{let s=a.slice(45,89),r=await e.get("dict").get("#def").get(s).then();if(!!r){try{r=JSON.parse(r)}catch(i){console.log(r,i)}!(r!=null&&r.lang)||(t[r==null?void 0:r.lang]=t[r==null?void 0:r.lang]||0,t[r==null?void 0:r.lang]++)}}),t}function Y(e){return{from:e.slice(0,44),to:e.slice(45,89),author:e.slice(-87)}}function Sn({text:e,stress:t}={}){const n="&#x301;";if(!e)return;let a=e.slice(0,t+1)+n+e.slice(t+1);return a[0].toUpperCase()+a.slice(1)}function le(e){if(!e)return"";let t=e.toLowerCase().matchAll(/\p{L}/gu,"");return Array.from(t).map(n=>n[0]).join("")}const kn={noun:{en:"noun",ru:"\u0441\u0443\u0449",underline:"solid"},adj:{en:"adjective",ru:"\u043F\u0440\u0438\u043B",underline:"wavy"},verb:{en:"verb",ru:"\u0433\u043B\u0430\u0433",underline:"double"},adv:{en:"adverb",ru:"\u043D\u0430\u0440\u0435\u0447",underline:"dotted"}},An=[{code:"aa",name:"Afar",native:"Afar"},{code:"ab",name:"Abkhazian",native:"\u0410\u04A7\u0441\u0443\u0430"},{code:"af",name:"Afrikaans",native:"Afrikaans"},{code:"ak",name:"Akan",native:"Akana"},{code:"am",name:"Amharic",native:"\u12A0\u121B\u122D\u129B"},{code:"an",name:"Aragonese",native:"Aragon\xE9s"},{code:"ar",name:"Arabic",native:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",rtl:1},{code:"as",name:"Assamese",native:"\u0985\u09B8\u09AE\u09C0\u09AF\u09BC\u09BE"},{code:"av",name:"Avar",native:"\u0410\u0432\u0430\u0440"},{code:"ay",name:"Aymara",native:"Aymar"},{code:"az",name:"Azerbaijani",native:"Az\u0259rbaycanca / \u0622\u0630\u0631\u0628\u0627\u064A\u062C\u0627\u0646"},{code:"ba",name:"Bashkir",native:"\u0411\u0430\u0448\u04A1\u043E\u0440\u0442"},{code:"be",name:"Belarusian",native:"\u0411\u0435\u043B\u0430\u0440\u0443\u0441\u043A\u0430\u044F"},{code:"bg",name:"Bulgarian",native:"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438"},{code:"bh",name:"Bihari",native:"\u092D\u094B\u091C\u092A\u0941\u0930\u0940"},{code:"bi",name:"Bislama",native:"Bislama"},{code:"bm",name:"Bambara",native:"Bamanankan"},{code:"bn",name:"Bengali",native:"\u09AC\u09BE\u0982\u09B2\u09BE"},{code:"bo",name:"Tibetan",native:"\u0F56\u0F7C\u0F51\u0F0B\u0F61\u0F72\u0F42 / Bod skad"},{code:"br",name:"Breton",native:"Brezhoneg"},{code:"bs",name:"Bosnian",native:"Bosanski"},{code:"ca",name:"Catalan",native:"Catal\xE0"},{code:"ce",name:"Chechen",native:"\u041D\u043E\u0445\u0447\u0438\u0439\u043D"},{code:"ch",name:"Chamorro",native:"Chamoru"},{code:"co",name:"Corsican",native:"Corsu"},{code:"cr",name:"Cree",native:"Nehiyaw"},{code:"cs",name:"Czech",native:"\u010Cesky"},{code:"cu",name:"Old Church Slavonic / Old Bulgarian",native:"\u0441\u043B\u043E\u0432\u0463\u043D\u044C\u0441\u043A\u044A / slov\u011Bn\u012Dsk\u016D"},{code:"cv",name:"Chuvash",native:"\u0427\u0103\u0432\u0430\u0448"},{code:"cy",name:"Welsh",native:"Cymraeg"},{code:"da",name:"Danish",native:"Dansk"},{code:"de",name:"German",native:"Deutsch"},{code:"dv",name:"Divehi",native:"\u078B\u07A8\u0788\u07AC\u0780\u07A8\u0784\u07A6\u0790\u07B0",rtl:1},{code:"dz",name:"Dzongkha",native:"\u0F47\u0F7C\u0F44\u0F0B\u0F41"},{code:"ee",name:"Ewe",native:"\u0190\u028B\u025B"},{code:"el",name:"Greek",native:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC"},{code:"en",name:"English",native:"English"},{code:"eo",name:"Esperanto",native:"Esperanto"},{code:"es",name:"Spanish",native:"Espa\xF1ol"},{code:"et",name:"Estonian",native:"Eesti"},{code:"eu",name:"Basque",native:"Euskara"},{code:"fa",name:"Persian",native:"\u0641\u0627\u0631\u0633\u06CC",rtl:1},{code:"ff",name:"Peul",native:"Fulfulde"},{code:"fi",name:"Finnish",native:"Suomi"},{code:"fj",name:"Fijian",native:"Na Vosa Vakaviti"},{code:"fo",name:"Faroese",native:"F\xF8royskt"},{code:"fr",name:"French",native:"Fran\xE7ais"},{code:"fy",name:"West Frisian",native:"Frysk"},{code:"ga",name:"Irish",native:"Gaeilge"},{code:"gd",name:"Scottish Gaelic",native:"G\xE0idhlig"},{code:"gl",name:"Galician",native:"Galego"},{code:"gn",name:"Guarani",native:"Ava\xF1e'\u1EBD"},{code:"gu",name:"Gujarati",native:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0"},{code:"gv",name:"Manx",native:"Gaelg"},{code:"ha",name:"Hausa",native:"\u0647\u064E\u0648\u064F\u0633\u064E",rtl:1},{code:"he",name:"Hebrew",native:"\u05E2\u05D1\u05E8\u05D9\u05EA",rtl:1},{code:"hi",name:"Hindi",native:"\u0939\u093F\u0928\u094D\u0926\u0940"},{code:"ho",name:"Hiri Motu",native:"Hiri Motu"},{code:"hr",name:"Croatian",native:"Hrvatski"},{code:"ht",name:"Haitian",native:"Kr\xE8yol ayisyen"},{code:"hu",name:"Hungarian",native:"Magyar"},{code:"hy",name:"Armenian",native:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576"},{code:"hz",name:"Herero",native:"Otsiherero"},{code:"ia",name:"Interlingua",native:"Interlingua"},{code:"id",name:"Indonesian",native:"Bahasa Indonesia"},{code:"ie",name:"Interlingue",native:"Interlingue"},{code:"ig",name:"Igbo",native:"Igbo"},{code:"ii",name:"Sichuan Yi",native:"\uA187\uA259 / \u56DB\u5DDD\u5F5D\u8BED"},{code:"ik",name:"Inupiak",native:"I\xF1upiak"},{code:"io",name:"Ido",native:"Ido"},{code:"is",name:"Icelandic",native:"\xCDslenska"},{code:"it",name:"Italian",native:"Italiano"},{code:"iu",name:"Inuktitut",native:"\u1403\u14C4\u1483\u144E\u1450\u1466"},{code:"ja",name:"Japanese",native:"\u65E5\u672C\u8A9E"},{code:"jv",name:"Javanese",native:"Basa Jawa"},{code:"ka",name:"Georgian",native:"\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8"},{code:"kg",name:"Kongo",native:"KiKongo"},{code:"ki",name:"Kikuyu",native:"G\u0129k\u0169y\u0169"},{code:"kj",name:"Kuanyama",native:"Kuanyama"},{code:"kk",name:"Kazakh",native:"\u049A\u0430\u0437\u0430\u049B\u0448\u0430"},{code:"kl",name:"Greenlandic",native:"Kalaallisut"},{code:"km",name:"Cambodian",native:"\u1797\u17B6\u179F\u17B6\u1781\u17D2\u1798\u17C2\u179A"},{code:"kn",name:"Kannada",native:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1"},{code:"ko",name:"Korean",native:"\uD55C\uAD6D\uC5B4"},{code:"kr",name:"Kanuri",native:"Kanuri"},{code:"ks",name:"Kashmiri",native:"\u0915\u0936\u094D\u092E\u0940\u0930\u0940 / \u0643\u0634\u0645\u064A\u0631\u064A",rtl:1},{code:"ku",name:"Kurdish",native:"Kurd\xEE / \u0643\u0648\u0631\u062F\u06CC",rtl:1},{code:"kv",name:"Komi",native:"\u041A\u043E\u043C\u0438"},{code:"kw",name:"Cornish",native:"Kernewek"},{code:"ky",name:"Kirghiz",native:"K\u0131rg\u0131zca / \u041A\u044B\u0440\u0433\u044B\u0437\u0447\u0430"},{code:"la",name:"Latin",native:"Latina"},{code:"lb",name:"Luxembourgish",native:"L\xEBtzebuergesch"},{code:"lg",name:"Ganda",native:"Luganda"},{code:"li",name:"Limburgian",native:"Limburgs"},{code:"ln",name:"Lingala",native:"Ling\xE1la"},{code:"lo",name:"Laotian",native:"\u0EA5\u0EB2\u0EA7 / Pha xa lao"},{code:"lt",name:"Lithuanian",native:"Lietuvi\u0173"},{code:"lu",name:"Luba-Katanga",native:"Tshiluba"},{code:"lv",name:"Latvian",native:"Latvie\u0161u"},{code:"mg",name:"Malagasy",native:"Malagasy"},{code:"mh",name:"Marshallese",native:"Kajin Majel / Ebon"},{code:"mi",name:"Maori",native:"M\u0101ori"},{code:"mk",name:"Macedonian",native:"\u041C\u0430\u043A\u0435\u0434\u043E\u043D\u0441\u043A\u0438"},{code:"ml",name:"Malayalam",native:"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02"},{code:"mn",name:"Mongolian",native:"\u041C\u043E\u043D\u0433\u043E\u043B"},{code:"mo",name:"Moldovan",native:"Moldoveneasc\u0103"},{code:"mr",name:"Marathi",native:"\u092E\u0930\u093E\u0920\u0940"},{code:"ms",name:"Malay",native:"Bahasa Melayu"},{code:"mt",name:"Maltese",native:"bil-Malti"},{code:"my",name:"Burmese",native:"\u1019\u103C\u1014\u103A\u1019\u102C\u1005\u102C"},{code:"na",name:"Nauruan",native:"Dorerin Naoero"},{code:"nb",name:"Norwegian Bokm\xE5l",native:"Norsk bokm\xE5l"},{code:"nd",name:"North Ndebele",native:"Sindebele"},{code:"ne",name:"Nepali",native:"\u0928\u0947\u092A\u093E\u0932\u0940"},{code:"ng",name:"Ndonga",native:"Oshiwambo"},{code:"nl",name:"Dutch",native:"Nederlands"},{code:"nn",name:"Norwegian Nynorsk",native:"Norsk nynorsk"},{code:"no",name:"Norwegian",native:"Norsk"},{code:"nr",name:"South Ndebele",native:"isiNdebele"},{code:"nv",name:"Navajo",native:"Din\xE9 bizaad"},{code:"ny",name:"Chichewa",native:"Chi-Chewa"},{code:"oc",name:"Occitan",native:"Occitan"},{code:"oj",name:"Ojibwa",native:"\u140A\u14C2\u1511\u14C8\u142F\u14A7\u140E\u14D0 / Anishinaabemowin"},{code:"om",name:"Oromo",native:"Oromoo"},{code:"or",name:"Oriya",native:"\u0B13\u0B21\u0B3C\u0B3F\u0B06"},{code:"os",name:"Ossetian / Ossetic",native:"\u0418\u0440\u043E\u043D\u0430\u0443"},{code:"pa",name:"Panjabi / Punjabi",native:"\u0A2A\u0A70\u0A1C\u0A3E\u0A2C\u0A40 / \u092A\u0902\u091C\u093E\u092C\u0940 / \u067E\u0646\u062C\u0627\u0628\u064A"},{code:"pi",name:"Pali",native:"P\u0101li / \u092A\u093E\u0934\u093F"},{code:"pl",name:"Polish",native:"Polski"},{code:"ps",name:"Pashto",native:"\u067E\u069A\u062A\u0648",rtl:1},{code:"pt",name:"Portuguese",native:"Portugu\xEAs"},{code:"qu",name:"Quechua",native:"Runa Simi"},{code:"rm",name:"Raeto Romance",native:"Rumantsch"},{code:"rn",name:"Kirundi",native:"Kirundi"},{code:"ro",name:"Romanian",native:"Rom\xE2n\u0103"},{code:"ru",name:"Russian",native:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},{code:"rw",name:"Rwandi",native:"Kinyarwandi"},{code:"sa",name:"Sanskrit",native:"\u0938\u0902\u0938\u094D\u0915\u0943\u0924\u092E\u094D"},{code:"sc",name:"Sardinian",native:"Sardu"},{code:"sd",name:"Sindhi",native:"\u0938\u093F\u0928\u0927\u093F"},{code:"se",name:"Northern Sami",native:"S\xE1megiella"},{code:"sg",name:"Sango",native:"S\xE4ng\xF6"},{code:"sh",name:"Serbo-Croatian",native:"Srpskohrvatski / \u0421\u0440\u043F\u0441\u043A\u043E\u0445\u0440\u0432\u0430\u0442\u0441\u043A\u0438"},{code:"si",name:"Sinhalese",native:"\u0DC3\u0DD2\u0D82\u0DC4\u0DBD"},{code:"sk",name:"Slovak",native:"Sloven\u010Dina"},{code:"sl",name:"Slovenian",native:"Sloven\u0161\u010Dina"},{code:"sm",name:"Samoan",native:"Gagana Samoa"},{code:"sn",name:"Shona",native:"chiShona"},{code:"so",name:"Somalia",native:"Soomaaliga"},{code:"sq",name:"Albanian",native:"Shqip"},{code:"sr",name:"Serbian",native:"\u0421\u0440\u043F\u0441\u043A\u0438"},{code:"ss",name:"Swati",native:"SiSwati"},{code:"st",name:"Southern Sotho",native:"Sesotho"},{code:"su",name:"Sundanese",native:"Basa Sunda"},{code:"sv",name:"Swedish",native:"Svenska"},{code:"sw",name:"Swahili",native:"Kiswahili"},{code:"ta",name:"Tamil",native:"\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD"},{code:"te",name:"Telugu",native:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41"},{code:"tg",name:"Tajik",native:"\u0422\u043E\u04B7\u0438\u043A\u04E3"},{code:"th",name:"Thai",native:"\u0E44\u0E17\u0E22 / Phasa Thai"},{code:"ti",name:"Tigrinya",native:"\u1275\u130D\u122D\u129B"},{code:"tk",name:"Turkmen",native:"\u0422\u0443\u0440\u043A\u043C\u0435\u043D / \u062A\u0631\u0643\u0645\u0646"},{code:"tl",name:"Tagalog / Filipino",native:"Tagalog"},{code:"tn",name:"Tswana",native:"Setswana"},{code:"to",name:"Tonga",native:"Lea Faka-Tonga"},{code:"tr",name:"Turkish",native:"T\xFCrk\xE7e"},{code:"ts",name:"Tsonga",native:"Xitsonga"},{code:"tt",name:"Tatar",native:"Tatar\xE7a"},{code:"tw",name:"Twi",native:"Twi"},{code:"ty",name:"Tahitian",native:"Reo M\u0101`ohi"},{code:"ug",name:"Uyghur",native:"Uy\u01A3urq\u0259 / \u0626\u06C7\u064A\u063A\u06C7\u0631\u0686\u06D5"},{code:"uk",name:"Ukrainian",native:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430"},{code:"ur",name:"Urdu",native:"\u0627\u0631\u062F\u0648",rtl:1},{code:"uz",name:"Uzbek",native:"\u040E\u0437\u0431\u0435\u043A"},{code:"ve",name:"Venda",native:"Tshiven\u1E13a"},{code:"vi",name:"Vietnamese",native:"Ti\u1EBFng Vi\u1EC7t"},{code:"vo",name:"Volap\xFCk",native:"Volap\xFCk"},{code:"wa",name:"Walloon",native:"Walon"},{code:"wo",name:"Wolof",native:"Wollof"},{code:"xh",name:"Xhosa",native:"isiXhosa"},{code:"yi",name:"Yiddish",native:"\u05D9\u05D9\u05B4\u05D3\u05D9\u05E9",rtl:1},{code:"yo",name:"Yoruba",native:"Yor\xF9b\xE1"},{code:"za",name:"Zhuang",native:"Cuengh / T\xF4\xF4 / \u58EE\u8BED"},{code:"zh",name:"Chinese",native:"\u4E2D\u6587"},{code:"zu",name:"Zulu",native:"isiZulu"}],G="#gifts2023";function En(){const{user:e}=F(),t=o.reactive({from:o.computed(()=>e==null?void 0:e.pub),to:"",qn:0,ql:"",wish:"",date:o.useNow()}),n=w();async function a(){const{hash:s,hashed:r}=await H(t);n.get(G).get(s).put(r),n.user().get(G).get(s).put(!0)}return{gift:t,propose:a}}async function Pn(e){const{user:t}=F();t.db.get(G).get(e).put(!0)}function Fn(){const{user:e}=F(),t=w(),n=o.reactive({}),a=o.reactive({}),s=o.reactive({});return t.get(G).map().once(async(r,i)=>{try{const u=JSON.parse(r);u.sent=await t.user(u.from).get(G).get(i),u.received=await t.user(u.to).get(G).get(i),r.includes(e==null?void 0:e.pub)&&(n[i]=u),u.sent&&(u.received?s[i]=u:a[i]=u)}catch{}}),{my:n,proposed:a,gifts:s}}exports.SEA=o.SEA;exports.gunAvatar=o.gunAvatar;exports.mountClass=o.mountClass;exports.mountElement=o.mountElement;exports.ms=o.ms;exports.slugify=o.slugify;exports.acceptGift=Pn;exports.addHashedPersonal=an;exports.addPersonal=nn;exports.addPost=je;exports.addProfileField=Lt;exports.auth=z;exports.base64Extension=Fe;exports.base64FileType=Pe;exports.base64MimeType=lt;exports.brush=$;exports.countRating=Ft;exports.createMd=Me;exports.createRoom=W;exports.currentRoom=d;exports.decFrom=gt;exports.defaultPeer=oe;exports.detectMimeType=ee;exports.dictLang=J;exports.dictRecord=T;exports.downloadFeed=Te;exports.downloadFile=Ae;exports.downloadPost=xe;exports.drauu=D;exports.drauuOptions=ze;exports.draw=k;exports.encFor=mt;exports.enterRoom=We;exports.formatDate=fn;exports.genUUID=Se;exports.generateCerts=te;exports.getFirstEmoji=N;exports.getHashedPersonal=on;exports.getShortHash=pt;exports.giftPath=G;exports.hasPass=Ut;exports.hashObj=H;exports.hashText=U;exports.isEmoji=Ge;exports.isHash=ft;exports.isMine=$t;exports.isPair=ce;exports.issueCert=re;exports.joinRoom=tn;exports.langParts=kn;exports.languages=An;exports.leave=Ne;exports.leaveRoom=Ye;exports.letterFilter=le;exports.listPersonal=Ze;exports.loadCanvas=K;exports.loadFromHash=ne;exports.loadRelays=ke;exports.logEvent=dn;exports.newWorker=ue;exports.parseHashLink=Y;exports.parseLink=Bt;exports.parseMd=De;exports.parsePost=yt;exports.pass=S;exports.peer=B;exports.reactToPost=Le;exports.recreateRoom=en;exports.relay=O;exports.renderStress=Sn;exports.rootRoom=R;exports.safeHash=Oe;exports.safeJSONParse=Ce;exports.selectedUser=xt;exports.sortDate=cn;exports.soul=st;exports.submitRoom=Je;exports.unsafeHash=vt;exports.updateProfile=Gt;exports.updateRoomProfile=Ke;exports.updateState=Ie;exports.uploadFeed=$e;exports.uploadText=it;exports.useAccount=He;exports.useBackground=Rt;exports.useChat=Zt;exports.useColor=ie;exports.useDefs=pn;exports.useDictAuthors=yn;exports.useDictLangs=bn;exports.useDictRecordsBy=wn;exports.useDictRecordsFor=vn;exports.useDraw=Yt;exports.useGift=En;exports.useGifts=Fn;exports.useGuests=sn;exports.useGun=w;exports.useGun2=ot;exports.useLog=ln;exports.useMate=Ot;exports.useMates=Dt;exports.useMd=dt;exports.usePass=Nt;exports.usePassLink=zt;exports.usePictureUpload=ct;exports.usePost=Re;exports.usePostTimestamp=bt;exports.usePosts=St;exports.usePrivateChat=Vt;exports.usePrivateChatCount=qt;exports.usePrivateChatList=Qt;exports.useReaction=Et;exports.useReactions=Pt;exports.useRelay=at;exports.useRelays=rt;exports.useRoom=Xt;exports.useRooms=_t;exports.useSpace=Jt;exports.useSvgMouse=Be;exports.useTagList=kt;exports.useUser=F;exports.useUserPosts=Mt;exports.useWord=gn;exports.useWords=mn;exports.useZip=se;exports.user=h;
//# sourceMappingURL=composables.cjs.js.map
